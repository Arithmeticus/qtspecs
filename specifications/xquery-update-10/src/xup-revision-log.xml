<?xml version="1.0" encoding="UTF-8"?>
<inform-div1 id="id-revision-log">
  <head>Revision Log</head>

  <p>The following substantive changes have been made to this document since the Candidate Recommendation of 9 June 2009. 
     Minor editorial changes are not included in this log.</p>
  <olist>
    <item>
      <p>Fixed a bug involving namespace propagation and default
      namespaces. Resolves <a  href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=9432#c2">Bug 9432</a>. 
      </p>
    </item>
    <item>
      <p>Added missing parameter to upd:applyUpdates(). Resolves <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=9262">Bug
      9262</a>.</p>
    </item>
    <item>
      <p>Added missing text governing namespace binding conflicts when the namespace prefix for an attribute is absent.
      Resolves <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=9257">Bug 9257</a>.</p>
    </item>
    <item>
      <p>Fixed two errors governing namespace bindings created by
      upd:replaceNode(). The erroneous text said that the namespace
      binding was created on the attribute itself, rather than the
      parent element. Resolves <a
      href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=9256">Bug
      9256</a>.</p>
    </item>
    <item>
      <p>Added a note indicating that some examples are rejected by
      implementations that support static typing. See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=8006">Bug
      8006</a>.</p> 
    </item> 
  </olist> 

  <p>The following substantive changes have been  made to this document since the Candidate Recommendation of 14 March 2008.</p>

  <olist>
    <item>
      <p>Added a rule: the expression on the right-hand-side of a variable declaration
      the initializing expression) must be a simple expression. Resolves Bug 5699. 
      Section affected: <specref ref="id-variable-declaration"/>.</p>
    </item>
    <item>
      <p>When a rename expression operates on an attribute node, err:XUDY0023 can be raised
      only if the new name of the attribute is in a namespace. 
      Renaming an attribute to a QName that has neither a namespace prefix nor a namespace URI is not an error,
      even if the parent element has a default namespace. 
      Partial resolution of Bug 5629. Section affected: <specref ref="id-rename"/>.</p>
    </item>
    <item>
      <p>When a <code>upd:rename</code> operation is applied to an element node, and
      the <code>$newname</code> operand is a QName that has neither a namespace prefix nor a namespace URI,
      part of the semantics of the operation is to remove the namespace binding for the empty prefix (if any)
      from the element node. 
      Partial resolution of Bug 5629. 
      Section affected: <specref ref="id-upd-rename"/>.</p>
    </item>
    <item>
      <p>Optional error err:XUDY0020 (deletion of a node that has no parent) is made part of the semantics
      of the delete expression (formerly it was described under the <code>upd:delete</code> primitive). 
      Partial resolution of Bug 5632. 
      Sections affected: <specref ref="id-delete"/>, <specref ref="id-upd-delete"/>.</p>
    </item>
    <item>
      <p>Error err:XUDY0024 (updates introducing conflicting namespace bindings) is made part of the semantics
      of the insert and replace expressions. 
      Also, consistency constraints on Pending Update Lists, raising err:XUDY0024 if multiple primitives
      on a PUL have conflicting namespace bindings, have been added to the semantics of
      <code>upd:mergeUpdates</code> and <code>upd:applyUpdates</code>. 
      Checks for err:XUDY0024 are no longer part of the semantics of <code>upd:insertAttributes</code>,
      <code>upd:replaceNode</code>, or <code>upd:rename</code>. 
      The net effect of these changes is to enable implementations to catch conflicting namespace bindings
      earlier and to associate them with specific expressions. 
      Dynamic errors are no longer generated by individual update primitives on Pending Update Lists. 
      Partial resolution of Bug 5632. 
      Sections affected: <specref ref="id-insert"/>, <specref ref="id-replace"/>,
      <specref ref="id-upd-insert-attributes"/>, <specref ref="id-upd-replacenode"/>,
      <specref ref="id-upd-rename"/>, <specref ref="id-upd-merge-updates"/>,
      <specref ref="id-upd-apply-updates"/>.</p>
    </item>
    <item>
      <p>The following changes were made to the semantics of <code>fn:put</code> (resolving Bug 5646):</p>
      <olist>
        <item>
          <p><code>fn:put</code> now generates an update primitive called <code>upd:put</code>,
          which is held on the pending update list and applied after all other update primitives. 
          Sections: <specref ref="id-func-put"/>, <specref ref="id-upd-put"/>.</p>
        </item>
        <item>
          <p>It is an error to invoke <code>fn:put</code> more than once on the same URI within a snapshot. 
          Sections: <specref ref="id-compatibility"/>, <specref ref="id-upd-merge-updates"/>,
          <specref ref="id-upd-apply-updates"/>, <specref ref="id-new-error-codes"/>.</p>
        </item>
        <item>
          <p><code>fn:put</code> is classified as an updating function. Section: <specref ref="id-function-declaration"/>.</p>
        </item>
      </olist>
    </item>
    <item>
      <p>Moved the subsection on Function Declarations inside the section on Extensions to the Prolog. 
      Resolves Bug 5701. Section affected: <specref ref="id-function-declaration"/></p>
    </item>
    <item>
      <p>In the Static Typing Feature for XQuery Update Facility, err:XPST0005 applies only to
      simple expressions (not to updating expressions.) 
      Resolves Bug 5700. Sections affected: <specref ref="id-static-typing-changes"/>,
      <specref ref="id-amended-error-codes"/>.</p>
    </item>
    <item>
      <p>In the Static Type Analysis for TransformExpr, the static type of each copy-variable
      used to be the type inferred from its source expression; now it's just node().</p>
    </item>
  </olist>

  <p>No substantive changes have been made to this document since the Proposed Recommendation of 25 January 2011.</p>

</inform-div1>
