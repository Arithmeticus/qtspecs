<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--XSLT Processor: SAXON 9.1.0.5 from Saxonica SAXON 9.1.0.5-->
<html lang="EN" xmlns="http://www.w3.org/1999/xhtml" xml:lang="EN">
<head>
<meta name="generator" content=
"HTML Tidy for Linux/x86 (vers 14 June 2007), see www.w3.org" />
<meta http-equiv="Content-Type" content=
"text/html; charset=utf-8" />
<title>XPath and XQuery Functions and Operators 1.1</title>

<style type="text/css">
/*<![CDATA[*/
code           { font-family: monospace; }

div.constraint,
div.issue,
div.note,
div.notice     { margin-left: 2em; }

div.issue
p.title        { margin-left: -2em; }

ol.enumar      { list-style-type: decimal; }
ol.enumla      { list-style-type: lower-alpha; }
ol.enumlr      { list-style-type: lower-roman; }
ol.enumua      { list-style-type: upper-alpha; }
ol.enumur      { list-style-type: upper-roman; }

li p           { margin-top: 0.3em;
                 margin-bottom: 0.3em; }

sup small      { font-style: italic;
                 color: #8F8F8F;
               }
    
div.exampleInner pre { margin-left: 1em;
                       margin-top: 0em; margin-bottom: 0em}
div.exampleOuter {border: 4px double gray;
                  margin: 0em; padding: 0em}
div.exampleInner { background-color: #d5dee3;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px; margin: 0em }
div.exampleWrapper { margin: 4px }
div.exampleHeader { font-weight: bold;
                    margin: 4px}

div.issue { border-bottom-color: black;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            margin-bottom: 20pt;
}

th.issue-toc-head { border-bottom-color: black;
                    border-bottom-style: solid;
                    border-bottom-width: 1pt;
}

      
div.schemaComp  { border: 4px double gray;
                  margin: 0em 1em;
                  padding: 0em;
                }
div.compHeader  { margin: 4px;
                  font-weight: bold;
                }
span.schemaComp { background-color: white;
                  color: #A52A2A;
                }
div.compBody    { border-top-width: 4px;
                  border-top-style: double;
                  border-top-color: #d3d3d3;
                  padding: 4px;
                  margin: 0em;
                }

div.exampleInner { background-color: #d5dee3;
                   color: black;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px;
                   margin-bottom: 4px;
                 }

div.issueBody    { margin-left: 0.25in;
                 }

code.function    { font-weight: bold;
                 }
code.return-type { font-style: italic;
                 }
code.return-varies { font-weight: bold;
                   font-style: italic;
                 }
code.type        { font-style: italic;
                 }
code.as          { font-style: normal;
                 }
code.arg         {
                 }
code.strikeout   { text-decoration: line-through;
                 }
p.table.footnote { font-size: 8pt;
                 }

table.casting    { font-size: x-small;
                 }
table.hierarchy  { font-size: x-small;
                 }

td.castY         { background-color: #7FFF7F;
                   color: black;
                 }

td.castN         { background-color: #FF7F7F;
                   color: black;
                 }

td.castM         { background-color: white;
                   color: black;
                 }

td.castOther     { background-color: yellow;
                   color: black;
                 }

span.cancast:hover { background-color: #ffa;
                   color: black;
                 }

div.protoref     { margin-left: 0.5in;
                   text-indent: -0.5in;
                 }

/*]]>*/
</style>
<link rel="stylesheet" type="text/css" href=
"http://www.w3.org/StyleSheets/TR/W3C-WD.css" />
<style type='text/css'>
.diff-old-a {
  font-size: smaller;
  color: red;
}

.diff-new { background-color: yellow; }
.diff-chg { background-color: lime; }
.diff-new:before,
.diff-new:after
    { content: "\2191" }
.diff-chg:before, .diff-chg:after
    { content: "\2195" }
.diff-old { text-decoration: line-through; background-color: #FBB; }
.diff-old:before,
.diff-old:after
    { content: "\2193" }
:focus { border: thin red solid}
</style>
</head>
<body>
<div class="head">
<p>
<a href="http://www.w3.org/">
<img src= "http://www.w3.org/Icons/w3c_home" alt="W3C" height="48" width= "72" />
</a>
</p>
<h1>
<a name="title" id="title">
</a>
<del class="diff-old">XQuery
1.0
and
</del>
XPath
<del class="diff-old">2.0
</del>
<ins class="diff-chg">and
XQuery
</ins>
Functions
and
Operators
<ins class="diff-new">1.1
</ins>
</h1>
<h2>
<a name="w3c-doctype" id="w3c-doctype">
</a>
W3C
<del class="diff-old">Recommendation
23
January
2007
</del>
<ins class="diff-chg">Working
Draft
15
December
2009
</ins>
</h2>
<dl>
<dt>
This
version:
</dt>
<dd>
<del class="diff-old">http://www.w3.org/TR/2007/REC-xpath-functions-20070123/
</del>
<a href= "http://www.w3.org/TR/2009/WD-xpath-functions-11-20091215/">
<ins class="diff-chg">http://www.w3.org/TR/2009/WD-xpath-functions-11-20091215/
</ins>
</a>
</dd>
<dt>
Latest
version:
</dt>
<dd>
<del class="diff-old">http://www.w3.org/TR/xpath-functions/
Previous
version:
http://www.w3.org/TR/2006/PR-xpath-functions-20061121/
</del>
<a href= "http://www.w3.org/TR/xpath-functions-11/">
<ins class="diff-chg">http://www.w3.org/TR/xpath-functions-11/
</ins>
</a>
</dd>
<dt>
<del class="diff-old">Editors:
</del>
<ins class="diff-chg">Editor:
</ins>
</dt>
<del class="diff-old">Ashok
Malhotra
(XML
Query
and
XSL
WGs),
Oracle
Corporation
&lt;ashok.malhotra@alum.mit.edu&gt;
Jim
Melton
(XML
Query
WG),
Oracle
Corporation
&lt;jim.melton@acm.org&gt;
Norman
Walsh
</del>
<dd class="1.1">
<ins class="diff-chg">Michael
Kay
</ins>
(XSL
WG),
<del class="diff-old">Sun
Microsystems
&lt;Norman.Walsh@Sun.COM&gt;
</del>
<ins class="diff-chg">Saxonica
</ins><a href= "http://www.saxonica.com/"><ins class="diff-chg">
&lt;http://www.saxonica.com/&gt;
</ins>
</a>
</dd>
</dl>
<p>
<del class="diff-old">Please
refer
to
the
errata
for
this
document,
which
may
include
some
normative
corrections.
</del>
See
also
<a href= "http://www.w3.org/2003/03/Translations/byTechnology?technology=xpath-functions">
<strong>
translations
</strong>
</a>.
</p>
<p>
This
document
is
also
available
in
these
non-normative
formats:
<a href= "http://www.w3.org/TR/2009/WD-xpath-functions-11-20091215/xpath-functions-11.xml">
XML
</a>
and&#160;
<del class="diff-old">Recent
revisions
</del>
<a href= "http://www.w3.org/TR/2009/WD-xpath-functions-11-20091215/xpath-functions-11-diff-from-20070123.html">
<ins class="diff-chg">Change
markings
relative
to
first
edition
</ins>
</a>.
</p>
<p class="copyright">
<a href= "http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">
Copyright
</a>
<del class="diff-old">&#160;©&#160;2007&#160;
</del>
<ins class="diff-chg">&#160;©&#160;2009&#160;
</ins>
<a href="http://www.w3.org/">
<acronym title="World Wide Web Consortium">
W3C
</acronym>
</a>
<sup>
®
</sup>
(
<a href="http://www.csail.mit.edu/">
<acronym title= "Massachusetts Institute of Technology">
MIT
</acronym>
</a>,
<a href= "http://www.ercim.org/">
<acronym title= "European Research Consortium for Informatics and Mathematics">
ERCIM
</acronym>
</a>,
<a href="http://www.keio.ac.jp/">
Keio
</a>
),
All
Rights
Reserved.
W3C
<a href= "http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">
liability
</a>,
<a href= "http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">
trademark
</a>
and
<a href= "http://www.w3.org/Consortium/Legal/copyright-documents">
document
use
</a>
rules
apply.
</p>
</div>
<hr />
<div>
<h2>
<a name="abstract" id="abstract">
</a>
Abstract
</h2>
<p>
This
document
defines
constructor
functions,
<del class="diff-old">operators
</del>
<ins class="diff-chg">operators,
</ins>
and
functions
on
the
datatypes
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
and
the
datatypes
defined
in
<a href="#xpath-datamodel-11">
[XQuery
<del class="diff-old">1.0
</del>
and
XPath
<del class="diff-old">2.0
</del>
Data
<del class="diff-old">Model]
</del>
<ins class="diff-chg">Model
(XDM)
1.1]
</ins>
</a>.
It
also
<del class="diff-old">discusses
</del>
<ins class="diff-chg">defines
</ins>
functions
and
operators
on
nodes
and
node
sequences
as
defined
in
the
<a href= "#xpath-datamodel-11">
[XQuery
<del class="diff-old">1.0
</del>
and
XPath
<del class="diff-old">2.0
</del>
Data
<del class="diff-old">Model]
</del>
<ins class="diff-chg">Model
(XDM)
1.1]
</ins>
</a>.
These
functions
and
operators
are
defined
for
use
in
<a href= "#xpath-21">
[XML
Path
Language
(XPath)
<del class="diff-old">2.0]
</del>
<ins class="diff-chg">2.1]
</ins>
</a>,
<a href= "#xquery-11">
[XQuery
<del class="diff-old">1.0:
</del>
<ins class="diff-chg">1.1:
</ins>
An
XML
Query
Language]
</a>
and
<a href= "#xslt-21">
[XSL
Transformations
(XSLT)
Version
<del class="diff-old">2.0]
</del>
<ins class="diff-chg">2.1]
</ins>
</a>
and
other
related
XML
standards.
The
signatures
and
summaries
of
functions
defined
in
this
document
are
available
at:
<a href= "http://www.w3.org/2005/xpath-functions">
http://www.w3.org/2005/xpath-functions
</a>.
</p>
<p>
<ins class="diff-new">This
is
the
third
version
of
the
specification
of
this
function
library.
The
first
version
was
included
as
an
intrinsic
part
of
the
</ins><a href="#xpath"><ins class="diff-new">
[XML
Path
Language
(XPath)
Version
1.0]
</ins></a><ins class="diff-new">
specification
published
on
16
November
1999.
The
second
version
was
published
under
the
title
</ins><em><ins class="diff-new">
XQuery
1.0
and
XPath
2.0
Functions
and
Operators
</ins></em><ins class="diff-new">
on
23
January
2007.
This
third
version
is
the
first
to
carry
its
own
version
number,
which
has
been
arbitrarily
set
at
1.1
to
align
with
version
numbering
for
XQuery.
</ins></p>
</div>
<div>
<h2>
<a name="status" id="status">
</a>
Status
of
this
Document
</h2>
<p>
<em>
This
section
describes
the
status
of
this
document
at
the
time
of
its
publication.
Other
documents
may
supersede
this
document.
A
list
of
current
W3C
publications
and
the
latest
revision
of
this
technical
report
can
be
found
in
the
<a href= "http://www.w3.org/TR/">
W3C
technical
reports
index
</a>
at
http://www.w3.org/TR/.
</em>
</p>
<p>
This
is
one
document
in
a
set
of
eight
documents
that
have
progressed
to
Recommendation
together
(XQuery
<del class="diff-old">1.0,
</del>
<ins class="diff-chg">1.1,
</ins>
XQueryX
<del class="diff-old">1.0,
</del>
<ins class="diff-chg">1.1,
</ins>
XSLT
<del class="diff-old">2.0,
</del>
<ins class="diff-chg">2.1,
</ins>
Data
<del class="diff-old">Model,
</del>
<ins class="diff-chg">Model
1.1,
</ins>
Functions
and
<del class="diff-old">Operators,
</del>
<ins class="diff-chg">Operators
1.1,
</ins>
Formal
<del class="diff-old">Semantics,
Serialization,
</del>
<ins class="diff-chg">Semantics
1.1,
Serialization
1.1,
</ins>
XPath
<del class="diff-old">2.0).
</del>
<ins class="diff-chg">2.1).
</ins>
</p>
<p>
This
is
a
<del class="diff-old">Recommendation
</del>
<a href= "http://www.w3.org/2005/10/Process-20051014/tr.html#first-wd">
<ins class="diff-chg">First
Public
Working
Draft
</ins>
</a>
<del class="diff-old">of
</del>
<ins class="diff-chg">as
described
in
</ins>
the
<del class="diff-old">W3C.
</del>
<a href= "http://www.w3.org/2005/10/Process-20051014/tr.html">
<ins class="diff-chg">Process
Document
</ins></a>.
It
has
been
jointly
developed
by
the
W3C
<a href= "http://www.w3.org/XML/Query/">
XML
Query
Working
Group
</a>
and
the
W3C
<a href="http://www.w3.org/Style/XSL/">
XSL
Working
Group
</a>,
each
of
which
is
part
of
the
<a href= "http://www.w3.org/XML/Activity">
XML
Activity
</a>.
<ins class="diff-new">The
Working
Groups
expect
to
advance
this
specification
to
</ins><a href= "http://www.w3.org/2005/10/Process-20051014/tr.html#RecsW3C"><ins class="diff-new">
Recommendation
</ins></a><ins class="diff-new">
Status.
</ins>
</p>
<p>
This
<del class="diff-old">document
has
been
reviewed
by
W3C
Members,
by
software
developers,
and
by
other
W3C
groups
and
interested
parties,
and
</del>
is
<del class="diff-old">endorsed
by
</del>
the
<del class="diff-old">Director
as
a
W3C
Recommendation.
It
is
a
stable
document
</del>
<ins class="diff-chg">first
public
Working
Draft
of
XQuery
</ins>
and
<del class="diff-old">may
be
used
as
reference
material
or
cited
from
another
document.
W3C's
role
in
making
the
Recommendation
</del>
<ins class="diff-chg">XPath
Functions
and
Operators
1.1
(XDM).
It
</ins>
is
<ins class="diff-new">intended
</ins>
to
<del class="diff-old">draw
attention
to
the
specification
</del>
<ins class="diff-chg">be
fully
"upwards
compatible"
with
</ins><a href= "http://www.w3.org/TR/xpath-functions"><ins class="diff-chg">
XQuery
1.0
</ins>
and
<ins class="diff-new">XPath
2.0
Data
Model
(XDM)
</ins></a>.<ins class="diff-new">
Failures
</ins>
to
<del class="diff-old">promote
its
widespread
deployment.
This
enhances
the
functionality
and
interoperability
</del>
<ins class="diff-chg">achieve
that
goal
will
be
corrected
in
future
versions
</ins>
of
the
<del class="diff-old">Web.
</del>
<ins class="diff-chg">Working
Drafts
of
this
document.
</ins>
</p>
<p>
<del class="diff-old">This
document
incorporates
minor
changes
made
against
the
Proposed
Recommendation
of
21
November
2006;
please
see
the
public
disposition
of
comments
</del>
<ins class="diff-chg">A
Test
Suite
has
been
created
</ins>
for
<del class="diff-old">details.
Changes
to
</del>
this
<del class="diff-old">document
since
the
Proposed
Recommendation
</del>
<ins class="diff-chg">document.
Implementors
</ins>
are
<del class="diff-old">detailed
in
the
B
Change
Log
for
</del>
<ins class="diff-chg">encouraged
to
run
</ins>
this
<del class="diff-old">Version
of
the
Document
</del>
<ins class="diff-chg">test
suite
and
report
their
results.
The
Test
Suite
can
be
found
at
</ins><a href= "http://dev.w3.org/cvsweb/2006/xquery-test-suite/"><ins class="diff-chg">
http://dev.w3.org/cvsweb/2006/xquery-test-suite/
</ins></a>.<ins class="diff-chg">
An
implementation
report
is
available
at
</ins><a href= "http://www.w3.org/XML/Query/test-suite/XQTSReport.html"><ins class="diff-chg">
http://www.w3.org/XML/Query/test-suite/XQTSReport.html
</ins>
</a>.
</p>
<p>
Please
report
errors
in
this
document
using
W3C's
<a href= "http://www.w3.org/Bugs/Public/">
public
Bugzilla
system
</a>
(instructions
can
be
found
at
<a href= "http://www.w3.org/XML/2005/04/qt-bugzilla">
http://www.w3.org/XML/2005/04/qt-bugzilla
</a>
).
If
access
to
that
system
is
not
feasible,
you
may
send
your
comments
to
the
W3C
XSLT/XPath/XQuery
public
comments
mailing
list,
<a href= "mailto:public-qt-comments@w3.org">
public-qt-comments@w3.org
</a>.
It
will
be
very
helpful
if
you
include
the
string
<del class="diff-old">“[FO]”
</del>
<ins class="diff-chg">“[FO11]”
</ins>
in
the
subject
line
of
your
report,
whether
made
in
Bugzilla
or
in
email.
<del class="diff-old">Each
</del>
<ins class="diff-chg">Please
use
multiple
</ins>
Bugzilla
<del class="diff-old">entry
and
</del>
<ins class="diff-chg">entries
(or,
if
necessary,
multiple
</ins>
email
<del class="diff-old">message
should
contain
only
</del>
<ins class="diff-chg">messages)
if
you
have
more
than
</ins>
one
<del class="diff-old">error
report.
</del>
<ins class="diff-chg">comment
to
make.
</ins>
Archives
of
the
comments
and
responses
are
available
at
<a href= "http://lists.w3.org/Archives/Public/public-qt-comments/">
http://lists.w3.org/Archives/Public/public-qt-comments/
</a>.
</p>
<p>
<ins class="diff-new">Publication
as
a
Working
Draft
does
not
imply
endorsement
by
the
W3C
Membership.
This
is
a
draft
document
and
may
be
updated,
replaced
or
obsoleted
by
other
documents
at
any
time.
It
is
inappropriate
to
cite
this
document
as
other
than
work
in
progress.
</ins></p><p>
This
document
was
produced
by
groups
operating
under
the
<a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">
5
February
2004
W3C
Patent
Policy
</a>.
W3C
maintains
a
<a href= "http://www.w3.org/2004/01/pp-impl/18797/status#disclosures">
public
list
of
any
patent
disclosures
</a>
made
in
connection
with
the
deliverables
of
the
XML
Query
Working
Group
and
also
maintains
a
<a href= "http://www.w3.org/2004/01/pp-impl/19552/status#disclosures">
public
list
of
any
patent
disclosures
</a>
made
in
connection
with
the
deliverables
of
the
XSL
Working
Group;
those
pages
also
include
instructions
for
disclosing
a
patent.
An
individual
who
has
actual
knowledge
of
a
patent
which
the
individual
believes
contains
<a href= "http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">
Essential
Claim(s)
</a>
must
disclose
the
information
in
accordance
with
<a href= "http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">
section
6
of
the
W3C
Patent
Policy
</a>.
</p>
</div>
<div class="toc">
<h2>
<a name="quickcontents" id="quickcontents">
</a>
<ins class="diff-new">Quick
Contents
</ins></h2><ul><li><p><a href="#func-abs"><ins class="diff-new">
abs
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-acos"><ins class="diff-new">
acos
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-add-dayTimeDurations"><ins class="diff-new">
add-dayTimeDurations
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-add-dayTimeDuration-to-date"><ins class="diff-new">
add-dayTimeDuration-to-date
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-add-dayTimeDuration-to-dateTime"><ins class="diff-new">
add-dayTimeDuration-to-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-add-dayTimeDuration-to-time"><ins class="diff-new">
add-dayTimeDuration-to-time
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-add-yearMonthDurations"><ins class="diff-new">
add-yearMonthDurations
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-add-yearMonthDuration-to-date"><ins class="diff-new">
add-yearMonthDuration-to-date
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-add-yearMonthDuration-to-dateTime"><ins class="diff-new">
add-yearMonthDuration-to-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-adjust-dateTime-to-timezone"><ins class="diff-new">
adjust-dateTime-to-timezone
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-adjust-date-to-timezone"><ins class="diff-new">
adjust-date-to-timezone
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-adjust-time-to-timezone"><ins class="diff-new">
adjust-time-to-timezone
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-analyze-string"><ins class="diff-new">
analyze-string
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-asin"><ins class="diff-new">
asin
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-atan"><ins class="diff-new">
atan
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-avg"><ins class="diff-new">
avg
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-base64Binary-equal"><ins class="diff-new">
base64Binary-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-base-uri"><ins class="diff-new">
base-uri
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-boolean"><ins class="diff-new">
boolean
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-boolean-equal"><ins class="diff-new">
boolean-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-boolean-greater-than"><ins class="diff-new">
boolean-greater-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-boolean-less-than"><ins class="diff-new">
boolean-less-than
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-ceiling"><ins class="diff-new">
ceiling
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-codepoint-equal"><ins class="diff-new">
codepoint-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-codepoints-to-string"><ins class="diff-new">
codepoints-to-string
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-collection"><ins class="diff-new">
collection
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-compare"><ins class="diff-new">
compare
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-concat"><ins class="diff-new">
concat
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-concatenate"><ins class="diff-new">
concatenate
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-contains"><ins class="diff-new">
contains
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-cos"><ins class="diff-new">
cos
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-count"><ins class="diff-new">
count
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-current-date"><ins class="diff-new">
current-date
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-current-dateTime"><ins class="diff-new">
current-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-current-time"><ins class="diff-new">
current-time
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-data"><ins class="diff-new">
data
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-date-equal"><ins class="diff-new">
date-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-date-greater-than"><ins class="diff-new">
date-greater-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-date-less-than"><ins class="diff-new">
date-less-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-dateTime"><ins class="diff-new">
dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-dateTime-equal"><ins class="diff-new">
dateTime-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-dateTime-greater-than"><ins class="diff-new">
dateTime-greater-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-dateTime-less-than"><ins class="diff-new">
dateTime-less-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-day-from-date"><ins class="diff-new">
day-from-date
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-day-from-dateTime"><ins class="diff-new">
day-from-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-days-from-duration"><ins class="diff-new">
days-from-duration
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-dayTimeDuration-greater-than"><ins class="diff-new">
dayTimeDuration-greater-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-dayTimeDuration-less-than"><ins class="diff-new">
dayTimeDuration-less-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-deep-equal"><ins class="diff-new">
deep-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-default-collation"><ins class="diff-new">
default-collation
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-distinct-values"><ins class="diff-new">
distinct-values
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-divide-dayTimeDuration"><ins class="diff-new">
divide-dayTimeDuration
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-divide-dayTimeDuration-by-dayTimeDuration"><ins class="diff-new">
divide-dayTimeDuration-by-dayTimeDuration
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-divide-yearMonthDuration"><ins class="diff-new">
divide-yearMonthDuration
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-divide-yearMonthDuration-by-yearMonthDuration"><ins class="diff-new">
divide-yearMonthDuration-by-yearMonthDuration
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-doc"><ins class="diff-new">
doc
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-doc-available"><ins class="diff-new">
doc-available
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-document-uri"><ins class="diff-new">
document-uri
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-duration-equal"><ins class="diff-new">
duration-equal
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-element-with-id"><ins class="diff-new">
element-with-id
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-empty"><ins class="diff-new">
empty
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-encode-for-uri"><ins class="diff-new">
encode-for-uri
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-ends-with"><ins class="diff-new">
ends-with
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-error"><ins class="diff-new">
error
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-escape-html-uri"><ins class="diff-new">
escape-html-uri
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-exactly-one"><ins class="diff-new">
exactly-one
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-except"><ins class="diff-new">
except
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-exists"><ins class="diff-new">
exists
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-false"><ins class="diff-new">
false
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-floor"><ins class="diff-new">
floor
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-format-date"><ins class="diff-new">
format-date
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-format-dateTime"><ins class="diff-new">
format-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-format-integer"><ins class="diff-new">
format-integer
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-format-number"><ins class="diff-new">
format-number
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-format-time"><ins class="diff-new">
format-time
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-function-arity"><ins class="diff-new">
function-arity
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-function-name"><ins class="diff-new">
function-name
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-gDay-equal"><ins class="diff-new">
gDay-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-generate-id"><ins class="diff-new">
generate-id
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-gMonthDay-equal"><ins class="diff-new">
gMonthDay-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-gMonth-equal"><ins class="diff-new">
gMonth-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-gYear-equal"><ins class="diff-new">
gYear-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-gYearMonth-equal"><ins class="diff-new">
gYearMonth-equal
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-hexBinary-equal"><ins class="diff-new">
hexBinary-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-hours-from-dateTime"><ins class="diff-new">
hours-from-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-hours-from-duration"><ins class="diff-new">
hours-from-duration
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-hours-from-time"><ins class="diff-new">
hours-from-time
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-id"><ins class="diff-new">
id
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-idref"><ins class="diff-new">
idref
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-implicit-timezone"><ins class="diff-new">
implicit-timezone
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-index-of"><ins class="diff-new">
index-of
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-in-scope-prefixes"><ins class="diff-new">
in-scope-prefixes
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-insert-before"><ins class="diff-new">
insert-before
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-intersect"><ins class="diff-new">
intersect
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-iri-to-uri"><ins class="diff-new">
iri-to-uri
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-is-same-node"><ins class="diff-new">
is-same-node
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-lang"><ins class="diff-new">
lang
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-last"><ins class="diff-new">
last
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-local-name"><ins class="diff-new">
local-name
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-local-name-from-QName"><ins class="diff-new">
local-name-from-QName
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-lower-case"><ins class="diff-new">
lower-case
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-matches"><ins class="diff-new">
matches
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-max"><ins class="diff-new">
max
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-min"><ins class="diff-new">
min
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-minutes-from-dateTime"><ins class="diff-new">
minutes-from-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-minutes-from-duration"><ins class="diff-new">
minutes-from-duration
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-minutes-from-time"><ins class="diff-new">
minutes-from-time
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-month-from-date"><ins class="diff-new">
month-from-date
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-month-from-dateTime"><ins class="diff-new">
month-from-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-months-from-duration"><ins class="diff-new">
months-from-duration
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-multiply-dayTimeDuration"><ins class="diff-new">
multiply-dayTimeDuration
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-multiply-yearMonthDuration"><ins class="diff-new">
multiply-yearMonthDuration
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-name"><ins class="diff-new">
name
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-namespace-uri"><ins class="diff-new">
namespace-uri
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-namespace-uri-for-prefix"><ins class="diff-new">
namespace-uri-for-prefix
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-namespace-uri-from-QName"><ins class="diff-new">
namespace-uri-from-QName
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-nilled"><ins class="diff-new">
nilled
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-node-after"><ins class="diff-new">
node-after
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-node-before"><ins class="diff-new">
node-before
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-node-name"><ins class="diff-new">
node-name
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-normalize-space"><ins class="diff-new">
normalize-space
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-normalize-unicode"><ins class="diff-new">
normalize-unicode
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-not"><ins class="diff-new">
not
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-NOTATION-equal"><ins class="diff-new">
NOTATION-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-number"><ins class="diff-new">
number
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-numeric-add"><ins class="diff-new">
numeric-add
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-numeric-divide"><ins class="diff-new">
numeric-divide
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-numeric-equal"><ins class="diff-new">
numeric-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-numeric-greater-than"><ins class="diff-new">
numeric-greater-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-numeric-integer-divide"><ins class="diff-new">
numeric-integer-divide
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-numeric-less-than"><ins class="diff-new">
numeric-less-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-numeric-mod"><ins class="diff-new">
numeric-mod
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-numeric-multiply"><ins class="diff-new">
numeric-multiply
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-numeric-subtract"><ins class="diff-new">
numeric-subtract
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-numeric-unary-minus"><ins class="diff-new">
numeric-unary-minus
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-numeric-unary-plus"><ins class="diff-new">
numeric-unary-plus
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-one-or-more"><ins class="diff-new">
one-or-more
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-parse"><ins class="diff-new">
parse
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-partial-apply"><ins class="diff-new">
partial-apply
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-pi"><ins class="diff-new">
pi
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-position"><ins class="diff-new">
position
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-prefix-from-QName"><ins class="diff-new">
prefix-from-QName
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-QName"><ins class="diff-new">
QName
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-QName-equal"><ins class="diff-new">
QName-equal
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-remove"><ins class="diff-new">
remove
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-replace"><ins class="diff-new">
replace
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-resolve-QName"><ins class="diff-new">
resolve-QName
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-resolve-uri"><ins class="diff-new">
resolve-uri
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-reverse"><ins class="diff-new">
reverse
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-root"><ins class="diff-new">
root
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-round"><ins class="diff-new">
round
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-round-half-to-even"><ins class="diff-new">
round-half-to-even
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href= "#func-seconds-from-dateTime"><ins class="diff-new">
seconds-from-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-seconds-from-duration"><ins class="diff-new">
seconds-from-duration
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-seconds-from-time"><ins class="diff-new">
seconds-from-time
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-serialize"><ins class="diff-new">
serialize
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-sin"><ins class="diff-new">
sin
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-sqrt"><ins class="diff-new">
sqrt
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-starts-with"><ins class="diff-new">
starts-with
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-static-base-uri"><ins class="diff-new">
static-base-uri
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-string"><ins class="diff-new">
string
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-string-join"><ins class="diff-new">
string-join
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-string-length"><ins class="diff-new">
string-length
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-string-to-codepoints"><ins class="diff-new">
string-to-codepoints
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-subsequence"><ins class="diff-new">
subsequence
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-substring"><ins class="diff-new">
substring
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-substring-after"><ins class="diff-new">
substring-after
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-substring-before"><ins class="diff-new">
substring-before
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-subtract-dates"><ins class="diff-new">
subtract-dates
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-subtract-dateTimes"><ins class="diff-new">
subtract-dateTimes
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-subtract-dayTimeDuration-from-date"><ins class="diff-new">
subtract-dayTimeDuration-from-date
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-subtract-dayTimeDuration-from-dateTime"><ins class="diff-new">
subtract-dayTimeDuration-from-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-subtract-dayTimeDuration-from-time"><ins class="diff-new">
subtract-dayTimeDuration-from-time
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-subtract-dayTimeDurations"><ins class="diff-new">
subtract-dayTimeDurations
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-subtract-times"><ins class="diff-new">
subtract-times
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-subtract-yearMonthDuration-from-date"><ins class="diff-new">
subtract-yearMonthDuration-from-date
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-subtract-yearMonthDuration-from-dateTime"><ins class="diff-new">
subtract-yearMonthDuration-from-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-subtract-yearMonthDurations"><ins class="diff-new">
subtract-yearMonthDurations
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-sum"><ins class="diff-new">
sum
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-tan"><ins class="diff-new">
tan
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-time-equal"><ins class="diff-new">
time-equal
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-time-greater-than"><ins class="diff-new">
time-greater-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-time-less-than"><ins class="diff-new">
time-less-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-timezone-from-date"><ins class="diff-new">
timezone-from-date
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-timezone-from-dateTime"><ins class="diff-new">
timezone-from-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-timezone-from-time"><ins class="diff-new">
timezone-from-time
</ins></a><ins class="diff-new">
&#160;
</ins><a href="#func-to"><ins class="diff-new">
to
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-tokenize"><ins class="diff-new">
tokenize
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-trace"><ins class="diff-new">
trace
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-translate"><ins class="diff-new">
translate
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-true"><ins class="diff-new">
true
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-union"><ins class="diff-new">
union
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-unordered"><ins class="diff-new">
unordered
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-upper-case"><ins class="diff-new">
upper-case
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-uri-collection"><ins class="diff-new">
uri-collection
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-year-from-date"><ins class="diff-new">
year-from-date
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-year-from-dateTime"><ins class="diff-new">
year-from-dateTime
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-yearMonthDuration-greater-than"><ins class="diff-new">
yearMonthDuration-greater-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-yearMonthDuration-less-than"><ins class="diff-new">
yearMonthDuration-less-than
</ins></a><ins class="diff-new">
&#160;
</ins><a href= "#func-years-from-duration"><ins class="diff-new">
years-from-duration
</ins></a><ins class="diff-new">
&#160;
</ins></p></li><li><p><a href="#func-zero-or-one"><ins class="diff-new">
zero-or-one
</ins></a><ins class="diff-new">
&#160;
</ins></p></li></ul></div><div class="toc"><h2>
<a name="contents" id="contents">
</a>
Table
of
Contents
</h2>
<p class="toc">
1
<a href="#intro">
Introduction
</a>
<br />
&#160;&#160;&#160;&#160;1.1
<a href= "#conformance">
Conformance
</a>
<br />
&#160;&#160;&#160;&#160;1.2
<a href= "#namespace-prefixes">
Namespaces
and
Prefixes
</a>
<br />
&#160;&#160;&#160;&#160;1.3
<a href="#func-overloading">
Function
Overloading
</a>
<br />
&#160;&#160;&#160;&#160;1.4
<a href="#func-signatures">
Function
Signatures
and
Descriptions
</a>
<br />
&#160;&#160;&#160;&#160;1.5
<del class="diff-old">Namespace
Terminology
&#160;&#160;&#160;&#160;1.6
</del>
<a href="#datatypes">
Type
<del class="diff-old">Hierarchy
</del>
<ins class="diff-chg">System
</ins>
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;1.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;1.6
</ins>
<a href= "#terminology">
Terminology
</a>
<br />
<ins class="diff-new">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1.6.1
</ins><a href= "#namespace-terminology"><ins class="diff-new">
Namespaces
and
URIs
</ins></a><br /><ins class="diff-new">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1.6.2
</ins><a href= "#conformance-terminology"><ins class="diff-new">
Conformance
terminology
</ins></a><br /><ins class="diff-new">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1.6.3
</ins><a href= "#properties-of-functions"><ins class="diff-new">
Properties
of
functions
</ins></a><br />
2
<a href="#accessors">
Accessors
</a>
<br />
&#160;&#160;&#160;&#160;2.1
<a href= "#func-node-name">
fn:node-name
</a>
<br />
&#160;&#160;&#160;&#160;2.2
<a href= "#func-nilled">
fn:nilled
</a>
<br />
&#160;&#160;&#160;&#160;2.3
<a href= "#func-string">
fn:string
</a>
<br />
&#160;&#160;&#160;&#160;2.4
<a href="#func-data">
fn:data
</a>
<br />
&#160;&#160;&#160;&#160;2.5
<a href= "#func-base-uri">
fn:base-uri
</a>
<br />
&#160;&#160;&#160;&#160;2.6
<a href= "#func-document-uri">
fn:document-uri
</a>
<br />
3
<del class="diff-old">The
Error
Function
</del>
<a href="#errors-and-diagnostics">
<ins class="diff-chg">Errors
and
Diagnostics
</ins>
</a>
<br />
&#160;&#160;&#160;&#160;3.1
<del class="diff-old">Examples
4
The
Trace
Function
&#160;&#160;&#160;&#160;4.1
Examples
5
Constructor
Functions
&#160;&#160;&#160;&#160;5.1
Constructor
Functions
for
XML
Schema
Built-in
Types
&#160;&#160;&#160;&#160;5.2
A
Special
Constructor
Function
for
xs:dateTime
</del>
<a href="#errors">
<ins class="diff-chg">Raising
Errors
</ins>
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.2.1
Examples
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;3.1.1
</ins><a href= "#func-error"><ins class="diff-chg">
fn:error
</ins>
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;5.3
Constructor
Functions
for
xs:QName
and
xs:NOTATION
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;3.2
</ins><a href="#diagnostics"><ins class="diff-chg">
Diagnostic
Tracing
</ins>
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;5.4
Constructor
Functions
for
User-Defined
Types
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;3.2.1
</ins><a href= "#func-trace"><ins class="diff-chg">
fn:trace
</ins>
</a>
<br />
<del class="diff-old">6
</del>
<ins class="diff-chg">4
</ins>
<a href="#numeric-functions">
Functions
and
Operators
on
Numerics
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;6.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;4.1
</ins>
<a href="#numeric-types">
Numeric
Types
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;6.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;4.2
</ins>
<a href="#op.numeric">
<ins class="diff-new">Arithmetic
</ins>
Operators
on
Numeric
Values
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.2.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.2.1
</ins>
<a href= "#func-numeric-add">
op:numeric-add
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.2.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.2.2
</ins>
<a href= "#func-numeric-subtract">
op:numeric-subtract
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.2.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.2.3
</ins>
<a href= "#func-numeric-multiply">
op:numeric-multiply
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.2.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.2.4
</ins>
<a href= "#func-numeric-divide">
op:numeric-divide
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.2.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.2.5
</ins>
<a href= "#func-numeric-integer-divide">
op:numeric-integer-divide
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.2.6
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.2.6
</ins>
<a href= "#func-numeric-mod">
op:numeric-mod
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.2.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.2.7
</ins>
<a href= "#func-numeric-unary-plus">
op:numeric-unary-plus
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.2.8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.2.8
</ins>
<a href= "#func-numeric-unary-minus">
op:numeric-unary-minus
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;6.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;4.3
</ins>
<a href="#comp.numeric">
Comparison
Operators
on
Numeric
Values
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.3.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.3.1
</ins>
<a href= "#func-numeric-equal">
op:numeric-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.3.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.3.2
</ins>
<a href= "#func-numeric-less-than">
op:numeric-less-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.3.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.3.3
</ins>
<a href= "#func-numeric-greater-than">
op:numeric-greater-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;6.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;4.4
</ins>
<a href= "#numeric-value-functions">
Functions
on
Numeric
Values
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.4.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.4.1
</ins>
<a href= "#func-abs">
fn:abs
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.4.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.4.2
</ins>
<a href= "#func-ceiling">
fn:ceiling
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.4.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.4.3
</ins>
<a href= "#func-floor">
fn:floor
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.4.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.4.4
</ins>
<a href= "#func-round">
fn:round
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6.4.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.4.5
</ins>
<a href= "#func-round-half-to-even">
fn:round-half-to-even
</a>
<br />
<del class="diff-old">7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;4.5
</ins><a href= "#formatting-integers"><ins class="diff-chg">
Formatting
Integers
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.5.1
</ins><a href= "#func-format-integer"><ins class="diff-chg">
fn:format-integer
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;4.6
</ins><a href= "#formatting-numbers"><ins class="diff-chg">
Formatting
Numbers
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.6.1
</ins><a href= "#defining-decimal-format"><ins class="diff-chg">
Defining
a
Decimal
Format
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.6.2
</ins><a href= "#func-format-number"><ins class="diff-chg">
fn:format-number
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.6.3
</ins><a href= "#syntax-of-picture-string"><ins class="diff-chg">
Syntax
of
the
Picture
String
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.6.4
</ins><a href= "#analysing-picture-string"><ins class="diff-chg">
Analysing
the
Picture
String
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.6.5
</ins><a href= "#formatting-the-number"><ins class="diff-chg">
Formatting
the
Number
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;4.7
</ins><a href="#trigonometry"><ins class="diff-chg">
Trigonometrical
Functions
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.7.1
</ins><a href= "#func-pi"><ins class="diff-chg">
math:pi
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.7.2
</ins><a href= "#func-sqrt"><ins class="diff-chg">
math:sqrt
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.7.3
</ins><a href= "#func-sin"><ins class="diff-chg">
math:sin
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.7.4
</ins><a href= "#func-cos"><ins class="diff-chg">
math:cos
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.7.5
</ins><a href= "#func-tan"><ins class="diff-chg">
math:tan
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.7.6
</ins><a href= "#func-asin"><ins class="diff-chg">
math:asin
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.7.7
</ins><a href= "#func-acos"><ins class="diff-chg">
math:acos
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;4.7.8
</ins><a href= "#func-atan"><ins class="diff-chg">
math:atan
</ins></a><br /><ins class="diff-chg">
5
</ins>
<a href="#string-functions">
Functions
on
Strings
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;7.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;5.1
</ins>
<a href="#string-types">
String
Types
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;7.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;5.2
</ins>
<a href= "#func-assemble-disassemble-string">
Functions
to
Assemble
and
Disassemble
Strings
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.2.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.2.1
</ins>
<a href= "#func-codepoints-to-string">
fn:codepoints-to-string
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.2.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.2.2
</ins>
<a href= "#func-string-to-codepoints">
fn:string-to-codepoints
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;7.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;5.3
</ins>
<a href="#string-compare">
Equality
and
Comparison
of
Strings
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.3.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.3.1
</ins>
<a href= "#collations">
Collations
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.3.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.3.2
</ins><a href= "#codepoint-collation"><ins class="diff-chg">
The
Unicode
Codepoint
Collation
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.3.3
</ins><a href= "#choosing-a-collation"><ins class="diff-chg">
Choosing
a
Collation
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.3.4
</ins>
<a href= "#func-compare">
fn:compare
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.3.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.3.5
</ins>
<a href= "#func-codepoint-equal">
fn:codepoint-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;7.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;5.4
</ins>
<a href= "#string-value-functions">
Functions
on
String
Values
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.4.1
</ins>
<a href= "#func-concat">
fn:concat
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.4.2
</ins>
<a href= "#func-string-join">
fn:string-join
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.4.3
</ins>
<a href= "#func-substring">
fn:substring
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.4.4
</ins>
<a href= "#func-string-length">
fn:string-length
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.4.5
</ins>
<a href= "#func-normalize-space">
fn:normalize-space
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.6
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.4.6
</ins>
<a href= "#func-normalize-unicode">
fn:normalize-unicode
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.4.7
</ins>
<a href= "#func-upper-case">
fn:upper-case
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.4.8
</ins>
<a href= "#func-lower-case">
fn:lower-case
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.9
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.4.9
</ins>
<a href= "#func-translate">
fn:translate
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.10
fn:encode-for-uri
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.11
fn:iri-to-uri
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.4.12
fn:escape-html-uri
&#160;&#160;&#160;&#160;7.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;5.5
</ins>
<a href= "#substring.functions">
Functions
Based
on
Substring
Matching
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.5.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.5.1
</ins>
<a href= "#func-contains">
fn:contains
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.5.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.5.2
</ins>
<a href= "#func-starts-with">
fn:starts-with
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.5.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.5.3
</ins>
<a href= "#func-ends-with">
fn:ends-with
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.5.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.5.4
</ins>
<a href= "#func-substring-before">
fn:substring-before
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.5.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.5.5
</ins>
<a href= "#func-substring-after">
fn:substring-after
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;7.6
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;5.6
</ins>
<a href="#string.match">
String
Functions
that
<del class="diff-old">Use
Pattern
Matching
</del>
<ins class="diff-chg">use
Regular
Expressions
</ins>
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.6.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.6.1
</ins>
<a href= "#regex-syntax">
Regular
Expression
Syntax
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.6.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.6.2
</ins>
<a href= "#func-matches">
fn:matches
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.6.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.6.3
</ins>
<a href= "#func-replace">
fn:replace
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.6.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.6.4
</ins>
<a href= "#func-tokenize">
fn:tokenize
</a>
<br />
<del class="diff-old">8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;5.6.5
</ins><a href= "#func-analyze-string"><ins class="diff-chg">
fn:analyze-string
</ins></a><br /><ins class="diff-chg">
6
</ins>
<a href="#anyURI-functions">
Functions
<del class="diff-old">on
anyURI
</del>
<ins class="diff-chg">that
manipulate
URIs
</ins>
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;8.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;6.1
</ins>
<a href= "#func-resolve-uri">
fn:resolve-uri
</a>
<br />
<del class="diff-old">9
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;6.2
</ins><a href= "#func-encode-for-uri"><ins class="diff-chg">
fn:encode-for-uri
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;6.3
</ins><a href= "#func-iri-to-uri"><ins class="diff-chg">
fn:iri-to-uri
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;6.4
</ins><a href= "#func-escape-html-uri"><ins class="diff-chg">
fn:escape-html-uri
</ins></a><br /><ins class="diff-chg">
7
</ins>
<a href="#boolean-functions">
Functions
and
Operators
on
Boolean
Values
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;9.1
Additional
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;7.1
</ins><a href="#boolean-constructors">
Boolean
<del class="diff-old">Constructor
</del>
<ins class="diff-chg">Constant
</ins>
Functions
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.1.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.1.1
</ins>
<a href= "#func-true">
fn:true
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.1.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.1.2
</ins>
<a href= "#func-false">
fn:false
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;9.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;7.2
</ins>
<a href="#op.boolean">
Operators
on
Boolean
Values
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.2.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.2.1
</ins>
<a href= "#func-boolean-equal">
op:boolean-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.2.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.2.2
</ins>
<a href= "#func-boolean-less-than">
op:boolean-less-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.2.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.2.3
</ins>
<a href= "#func-boolean-greater-than">
op:boolean-greater-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;9.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;7.3
</ins>
<a href= "#boolean-value-functions">
Functions
on
Boolean
Values
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.3.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.3.1
</ins><a href= "#func-boolean"><ins class="diff-chg">
fn:boolean
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;7.3.2
</ins>
<a href= "#func-not">
fn:not
</a>
<br />
<del class="diff-old">10
</del>
<ins class="diff-chg">8
</ins><a href="#durations">
Functions
and
Operators
on
<del class="diff-old">Durations,
Dates
and
Times
&#160;&#160;&#160;&#160;10.1
Duration,
Date
and
Time
Types
</del>
<ins class="diff-chg">Durations
</ins>
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.1.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;8.1
</ins><a href="#duration-limits">
Limits
and
Precision
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;10.2
Date/time
datatype
values
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.2.1
Examples
&#160;&#160;&#160;&#160;10.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;8.2
</ins>
<a href="#duration-subtypes">
Two
Totally
Ordered
Subtypes
of
Duration
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.3.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.2.1
</ins>
<a href= "#dt-yearMonthDuration">
xs:yearMonthDuration
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.3.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.2.2
</ins>
<a href= "#dt-dayTimeDuration">
xs:dayTimeDuration
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;10.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;8.3
</ins><a href="#comp.duration">
Comparison
Operators
on
<del class="diff-old">Duration,
Date
and
Time
Values
</del>
<ins class="diff-chg">Durations
</ins>
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.3.1
</ins>
<a href= "#func-yearMonthDuration-less-than">
op:yearMonthDuration-less-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.3.2
</ins>
<a href= "#func-yearMonthDuration-greater-than">
op:yearMonthDuration-greater-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.3.3
</ins>
<a href= "#func-dayTimeDuration-less-than">
op:dayTimeDuration-less-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.3.4
</ins>
<a href= "#func-dayTimeDuration-greater-than">
op:dayTimeDuration-greater-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.3.5
</ins>
<a href= "#func-duration-equal">
op:duration-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.6
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;8.4
</ins><a href= "#component-extraction-durations"><ins class="diff-chg">
Component
Extraction
Functions
on
Durations
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.4.1
</ins><a href= "#func-years-from-duration"><ins class="diff-chg">
fn:years-from-duration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.4.2
</ins><a href= "#func-months-from-duration"><ins class="diff-chg">
fn:months-from-duration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.4.3
</ins><a href= "#func-days-from-duration"><ins class="diff-chg">
fn:days-from-duration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.4.4
</ins><a href= "#func-hours-from-duration"><ins class="diff-chg">
fn:hours-from-duration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.4.5
</ins><a href= "#func-minutes-from-duration"><ins class="diff-chg">
fn:minutes-from-duration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.4.6
</ins><a href= "#func-seconds-from-duration"><ins class="diff-chg">
fn:seconds-from-duration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;8.5
</ins><a href= "#duration-arithmetic"><ins class="diff-chg">
Arithmetic
Operators
on
Durations
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.5.1
</ins><a href= "#func-add-yearMonthDurations"><ins class="diff-chg">
op:add-yearMonthDurations
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.5.2
</ins><a href= "#func-subtract-yearMonthDurations"><ins class="diff-chg">
op:subtract-yearMonthDurations
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.5.3
</ins><a href= "#func-multiply-yearMonthDuration"><ins class="diff-chg">
op:multiply-yearMonthDuration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.5.4
</ins><a href= "#func-divide-yearMonthDuration"><ins class="diff-chg">
op:divide-yearMonthDuration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.5.5
</ins><a href= "#func-divide-yearMonthDuration-by-yearMonthDuration"><ins class="diff-chg">
op:divide-yearMonthDuration-by-yearMonthDuration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.5.6
</ins><a href= "#func-add-dayTimeDurations"><ins class="diff-chg">
op:add-dayTimeDurations
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.5.7
</ins><a href= "#func-subtract-dayTimeDurations"><ins class="diff-chg">
op:subtract-dayTimeDurations
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.5.8
</ins><a href= "#func-multiply-dayTimeDuration"><ins class="diff-chg">
op:multiply-dayTimeDuration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.5.9
</ins><a href= "#func-divide-dayTimeDuration"><ins class="diff-chg">
op:divide-dayTimeDuration
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;8.5.10
</ins><a href= "#func-divide-dayTimeDuration-by-dayTimeDuration"><ins class="diff-chg">
op:divide-dayTimeDuration-by-dayTimeDuration
</ins></a><br /><ins class="diff-chg">
9
</ins><a href="#dates-times"><ins class="diff-chg">
Functions
and
Operators
on
Dates
and
Times
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;9.1
</ins><a href="#date-time-types"><ins class="diff-chg">
Date
and
Time
Types
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.1.1
</ins><a href= "#date-time-duration-conformance"><ins class="diff-chg">
Limits
and
Precision
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;9.2
</ins><a href="#date-time-values"><ins class="diff-chg">
Date/time
datatype
values
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.2.1
</ins><a href= "#date-time-lexical-mapping"><ins class="diff-chg">
Examples
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;9.3
</ins><a href= "#constructing-dateTime"><ins class="diff-chg">
Constructing
a
dateTime
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.3.1
</ins><a href= "#func-dateTime"><ins class="diff-chg">
fn:dateTime
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;9.4
</ins><a href="#comp.datetime"><ins class="diff-chg">
Comparison
Operators
on
Duration,
Date
and
Time
Values
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.1
</ins>
<a href= "#func-dateTime-equal">
op:dateTime-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.2
</ins>
<a href= "#func-dateTime-less-than">
op:dateTime-less-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.3
</ins>
<a href= "#func-dateTime-greater-than">
op:dateTime-greater-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.9
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.4
</ins>
<a href= "#func-date-equal">
op:date-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.10
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.5
</ins>
<a href= "#func-date-less-than">
op:date-less-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.11
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.6
</ins>
<a href= "#func-date-greater-than">
op:date-greater-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.12
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.7
</ins>
<a href= "#func-time-equal">
op:time-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.13
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.8
</ins>
<a href= "#func-time-less-than">
op:time-less-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.14
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.9
</ins>
<a href= "#func-time-greater-than">
op:time-greater-than
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.15
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.10
</ins>
<a href= "#func-gYearMonth-equal">
op:gYearMonth-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.16
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.11
</ins>
<a href= "#func-gYear-equal">
op:gYear-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.17
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.12
</ins>
<a href= "#func-gMonthDay-equal">
op:gMonthDay-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.18
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.13
</ins>
<a href= "#func-gMonth-equal">
op:gMonth-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.4.19
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.4.14
</ins>
<a href= "#func-gDay-equal">
op:gDay-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;10.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;9.5
</ins><a href= "#component-extraction-dateTime">
Component
Extraction
Functions
on
<del class="diff-old">Durations,
</del>
Dates
and
Times
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.1
fn:years-from-duration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.2
fn:months-from-duration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.3
fn:days-from-duration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.4
fn:hours-from-duration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.5
fn:minutes-from-duration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.6
fn:seconds-from-duration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.1
</ins>
<a href= "#func-year-from-dateTime">
fn:year-from-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.2
</ins>
<a href= "#func-month-from-dateTime">
fn:month-from-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.9
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.3
</ins>
<a href= "#func-day-from-dateTime">
fn:day-from-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.10
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.4
</ins>
<a href= "#func-hours-from-dateTime">
fn:hours-from-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.11
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.5
</ins>
<a href= "#func-minutes-from-dateTime">
fn:minutes-from-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.12
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.6
</ins>
<a href= "#func-seconds-from-dateTime">
fn:seconds-from-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.13
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.7
</ins>
<a href= "#func-timezone-from-dateTime">
fn:timezone-from-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.14
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.8
</ins>
<a href= "#func-year-from-date">
fn:year-from-date
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.15
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.9
</ins>
<a href= "#func-month-from-date">
fn:month-from-date
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.16
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.10
</ins>
<a href= "#func-day-from-date">
fn:day-from-date
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.17
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.11
</ins>
<a href= "#func-timezone-from-date">
fn:timezone-from-date
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.18
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.12
</ins>
<a href= "#func-hours-from-time">
fn:hours-from-time
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.19
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.13
</ins>
<a href= "#func-minutes-from-time">
fn:minutes-from-time
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.20
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.14
</ins>
<a href= "#func-seconds-from-time">
fn:seconds-from-time
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.5.21
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.5.15
</ins>
<a href= "#func-timezone-from-time">
fn:timezone-from-time
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;10.6
Arithmetic
Operators
on
Durations
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.6.1
op:add-yearMonthDurations
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.6.2
op:subtract-yearMonthDurations
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.6.3
op:multiply-yearMonthDuration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.6.4
op:divide-yearMonthDuration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.6.5
op:divide-yearMonthDuration-by-yearMonthDuration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.6.6
op:add-dayTimeDurations
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.6.7
op:subtract-dayTimeDurations
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.6.8
op:multiply-dayTimeDuration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.6.9
op:divide-dayTimeDuration
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.6.10
op:divide-dayTimeDuration-by-dayTimeDuration
&#160;&#160;&#160;&#160;10.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;9.6
</ins>
<a href="#timezone.functions">
Timezone
Adjustment
Functions
on
Dates
and
Time
Values
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.7.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.6.1
</ins>
<a href= "#func-adjust-dateTime-to-timezone">
fn:adjust-dateTime-to-timezone
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.7.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.6.2
</ins>
<a href= "#func-adjust-date-to-timezone">
fn:adjust-date-to-timezone
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.7.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.6.3
</ins>
<a href= "#func-adjust-time-to-timezone">
fn:adjust-time-to-timezone
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;10.8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;9.7
</ins>
<a href= "#dateTime-arithmetic">
Arithmetic
Operators
on
Durations,
Dates
and
Times
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.1
</ins>
<a href= "#func-subtract-dateTimes">
op:subtract-dateTimes
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.2
</ins>
<a href= "#func-subtract-dates">
op:subtract-dates
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.3
</ins>
<a href= "#func-subtract-times">
op:subtract-times
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.4
</ins>
<a href= "#func-add-yearMonthDuration-to-dateTime">
op:add-yearMonthDuration-to-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.5
</ins>
<a href= "#func-add-dayTimeDuration-to-dateTime">
op:add-dayTimeDuration-to-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.6
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.6
</ins>
<a href= "#func-subtract-yearMonthDuration-from-dateTime">
op:subtract-yearMonthDuration-from-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.7
</ins>
<a href= "#func-subtract-dayTimeDuration-from-dateTime">
op:subtract-dayTimeDuration-from-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.8
</ins>
<a href= "#func-add-yearMonthDuration-to-date">
op:add-yearMonthDuration-to-date
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.9
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.9
</ins>
<a href= "#func-add-dayTimeDuration-to-date">
op:add-dayTimeDuration-to-date
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.10
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.10
</ins>
<a href= "#func-subtract-yearMonthDuration-from-date">
op:subtract-yearMonthDuration-from-date
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.11
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.11
</ins>
<a href= "#func-subtract-dayTimeDuration-from-date">
op:subtract-dayTimeDuration-from-date
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.12
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.12
</ins>
<a href= "#func-add-dayTimeDuration-to-time">
op:add-dayTimeDuration-to-time
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.8.13
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.7.13
</ins>
<a href= "#func-subtract-dayTimeDuration-from-time">
op:subtract-dayTimeDuration-from-time
</a>
<br />
<del class="diff-old">11
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;9.8
</ins><a href= "#formatting-dates-and-times"><ins class="diff-chg">
Formatting
Dates
and
Times
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.8.1
</ins><a href= "#func-format-dateTime"><ins class="diff-chg">
fn:format-dateTime
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.8.2
</ins><a href= "#func-format-date"><ins class="diff-chg">
fn:format-date
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.8.3
</ins><a href= "#func-format-time"><ins class="diff-chg">
fn:format-time
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.8.4
</ins><a href= "#rules-for-datetime-formatting"><ins class="diff-chg">
The
date/time
formatting
functions
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9.8.5
</ins><a href= "#date-time-examples"><ins class="diff-chg">
Examples
of
Date
and
Time
Formatting
</ins></a><br /><ins class="diff-chg">
10
</ins>
<a href="#QName-funcs">
Functions
Related
to
QNames
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;11.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;10.1
</ins>
<a href= "#QName-constructors">
<del class="diff-old">Additional
Constructor
</del>
Functions
<del class="diff-old">for
</del>
<ins class="diff-chg">to
create
a
</ins>
QNames
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11.1.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.1.1
</ins>
<a href= "#func-resolve-QName">
fn:resolve-QName
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11.1.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.1.2
</ins>
<a href= "#func-QName">
fn:QName
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;11.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;10.2
</ins>
<a href="#QName-functions">
Functions
and
Operators
Related
to
QNames
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11.2.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.2.1
</ins>
<a href= "#func-QName-equal">
op:QName-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11.2.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.2.2
</ins>
<a href= "#func-prefix-from-QName">
fn:prefix-from-QName
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11.2.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.2.3
</ins>
<a href= "#func-local-name-from-QName">
fn:local-name-from-QName
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11.2.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.2.4
</ins>
<a href= "#func-namespace-uri-from-QName">
fn:namespace-uri-from-QName
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11.2.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.2.5
</ins>
<a href= "#func-namespace-uri-for-prefix">
fn:namespace-uri-for-prefix
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11.2.6
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10.2.6
</ins>
<a href= "#func-in-scope-prefixes">
fn:in-scope-prefixes
</a>
<br />
<del class="diff-old">12
</del>
<ins class="diff-chg">11
</ins>
<a href="#binary-functions">
Operators
on
base64Binary
and
hexBinary
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;12.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;11.1
</ins>
<a href= "#binary-value-comparisons">
Comparisons
of
base64Binary
and
hexBinary
Values
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;12.1.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11.1.1
</ins>
<a href= "#func-hexBinary-equal">
op:hexBinary-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;12.1.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11.1.2
</ins>
<a href= "#func-base64Binary-equal">
op:base64Binary-equal
</a>
<br />
<del class="diff-old">13
</del>
<ins class="diff-chg">12
</ins>
<a href="#NOTATION-functions">
Operators
on
NOTATION
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;13.1
Operators
on
NOTATION
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;13.1.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;12.1
</ins>
<a href= "#func-NOTATION-equal">
op:NOTATION-equal
</a>
<br />
<del class="diff-old">14
</del>
<ins class="diff-chg">13
</ins>
<a href="#node-functions">
Functions
and
Operators
on
Nodes
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;14.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;13.1
</ins>
<a href="#func-name">
fn:name
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;14.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;13.2
</ins>
<a href= "#func-local-name">
fn:local-name
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;14.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;13.3
</ins>
<a href= "#func-namespace-uri">
fn:namespace-uri
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;14.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;13.4
</ins>
<a href= "#func-number">
fn:number
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.4.1
Examples
&#160;&#160;&#160;&#160;14.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;13.5
</ins>
<a href="#func-lang">
fn:lang
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.1
Examples
&#160;&#160;&#160;&#160;14.6
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;13.6
</ins>
<a href= "#func-is-same-node">
op:is-same-node
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.6.1
Examples
&#160;&#160;&#160;&#160;14.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;13.7
</ins>
<a href= "#func-node-before">
op:node-before
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.7.1
Examples
&#160;&#160;&#160;&#160;14.8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;13.8
</ins>
<a href= "#func-node-after">
op:node-after
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.8.1
Examples
&#160;&#160;&#160;&#160;14.9
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;13.9
</ins>
<a href="#func-root">
fn:root
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.9.1
Examples
15
</del>
<ins class="diff-chg">14
</ins>
<a href="#sequence-functions">
Functions
and
Operators
on
Sequences
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;15.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;14.1
</ins>
<a href="#general-seq-funcs">
General
Functions
and
Operators
on
Sequences
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.1
fn:boolean
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.1.1
</ins>
<a href= "#func-concatenate">
op:concatenate
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.3
fn:index-of
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.1.2
</ins><a href= "#func-distinct-values"><ins class="diff-chg">
fn:distinct-values
</ins>
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.1.3
</ins>
<a href= "#func-empty">
fn:empty
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.1.4
</ins>
<a href= "#func-exists">
fn:exists
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.6
fn:distinct-values
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.1.5
</ins><a href= "#func-index-of"><ins class="diff-chg">
fn:index-of
</ins>
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.1.6
</ins>
<a href= "#func-insert-before">
fn:insert-before
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.1.7
</ins>
<a href= "#func-remove">
fn:remove
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.9
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.1.8
</ins>
<a href= "#func-reverse">
fn:reverse
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.10
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.1.9
</ins>
<a href= "#func-subsequence">
fn:subsequence
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.1.11
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.1.10
</ins>
<a href= "#func-unordered">
fn:unordered
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;15.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;14.2
</ins>
<a href= "#cardinality-functions">
Functions
That
Test
the
Cardinality
of
Sequences
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.2.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.2.1
</ins>
<a href= "#func-zero-or-one">
fn:zero-or-one
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.2.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.2.2
</ins>
<a href= "#func-one-or-more">
fn:one-or-more
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.2.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.2.3
</ins>
<a href= "#func-exactly-one">
fn:exactly-one
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;15.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;14.3
</ins>
<a href= "#union-intersection-except">
Equals,
Union,
Intersection
and
Except
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.3.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.3.1
</ins>
<a href= "#func-deep-equal">
fn:deep-equal
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.3.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.3.2
</ins>
<a href= "#func-union">
op:union
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.3.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.3.3
</ins>
<a href= "#func-intersect">
op:intersect
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.3.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.3.4
</ins>
<a href= "#func-except">
op:except
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;15.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;14.4
</ins>
<a href= "#aggregate-functions">
Aggregate
Functions
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.4.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.4.1
</ins>
<a href= "#func-count">
fn:count
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.4.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.4.2
</ins>
<a href= "#func-avg">
fn:avg
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.4.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.4.3
</ins>
<a href= "#func-max">
fn:max
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.4.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.4.4
</ins>
<a href= "#func-min">
fn:min
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.4.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.4.5
</ins>
<a href= "#func-sum">
fn:sum
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;15.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;14.5
</ins>
<a href= "#fns-that-generate-sequences">
Functions
and
Operators
that
Generate
Sequences
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.5.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.1
</ins>
<a href= "#func-to">
op:to
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.5.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.2
</ins>
<a href= "#func-id">
fn:id
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.5.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.3
</ins><a href= "#func-element-with-id"><ins class="diff-chg">
fn:element-with-id
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.4
</ins>
<a href= "#func-idref">
fn:idref
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.5.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.5
</ins>
<a href= "#func-doc">
fn:doc
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.5.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.6
</ins>
<a href= "#func-doc-available">
fn:doc-available
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15.5.6
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.7
</ins>
<a href= "#func-collection">
fn:collection
</a>
<br />
<del class="diff-old">16
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.8
</ins><a href= "#func-uri-collection"><ins class="diff-chg">
fn:uri-collection
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.9
</ins><a href= "#func-generate-id"><ins class="diff-chg">
fn:generate-id
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.10
</ins><a href= "#func-parse"><ins class="diff-chg">
fn:parse
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;14.5.11
</ins><a href= "#func-serialize"><ins class="diff-chg">
fn:serialize
</ins></a><br /><ins class="diff-chg">
15
</ins>
<a href="#context">
Context
Functions
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;16.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;15.1
</ins>
<a href= "#func-position">
fn:position
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;16.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;15.2
</ins>
<a href="#func-last">
fn:last
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;16.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;15.3
</ins>
<a href= "#func-current-dateTime">
fn:current-dateTime
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;16.3.1
Examples
&#160;&#160;&#160;&#160;16.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;15.4
</ins>
<a href= "#func-current-date">
fn:current-date
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;16.4.1
Examples
&#160;&#160;&#160;&#160;16.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;15.5
</ins>
<a href= "#func-current-time">
fn:current-time
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;16.5.1
Examples
&#160;&#160;&#160;&#160;16.6
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;15.6
</ins>
<a href= "#func-implicit-timezone">
fn:implicit-timezone
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;16.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;15.7
</ins>
<a href= "#func-default-collation">
fn:default-collation
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;16.8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;15.8
</ins>
<a href= "#func-static-base-uri">
fn:static-base-uri
</a>
<br />
<ins class="diff-new">16
</ins><a href="#higher-order-functions"><ins class="diff-new">
Functions
on
Functions
</ins></a><br /><ins class="diff-new">
&#160;&#160;&#160;&#160;16.1
</ins><a href= "#func-function-name"><ins class="diff-new">
fn:function-name
</ins></a><br /><ins class="diff-new">
&#160;&#160;&#160;&#160;16.2
</ins><a href= "#func-function-arity"><ins class="diff-new">
fn:function-arity
</ins></a><br /><ins class="diff-new">
&#160;&#160;&#160;&#160;16.3
</ins><a href= "#func-partial-apply"><ins class="diff-new">
fn:partial-apply
</ins></a><br />
17
<a href="#constructor-functions">
<ins class="diff-new">Constructor
Functions
</ins></a><br /><ins class="diff-new">
&#160;&#160;&#160;&#160;17.1
</ins><a href= "#constructor-functions-for-xsd-types"><ins class="diff-new">
Constructor
Functions
for
XML
Schema
Built-in
Types
</ins></a><br /><ins class="diff-new">
&#160;&#160;&#160;&#160;17.2
</ins><a href= "#constructor-qname-notation"><ins class="diff-new">
Constructor
Functions
for
xs:QName
and
xs:NOTATION
</ins></a><br /><ins class="diff-new">
&#160;&#160;&#160;&#160;17.3
</ins><a href= "#constructor-functions-for-user-defined-types"><ins class="diff-new">
Constructor
Functions
for
User-Defined
Types
</ins></a><br /><ins class="diff-new">
18
</ins>
<a href="#casting">
Casting
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;17.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;18.1
</ins>
<a href= "#casting-from-primitive-to-primitive">
Casting
from
primitive
types
to
primitive
types
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;17.1.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;18.1.1
</ins>
<a href= "#casting-from-strings">
Casting
from
xs:string
and
xs:untypedAtomic
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;17.1.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;18.1.2
</ins>
<a href= "#casting-to-string">
Casting
to
xs:string
and
xs:untypedAtomic
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;17.1.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;18.1.3
</ins>
<a href= "#casting-to-numerics">
Casting
to
numeric
types
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;17.1.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;18.1.4
</ins>
<a href= "#casting-to-durations">
Casting
to
duration
types
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;17.1.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;18.1.5
</ins>
<a href= "#casting-to-datetimes">
Casting
to
date
and
time
types
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;17.1.6
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;18.1.6
</ins>
<a href= "#casting-boolean">
Casting
to
xs:boolean
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;17.1.7
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;18.1.7
</ins>
<a href= "#casting-to-binary">
Casting
to
xs:base64Binary
and
xs:hexBinary
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;17.1.8
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;18.1.8
</ins>
<a href= "#casting-to-anyuri">
Casting
to
xs:anyURI
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;17.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;18.1.9
</ins><a href= "#casting-to-qname-and-notation"><ins class="diff-chg">
Casting
to
xs:QName
and
xs:NOTATION
</ins></a><br /><ins class="diff-chg">
&#160;&#160;&#160;&#160;18.2
</ins>
<a href= "#casting-to-derived-types">
Casting
to
derived
types
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;17.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;18.3
</ins>
<a href= "#casting-from-derived-to-parent">
Casting
from
derived
types
to
parent
types
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;17.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;18.4
</ins>
<a href= "#casting-within-branch">
Casting
within
a
branch
of
the
type
hierarchy
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;17.4.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;18.4.1
</ins>
<a href= "#casting-to-ENTITY">
Casting
to
xs:ENTITY
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;17.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;18.5
</ins>
<a href= "#casting-across-hierarchy">
Casting
across
the
type
hierarchy
</a>
<br />
</p>
<h3>
<a name="appendices" id="appendices">
</a>
Appendices
</h3>
<p class="toc">
A
<a href="#biblio">
References
</a>
<br />
&#160;&#160;&#160;&#160;A.1
<a href="#normative-biblio">
Normative
References
</a>
<br />
&#160;&#160;&#160;&#160;A.2
<a href= "#non-normative-biblio">
Non-normative
References
</a>
<br />
B
<del class="diff-old">Change
Log
for
this
Version
of
the
Document
C
</del>
<a href="#error-summary">
Error
Summary
</a>
<br />
<del class="diff-old">D
</del>
<ins class="diff-chg">C
</ins>
<a href="#xpath1-compatibility">
Compatibility
with
XPath
1.0
</a>
(Non-Normative)
<br />
<del class="diff-old">E
</del>
<ins class="diff-chg">D
</ins>
<a href="#examples">
Illustrative
User-written
Functions
</a>
(Non-Normative)
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;E.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;D.1
</ins>
<a href= "#if-empty-if-absent">
eg:if-empty
and
eg:if-absent
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;E.1.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;D.1.1
</ins>
<a href= "#if-empty">
eg:if-empty
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;E.1.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;D.1.2
</ins>
<a href= "#if-absent">
eg:if-absent
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;E.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;D.2
</ins>
<a href= "#union-intersect-except-on-values">
union,
intersect
and
except
on
sequences
of
values
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;E.2.1
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;D.2.1
</ins>
<a href= "#value-union">
eg:value-union
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;E.2.2
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;D.2.2
</ins>
<a href= "#value-intersect">
eg:value-intersect
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;E.2.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;D.2.3
</ins>
<a href= "#value-except">
eg:value-except
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;E.3
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;D.3
</ins>
<a href= "#index-of-node">
eg:index-of-node
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;E.4
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;D.4
</ins>
<a href= "#string-pad">
eg:string-pad
</a>
<br />
<del class="diff-old">&#160;&#160;&#160;&#160;E.5
</del>
<ins class="diff-chg">&#160;&#160;&#160;&#160;D.5
</ins>
<a href= "#func-distinct-nodes-stable">
eg:distinct-nodes-stable
</a>
<br />
<del class="diff-old">F
</del>
<ins class="diff-chg">E
</ins>
<a href="#impl-def">
Checklist
of
Implementation-Defined
Features
</a>
(Non-Normative)
<br />
<ins class="diff-new">F
</ins><a href="#changelog"><ins class="diff-new">
Changes
since
previous
Recommendation
</ins></a><ins class="diff-new">
(Non-Normative)
</ins><br /><ins class="diff-new">
&#160;&#160;&#160;&#160;F.1
</ins><a href= "#substantive-changes"><ins class="diff-new">
Substantive
changes
</ins></a><br /><ins class="diff-new">
&#160;&#160;&#160;&#160;F.2
</ins><a href="#editorial-changes"><ins class="diff-new">
Editorial
changes
</ins></a><br />
G
<a href="#quickref">
Function
and
Operator
Quick
Reference
</a>
(Non-Normative)
<br />
&#160;&#160;&#160;&#160;G.1
<a href="#quickref-section">
Functions
and
Operators
by
Section
</a>
<br />
&#160;&#160;&#160;&#160;G.2
<a href="#quickref-alpha">
Functions
and
Operators
Alphabetically
</a>
<br />
</p>
</div>
<hr />
<div class="body">
<div class="div1">
<h2>
<a name="intro" id="intro">
</a>
1
Introduction
</h2>
<p>
The
purpose
of
this
document
is
to
catalog
the
functions
and
operators
required
for
XPath
2.0,
XML
Query
1.0
and
XSLT
2.0.
The
exact
syntax
used
to
<del class="diff-old">invoke
</del>
<ins class="diff-chg">call
</ins>
these
functions
and
operators
is
specified
in
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>,
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
and
<a href="#xslt20">
[XSL
Transformations
(XSLT)
Version
2.0]
</a>.
</p>
<p>
This
document
defines
constructor
functions
and
functions
that
take
typed
values
as
arguments.
Some
of
the
functions
define
the
semantics
of
operators
discussed
in
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>.
</p>
<p>
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
defines
a
number
of
primitive
and
derived
datatypes,
collectively
known
as
built-in
datatypes.
This
document
defines
functions
and
operations
on
these
datatypes
as
well
as
the
datatypes
defined
in
<a href= "http://www.w3.org/TR/xpath-datamodel/#types">
Section
2.6
Types
</a>
<sup>
<small>
DM
</small>
</sup>
of
the
<a href= "#xpath-datamodel-11">
[XQuery
<del class="diff-old">1.0
</del>
and
XPath
<del class="diff-old">2.0
</del>
Data
<del class="diff-old">Model]
</del>
<ins class="diff-chg">Model
(XDM)
1.1]
</ins>
</a>.
These
functions
and
operations
are
defined
for
use
in
<a href= "#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>,
<a href= "#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
and
<a href= "#xslt20">
[XSL
Transformations
(XSLT)
Version
2.0]
</a>
and
related
XML
standards.
This
document
also
<del class="diff-old">discusses
</del>
<ins class="diff-chg">defines
</ins>
functions
and
operators
on
nodes
and
node
sequences
as
defined
in
the
<a href= "#xpath-datamodel-11">
[XQuery
<del class="diff-old">1.0
</del>
and
XPath
<del class="diff-old">2.0
</del>
Data
<del class="diff-old">Model]
</del>
<ins class="diff-chg">Model
(XDM)
1.1]
</ins>
</a>
for
use
in
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>,
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
and
<a href="#xslt20">
[XSL
Transformations
(XSLT)
Version
2.0]
</a>
and
other
related
XML
standards.
</p>
<p>
References
to
specific
sections
of
some
of
the
above
documents
are
indicated
by
cross-document
links
in
this
document.
Each
such
link
consists
of
a
pointer
to
a
specific
section
followed
a
superscript
specifying
the
linked
document.
The
superscripts
have
the
following
meanings:
'XQ'
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>,
'XT'
<a href="#xslt20">
[XSL
Transformations
(XSLT)
Version
2.0]
</a>,
'XP'
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>,
'DM'
<a href="#xpath-datamodel-11">
[XQuery
<del class="diff-old">1.0
</del>
and
XPath
<del class="diff-old">2.0
</del>
Data
<del class="diff-old">Model]
</del>
<ins class="diff-chg">Model
(XDM)
1.1]
</ins>
</a>
and
'FS'
<a href= "#xquery-semantics">
[XQuery
1.0
and
XPath
2.0
Formal
Semantics]
</a>.
</p>
<div class="div2">
<h3>
<a name="conformance" id="conformance">
</a>
1.1
Conformance
</h3>
<p>
The
Functions
and
Operators
specification
is
intended
primarily
as
a
component
that
can
be
used
by
other
specifications.
Therefore,
Functions
and
Operators
relies
on
specifications
that
use
it
(such
as
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>,
<a href= "#xslt20">
[XSL
Transformations
(XSLT)
Version
2.0]
</a>
and
<a href= "#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
)
to
specify
conformance
criteria
for
their
respective
environments.
</p>
<p>
Authors
of
conformance
criteria
for
the
use
of
the
Functions
and
Operators
should
pay
particular
attention
to
the
following
features:
</p>
<ul>
<li>
<p>
It
is
<a title="implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
which
version
of
Unicode
is
supported,
but
it
is
recommended
that
the
most
recent
version
of
Unicode
be
used.
</p>
</li>
<li>
<p>
<ins class="diff-new">It
is
</ins><a title="implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation-defined
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
whether
the
type
system
is
based
on
XML
Schema
1.0
or
XML
Schema
1.1.
</ins></p></li><li><p>
Support
for
XML
1.0
and
XML
1.1
by
the
datatypes
used
in
Functions
and
Operators.
</p>
</li>
</ul>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
At
the
time
of
writing
there
is
<del class="diff-old">no
published
version
</del>
<ins class="diff-chg">a
Candidate
Recommendation
</ins>
of
XML
Schema
<del class="diff-old">that
references
the
XML
</del>
1.1
<del class="diff-old">specifications.
This
means
</del>
that
<del class="diff-old">datatypes
such
as
</del>
<ins class="diff-chg">introduces
some
new
data
types
including
</ins>
<code>
<del class="diff-old">xs:NCName
</del>
<ins class="diff-chg">xs:precisionDecimal
</ins>
</code>
and
<code>
<del class="diff-old">xs:ID
are
constrained
by
the
XML
1.0
rules.
Authors
of
conformance
requirements
</del>
<ins class="diff-chg">xs:dateTimeStamp
</ins></code>.<ins class="diff-chg">
This
specification
provides
some
limited
support
</ins>
for
the
<del class="diff-old">use
</del>
<ins class="diff-chg">latter,
but
does
not
yet
include
support
for
</ins><code><ins class="diff-chg">
xs:precisionDecimal
</ins></code>.<ins class="diff-chg">
This
is
likely
to
come
in
a
later
draft
</ins>
of
<del class="diff-old">Functions
and
Operators
should
state
clearly
</del>
<ins class="diff-chg">this
specification.
Furthermore,
XSD
1.1
includes
</ins>
the
<del class="diff-old">implications
for
conformance
</del>
<ins class="diff-chg">option
</ins>
of
<del class="diff-old">any
changes
to
</del>
<ins class="diff-chg">supporting
revised
definitions
of
types
such
as
</ins><code><ins class="diff-chg">
xs:NCName
</ins></code><ins class="diff-chg">
based
on
</ins>
the
rules
in
<ins class="diff-new">XML
1.1
rather
than
1.0.
The
rules
affecting
support
for
XSD
1.0
versus
XSD
1.1
and
XML
1.0
versus
XML
1.1
are
likely
to
be
refined
in
</ins>
later
<del class="diff-old">versions
</del>
<ins class="diff-chg">drafts
</ins>
of
<del class="diff-old">XML
Schema.
</del>
<ins class="diff-chg">this
specification.
</ins>
</p>
</div>
<p>
<ins class="diff-new">In
this
document,
text
labeled
as
an
example
or
as
a
Note
is
provided
for
explanatory
purposes
and
is
not
normative.
</ins></p>
</div>
<div class="div2">
<h3>
<a name="namespace-prefixes" id="namespace-prefixes">
</a>
1.2
Namespaces
and
Prefixes
</h3>
<p>
The
functions
and
operators
discussed
in
this
document
are
contained
in
one
of
<del class="diff-old">three
</del>
<ins class="diff-chg">several
</ins>
namespaces
(see
<a href= "#REC-xml-names">
[Namespaces
in
XML]
</a>
)
and
referenced
using
an
<code>
xs:QName
</code>.
</p>
<p>
<ins class="diff-new">This
document
uses
conventional
prefixes
to
refer
to
these
namespaces.
User-written
applications
can
choose
a
different
prefix
to
refer
to
the
namespace,
so
long
as
it
is
bound
to
the
correct
URI.
The
host
language
may
also
define
a
default
namespace
for
function
calls,
in
which
case
function
names
in
that
namespace
need
not
be
prefixed
at
all.
In
many
cases
the
default
namespace
will
be
</ins><code><ins class="diff-new">
http://www.w3.org/2005/xpath-functions
</ins></code>,<ins class="diff-new">
allowing
a
call
on
the
</ins><a href="#func-name"><code><ins class="diff-new">
fn:name
</ins></code></a><ins class="diff-new">
function
(for
example)
to
be
written
as
</ins><code><ins class="diff-new">
name()
</ins></code><ins class="diff-new">
rather
than
</ins><a href="#func-name"><code><ins class="diff-new">
fn:name()
</ins></code></a><ins class="diff-new">
;
in
this
document,
however,
all
example
function
calls
are
explicitly
prefixed.
</ins></p><p><ins class="diff-new">
The
URIs
of
the
namespaces
and
the
conventional
prefixes
associated
with
them
are:
</ins></p><ul><li><p><code><ins class="diff-new">
http://www.w3.org/2001/XMLSchema
</ins></code><ins class="diff-new">
for
constructors
--
associated
with
</ins><code><ins class="diff-new">
xs
</ins></code>.</p><p>
The
datatypes
and
constructor
functions
for
the
built-in
datatypes
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
and
in
<a href= "http://www.w3.org/TR/xpath-datamodel/#types">
Section
2.6
Types
</a>
<sup>
<small>
DM
</small>
</sup>
of
<a href= "#xpath-datamodel-11">
[XQuery
<del class="diff-old">1.0
</del>
and
XPath
<del class="diff-old">2.0
</del>
Data
<del class="diff-old">Model]
</del>
<ins class="diff-chg">Model
(XDM)
1.1]
</ins>
</a>
and
discussed
in
<a href="#constructor-functions">
<b>
<del class="diff-old">5
</del>
<ins class="diff-chg">17
</ins>
Constructor
Functions
</b>
</a>
are
in
the
XML
Schema
namespace,
<code>
http://www.w3.org/2001/XMLSchema
</code>,
and
named
in
this
document
using
the
<code>
xs
</code>
prefix.
</p>
</li>
<li>
<p>
<code>
<ins class="diff-new">http://www.w3.org/2005/xpath-functions
</ins></code><ins class="diff-new">
for
functions
—
associated
with
</ins><code><ins class="diff-new">
fn
</ins></code>.</p><p>
The
namespace
prefix
used
in
this
document
for
<ins class="diff-new">most
</ins>
functions
that
are
available
to
users
is
<code>
fn
</code>.
<del class="diff-old">Operator
</del>
</p>
</li>
<li>
<p>
<code>
<ins class="diff-chg">http://www.w3.org/2005/xpath-functions/math
</ins></code><ins class="diff-chg">
for
</ins>
functions
<del class="diff-old">are
named
</del>
<ins class="diff-chg">—
associated
</ins>
with
<del class="diff-old">the
</del>
<code>
<ins class="diff-chg">math
</ins></code>.</p><p><ins class="diff-chg">
This
namespace
is
used
for
some
mathematical
functions.
The
namespace
</ins>
prefix
<ins class="diff-new">used
in
this
document
for
these
functions
is
</ins>
<code>
<del class="diff-old">op
</del>
<ins class="diff-chg">math
</ins>
</code>.
<ins class="diff-new">These
functions
are
available
to
users
in
exactly
the
same
way
as
those
in
the
</ins><code><ins class="diff-new">
fn
</ins></code><ins class="diff-new">
namespace.
</ins></p></li><li><p><code><ins class="diff-new">
http://www.w3.org/2005/xqt-errors
</ins></code><ins class="diff-new">
—
associated
with
</ins><code><ins class="diff-new">
err
</ins></code>.</p><p><ins class="diff-new">
There
are
no
functions
in
this
namespace;
it
is
used
for
error
codes.
</ins>
</p>
<p>
This
document
uses
the
prefix
<code>
err
</code>
to
represent
the
namespace
URI
<code>
http://www.w3.org/2005/xqt-errors
</code>,
which
is
the
namespace
for
all
XPath
and
XQuery
error
codes
and
messages.
This
namespace
prefix
is
not
predeclared
and
its
use
in
this
document
is
not
normative.
</p>
<del class="diff-old">The
namespace
prefix
used
for
the
functions,
datatypes
and
errors
can
vary,
as
long
as
the
prefix
is
bound
to
the
correct
URI.
The
URIs
of
the
namespaces
and
the
default
prefixes
associated
with
them
are:
http://www.w3.org/2001/XMLSchema
for
constructors
--
associated
with
xs
.
http://www.w3.org/2005/xpath-functions
for
functions
--
associated
with
fn
.
http://www.w3.org/2005/xqt-errors
--
associated
with
err
.
</del>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
The
namespace
URI
associated
with
the
<code>
err
</code>
prefix
is
not
expected
to
change
from
one
version
of
this
document
to
another.
The
contents
of
this
namespace
may
be
extended
to
allow
additional
errors
to
be
returned.
</p>
</div>
</li>
<li>
<p>
<del class="diff-old">The
functions
defined
with
an
fn
prefix
are
callable
by
the
user.
</del>
Functions
defined
with
the
<code>
op
</code>
prefix
are
described
here
to
underpin
the
definitions
of
the
operators
in
<a href= "#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>,
<a href= "#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
and
<a href= "#xslt20">
[XSL
Transformations
(XSLT)
Version
2.0]
</a>.
These
functions
are
not
available
directly
to
users,
and
there
is
no
requirement
that
implementations
should
actually
provide
these
functions.
For
this
reason,
no
namespace
is
associated
with
the
<code>
op
</code>
prefix.
For
example,
multiplication
is
generally
associated
with
the
<code>
*
</code>
operator,
but
it
is
described
as
a
function
in
this
document:
</p>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-multiply
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
numeric
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric
</code>
</div>
</div>
</li>
</ul>
</div>
<div class="div2">
<h3>
<a name="func-overloading" id="func-overloading">
</a>
1.3
Function
Overloading
</h3>
<p>
In
general,
the
specifications
named
above
do
not
support
function
overloading
in
the
sense
that
functions
that
have
multiple
signatures
with
the
same
name
and
the
same
number
of
parameters
are
not
supported.
Consequently,
there
are
no
such
overloaded
functions
in
this
document
except
for
legacy
<a href="#xpath">
[XML
Path
Language
(XPath)
Version
1.0]
</a>
functions
such
as
<a href= "#func-string">
<code>
<del class="diff-old">fn:string()
</del>
<ins class="diff-chg">fn:string
</ins>
</code>
</a>,
which
accepts
a
single
parameter
of
a
variety
of
types.
In
addition,
it
should
be
noted
that
the
functions
defined
in
<a href="#numeric-functions">
<b>
<del class="diff-old">6
</del>
<ins class="diff-chg">4
</ins>
Functions
and
Operators
on
Numerics
</b>
</a>
that
accept
<code>
numeric
</code>
parameters
accept
arguments
of
type
<code>
xs:integer
</code>,
<code>
xs:decimal
</code>,
<code>
xs:float
</code>
or
<code>
xs:double
</code>.
See
<a href= "#func-signatures">
<b>
1.4
Function
Signatures
and
Descriptions
</b>
</a>.
Operators
such
as
"+"
may
be
overloaded.
This
document
does
define
some
functions
with
more
than
one
signature
with
the
same
name
and
different
number
of
parameters.
User-defined
functions
with
more
than
one
signature
with
the
same
name
and
different
number
of
parameters
are
also
supported.
</p>
</div>
<div class="div2">
<h3>
<a name="func-signatures" id="func-signatures">
</a>
1.4
Function
Signatures
and
Descriptions
</h3>
<p>
Each
function
is
defined
by
specifying
its
signature,
a
description
of
the
return
type
and
each
of
the
parameters
and
its
semantics.
For
many
functions,
examples
are
included
to
illustrate
their
use.
</p>
<p>
Each
function's
signature
is
presented
in
a
form
like
this:
</p>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:function-name
</code>
(
<code class= "arg">
$parameter-name
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
parameter-type
</code>,
<span class="varargs">...
</span>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
return-type
</code>
</div>
</div>
<p>
In
this
notation,
<b>
function-name
</b>,
in
bold-face,
is
the
name
of
the
function
whose
signature
is
being
specified.
If
the
function
takes
no
parameters,
then
the
name
is
followed
by
an
empty
parameter
list:
"
<code>
()
</code>
";
otherwise,
the
name
is
followed
by
a
parenthesized
list
of
parameter
declarations,
each
declaration
specifies
the
static
type
of
the
parameter,
in
italics,
and
a
descriptive,
but
non-normative,
name.
If
there
are
two
or
more
parameter
declarations,
they
are
separated
by
a
comma.
The
<em>
<code>
return-type
</code>
</em>
,
also
in
italics,
specifies
the
static
type
of
the
value
returned
by
the
function.
The
dynamic
type
returned
by
the
function
is
the
same
as
its
static
type
or
derived
from
the
static
type.
All
parameter
types
and
return
types
are
specified
using
the
SequenceType
notation
defined
in
<a href= "http://www.w3.org/TR/xpath20/#id-sequencetype-syntax">
Section
2.5.3
SequenceType
Syntax
</a>
<sup>
<small>
XP
</small>
</sup>.
</p>
<p>
<ins class="diff-new">One
function,
</ins><a href="#func-concat"><code><ins class="diff-new">
fn:concat
</ins></code></a>,<ins class="diff-new">
has
a
variable
number
of
arguments
(two
or
more).
More
strictly,
there
is
an
infinite
set
of
functions
having
the
name
</ins><a href= "#func-concat"><code><ins class="diff-new">
fn:concat
</ins></code></a>,<ins class="diff-new">
with
arity
ranging
from
2
to
infinity.
For
this
special
case,
a
single
function
signature
is
given,
with
an
ellipsis
indicating
an
indefinite
number
of
arguments.
</ins></p><p>
In
some
cases
the
word
"
<code>
numeric
</code>
"
is
used
in
function
signatures
as
a
shorthand
to
indicate
the
four
numeric
types:
<code>
xs:integer
</code>,
<code>
xs:decimal
</code>,
<code>
xs:float
</code>
and
<code>
xs:double
</code>.
For
example,
a
function
with
the
<del class="diff-old">signature
</del>
<ins class="diff-chg">signature:
</ins>
</p>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:numeric-function
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">...
</code>
</div>
</div>
<p>
represents
the
following
four
function
signatures:
</p>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:numeric-function
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:integer
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">...
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:numeric-function
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:decimal
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">...
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:numeric-function
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:float
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">...
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:numeric-function
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:double
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">...
</code>
</div>
</div>
<p>
For
most
functions
there
is
an
initial
paragraph
describing
what
the
function
does
followed
by
semantic
rules.
These
rules
are
meant
to
be
followed
in
the
order
that
they
appear
in
this
document.
</p>
<p>
In
some
cases,
the
static
type
returned
by
a
function
depends
on
the
type(s)
of
its
argument(s).
These
special
functions
are
indicated
by
using
<em>
<b>
bold
italics
</b>
</em>
for
the
return
type.
The
semantic
rules
specifying
the
type
of
the
value
returned
are
documented
in
the
function
definition.
The
rules
are
described
more
formally
in
<a href= "http://www.w3.org/TR/xquery-semantics/#function_rules">
Section
7.2
Standard
functions
with
specific
static
typing
rules
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
<p>
The
function
name
is
a
<code>
QName
</code>
as
defined
in
<a href= "#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
and
must
adhere
to
its
syntactic
conventions.
Following
<a href= "#xpath">
[XML
Path
Language
(XPath)
Version
1.0]
</a>,
function
names
are
composed
of
English
words
separated
by
hyphens,"-".
If
a
function
name
contains
a
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
datatype
name,
it
may
have
intercapitalized
spelling
and
is
used
in
the
function
name
as
such.
For
example,
<a href= "#func-timezone-from-dateTime">
<code>
fn:timezone-from-dateTime
</code>
</a>.
</p>
<p>
Rules
for
passing
parameters
to
operators
are
described
in
the
relevant
sections
of
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
and
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>.
For
example,
the
rules
for
passing
parameters
to
arithmetic
operators
are
described
in
<a href= "http://www.w3.org/TR/xpath20/#id-arithmetic">
Section
3.4
Arithmetic
Expressions
</a>
<sup>
<small>
XP
</small>
</sup>.
Specifically,
rules
for
parameters
of
type
<code>
xs:untypedAtomic
</code>
and
the
empty
sequence
are
specified
in
this
section.
</p>
<p>
As
is
customary,
the
parameter
type
name
indicates
that
the
function
or
operator
accepts
arguments
of
that
type,
or
types
derived
from
it,
in
that
position.
This
is
called
<em>
subtype
substitution
</em>
(See
<a href= "http://www.w3.org/TR/xpath20/#id-sequencetype-matching">
Section
2.5.4
SequenceType
Matching
</a>
<sup>
<small>
XP
</small>
</sup>
).
In
addition,
numeric
type
instances
and
instances
of
type
<code>
xs:anyURI
</code>
can
be
promoted
to
produce
an
argument
of
the
required
type.
(See
<a href= "http://www.w3.org/TR/xpath20/#promotion">
Section
B.1
Type
Promotion
</a>
<sup>
<small>
XP
</small>
</sup>
).
</p>
<ol class="enumar">
<li>
<p>
<em>
Subtype
Substitution
</em>:
A
derived
type
may
substitute
for
its
base
type.
In
particular,
<code>
xs:integer
</code>
may
be
used
where
<code>
xs:decimal
</code>
is
expected.
</p>
</li>
<li>
<p>
<em>
Numeric
Type
Promotion
</em>:
<code>
xs:decimal
</code>
may
be
promoted
to
<code>
xs:float
</code>
or
<code>
xs:double
</code>.
Promotion
to
<code>
xs:double
</code>
should
be
done
directly,
not
via
<code>
xs:float
</code>,
to
avoid
loss
of
precision.
</p>
</li>
<li>
<p>
<em>
anyURI
Type
Promotion
</em>:
A
value
of
type
<code>
xs:anyURI
</code>
can
be
promoted
to
the
type
<code>
xs:string
</code>.
</p>
</li>
</ol>
<p>
Some
functions
accept
a
single
value
or
the
empty
sequence
as
an
argument
and
some
may
return
a
single
value
or
the
empty
sequence.
This
is
indicated
in
the
function
signature
by
following
the
parameter
or
return
type
name
with
a
question
mark:
"
<code>
?
</code>
",
indicating
that
either
a
single
value
or
the
empty
sequence
must
appear.
See
below.
</p>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:function-name
</code>
(
<code class= "arg">
$parameter-name
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
parameter-type?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
return-type?
</code>
</div>
</div>
<p>
Note
that
this
function
signature
is
different
from
a
signature
in
which
the
parameter
is
omitted.
See,
for
example,
the
two
signatures
for
<a href="#func-string">
<code>
<del class="diff-old">fn:string()
</del>
<ins class="diff-chg">fn:string
</ins>
</code>
</a>.
In
the
first
signature,
the
parameter
is
omitted
and
the
argument
defaults
to
the
context
item,
referred
to
as
".".
In
the
second
signature,
the
argument
must
be
present
but
may
be
the
empty
sequence,
referred
to
as
"()."
</p>
<p>
Some
functions
accept
a
sequence
of
zero
or
more
values
as
an
argument.
This
is
indicated
by
following
the
name
of
type
of
the
items
in
the
sequence
with
<code>
*
</code>.
The
sequence
may
contain
zero
or
more
items
of
the
named
type.
For
example,
the
function
below
accepts
a
sequence
of
<code>
xs:double
</code>
and
returns
a
<code>
xs:double
</code>
or
the
empty
sequence.
</p>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:median
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:double*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:double?
</code>
</div>
</div>
</div>
<div class="div2">
<h3>
<a name="datatypes" id="datatypes">
</a>
1.5
<del class="diff-old">Namespace
Terminology
</del>
<ins class="diff-chg">Type
System
</ins>
</h3>
<p>
<del class="diff-old">This
document
uses
the
phrase
"namespace
URI"
to
identify
the
concept
identified
in
[Namespaces
in
XML]
as
"namespace
name",
</del>
<ins class="diff-chg">The
diagrams
below
show
how
nodes,
function
items,
primitive
simple
types,
</ins>
and
<del class="diff-old">the
phrase
"local
name"
to
identify
the
concept
identified
in
[Namespaces
in
XML]
as
"local
part".
It
also
uses
the
term
"expanded-QName"
</del>
<ins class="diff-chg">user
</ins>
defined
<del class="diff-old">below.
[Definition]
Expanded-QName
An
expanded-QName
is
a
pair
of
values
consisting
of
a
namespace
URI
and
</del>
<ins class="diff-chg">types
fit
together
into
</ins>
a
<del class="diff-old">local
name.
They
belong
to
the
value
space
of
</del>
<ins class="diff-chg">type
system.
This
type
system
comprises
two
distinct
hierarchies
that
both
include
</ins>
the
<del class="diff-old">[XML
Schema
Part
2:
Datatypes
Second
Edition]
datatype
xs:QName
.
When
this
document
refers
to
xs:QName
we
always
mean
</del>
<ins class="diff-chg">primitive
simple
types.
In
</ins>
the
<del class="diff-old">value
space,
i.e.
a
namespace
URI,
local
name
pair
(and
not
</del>
<ins class="diff-chg">diagrams,
connecting
lines
represent
relationships
between
derived
types
and
</ins>
the
<del class="diff-old">lexical
space
referring
to
constructs
of
</del>
<ins class="diff-chg">types
from
which
they
are
derived;
</ins>
the
<del class="diff-old">form
prefix:local-name).
1.6
Type
Hierarchy
The
diagram
below
shows
</del>
<ins class="diff-chg">arrowheads
point
toward
</ins>
the
<del class="diff-old">types
for
</del>
<ins class="diff-chg">type
from
</ins>
which
<del class="diff-old">functions
</del>
<ins class="diff-chg">they
</ins>
are
<del class="diff-old">defined
</del>
<ins class="diff-chg">derived.
The
dashed
line
represents
relationships
not
present
</ins>
in
this
<del class="diff-old">document.
These
include
the
built-in
types
defined
by
[XML
Schema
Part
2:
Datatypes
Second
Edition]
(shown
on
the
right)
as
well
as
types
defined
</del>
<ins class="diff-chg">diagram,
but
that
appear
</ins>
in
<del class="diff-old">[XQuery
1.0
and
XPath
2.0
Data
Model]
(shown
on
</del>
<ins class="diff-chg">one
of
</ins>
the
<del class="diff-old">left).
Solid
</del>
<ins class="diff-chg">other
diagrams.
Dotted
</ins>
lines
<del class="diff-old">connect
a
base
datatype
above
to
a
derived
datatype.
</del>
<ins class="diff-chg">represent
additional
relationships
that
follow
an
evident
pattern.
The
information
that
appears
in
each
diagram
is
recapitulated
in
tabular
form.
</ins></p><p><ins class="diff-chg">
The
</ins>
<code>
xs:IDREFS
</code>,
<code>
xs:NMTOKENS
</code>,
<ins class="diff-new">and
</ins>
<code>
xs:ENTITIES
</code>
<ins class="diff-new">types
</ins>
and
<ins class="diff-new">the
</ins>
<code>
user-defined
list
and
union
types
</code>
are
special
types
in
that
these
types
are
lists
or
unions
rather
than
<del class="diff-old">true
subtypes.
Dashed
lines
connect
a
union
type
above
with
its
component
</del>
types
<del class="diff-old">below.
</del>
<ins class="diff-chg">derived
by
extension
or
restriction.
</ins>
</p>
<p>
The
<del class="diff-old">information
in
the
above
</del>
<ins class="diff-chg">first
</ins>
diagram
<del class="diff-old">is
reproduced
below
in
tabular
form.
For
ease
of
presentation
</del>
<ins class="diff-chg">and
its
corresponding
table
illustrate
</ins>
the
<del class="diff-old">information
</del>
<ins class="diff-chg">"item"
type
hierarchy.
In
XDM,
items
include
node
types,
function
types,
and
built-in
atomic
types.
</ins></p><img src="XPathTypeHierarchy-1-items.png" alt= "Type hierarchy graphic, item hierarchy" /><p><ins class="diff-chg">
In
the
table,
each
type
whose
name
</ins>
is
<del class="diff-old">divided
into
three
tables.
The
first
table
shows
</del>
<ins class="diff-chg">indented
is
derived
from
</ins>
the
<del class="diff-old">top
three
layers
</del>
<ins class="diff-chg">type
whose
name
appears
nearest
above
it
with
one
less
level
</ins>
of
<del class="diff-old">the
hierarchy
starting
at
xs:anyType
.
</del>
<ins class="diff-chg">indentation.
</ins></p><table class="hierarchy" summary="Type summary" border="0"><tbody><tr><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
item
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
xs:anyAtomicType
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
node
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
attribute
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
user-defined
attribute
types
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
comment
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
document
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
user-defined
document
types
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
element
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
user-defined
element
types
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
processing-instruction
</ins></td></tr><tr><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"></td><td class="castOther" align="left" valign="middle"><ins class="diff-chg">
text
</ins></td></tr></tbody></table><p>
The
<del class="diff-old">second
</del>
<ins class="diff-chg">next
diagram
and
</ins>
table
<del class="diff-old">shows
</del>
<ins class="diff-chg">illustrate
</ins>
the
<ins class="diff-new">"any
type"
type
hierarchy,
in
which
all
</ins>
types
<ins class="diff-new">are
</ins>
derived
from
<ins class="diff-new">distinguished
type
</ins>
<code>
<del class="diff-old">xs:anyAtomicType
</del>
<ins class="diff-chg">xs:anyType
</ins>
</code>.
<del class="diff-old">The
third
table
shows
the
types
defined
in
[XQuery
1.0
and
XPath
2.0
Data
Model]
</del>
</p>
<img src="XPathTypeHierarchy-2-anyTypes.png" alt= "Type hierarchy graphic, anyType hierarchy" />
<p>
<del class="diff-old">Each
</del>
<ins class="diff-chg">In
the
table,
each
</ins>
type
whose
name
is
indented
is
derived
from
the
type
whose
name
appears
nearest
above
it
with
one
less
level
of
indentation.
</p>
<table class="hierarchy" summary="Type summary" border="0">
<tbody>
<tr>
<td class="castOther" align="left" valign="middle">
xs:anyType
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
user-defined
complex
types
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:untyped
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:anySimpleType
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
user-defined
list
and
union
types
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:IDREFS
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:NMTOKENS
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:ENTITIES
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:anyAtomicType
</td>
</tr>
</tbody>
</table>
<p>
The
<ins class="diff-new">final
diagram
and
</ins>
table
<del class="diff-old">below
shows
</del>
<ins class="diff-chg">show
all
of
</ins>
the
<del class="diff-old">datatypes
</del>
<ins class="diff-chg">atomic
types,
including
the
primitive
simple
types
and
the
built-in
types
</ins>
derived
from
<del class="diff-old">xs:anyAtomicType
.
</del>
<ins class="diff-chg">the
primitive
simple
types.
</ins>
This
includes
all
the
<ins class="diff-chg">built-in
datatypes
defined
in
</ins><a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
<del class="diff-old">built-in
datatypes
</del>
as
well
as
the
two
totally
ordered
subtypes
of
duration
defined
in
<del class="diff-old">Section
2.6
Types
DM
.
</del>
<ins class="diff-chg">.
</ins>
</p>
<img src="XPathTypeHierarchy-3-anyAtomicTypes.png" alt= "Type hierarchy graphic, anyAtomicType hierarchy" />
<p>
<del class="diff-old">Each
</del>
<ins class="diff-chg">In
the
table,
each
</ins>
type
whose
name
is
indented
is
derived
from
the
type
whose
name
appears
nearest
above
it
with
one
less
level
of
indentation.
</p>
<table class="hierarchy" summary="Type summary" border="0">
<tbody>
<tr>
<td class="castOther" align="left" valign="middle">
xs:untypedAtomic
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:dateTime
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
<ins class="diff-new">xs:dateTimeStamp
</ins></td></tr><tr><td class="castOther" align="left" valign="middle">
xs:date
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:time
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:duration
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:yearMonthDuration
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:dayTimeDuration
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:float
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:double
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
<ins class="diff-new">xs:precisionDecimal
</ins></td></tr><tr><td class="castOther" align="left" valign="middle">
xs:decimal
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:integer
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:nonPositiveInteger
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:negativeInteger
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:long
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:int
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:short
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:byte
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:nonNegativeInteger
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:unsignedLong
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:unsignedInt
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:unsignedShort
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:unsignedByte
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:positiveInteger
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:gYearMonth
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:gYear
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:gMonthDay
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:gDay
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:gMonth
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:string
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:normalizedString
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:token
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:language
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:NMTOKEN
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:Name
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:NCName
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:ID
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:IDREF
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:ENTITY
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:boolean
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:base64Binary
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:hexBinary
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:anyURI
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:QName
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:NOTATION
</td>
</tr>
</tbody>
</table>
<del class="diff-old">The
table
below
shows
the
type
hierarchy
for
the
types
introduced
in
[XQuery
1.0
and
XPath
2.0
Data
Model]
.
For
these
types,
each
type
whose
name
is
indented
is
a
component
of
the
union
type
whose
name
appears
nearest
above
with
one
less
level
of
indentation.
item
xs:anyAtomicType
node
attribute
user-defined
attribute
types
comment
document
user-defined
document
types
element
user-defined
element
types
processing-instruction
text
</del>
</div>
<div class="div2">
<h3>
<a name="terminology" id="terminology">
</a>
<del class="diff-old">1.7
</del>
<ins class="diff-chg">1.6
</ins>
Terminology
</h3>
<p>
The
terminology
used
to
describe
the
functions
and
operators
on
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
is
defined
in
the
body
of
this
specification.
The
terms
defined
in
<del class="diff-old">the
following
list
</del>
<ins class="diff-chg">this
section
</ins>
are
used
in
building
those
<del class="diff-old">definitions:
</del>
<ins class="diff-chg">definitions
</ins></p><div class="div3"><h4><a name="namespace-terminology" id= "namespace-terminology"></a><ins class="diff-chg">
1.6.1
Namespaces
and
URIs
</ins></h4><p><ins class="diff-chg">
This
document
uses
the
phrase
"namespace
URI"
to
identify
the
concept
identified
in
</ins><a href="#REC-xml-names"><ins class="diff-chg">
[Namespaces
in
XML]
</ins></a><ins class="diff-chg">
as
"namespace
name",
and
the
phrase
"local
name"
to
identify
the
concept
identified
in
</ins><a href= "#REC-xml-names"><ins class="diff-chg">
[Namespaces
in
XML]
</ins></a><ins class="diff-chg">
as
"local
part".
</ins></p><p><ins class="diff-chg">
It
also
uses
the
term
"expanded-QName"
defined
below.
</ins></p><p><span class="termdef"><a name="expanded-name" id= "expanded-name"></a><ins class="diff-chg">
[Definition]
An
</ins><b><ins class="diff-chg">
expanded-QName
</ins></b><ins class="diff-chg">
is
a
pair
of
values
consisting
of
a
namespace
URI
and
a
local
name.
They
belong
to
the
value
space
of
the
</ins><a href="#xmlschema-2"><ins class="diff-chg">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a><ins class="diff-chg">
datatype
</ins><code><ins class="diff-chg">
xs:QName
</ins></code>.<ins class="diff-chg">
When
this
document
refers
to
</ins><code><ins class="diff-chg">
xs:QName
</ins></code><ins class="diff-chg">
we
always
mean
the
value
space,
i.e.
a
namespace
URI,
local
name
pair
(and
not
the
lexical
space
referring
to
constructs
of
the
form
prefix:local-name).
</ins></span></p><p><ins class="diff-chg">
The
term
URI
is
used
as
follows:
</ins></p><p><span class="termdef"><a name="dt-uri" id= "dt-uri"></a><ins class="diff-chg">
[Definition]
Within
this
specification,
the
term
</ins><b><ins class="diff-chg">
URI
</ins></b><ins class="diff-chg">
refers
to
Universal
Resource
Identifiers
as
defined
in
</ins><a href="#rfc3986"><ins class="diff-chg">
[RFC
3986]
</ins></a><ins class="diff-chg">
and
extended
in
</ins><a href= "#rfc3987"><ins class="diff-chg">
[RFC
3987]
</ins></a><ins class="diff-chg">
with
a
new
name
</ins><b><ins class="diff-chg">
IRI
</ins></b>.<ins class="diff-chg">
The
term
</ins><b><ins class="diff-chg">
URI
Reference
</ins></b>,<ins class="diff-chg">
unless
otherwise
stated,
refers
to
a
string
in
the
lexical
space
of
the
</ins><code><ins class="diff-chg">
xs:anyURI
</ins></code><ins class="diff-chg">
datatype
as
defined
in
</ins><a href="#xmlschema-2"><ins class="diff-chg">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a>.</span></p><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b></p><p><ins class="diff-chg">
Note
that
this
means,
in
practice,
that
where
this
specification
requires
a
"URI
Reference",
an
IRI
as
defined
in
</ins><a href= "#rfc3987"><ins class="diff-chg">
[RFC
3987]
</ins></a><ins class="diff-chg">
will
be
accepted,
provided
that
other
relevant
specifications
also
permit
an
IRI.
The
term
URI
has
been
retained
in
preference
to
IRI
to
avoid
introducing
new
names
for
concepts
such
as
"Base
URI"
that
are
defined
or
referenced
across
the
whole
family
of
XML
specifications.
Note
also
that
the
definition
of
</ins><code><ins class="diff-chg">
xs:anyURI
</ins></code><ins class="diff-chg">
is
a
wider
definition
than
the
definition
in
</ins><a href="#rfc3987"><ins class="diff-chg">
[RFC
3987]
</ins></a><ins class="diff-chg">
;
for
example
it
does
not
require
non-ASCII
characters
to
be
escaped.
</ins>
</p>
</div>
</div>
<div class="div3">
<h4>
<a name="conformance-terminology" id= "conformance-terminology">
</a>
<ins class="diff-new">1.6.2
Conformance
terminology
</ins></h4>
<dl>
<dt class="label">
<span class="termdef">
<a name="compatibility" id= "compatibility">
</a>
[Definition]
<b>
for
compatibility
</b>
</span>
</dt>
<dd>
<p>
A
feature
of
this
specification
included
to
ensure
that
implementations
that
use
this
feature
remain
compatible
with
<a href="#xpath">
[XML
Path
Language
(XPath)
Version
1.0]
</a>
</p>
</dd>
<dt class="label">
<span class="termdef">
<a name="may" id= "may">
</a>
[Definition]
<b>
may
</b>
</span>
</dt>
<dd>
<p>
Conforming
documents
and
processors
are
permitted
to,
but
need
not,
behave
as
described.
</p>
</dd>
<dt class="label">
<span class="termdef">
<a name="must" id= "must">
</a>
[Definition]
<b>
must
</b>
</span>
</dt>
<dd>
<p>
Conforming
documents
and
processors
are
required
to
behave
as
described;
otherwise,
they
are
either
non-conformant
or
else
in
error.
</p>
</dd>
<dt class="label">
<span class="termdef">
<a name= "implementation-defined" id= "implementation-defined">
</a>
[Definition]
<b>
implementation-defined
</b>
</span>
</dt>
<dd>
<p>
Possibly
differing
between
implementations,
but
specified
and
documented
by
the
implementor
for
each
particular
implementation.
</p>
</dd>
<dt class="label">
<span class="termdef">
<a name= "implementation-dependent" id= "implementation-dependent">
</a>
[Definition]
<b>
implementation-dependent
</b>
</span>
</dt>
<dd>
<p>
Possibly
differing
between
implementations,
but
not
specified
by
this
or
other
W3C
specification,
and
not
required
to
be
specified
by
the
implementor
for
any
particular
implementation.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="properties-of-functions" id= "properties-of-functions">
</a>
<del class="diff-old">[Definition]
execution
scope
</del>
<ins class="diff-chg">1.6.3
Properties
of
functions
</ins></h4>
<p>
<del class="diff-old">The
scope
over
which
any
</del>
<ins class="diff-chg">This
section
is
concerned
with
the
question
of
whether
</ins>
two
calls
on
a
<ins class="diff-new">function,
with
the
same
arguments,
may
produce
different
results.
</ins></p><p><span class="termdef"><a name="execution-scope" id= "execution-scope"></a><ins class="diff-new">
[Definition]
Two
</ins>
function
<del class="diff-old">would
</del>
<ins class="diff-chg">calls
are
said
to
</ins>
be
<del class="diff-old">executed.
</del>
<ins class="diff-chg">within
the
same
</ins><b><ins class="diff-chg">
execution
scope
</ins></b><ins class="diff-chg">
if
the
host
environment
defines
them
as
such.
</ins>
In
XSLT,
<del class="diff-old">it
applies
to
</del>
any
two
calls
<del class="diff-old">on
the
function
</del>
executed
during
the
same
<del class="diff-old">transformation.
</del>
<ins class="diff-chg">transformation
are
in
the
same
execution
scope.
</ins>
In
XQuery,
<del class="diff-old">it
applies
to
</del>
any
two
calls
executed
during
the
evaluation
of
a
top-level
expression
<del class="diff-old">i.e.
an
expression
not
contained
</del>
<ins class="diff-chg">are
</ins>
in
<del class="diff-old">any
other
expression.
</del>
<ins class="diff-chg">the
same
execution
scope.
</ins>
In
other
contexts,
the
<ins class="diff-new">execution
</ins>
scope
is
specified
by
the
host
environment
that
invokes
the
function
library.
</span>
</p>
<p>
<ins class="diff-chg">The
following
definition
explains
more
precisely
what
it
means
for
two
function
calls
to
return
the
same
result:
</ins></p><p>
<span class="termdef">
<a name="dt-identical" id= "dt-identical">
</a>
[Definition]
</span>
<ins class="diff-new">Two
values
are
defined
to
be
</ins>
<b>
<del class="diff-old">stable
</del>
<ins class="diff-chg">identical
</ins>
</b>
<ins class="diff-chg">if
they
contain
the
same
number
of
items
and
the
items
are
pairwise
identical.
Two
items
are
identical
if
and
only
if
one
of
the
following
conditions
applies:
</ins></p><ul><li>
<p>
<del class="diff-old">Most
</del>
<ins class="diff-chg">Both
items
are
atomic
values,
</ins>
of
<ins class="diff-new">precisely
</ins>
the
<del class="diff-old">functions
in
</del>
<ins class="diff-chg">same
type,
and
</ins>
the
<del class="diff-old">core
library
have
</del>
<ins class="diff-chg">values
are
equal
as
defined
using
</ins>
the
<del class="diff-old">property
that
calling
</del>
<code>
<ins class="diff-chg">eq
</ins></code><ins class="diff-chg">
operator,
using
the
Unicode
codepoint
collation
when
comparing
strings
</ins></p></li><li><p><ins class="diff-chg">
Both
items
are
nodes,
and
represent
</ins>
the
same
<ins class="diff-new">node
</ins></p></li><li><p><ins class="diff-new">
Both
items
are
</ins>
function
<del class="diff-old">twice
within
an
</del>
<ins class="diff-chg">items,
and
have
the
same
name
(or
absence
of
a
name),
arity,
function
signature,
and
closure
</ins></p></li></ul><p><ins class="diff-chg">
Some
functions
produce
results
that
depend
not
only
on
their
explicit
arguments,
but
also
on
the
static
and
dynamic
context.
</ins></p><p>
<del class="diff-old">·
execution
scope
·
</del>
<span class="termdef">
<a name="dt-contextual" id= "dt-contextual">
</a>
<del class="diff-old">with
</del>
<ins class="diff-chg">[Definition]
A
function
may
have
</ins>
the
<del class="diff-old">same
arguments
returns
</del>
<ins class="diff-chg">property
of
being
</ins><b><ins class="diff-chg">
contextual
</ins></b>:
the
<del class="diff-old">same
result:
these
</del>
<ins class="diff-chg">result
of
such
a
function
depends
on
the
values
of
properties
in
the
static
and
dynamic
evaluation
context
as
well
as
on
the
actual
supplied
arguments
(if
any).
</ins></span></p><p><ins class="diff-chg">
Contextual
</ins>
functions
<del class="diff-old">are
said
to
be
stable
.
This
category
includes
</del>
<ins class="diff-chg">fall
into
</ins>
a
number
of
<ins class="diff-new">categories:
</ins></p><ol class="enumar"><li><p><ins class="diff-new">
The
</ins>
functions
<del class="diff-old">such
as
</del>
<a href= "#func-current-date">
<code>
<del class="diff-old">fn:doc()
</del>
<ins class="diff-chg">fn:current-date
</ins>
</code>
</a>,
<a href= "#func-current-dateTime">
<code>
<del class="diff-old">fn:collection()
</del>
<ins class="diff-chg">fn:current-dateTime
</ins>
</code>
</a>,
<a href="#func-current-time">
<code>
<del class="diff-old">fn:current-dateTime()
</del>
<ins class="diff-chg">fn:current-time
</ins>
</code>
</a>,
<a href= "#func-implicit-timezone">
<code>
<del class="diff-old">fn:current-date
</del>
<ins class="diff-chg">fn:implicit-timezone
</ins>
</code>
</a>,
<a href= "#func-adjust-date-to-timezone">
<code>
<ins class="diff-chg">fn:adjust-date-to-timezone
</ins></code></a>,<a href= "#func-adjust-dateTime-to-timezone"><code><ins class="diff-chg">
fn:adjust-dateTime-to-timezone
</ins></code></a>,
and
<a href= "#func-adjust-time-to-timezone">
<code>
<del class="diff-old">fn:current-time()
</del>
<ins class="diff-chg">fn:adjust-time-to-timezone
</ins>
</code>
</a>
<del class="diff-old">whose
result
depends
</del>
<ins class="diff-chg">depend
</ins>
on
<ins class="diff-new">properties
of
</ins>
the
<del class="diff-old">external
environment.
Where
the
function
returns
nodes,
stability
means
</del>
<ins class="diff-chg">dynamic
context
</ins>
that
<del class="diff-old">the
returned
nodes
</del>
are
<del class="diff-old">identical,
not
merely
equal
and
are
returned
</del>
<ins class="diff-chg">fixed
within
the
</ins><a title="execution scope" class="termref" href= "#execution-scope"><span class="arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
execution
scope
</ins><span class="arrow"><ins class="diff-chg">
·
</ins></span></a>.<ins class="diff-chg">
The
same
applies
to
a
number
of
functions
</ins>
in
the
<code>
<ins class="diff-new">op:
</ins></code><ins class="diff-new">
namespace
that
manipulate
dates
and
times
and
that
make
use
of
the
implicit
timezone.
These
functions
will
return
the
</ins>
same
<del class="diff-old">order.
</del>
<ins class="diff-chg">result
if
called
repeatedly
during
a
single
</ins><a title="execution scope" class="termref" href= "#execution-scope">
<del class="diff-old">Note:
</del>
<span class="arrow">
<ins class="diff-chg">·
</ins></span><ins class="diff-chg">
execution
scope
</ins><span class="arrow"><ins class="diff-chg">
·
</ins></span>
</a>.
</p>
</li>
<li>
<p>
<del class="diff-old">in
the
case
of
</del>
<ins class="diff-chg">The
functions
</ins><a href= "#func-position">
<code>
<del class="diff-old">fn:collection()
</del>
<ins class="diff-chg">fn:position
</ins>
</code>
<del class="diff-old">and
</del>
</a>,
<a href= "#func-last">
<code>
<del class="diff-old">fn:doc()
</del>
<ins class="diff-chg">fn:last
</ins></code></a>,<a href= "#func-id"><code><ins class="diff-chg">
fn:id
</ins></code></a>,<a href= "#func-idref"><code><ins class="diff-chg">
fn:idref
</ins></code></a>,<a href= "#func-element-with-id"><code><ins class="diff-chg">
fn:element-with-id
</ins></code></a>,<a href="#func-lang"><code><ins class="diff-chg">
fn:lang
</ins></code></a>,<a href= "#func-local-name"><code><ins class="diff-chg">
fn:local-name
</ins>
</code>
</a>,
<a href= "#func-name">
<code>
<ins class="diff-new">fn:name
</ins></code></a>,<a href= "#func-namespace-uri"><code><ins class="diff-new">
fn:namespace-uri
</ins></code></a>,<a href= "#func-normalize-space"><code><ins class="diff-new">
fn:normalize-space
</ins></code></a>,<a href="#func-number"><code><ins class="diff-new">
fn:number
</ins></code></a>,<a href= "#func-root"><code><ins class="diff-new">
fn:root
</ins></code></a>,<a href= "#func-string"><code><ins class="diff-new">
fn:string
</ins></code></a>,<ins class="diff-new">
and
</ins><a href= "#func-string-length"><code><ins class="diff-new">
fn:string-length
</ins></code></a><ins class="diff-new">
depend
on
</ins>
the
<del class="diff-old">requirement
for
stability
may
be
relaxed:
see
</del>
<ins class="diff-chg">focus.
These
functions
will
in
general
return
different
results
on
different
calls
if
</ins>
the
<del class="diff-old">function
definitions
for
details.
</del>
<ins class="diff-chg">focus
is
different.
</ins>
</p>
</li>
<li>
<p>
<del class="diff-old">Some
other
functions,
for
example
</del>
<ins class="diff-chg">The
function
</ins><a href= "#func-default-collation">
<code>
<del class="diff-old">fn:position()
</del>
<ins class="diff-chg">fn:default-collation
</ins>
</code>
</a>
and
<ins class="diff-chg">many
string-handling
operators
and
functions
depend
on
the
default
collation
and
the
in-scope
collations,
which
are
both
properties
of
the
static
context.
If
a
particular
call
of
one
of
these
functions
is
evaluated
twice
with
the
same
arguments
then
it
will
return
the
same
result
each
time
(because
the
static
context,
by
definition,
does
not
change
at
run
time).
However,
two
distinct
calls
(that
is,
two
calls
on
the
function
appearing
in
different
places
in
the
source
code)
may
produce
different
results
even
if
the
explicit
arguments
are
the
same.
</ins></p></li><li><p><ins class="diff-chg">
Functions
such
as
</ins><a href= "#func-static-base-uri">
<code>
<del class="diff-old">fn:last()
</del>
<ins class="diff-chg">fn:static-base-uri
</ins>
</code>
</a>,
<a href="#func-doc">
<code>
<ins class="diff-new">fn:doc
</ins></code></a>,<ins class="diff-new">
and
</ins><a href= "#func-collection"><code><ins class="diff-new">
fn:collection
</ins></code></a>
depend
on
<ins class="diff-new">other
aspects
of
</ins>
the
<del class="diff-old">dynamic
context
and
may,
therefore,
</del>
<ins class="diff-chg">static
context.
As
with
functions
that
depend
on
collations,
a
single
call
will
</ins>
produce
<del class="diff-old">different
</del>
<ins class="diff-chg">the
same
</ins>
results
<ins class="diff-new">on
</ins>
each
<del class="diff-old">time
they
</del>
<ins class="diff-chg">call
if
the
explicit
arguments
</ins>
are
<del class="diff-old">called.
These
functions
</del>
<ins class="diff-chg">the
same,
but
two
calls
appearing
in
different
places
in
the
source
code
may
produce
different
results.
</ins></p></li></ol><p><span class="termdef"><a name="dt-implicit-arguments" id= "dt-implicit-arguments"></a><ins class="diff-chg">
[Definition]
For
a
</ins><a title= "contextual" class="termref" href="#dt-contextual"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
contextual
</ins><span class="arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
function,
the
parts
of
the
context
on
which
it
depends
</ins>
are
<del class="diff-old">said
</del>
<ins class="diff-chg">referred
</ins>
to
<del class="diff-old">be
</del>
<ins class="diff-chg">as
</ins>
<b>
<del class="diff-old">contextual
</del>
<ins class="diff-chg">implicit
arguments
</ins>
</b>.
</span>
</p>
<p>
<span class="termdef">
<a name="stable" id= "stable">
</a>
[Definition]
<del class="diff-old">URI
and
URI
reference
</del>
<ins class="diff-chg">A
function
that
is
guaranteed
to
produce
</ins><a title="identical" class="termref" href= "#dt-identical">
<span class="arrow">
<ins class="diff-new">·
</ins></span><ins class="diff-new">
identical
</ins><span class= "arrow"><ins class="diff-new">
·
</ins>
</span>
<del class="diff-old">Within
this
specification,
</del>
</a>
<ins class="diff-chg">results
from
repeated
calls
if
</ins>
the
<del class="diff-old">term
"URI"
refers
</del>
<ins class="diff-chg">explicit
and
implicit
arguments
are
identical
is
referred
</ins>
to
<del class="diff-old">Universal
Resource
Identifiers
</del>
as
<b>
<ins class="diff-new">stable
</ins></b>.</span></p><p><ins class="diff-new">
All
functions
</ins>
defined
in
<del class="diff-old">[RFC
3986]
and
extended
in
[RFC
3987]
</del>
<ins class="diff-chg">this
specification
are
</ins><a title= "stable" class="termref" href="#stable"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
stable
</ins><span class="arrow"><ins class="diff-chg">
·
</ins></span>
</a>
<del class="diff-old">with
a
new
name
"IRI".
The
term
"URI
Reference",
</del>
unless
otherwise
<del class="diff-old">stated,
refers
to
a
string
in
the
lexical
space
of
</del>
<ins class="diff-chg">stated.
Exceptions
include
</ins>
the
<ins class="diff-new">following:
</ins></p><ul><li><p><ins class="diff-new">
Some
functions
(such
as
</ins><a href= "#func-distinct-values">
<code>
<del class="diff-old">xs:anyURI
</del>
<ins class="diff-chg">fn:distinct-values
</ins>
</code>
<del class="diff-old">datatype
as
defined
in
[XML
Schema
Part
2:
Datatypes
Second
Edition]
.
Note
that
this
means,
</del>
</a>
<ins class="diff-chg">and
</ins><a href="#func-unordered"><code><ins class="diff-chg">
fn:unordered
</ins></code></a><ins class="diff-chg">
)
produce
results
</ins>
in
<del class="diff-old">practice,
that
where
this
specification
requires
a
"URI
Reference",
</del>
an
<del class="diff-old">IRI
as
defined
in
[RFC
3987]
</del>
<a title="implementation-defined" class="termref" href="#implementation-defined">
<span class= "arrow">
<ins class="diff-chg">·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
or
</ins><a title="implementation dependent" class= "termref" href="#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span>
</a>
<ins class="diff-new">order.
In
such
cases
there
is
no
guarantee
that
the
order
of
results
from
different
calls
</ins>
will
be
<del class="diff-old">accepted,
provided
that
other
relevant
specifications
also
permit
an
IRI.
The
term
URI
has
been
retained
in
preference
</del>
<ins class="diff-chg">the
same.
These
functions
are
said
</ins>
to
<del class="diff-old">IRI
</del>
<ins class="diff-chg">be
</ins><b><ins class="diff-chg">
ordering-unstable
</ins></b>.</p></li><li><p><ins class="diff-chg">
The
function
</ins><a href= "#func-analyze-string"><code><ins class="diff-chg">
fn:analyze-string
</ins></code></a><ins class="diff-chg">
constructs
an
element
node
</ins>
to
<del class="diff-old">avoid
introducing
new
names
for
concepts
such
as
"Base
URI"
</del>
<ins class="diff-chg">represent
its
results.
There
is
no
guarantee
</ins>
that
<del class="diff-old">are
defined
or
referenced
across
</del>
<ins class="diff-chg">repeated
calls
with
</ins>
the
<del class="diff-old">whole
family
of
XML
specifications.
Note
also
that
</del>
<ins class="diff-chg">same
arguments
will
return
</ins>
the
<del class="diff-old">definition
</del>
<ins class="diff-chg">same
identical
node
(in
the
sense
</ins>
of
<ins class="diff-new">the
</ins>
<code>
<del class="diff-old">xs:anyURI
</del>
<ins class="diff-chg">is
</ins>
</code>
<ins class="diff-new">operator).
Such
a
function
is
said
to
be
</ins><b><ins class="diff-new">
identity-unstable
</ins></b>.</p></li><li><p><ins class="diff-new">
Some
functions
(such
as
</ins><a href= "#func-doc"><code><ins class="diff-new">
fn:doc
</ins></code></a><ins class="diff-new">
and
</ins><a href= "#func-collection"><code><ins class="diff-new">
fn:collection
</ins></code></a><ins class="diff-new">
)
create
new
nodes
by
reading
external
documents.
Such
functions
are
guaranteed
to
be
</ins><a title="stable" class="termref" href="#stable"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
stable
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
with
the
exception
that
an
implementation
</ins>
is
<ins class="diff-new">allowed
to
make
them
unstable
as
</ins>
a
<del class="diff-old">wider
definition
than
</del>
<ins class="diff-chg">user
option.
</ins></p></li></ul><p><ins class="diff-chg">
Where
</ins>
the
<del class="diff-old">definition
in
[RFC
3987]
</del>
<ins class="diff-chg">results
of
a
function
are
described
as
being
(to
a
greater
or
lesser
extent)
</ins><a title="implementation-defined" class= "termref" href="#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span>
</a>
<del class="diff-old">;
for
example
it
</del>
<ins class="diff-chg">or
</ins><a title="implementation dependent" class= "termref" href="#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>,<ins class="diff-chg">
this
</ins>
does
not
<del class="diff-old">require
non-ASCII
characters
to
</del>
<ins class="diff-chg">by
itself
remove
the
requirement
that
the
results
should
</ins>
be
<del class="diff-old">escaped.
</del>
<ins class="diff-chg">stable:
that
is,
that
repeated
calls
with
the
same
explicit
and
implicit
arguments
</ins><strong><ins class="diff-chg">
must
</ins></strong><ins class="diff-chg">
return
identical
results.
</ins>
</p>
</div>
</div>
</div>
<div class="div1">
<h2>
<a name="accessors" id="accessors">
</a>
2
Accessors
</h2>
<p>
Accessors
and
their
semantics
are
described
in
<a href= "#xpath-datamodel-11">
[XQuery
<del class="diff-old">1.0
</del>
and
XPath
<del class="diff-old">2.0
</del>
Data
<del class="diff-old">Model]
</del>
<ins class="diff-chg">Model
(XDM)
1.1]
</ins>
</a>.
Some
of
these
accessors
are
exposed
to
the
user
through
the
functions
described
below.
</p>
<table summary="Function summary" border="1" width="80%">
<col width="25%" span="1" />
<col width="25%" span="1" />
<col width="25%" span="1" />
<col width="25%" span="1" />
<thead>
<tr>
<th>
Function
</th>
<th>
Accessor
</th>
<th>
Accepts
</th>
<th>
Returns
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-node-name">
<code>
fn:node-name
</code>
</a>
</td>
<td>
<code>
node-name
</code>
</td>
<td>
an
optional
node
</td>
<td>
zero
or
one
<code>
xs:QName
</code>
</td>
</tr>
<tr>
<td>
<a href="#func-nilled">
<code>
fn:nilled
</code>
</a>
</td>
<td>
<code>
nilled
</code>
</td>
<td>
a
node
</td>
<td>
an
optional
<code>
xs:boolean
</code>
</td>
</tr>
<tr>
<td>
<a href="#func-string">
<code>
fn:string
</code>
</a>
</td>
<td>
<code>
string-value
</code>
</td>
<td>
an
optional
item
or
no
argument
</td>
<td>
<code>
xs:string
</code>
</td>
</tr>
<tr>
<td>
<a href="#func-data">
<code>
fn:data
</code>
</a>
</td>
<td>
<code>
typed-value
</code>
</td>
<td>
zero
or
more
items
</td>
<td>
a
sequence
of
atomic
values
</td>
</tr>
<tr>
<td>
<a href="#func-base-uri">
<code>
fn:base-uri
</code>
</a>
</td>
<td>
<code>
base-uri
</code>
</td>
<td>
an
optional
node
or
no
argument
</td>
<td>
zero
or
one
<code>
xs:anyURI
</code>
</td>
</tr>
<tr>
<td>
<a href= "#func-document-uri">
<code>
fn:document-uri
</code>
</a>
</td>
<td>
<code>
document-uri
</code>
</td>
<td>
an
optional
node
</td>
<td>
zero
or
one
<code>
xs:anyURI
</code>
</td>
</tr>
</tbody>
</table>
<div class="div2">
<h3>
<a name="func-node-name" id="func-node-name">
</a>
2.1
fn:node-name
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
name
of
a
node,
as
an
</ins><code><ins class="diff-new">
xs:QName
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:node-name
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
node()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:QName?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
an
expanded-QName
for
node
kinds
that
can
have
names.
For
other
kinds
of
nodes
it
returns
the
empty
sequence.
</del>
If
<code>
$arg
</code>
is
the
empty
sequence,
the
empty
sequence
is
returned.
</p>
<p>
<ins class="diff-new">Otherwise,
the
function
returns
the
result
of
the
</ins><code><ins class="diff-new">
dm:node-name
</ins></code><ins class="diff-new">
accessor
as
defined
in
</ins><a href= "#"><ins class="diff-new">
[xpath-datamodel]
</ins></a><ins class="diff-new">
(see
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#dm-node-name"><ins class="diff-new">
Section
5.11
node-name
Accessor
</ins></a><sup><small><ins class="diff-new">
DM
</ins></small></sup><ins class="diff-new">
).
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
For
element
and
attribute
nodes,
the
name
of
the
node
is
returned
as
an
</ins><code><ins class="diff-new">
xs:QName
</ins></code>,<ins class="diff-new">
retaining
the
prefix,
namespace
URI,
and
local
part.
</ins></p><p><ins class="diff-new">
For
processing
instructions,
the
name
of
the
node
is
returned
as
an
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
in
which
the
prefix
and
namespace
URI
are
absent.
</ins></p><p><ins class="diff-new">
For
a
namespace
node,
the
function
returns
an
empty
sequence
if
the
node
represents
the
default
namespace;
otherwise
it
returns
an
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
in
which
prefix
and
namespace
URI
are
absent
and
the
local
part
is
the
the
namespace
prefix
being
bound).
</ins></p><p><ins class="diff-new">
For
all
other
kinds
of
node,
the
function
returns
the
empty
sequence.
</ins></p></dd></dl>
</div>
<div class="div2">
<h3>
<a name="func-nilled" id="func-nilled">
</a>
2.2
fn:nilled
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
for
an
element
that
is
</ins><b><ins class="diff-new">
nilled
</ins></b>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:nilled
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
node()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
an
</del>
<ins class="diff-chg">If
</ins>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<del class="diff-old">indicating
whether
the
argument
node
</del>
is
<del class="diff-old">"nilled".
If
</del>
the
<del class="diff-old">argument
</del>
<ins class="diff-chg">empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise
the
function
returns
the
result
of
the
</ins><code><ins class="diff-chg">
dm:nilled
</ins></code><ins class="diff-chg">
accessor
as
defined
in
</ins><a href= "#"><ins class="diff-chg">
[xpath-datamodel]
</ins></a><ins class="diff-chg">
(see
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#dm-nilled"><ins class="diff-chg">
Section
5.9
nilled
Accessor
</ins></a><sup><small><ins class="diff-chg">
DM
</ins></small></sup><ins class="diff-chg">
).
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code>
is
not
an
element
node,
<ins class="diff-new">the
function
</ins>
returns
the
empty
sequence.
</p>
<p>
If
<del class="diff-old">the
argument
</del>
<code>
<ins class="diff-chg">$arg
</ins></code>
is
<ins class="diff-new">an
untyped
element
node,
</ins>
the
<del class="diff-old">empty
sequence,
</del>
<ins class="diff-chg">function
</ins>
returns
<ins class="diff-new">false.
</ins></p><p><ins class="diff-new">
In
practice,
</ins>
the
<del class="diff-old">empty
sequence.
</del>
<ins class="diff-chg">function
returns
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
only
for
an
element
node
that
has
the
attribute
</ins><code><ins class="diff-chg">
xsi:nil="true"
</ins></code><ins class="diff-chg">
and
that
is
successfully
validated
against
a
schema
that
defines
the
element
to
be
nillable;
the
detailed
rules,
however,
are
defined
in
</ins><a href="#"><ins class="diff-chg">
[xpath-datamodel]
</ins></a>.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-string" id="func-string">
</a>
2.3
fn:string
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
value
of
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
represented
as
an
</ins><code><ins class="diff-new">
xs:string
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:string
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:string
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">In
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">zero-argument
version
</ins>
of
<ins class="diff-new">the
function,
</ins>
<code>
$arg
</code>
<del class="diff-old">represented
as
a
xs:string
.
If
no
argument
is
supplied,
</del>
<ins class="diff-chg">defaults
to
</ins>
the
context
<del class="diff-old">item
(
.
</del>
<ins class="diff-chg">item.
That
is,
calling
</ins><code><ins class="diff-chg">
fn:string()
</ins>
</code>
<del class="diff-old">)
is
used
as
the
default
argument.
The
behavior
of
the
function
if
the
argument
</del>
is
<del class="diff-old">omitted
is
exactly
the
same
as
if
the
context
item
had
been
passed
as
the
argument.
If
the
context
item
is
undefined,
error
[
err:XPDY0002
]
XP
is
raised.
</del>
<ins class="diff-chg">equivalent
to
calling
</ins><code><ins class="diff-chg">
fn:string(.)
</ins></code>.
</p>
<p>
If
<code>
$arg
</code>
is
the
empty
sequence,
the
<ins class="diff-new">function
returns
the
</ins>
zero-length
<del class="diff-old">string
is
returned.
</del>
<ins class="diff-chg">string.
</ins>
</p>
<p>
If
<code>
$arg
</code>
is
a
node,
the
function
returns
the
string-value
of
the
node,
as
obtained
using
the
<code>
dm:string-value
</code>
accessor
defined
in
<del class="diff-old">the
</del>
<a href= "#">
<ins class="diff-chg">[xpath-datamodel]
</ins></a><ins class="diff-chg">
(see
</ins>
<a href= "http://www.w3.org/TR/xpath-datamodel/#dm-string-value">
Section
5.13
string-value
Accessor
</a>
<sup>
<small>
DM
</small>
<del class="diff-old">.
</del>
</sup>
<ins class="diff-chg">).
</ins>
</p>
<p>
If
<code>
$arg
</code>
is
an
atomic
value,
<del class="diff-old">then
</del>
the
function
returns
the
<del class="diff-old">same
string
as
is
returned
by
</del>
<ins class="diff-chg">result
of
</ins>
the
expression
<del class="diff-old">"
</del>
<code>
$arg
cast
as
xs:string
</code>
<del class="diff-old">"
</del>
(see
<a href="#casting">
<b>
<del class="diff-old">17
</del>
<ins class="diff-chg">18
</ins>
Casting
</b>
</a>
).
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
In
the
zero-argument
version
of
the
function,
if
the
context
item
is
undefined,
error
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002"><ins class="diff-new">
err:XPDY0002
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup><ins class="diff-new">
is
raised.
</ins></p><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
a
function
item,
error
[
</ins><a href= "#ERRFOTY0014" title="err:FOTY0014"><ins class="diff-new">
err:FOTY0014
</ins></a><ins class="diff-new">
]
is
raised.
</ins></p></dd></dl>
</div>
<div class="div2">
<h3>
<a name="func-data" id="func-data">
</a>
2.4
fn:data
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
result
of
atomizing
a
sequence,
that
is,
replacing
all
nodes
in
the
sequence
by
their
typed
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:data
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType*
</code>
</div>
</div>
<del class="diff-old">Summary:
fn:data
takes
a
sequence
of
items
and
returns
a
sequence
of
atomic
values.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
result
of
<code>
fn:data
</code>
is
the
sequence
of
atomic
values
produced
by
applying
the
following
rules
to
each
item
in
<code>
$arg
</code>:
</p>
<ul>
<li>
<p>
If
the
item
is
an
atomic
value,
it
is
<del class="diff-old">returned.
</del>
<ins class="diff-chg">appended
to
the
result
sequence.
</ins>
</p>
</li>
<li>
<p>
If
the
item
is
a
<del class="diff-old">node:
If
</del>
<ins class="diff-chg">node,
</ins>
the
<del class="diff-old">node
does
not
have
a
</del>
typed
value
<del class="diff-old">an
error
</del>
<ins class="diff-chg">of
the
node
</ins>
is
<del class="diff-old">raised
[
err:FOTY0012
].
Otherwise,
fn:data()
returns
</del>
<ins class="diff-chg">appended
to
</ins>
the
<ins class="diff-new">result
sequence.
The
</ins>
typed
value
<ins class="diff-new">is
a
sequence
</ins>
of
<ins class="diff-new">zero
or
more
atomic
values:
specifically,
</ins>
the
<del class="diff-old">node
as
defined
by
</del>
<ins class="diff-chg">result
of
</ins>
the
<del class="diff-old">accessor
function
</del>
<code>
dm:typed-value
</code>
<ins class="diff-new">accessor
as
defined
</ins>
in
<a href= "#">
<ins class="diff-new">[xpath-datamodel]
</ins></a><ins class="diff-new">
(See
</ins>
<a href= "http://www.w3.org/TR/xpath-datamodel/#dm-typed-value">
Section
5.15
typed-value
Accessor
</a>
<sup>
<small>
DM
</small>
<del class="diff-old">.
</del>
</sup>
<ins class="diff-chg">).
</ins>
</p>
</li>
</ul>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
an
item
in
the
sequence
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
a
node
that
does
not
have
a
typed
value
then
an
error
is
raised
[
</ins><a href= "#ERRFOTY0012" title="err:FOTY0012"><ins class="diff-chg">
err:FOTY0012
</ins></a><ins class="diff-chg">
].
</ins></p><p><ins class="diff-chg">
If
an
item
in
the
sequence
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
a
function
item
then
an
error
is
raised
[
</ins><a href="#ERRFOTY0013" title= "err:FOTY0013"><ins class="diff-chg">
err:FOTY0013
</ins></a><ins class="diff-chg">
].
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
The
process
of
applying
the
</ins><code><ins class="diff-chg">
fn:data
</ins></code><ins class="diff-chg">
function
to
a
sequence
is
referred
to
as
</ins><code><ins class="diff-chg">
atomization
</ins></code>.<ins class="diff-chg">
In
many
cases
an
explicit
call
on
</ins><code><ins class="diff-chg">
fn:data
</ins></code><ins class="diff-chg">
is
not
required,
because
atomization
is
invoked
implicitly
when
a
node
or
sequence
of
nodes
is
supplied
in
a
context
where
an
atomic
value
or
sequence
of
atomic
values
is
required.
</ins></p></dd></dl>
</div>
<div class="div2">
<h3>
<a name="func-base-uri" id="func-base-uri">
</a>
2.5
fn:base-uri
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
base
URI
of
a
node.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:base-uri
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyURI?
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:base-uri
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
node()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyURI?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
value
</del>
<ins class="diff-chg">The
zero-argument
version
</ins>
of
the
<del class="diff-old">base-uri
URI
property
for
$arg
as
defined
by
the
accessor
</del>
function
<del class="diff-old">dm:base-uri()
for
that
kind
</del>
<ins class="diff-chg">returns
the
base
URI
</ins>
of
<del class="diff-old">node
in
Section
5.2
base-uri
Accessor
DM
.
If
$arg
is
not
specified,
</del>
the
<del class="diff-old">behavior
</del>
<ins class="diff-chg">context
node:
it
</ins>
is
<del class="diff-old">identical
</del>
<ins class="diff-chg">equivalent
</ins>
to
calling
<del class="diff-old">the
function
with
the
context
item
(
.
)
as
argument.
The
following
errors
</del>
<code>
<ins class="diff-chg">fn:base-uri(.)
</ins></code>.<ins class="diff-chg">
This
</ins>
may
<del class="diff-old">be
</del>
<ins class="diff-chg">result
in
an
error
being
</ins>
raised:
if
the
context
item
is
undefined
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002">
err:XPDY0002
</a>
]
<sup>
<small>
XP
</small>
</sup>
;
if
the
context
item
is
not
a
node
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004">
err:XPTY0004
</a>
]
<sup>
<small>
XP
</small>
</sup>.
</p>
<p>
<ins class="diff-new">The
single-argument
version
of
the
function
behaves
as
follows:
</ins></p><ol class="enumar"><li>
If
<code>
$arg
</code>
is
the
empty
sequence,
the
<ins class="diff-new">function
returns
the
</ins>
empty
<del class="diff-old">sequence
</del>
<ins class="diff-chg">sequence.
</ins></li><li><ins class="diff-chg">
Otherwise,
the
function
returns
the
value
of
the
</ins><code><ins class="diff-chg">
dm:base-uri
</ins></code><ins class="diff-chg">
accessor
applied
to
the
node
</ins><code><ins class="diff-chg">
$arg
</ins></code>.<ins class="diff-chg">
This
accessor
</ins>
is
<del class="diff-old">returned.
</del>
<ins class="diff-chg">defined,
for
each
kind
of
node,
in
the
XDM
specification
(See
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#dm-base-uri"><ins class="diff-chg">
Section
5.2
base-uri
Accessor
</ins></a><sup><small><ins class="diff-chg">
DM
</ins></small></sup><ins class="diff-chg">
).
</ins></li></ol><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b>
</p>
<del class="diff-old">Document,
</del>
<ins class="diff-chg">As
explained
in
XDM,
document,
</ins>
element
and
processing-instruction
nodes
have
a
base-uri
property
which
may
be
empty.
The
base-uri
property
<del class="diff-old">of
</del>
<ins class="diff-chg">for
</ins>
all
other
node
<del class="diff-old">types
</del>
<ins class="diff-chg">kinds
</ins>
is
the
empty
sequence.
The
<del class="diff-old">value
of
</del>
<ins class="diff-chg">dm:base-uri
accessor
returns
</ins>
the
base-uri
property
<del class="diff-old">is
returned
</del>
<ins class="diff-chg">of
a
node
</ins>
if
it
exists
and
is
<del class="diff-old">not
empty.
Otherwise,
if
the
node
has
a
parent,
</del>
<ins class="diff-chg">non-empty;
otherwise
it
returns
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">result
</ins>
of
<del class="diff-old">dm:base-uri()
applied
</del>
<ins class="diff-chg">applying
the
dm:base-uri
accessor
</ins>
to
its
<del class="diff-old">parent
is
returned,
</del>
<ins class="diff-chg">parent,
</ins>
recursively.
If
the
node
does
not
have
a
parent,
or
if
the
recursive
ascent
up
the
ancestor
chain
encounters
a
<ins class="diff-new">parentless
</ins>
node
whose
base-uri
property
is
<del class="diff-old">empty
and
it
does
not
have
a
parent,
</del>
<ins class="diff-chg">empty,
</ins>
the
empty
sequence
is
returned.
<ins class="diff-chg">In
the
case
of
namespace
nodes,
however,
the
result
is
always
an
empty
sequence
--
it
does
not
depend
on
the
base
URI
of
the
parent
element.
</ins></div>
<p>
See
also
<a href= "#func-static-base-uri">
<code>
fn:static-base-uri
</code>
</a>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
not
specified,
the
following
errors
may
be
raised:
if
the
context
item
is
undefined
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002"><ins class="diff-new">
err:XPDY0002
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup><ins class="diff-new">
;
if
the
context
item
is
not
a
node
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004"><ins class="diff-new">
err:XPTY0004
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup>.</p></dd></dl>
</div>
<div class="div2">
<h3>
<a name="func-document-uri" id="func-document-uri">
</a>
2.6
fn:document-uri
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
URI
of
a
resource
where
a
document
can
be
found,
if
available.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:document-uri
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
node()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyURI?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
value
of
the
document-uri
property
for
</del>
<ins class="diff-chg">If
</ins>
<code>
$arg
</code>
<del class="diff-old">as
defined
by
</del>
<ins class="diff-chg">is
the
empty
sequence,
</ins>
the
<del class="diff-old">dm:document-uri
accessor
</del>
function
<del class="diff-old">defined
in
Section
6.1.2
Accessors
DM
.
</del>
<ins class="diff-chg">returns
the
empty
sequence.
</ins>
</p>
<p>
If
<code>
$arg
</code>
is
<ins class="diff-new">not
a
document
node,
</ins>
the
<del class="diff-old">empty
sequence,
</del>
<ins class="diff-chg">function
returns
</ins>
the
empty
<del class="diff-old">sequence
is
returned.
</del>
<ins class="diff-chg">sequence.
</ins>
</p>
<p>
<del class="diff-old">Returns
the
empty
sequence
if
the
node
is
not
a
document
node.
</del>
Otherwise,
<ins class="diff-new">the
function
</ins>
returns
the
value
of
the
<code>
<del class="diff-old">dm:document-uri
</del>
<ins class="diff-chg">document-uri
</ins>
</code>
accessor
<del class="diff-old">of
the
document
node.
</del>
<ins class="diff-chg">applied
to
</ins><code><ins class="diff-chg">
$arg
</ins></code>,<ins class="diff-chg">
as
defined
in
</ins><a href="#"><ins class="diff-chg">
[xpath-datamodel]
</ins></a><ins class="diff-chg">
(See
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#DocumentNodeAccessors"><ins class="diff-chg">
Section
6.1.2
Accessors
</ins></a><sup><small><ins class="diff-chg">
DM
</ins></small></sup><ins class="diff-chg">
).
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
In
the
case
of
a
document
node
<code>
$D
</code>
returned
by
the
<a href="#func-doc">
<code>
fn:doc
</code>
</a>
function,
or
a
document
node
at
the
root
of
a
tree
containing
a
node
returned
by
the
<a href="#func-collection">
<code>
fn:collection
</code>
</a>
function,
it
will
always
be
true
that
either
<code>
fn:document-uri($D)
</code>
returns
the
empty
sequence,
or
that
the
following
expression
is
true:
<a href= "#func-doc">
<code>
fn:doc(fn:document-uri($D))
</code>
</a>
is
<code>
$D
</code>.
It
is
implementation-defined
whether
this
guarantee
also
holds
for
document
nodes
obtained
by
other
means,
for
example
a
document
node
passed
as
the
initial
context
node
of
a
query
or
transformation.
</p>
</dd>
</dl>
</div>
</div>
<div class="div1">
<h2>
<a name="errors-and-diagnostics" id= "errors-and-diagnostics">
</a>
3
<del class="diff-old">The
Error
Function
</del>
<ins class="diff-chg">Errors
and
Diagnostics
</ins>
</h2>
<div class="div2">
<h3>
<a name="errors" id="errors">
</a>
<ins class="diff-new">3.1
Raising
Errors
</ins></h3>
<p>
In
this
document,
as
well
as
in
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>,
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>,
and
<a href="#xquery-semantics">
[XQuery
1.0
and
XPath
2.0
Formal
Semantics]
</a>,
the
phrase
"an
error
is
raised"
is
used.
Raising
an
error
is
equivalent
to
<del class="diff-old">invoking
</del>
<ins class="diff-chg">calling
</ins>
the
<a href= "#func-error">
<code>
fn:error
</code>
</a>
function
defined
in
this
section
with
the
provided
error
code.
</p>
<p>
The
above
phrase
is
normally
accompanied
by
specification
of
a
specific
error,
to
wit:
"an
error
is
raised
[
<em>
error
code
</em>
]".
Each
error
defined
in
this
document
is
identified
by
an
<code>
xs:QName
</code>
that
is
in
the
<code>
http://www.w3.org/2005/xqt-errors
</code>
namespace,
represented
in
this
document
by
the
<code>
err
</code>
prefix.
It
is
this
<code>
xs:QName
</code>
that
is
actually
passed
as
an
argument
to
the
<a href="#func-error">
<code>
fn:error
</code>
<del class="diff-old">function
invocation.
Invocation
of
</del>
</a>
<ins class="diff-chg">function.
Calling
</ins>
this
function
raises
an
error.
For
a
more
detailed
treatment
of
error
handing,
see
<a href= "http://www.w3.org/TR/xpath20/#id-handling-dynamic">
Section
2.3.3
Handling
Dynamic
Errors
</a>
<sup>
<small>
XP
</small>
</sup>
and
<a href="http://www.w3.org/TR/xquery-semantics/#sec_fnerror">
Section
7.2.9
The
fn:error
function
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
<p>
The
<a href="#func-error">
<code>
fn:error
</code>
</a>
function
is
a
general
function
that
may
be
<del class="diff-old">invoked
</del>
<ins class="diff-chg">called
</ins>
as
above
but
may
also
be
<del class="diff-old">invoked
</del>
<ins class="diff-chg">called
</ins>
from
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
or
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>
applications
with,
for
example,
an
<code>
xs:QName
</code>
argument.
</p>
<div class="div3">
<h4>
<a name="func-error" id="func-error">
</a>
<ins class="diff-new">3.1.1
fn:error
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Calling
the
</ins><code><ins class="diff-new">
fn:error
</ins></code><ins class="diff-new">
function
raises
an
application-defined
error.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:error
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
none
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:error
</code>
(
<code class= "arg">
<del class="diff-old">$error
</del>
<ins class="diff-chg">$code
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:QName
</code>
)
<code class="as">
&#160;as&#160;
</code>
<code class="return-type">
none
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:error
</code>
(
<code class= "arg">
<del class="diff-old">$error
</del>
<ins class="diff-chg">$code
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:QName?
</code>,
<code class="arg">
$description
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
none
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:error
</code>
(
</td>
<td valign="baseline">
<code class="arg">
<del class="diff-old">$error
</del>
<ins class="diff-chg">$code
</ins>
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:QName?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$description
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$error-object
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
none
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
<ins class="diff-chg">This
function
never
returns
a
value.
Instead
it
always
raises
an
error.
</ins>
The
<ins class="diff-new">effect
of
the
error
is
identical
to
the
effect
of
dynamic
errors
raised
implicitly,
for
example
when
an
incorrect
argument
is
supplied
to
a
function.
</ins></p><p><ins class="diff-new">
The
parameters
to
the
</ins>
<code>
fn:error
</code>
function
<del class="diff-old">raises
an
</del>
<ins class="diff-chg">supply
information
that
is
associated
with
the
error
condition
and
that
is
made
available
to
a
caller
that
asks
for
information
about
the
</ins>
error.
<del class="diff-old">While
this
function
never
returns
</del>
<ins class="diff-chg">The
error
may
be
caught
either
by
the
host
language
(using
</ins>
a
<del class="diff-old">value,
an
</del>
<ins class="diff-chg">try/catch
construct
in
XSLT
or
XQuery,
for
example),
or
by
the
calling
application
or
external
processing
environment.
The
way
in
which
</ins>
error
<ins class="diff-new">information
</ins>
is
returned
to
the
external
processing
environment
<ins class="diff-new">is
</ins><a title="implementation dependent" class="termref" href="#implementation-dependent"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation
dependent
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a></p><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
fn:error
</ins></code><ins class="diff-new">
is
called
with
no
arguments,
then
its
behavior
is
the
same
</ins>
as
<del class="diff-old">an
</del>
<ins class="diff-chg">the
function
call:
</ins></p><div class="exampleInner"><pre><ins class="diff-chg">
 fn:error(fn:QName('http://www.w3.org/2005/xqt-errors', 'err:FOER0000')) 
</ins></pre></div><p><ins class="diff-chg">
If
</ins>
<code>
<del class="diff-old">xs:anyURI
</del>
<ins class="diff-chg">$code
</ins>
</code>
<del class="diff-old">or
an
</del>
<ins class="diff-chg">is
the
empty
sequence
then
the
effective
value
is
the
</ins>
<code>
xs:QName
<del class="diff-old">.
</del>
</code>
<ins class="diff-chg">constructed
by:
</ins></p><div class="exampleInner"><pre><ins class="diff-chg">
 fn:QName('http://www.w3.org/2005/xqt-errors', 'err:FOER0000')
</ins></pre></div><p><ins class="diff-chg">
There
are
three
pieces
of
information
that
may
be
associated
with
an
error:
</ins></p><ul><li><p>
The
<del class="diff-old">error
</del>
<code>
<del class="diff-old">xs:anyURI
</del>
<ins class="diff-chg">$code
</ins>
</code>
is
<del class="diff-old">derived
</del>
<ins class="diff-chg">an
error
code
that
distinguishes
this
error
</ins>
from
<ins class="diff-new">others.
It
is
an
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
;
the
namespace
URI
conventionally
identifies
</ins>
the
<ins class="diff-new">component,
subsystem,
or
authority
responsible
for
defining
the
meaning
of
the
error
code,
while
the
local
part
identifies
the
specific
</ins>
error
<ins class="diff-new">condition.
The
namespace
URI
</ins>
<code>
<del class="diff-old">xs:QName
.
An
</del>
<ins class="diff-chg">http://www.w3.org/2005/xqt-errors
</ins></code><ins class="diff-chg">
is
used
for
errors
defined
in
this
specification;
other
namespace
URIs
may
be
used
for
errors
defined
by
the
application.
</ins></p><p><ins class="diff-chg">
If
the
external
processing
environment
expects
the
</ins>
error
<ins class="diff-new">code
to
be
returned
as
a
URI
or
a
string
rather
than
as
an
</ins>
<code>
xs:QName
</code>,
<ins class="diff-chg">then
an
error
code
</ins>
with
namespace
URI
<code>
NS
</code>
and
local
part
<code>
LP
</code>
will
be
returned
<del class="diff-old">as
</del>
<ins class="diff-chg">in
</ins>
the
<ins class="diff-new">form
</ins>
<code>
<del class="diff-old">xs:anyURI
NS#LP.
</del>
<ins class="diff-chg">NS#LP
</ins></code>.
The
<del class="diff-old">method
by
which
</del>
<ins class="diff-chg">namespace
URI
part
of
</ins>
the
<ins class="diff-new">error
code
should
therefore
not
include
a
fragment
identifier.
</ins></p></li><li><p><ins class="diff-new">
The
</ins>
<code>
<del class="diff-old">xs:anyURI
or
xs:QName
</del>
<ins class="diff-chg">$description
</ins>
</code>
is
<del class="diff-old">returned
to
</del>
<ins class="diff-chg">a
natural-language
description
of
</ins>
the
<del class="diff-old">external
processing
environment
is
·
implementation
dependent
·
.
</del>
<ins class="diff-chg">error
condition.
</ins>
</p>
</li>
<li>
<p>
<del class="diff-old">If
an
invocation
provides
</del>
<ins class="diff-chg">The
</ins>
<code>
<del class="diff-old">$description
</del>
<ins class="diff-chg">$error-object
</ins>
</code>
<ins class="diff-new">is
an
arbitrary
value
used
to
convey
additional
information
about
the
error,
</ins>
and
<del class="diff-old">$error-object
,
then
these
values
</del>
may
<del class="diff-old">also
</del>
be
<del class="diff-old">returned
to
the
external
processing
environment.
The
method
by
which
these
values
are
provided
to
</del>
<ins class="diff-chg">used
in
any
way
</ins>
the
<del class="diff-old">external
environment
is
·
implementation
dependent
·
.
</del>
<ins class="diff-chg">application
chooses.
</ins>
</p>
<del class="diff-old">Note:
</del>
</li>
</ul>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
This
function
always
raises
an
error.
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
The
value
of
the
<code>
$description
</code>
parameter
may
need
to
be
localized.
</p>
<p>
<del class="diff-old">Note
that
</del>
<ins class="diff-chg">The
type
</ins>
"none"
is
a
special
type
defined
in
<a href= "#xquery-semantics">
[XQuery
1.0
and
XPath
2.0
Formal
Semantics]
</a>
and
is
not
available
to
the
user.
It
indicates
that
the
function
never
returns
and
ensures
that
it
has
the
correct
static
type.
</p>
<del class="diff-old">If
fn:error
is
invoked
with
no
arguments,
then
its
behavior
is
the
same
as
the
invocation
of
the
following
expression:
 fn:error(fn:QName('http://www.w3.org/2005/xqt-errors', 'err:FOER0000')) 
If
the
first
argument
in
the
third
or
fourth
signature
is
the
empty
sequence
it
is
assumed
to
be
the
xs:QName
constructed
by:
 fn:QName('http://www.w3.org/2005/xqt-errors', 'err:FOER0000')
3.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<code>
fn:error()
</code>
returns
<code>
http://www.w3.org/2005/xqt-errors#FOER0000
</code>
(or
the
corresponding
<code>
xs:QName
</code>
)
to
the
external
processing
<del class="diff-old">environment.
</del>
<ins class="diff-chg">environment,
unless
the
error
is
caught
using
a
try/catch
construct
in
the
host
language.
</ins>
</p>
<p>
<code>
fn:error(fn:QName('http://www.example.com/HR',
'myerr:toohighsal'),
'Does
not
apply
because
salary
is
too
high')
</code>
returns
<code>
http://www.example.com/HR#toohighsal
</code>
and
the
<code>
xs:string
</code>
<code>
"Does
not
apply
because
salary
is
too
high"
</code>
(or
the
corresponding
<code>
xs:QName
</code>
)
to
the
external
processing
<del class="diff-old">environment.
</del>
<ins class="diff-chg">environment,
unless
the
error
is
caught
using
a
try/catch
construct
in
the
host
language.
</ins>
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="diagnostics" id="diagnostics">
</a>
<ins class="diff-chg">3.2
Diagnostic
Tracing
</ins></h3><div class="div3"><h4>
<a name="func-trace" id="func-trace">
</a>
<del class="diff-old">4
The
Trace
Function
</del>
<ins class="diff-chg">3.2.1
fn:trace
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Provides
an
execution
trace
intended
to
be
used
in
debugging
queries.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:trace
</code>
(
<code class= "arg">
$value
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
item()*
</code>,
<code class="arg">
$label
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()*
</code>
</div>
</div>
<del class="diff-old">Summary:
Provides
an
execution
trace
intended
to
be
used
in
debugging
queries.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
<del class="diff-old">input
$value
is
returned,
unchanged,
as
</del>
<ins class="diff-chg">function
returns
</ins>
the
<del class="diff-old">result
</del>
<ins class="diff-chg">value
</ins>
of
<del class="diff-old">the
function.
</del>
<code>
<ins class="diff-chg">$value
</ins></code>,<ins class="diff-chg">
unchanged.
</ins></p><p>
In
addition,
the
<del class="diff-old">inputs
</del>
<ins class="diff-chg">values
of
</ins>
<code>
$value
</code>,
converted
to
an
<code>
xs:string
</code>,
and
<code>
$label
</code>
<strong>
may
</strong>
be
directed
to
a
trace
data
set.
The
destination
of
the
trace
output
is
<a title= "implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>.
The
format
of
the
trace
output
is
<a title= "implementation dependent" class="termref" href= "#implementation-dependent">
<span class= "arrow">
·
</span>
implementation
dependent
<span class= "arrow">
·
</span>
</a>.
The
ordering
of
output
from
<del class="diff-old">invocations
</del>
<ins class="diff-chg">calls
</ins>
of
the
<code>
<del class="diff-old">fn:trace()
</del>
<ins class="diff-chg">fn:trace
</ins>
</code>
function
is
<a title= "implementation dependent" class="termref" href= "#implementation-dependent">
<span class= "arrow">
·
</span>
implementation
dependent
<span class= "arrow">
·
</span>
</a>.
</p>
<del class="diff-old">4.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Consider
a
situation
in
which
a
user
wants
to
investigate
the
actual
value
passed
to
a
function.
Assume
that
in
a
particular
execution,
<code>
$v
</code>
is
an
<code>
xs:decimal
</code>
with
value
<code>
124.84
</code>.
Writing
<code>
fn:trace($v,
'the
value
of
$v
is:')
</code>
will
put
the
strings
<code>
"124.84"
</code>
and
<code>
"the
value
of
$v
is:"
</code>
in
the
trace
data
set
in
implementation
dependent
order.
</p>
<del class="diff-old">5
Constructor
Functions
5.1
Constructor
Functions
for
XML
Schema
Built-in
Types
Every
built-in
atomic
type
that
is
defined
in
[XML
Schema
Part
2:
Datatypes
Second
Edition]
,
except
xs:anyAtomicType
and
xs:NOTATION
,
has
an
associated
constructor
function.
xs:untypedAtomic
,
defined
in
Section
2.6
Types
DM
and
the
two
derived
types
xs:yearMonthDuration
and
xs:dayTimeDuration
defined
in
Section
2.6
Types
DM
also
have
associated
constructor
functions.
A
constructor
function
is
not
defined
for
xs:anyAtomicType
as
there
are
no
atomic
values
with
type
annotation
xs:anyAtomicType
at
runtime,
although
this
can
be
a
statically
inferred
type.
A
constructor
function
is
not
defined
for
xs:NOTATION
since
it
is
defined
as
an
abstract
type
in
[XML
Schema
Part
2:
Datatypes
Second
Edition]
.
If
the
static
context
(See
Section
2.1.1
Static
Context
XP
)
contains
a
type
derived
from
xs:NOTATION
then
a
constructor
function
is
defined
for
it.
See
5.4
Constructor
Functions
for
User-Defined
Types
.
The
form
of
the
constructor
function
for
a
type
prefix:TYPE
is:
prefix:TYPE
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
prefix:TYPE?
If
$arg
is
the
empty
sequence,
the
empty
sequence
is
returned.
For
example,
the
signature
of
the
constructor
function
corresponding
to
the
xs:unsignedInt
type
defined
in
[XML
Schema
Part
2:
Datatypes
Second
Edition]
is:
xs:unsignedInt
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:unsignedInt?
Invoking
the
constructor
function
xs:unsignedInt(12)
returns
the
xs:unsignedInt
value
12.
Another
invocation
of
that
constructor
function
that
returns
the
same
xs:unsignedInt
value
is
xs:unsignedInt("12")
.
The
same
result
would
also
be
returned
if
the
constructor
function
were
to
be
invoked
with
a
node
that
had
a
typed
value
equal
to
the
xs:unsignedInt
12.
The
standard
features
described
in
Section
2.4.2
Atomization
XP
would
'atomize'
the
node
to
extract
its
typed
value
and
then
call
the
constructor
with
that
value.
If
the
value
passed
to
a
constructor
is
illegal
for
the
datatype
to
be
constructed,
an
error
is
raised
[
err:FORG0001
].
The
semantics
of
the
constructor
function
"
xs:TYPE(arg)
"
are
identical
to
the
semantics
of
"
arg
cast
as
xs:TYPE?
".
See
17
Casting
.
If
the
argument
to
a
constructor
function
is
a
literal,
the
result
of
the
function
may
be
evaluated
statically;
if
an
error
is
found
during
such
evaluation,
it
may
be
reported
as
a
static
error.
Special
rules
apply
to
constructor
functions
for
xs:QName
and
types
derived
from
xs:QName
and
xs:NOTATION
.
See
5.3
Constructor
Functions
for
xs:QName
and
xs:NOTATION
.
The
following
constructor
functions
for
the
built-in
types
are
supported:
xs:string
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:string?
xs:boolean
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:boolean?
xs:decimal
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:decimal?
xs:float
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:float?
Implementations
·
may
·
return
negative
zero
for
xs:float("-0.0E0")
.
[XML
Schema
Part
2:
Datatypes
Second
Edition]
does
not
distinguish
between
the
values
positive
zero
and
negative
zero.
xs:double
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:double?
Implementations
·
may
·
return
negative
zero
for
xs:double("-0.0E0").
[XML
Schema
Part
2:
Datatypes
Second
Edition]
does
not
distinguish
between
the
values
positive
zero
and
negative
zero.
xs:duration
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:duration?
xs:dateTime
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:dateTime?
xs:time
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:time?
xs:date
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:date?
xs:gYearMonth
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:gYearMonth?
xs:gYear
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:gYear?
xs:gMonthDay
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:gMonthDay?
xs:gDay
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:gDay?
xs:gMonth
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:gMonth?
xs:hexBinary
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:hexBinary?
xs:base64Binary
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:base64Binary?
xs:anyURI
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:anyURI?
xs:QName
(
$arg
&#160;as&#160;
xs:anyAtomicType
)
&#160;as&#160;
xs:QName?
See
5.3
Constructor
Functions
for
xs:QName
and
xs:NOTATION
for
special
rules.
xs:normalizedString
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:normalizedString?
xs:token
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:token?
xs:language
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:language?
xs:NMTOKEN
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:NMTOKEN?
xs:Name
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:Name?
xs:NCName
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:NCName?
xs:ID
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:ID?
xs:IDREF
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:IDREF?
xs:ENTITY
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:ENTITY?
See
17.4.1
Casting
to
xs:ENTITY
for
rules
related
to
constructing
values
of
type
xs:ENTITY
and
types
derived
from
it.
xs:integer
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:integer?
xs:nonPositiveInteger
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:nonPositiveInteger?
xs:negativeInteger
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:negativeInteger?
xs:long
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:long?
xs:int
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:int?
xs:short
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:short?
xs:byte
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:byte?
xs:nonNegativeInteger
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:nonNegativeInteger?
xs:unsignedLong
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:unsignedLong?
xs:unsignedInt
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:unsignedInt?
xs:unsignedShort
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:unsignedShort?
xs:unsignedByte
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:unsignedByte?
xs:positiveInteger
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:positiveInteger?
xs:yearMonthDuration
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:yearMonthDuration?
xs:dayTimeDuration
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:dayTimeDuration?
xs:untypedAtomic
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
xs:untypedAtomic?
5.2
A
Special
Constructor
Function
for
xs:dateTime
A
special
constructor
function
is
provided
for
constructing
a
xs:dateTime
value
from
a
xs:date
value
and
a
xs:time
value.
fn:dateTime
(
$arg1
&#160;as&#160;
xs:date?
,
$arg2
&#160;as&#160;
xs:time?
)
&#160;as&#160;
xs:dateTime?
The
result
xs:dateTime
has
a
date
component
whose
value
is
equal
to
$arg1
and
a
time
component
whose
value
is
equal
to
$arg2
.
The
result
is
the
empty
sequence
if
either
of
the
parameters
is
the
empty
sequence.
The
timezone
of
the
result
is
computed
as
follows:
If
neither
argument
has
a
timezone,
the
result
has
no
timezone.
If
exactly
one
of
the
arguments
has
a
timezone,
or
if
both
arguments
have
the
same
timezone,
the
result
has
this
timezone.
If
the
two
arguments
have
different
timezones,
an
error
is
raised:[
err:FORG0008
]
5.2.1
Examples
fn:dateTime(xs:date("1999-12-31"),
xs:time("12:00:00"))
returns
xs:dateTime("1999-12-31T12:00:00").
fn:dateTime(xs:date("1999-12-31"),
xs:time("24:00:00"))
returns
xs:dateTime("1999-12-31T00:00:00")
because
"24:00:00"
is
an
alternate
lexical
form
for
"00:00:00".
5.3
Constructor
Functions
for
xs:QName
and
xs:NOTATION
Special
rules
apply
to
constructor
functions
for
the
types
xs:QName
and
xs:NOTATION
,
for
two
reasons:
The
lexical
representation
of
these
types
uses
namespace
prefixes,
whose
meaning
is
context-dependent.
Values
cannot
belong
directly
to
the
type
xs:NOTATION
,
only
to
its
subtypes.
These
constraints
result
in
the
following
restrictions:
Conversion
from
an
xs:string
to
a
value
of
type
xs:QName
,
a
type
derived
from
xs:QName
or
a
type
derived
from
xs:NOTATION
is
permitted
only
if
the
xs:string
is
written
as
a
string
literal.
This
applies
whether
the
conversion
is
expressed
using
a
constructor
function
or
using
the
"cast
as"
syntax.
Such
a
conversion
can
be
regarded
as
a
pseudo-function,
which
is
always
evaluated
statically.
It
is
also
permitted
for
these
constructors
and
casts
to
take
a
dynamically-supplied
argument
in
the
normal
manner,
but
as
the
casting
table
(see
17.1
Casting
from
primitive
types
to
primitive
types
)
indicates,
the
only
arguments
that
are
supported
in
this
case
are
values
of
type
xs:QName
or
xs:NOTATION
respectively.
There
is
no
constructor
function
for
xs:NOTATION
.
Constructors
are
defined,
however,
for
xs:QName
,
for
types
derived
from
xs:QName
,
and
for
types
derived
from
xs:NOTATION
.
When
converting
from
an
xs:string
,
the
prefix
within
the
lexical
xs:QName
supplied
as
the
argument
is
resolved
to
a
namespace
URI
using
the
statically
known
namespaces
from
the
static
context.
If
the
lexical
xs:QName
has
no
prefix,
the
namespace
URI
of
the
resulting
expanded-QName
is
the
default
element/type
namespace
from
the
static
context.
Components
of
the
static
context
are
discussed
in
Section
2.1.1
Static
Context
XP
.
A
static
error
is
raised
[
err:FONS0004
]
if
the
prefix
is
not
bound
in
the
static
context.
As
described
in
Section
2.1
Terminology
DM
,
the
supplied
prefix
is
retained
as
part
of
the
expanded-QName
value.
5.4
Constructor
Functions
for
User-Defined
Types
For
every
atomic
type
in
the
static
context
(See
Section
2.1.1
Static
Context
XP
)
that
is
derived
from
a
primitive
type,
there
is
a
constructor
function
(whose
name
is
the
same
as
the
name
of
the
type)
whose
effect
is
to
create
a
value
of
that
type
from
the
supplied
argument.
The
rules
for
constructing
user-defined
types
are
defined
in
the
same
way
as
the
rules
for
constructing
built-in
derived
types
discussed
in
5.1
Constructor
Functions
for
XML
Schema
Built-in
Types
.
Special
rules
apply
to
constructor
functions
for
types
derived
from
xs:QName
and
xs:NOTATION
.
See
5.3
Constructor
Functions
for
xs:QName
and
xs:NOTATION
.
Consider
a
situation
where
the
static
context
contains
a
type
called
hatSize
defined
in
a
schema
whose
target
namespace
is
bound
to
the
prefix
my
.
In
such
a
case
the
constructor
function:
my:hatSize
(
$arg
&#160;as&#160;
xs:anyAtomicType?
)
&#160;as&#160;
my:hatSize?
is
available
to
users.
To
construct
an
instance
of
an
atomic
type
that
is
not
in
a
namespace,
it
is
necessary
to
use
a
cast
expression
or
undeclare
the
default
function
namespace.
For
example,
if
the
user-defined
type
apple
is
derived
from
xs:integer
but
is
not
in
a
namespace,
an
instance
of
this
type
can
be
constructed
as
follows
using
a
cast
expression
(this
requires
that
the
default
element/type
namespace
is
no
namespace):
17 cast as apple
The
following
shows
the
use
of
the
constructor
function:
declare default function namespace ""; apple(17)
</del>
</dd>
</dl>
</div>
</div>
</div>
<div class="div1">
<h2>
<a name="numeric-functions" id="numeric-functions">
</a>
<del class="diff-old">6
</del>
<ins class="diff-chg">4
</ins>
Functions
and
Operators
on
Numerics
</h2>
<p>
This
section
<del class="diff-old">discusses
</del>
<ins class="diff-chg">specifies
</ins>
arithmetic
operators
on
the
numeric
datatypes
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>.
It
uses
an
approach
that
permits
lightweight
implementation
whenever
possible.
</p>
<div class="div2">
<h3>
<a name="numeric-types" id="numeric-types">
</a>
<del class="diff-old">6.1
</del>
<ins class="diff-chg">4.1
</ins>
Numeric
Types
</h3>
<p>
The
operators
described
in
this
section
are
defined
on
the
following
numeric
types.
Each
type
whose
name
is
indented
is
derived
from
the
type
whose
name
appears
nearest
above
with
one
less
level
of
indentation.
</p>
<table class="hierarchy" summary="Numeric types" border="0" width= "288">
<tbody>
<tr>
<td class="castOther" align="left" valign="middle">
xs:decimal
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:integer
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:float
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
xs:double
</td>
</tr>
</tbody>
</table>
<p>
They
also
apply
to
types
derived
by
restriction
from
the
above
types.
</p>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
This
specification
uses
<a href="#ieee754">
[IEEE
754-1985]
</a>
arithmetic
for
<code>
xs:float
</code>
and
<code>
xs:double
</code>
values.
This
differs
from
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
which
defines
<code>
NaN
</code>
as
being
equal
to
itself
and
defines
only
a
single
zero
in
the
value
space
while
<a href="#ieee754">
[IEEE
754-1985]
</a>
arithmetic
treats
<code>
NaN
</code>
as
unequal
to
all
other
values
including
itself
and
can
produce
distinct
results
of
positive
zero
and
negative
zero.
(These
are
two
different
machine
representations
for
the
same
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
value.)
The
text
accompanying
several
functions
<del class="diff-old">discusses
behaviour
</del>
<ins class="diff-chg">defines
behavior
</ins>
for
both
positive
and
negative
zero
inputs
and
outputs
in
the
interest
of
alignment
with
<a href="#ieee754">
[IEEE
754-1985]
</a>.
</p>
<p>
<ins class="diff-new">XML
Schema
1.1,
however,
introduces
support
for
positive
and
negative
zero
as
distinct
values.
</ins></p>
</div>
</div>
<div class="div2">
<h3>
<a name="op.numeric" id="op.numeric">
</a>
<del class="diff-old">6.2
</del>
<ins class="diff-chg">4.2
Arithmetic
</ins>
Operators
on
Numeric
Values
</h3>
<p>
The
following
functions
define
the
semantics
of
<ins class="diff-new">arithmetic
</ins>
operators
defined
in
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
and
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>
on
these
numeric
types.
</p>
<table summary="Operator summary" border="1">
<thead>
<tr>
<th>
Operators
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-numeric-add">
<code>
op:numeric-add
</code>
</a>
</td>
<td>
Addition
</td>
</tr>
<tr>
<td>
<a href= "#func-numeric-subtract">
<code>
op:numeric-subtract
</code>
</a>
</td>
<td>
Subtraction
</td>
</tr>
<tr>
<td>
<a href= "#func-numeric-multiply">
<code>
op:numeric-multiply
</code>
</a>
</td>
<td>
Multiplication
</td>
</tr>
<tr>
<td>
<a href= "#func-numeric-divide">
<code>
op:numeric-divide
</code>
</a>
</td>
<td>
Division
</td>
</tr>
<tr>
<td>
<a href= "#func-numeric-integer-divide">
<code>
op:numeric-integer-divide
</code>
</a>
</td>
<td>
Integer
division
</td>
</tr>
<tr>
<td>
<a href= "#func-numeric-mod">
<code>
op:numeric-mod
</code>
</a>
</td>
<td>
Modulus
</td>
</tr>
<tr>
<td>
<a href= "#func-numeric-unary-plus">
<code>
op:numeric-unary-plus
</code>
</a>
</td>
<td>
Unary
plus
</td>
</tr>
<tr>
<td>
<a href= "#func-numeric-unary-minus">
<code>
op:numeric-unary-minus
</code>
</a>
</td>
<td>
Unary
minus
(negation)
</td>
</tr>
</tbody>
</table>
<p>
The
parameters
and
return
types
for
the
above
operators
are
the
basic
numeric
types:
<code>
xs:integer
</code>,
<code>
xs:decimal
</code>,
<code>
xs:float
</code>
and
<code>
xs:double
</code>,
and
types
derived
from
them.
The
word
"
<code>
numeric
</code>
"
in
function
signatures
signifies
these
four
types.
For
simplicity,
each
operator
is
defined
to
operate
on
operands
of
the
same
type
and
return
the
same
type.
The
exceptions
are
<a href= "#func-numeric-divide">
<code>
op:numeric-divide
</code>
</a>,
which
returns
an
<code>
xs:decimal
</code>
if
called
with
two
<code>
xs:integer
</code>
operands
and
<a href= "#func-numeric-integer-divide">
<code>
op:numeric-integer-divide
</code>
</a>
which
always
returns
an
<code>
xs:integer
</code>.
</p>
<p>
If
the
two
operands
are
not
of
the
same
type,
<em>
subtype
substitution
</em>
and
<em>
numeric
type
promotion
</em>
are
used
to
obtain
two
operands
of
the
same
type.
<a href= "http://www.w3.org/TR/xpath20/#promotion">
Section
B.1
Type
Promotion
</a>
<sup>
<small>
XP
</small>
</sup>
and
<a href= "http://www.w3.org/TR/xpath20/#mapping">
Section
B.2
Operator
Mapping
</a>
<sup>
<small>
XP
</small>
</sup>
describe
the
semantics
of
these
operations
in
detail.
</p>
<p>
The
result
type
of
operations
depends
on
their
argument
datatypes
and
is
defined
in
the
following
table:
</p>
<table summary="Function/operator summary" border="1">
<col width="50%" span="1" />
<col width="50%" span="1" />
<thead>
<tr>
<th>
Operator
</th>
<th>
Returns
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>
op:operation(xs:integer,
xs:integer)
</code>
</td>
<td>
<code>
xs:integer
</code>
(except
for
<a href= "#func-numeric-divide">
<code>
op:numeric-divide(integer,
integer)
</code>
</a>,
which
returns
<code>
xs:decimal
</code>
)
</td>
</tr>
<tr>
<td>
<code>
op:operation(xs:decimal,
xs:decimal)
</code>
</td>
<td>
<code>
xs:decimal
</code>
</td>
</tr>
<tr>
<td>
<code>
op:operation(xs:float,
xs:float)
</code>
</td>
<td>
<code>
xs:float
</code>
</td>
</tr>
<tr>
<td>
<code>
op:operation(xs:double,
xs:double)
</code>
</td>
<td>
<code>
xs:double
</code>
</td>
</tr>
<tr>
<td>
<code>
op:operation(xs:integer)
</code>
</td>
<td>
<code>
xs:integer
</code>
</td>
</tr>
<tr>
<td>
<code>
op:operation(xs:decimal)
</code>
</td>
<td>
<code>
xs:decimal
</code>
</td>
</tr>
<tr>
<td>
<code>
op:operation(xs:float)
</code>
</td>
<td>
<code>
xs:float
</code>
</td>
</tr>
<tr>
<td>
<code>
op:operation(xs:double)
</code>
</td>
<td>
<code>
xs:double
</code>
</td>
</tr>
</tbody>
</table>
<p>
These
rules
define
any
operation
on
any
pair
of
arithmetic
types.
Consider
the
following
example:
</p>
<div class="exampleInner">
<pre>
op:operation(xs:int, xs:double) =&gt; op:operation(xs:double, xs:double)
</pre>
</div>
<p>
For
this
operation,
<code>
xs:int
</code>
must
be
converted
to
<code>
xs:double
</code>.
This
can
be
done,
since
by
the
rules
above:
<code>
xs:int
</code>
can
be
substituted
for
<code>
xs:integer
</code>,
<code>
xs:integer
</code>
can
be
substituted
for
<code>
xs:decimal
</code>,
<code>
xs:decimal
</code>
can
be
promoted
to
<code>
xs:double
</code>.
As
far
as
possible,
the
promotions
should
be
done
in
a
single
step.
Specifically,
when
an
<code>
xs:decimal
</code>
is
promoted
to
an
<code>
xs:double
</code>,
it
should
not
be
converted
to
an
<code>
xs:float
</code>
and
then
to
<code>
xs:double
</code>,
as
this
risks
loss
of
precision.
</p>
<p>
As
another
example,
a
user
may
define
<code>
height
</code>
as
a
derived
type
of
<code>
xs:integer
</code>
with
a
minimum
value
of
20
and
a
maximum
value
of
100.
He
may
then
derive
<code>
fenceHeight
</code>
using
an
enumeration
to
restrict
the
permitted
set
of
values
to,
say,
36,
48
and
60.
</p>
<div class="exampleInner">
<pre>
op:operation(fenceHeight, xs:integer) =&gt; op:operation(xs:integer, xs:integer)
</pre>
</div>
<p>
<code>
fenceHeight
</code>
can
be
substituted
for
its
base
type
<code>
height
</code>
and
<code>
height
</code>
can
be
substituted
for
its
base
type
<code>
xs:integer
</code>.
</p>
<p>
<ins class="diff-new">The
basic
rules
for
addition,
subtraction,
and
multiplication
of
ordinary
numbers
are
not
set
out
in
this
specification;
they
are
taken
as
given.
In
the
case
of
</ins><code><ins class="diff-new">
xs:double
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:float
</ins></code><ins class="diff-new">
the
rules
are
as
defined
in
</ins><a href= "#ieee754"><ins class="diff-new">
[IEEE
754-1985]
</ins></a>.<ins class="diff-new">
The
rules
for
handling
division
and
modulus
operations,
as
well
as
the
rules
for
handling
special
values
such
as
infinity
and
</ins><code><ins class="diff-new">
NaN
</ins></code>,<ins class="diff-new">
and
exception
conditions
such
as
overflow
and
underflow,
are
described
more
explicitly
since
they
are
not
necessarily
obvious.
</ins></p><p>
On
overflow
and
underflow
situations
during
arithmetic
operations
conforming
implementations
<a title="must" class= "termref" href="#must">
<span class="arrow">
·
</span>
must
<span class= "arrow">
·
</span>
</a>
behave
as
follows:
</p>
<ul>
<li>
<p>
For
<code>
xs:float
</code>
and
<code>
xs:double
</code>
operations,
overflow
behavior
<a title="must" class="termref" href= "#must">
<span class="arrow">
·
</span>
must
<span class= "arrow">
·
</span>
</a>
be
conformant
with
<a href="#ieee754">
[IEEE
754-1985]
</a>.
This
specification
allows
the
following
options:
</p>
<ul>
<li>
<p>
Raising
an
error
[
<a href="#ERRFOAR0002" title= "err:FOAR0002">
err:FOAR0002
</a>
]
via
an
overflow
trap.
</p>
</li>
<li>
<p>
Returning
<code>
INF
</code>
or
<code>
-INF
</code>.
</p>
</li>
<li>
<p>
Returning
the
largest
(positive
or
negative)
non-infinite
number.
</p>
</li>
</ul>
</li>
<li>
<p>
For
<code>
xs:float
</code>
and
<code>
xs:double
</code>
operations,
underflow
behavior
<a title="must" class="termref" href= "#must">
<span class="arrow">
·
</span>
must
<span class= "arrow">
·
</span>
</a>
be
conformant
with
<a href="#ieee754">
[IEEE
754-1985]
</a>.
This
specification
allows
the
following
options:
</p>
<ul>
<li>
<p>
Raising
an
error
[
<a href="#ERRFOAR0002" title= "err:FOAR0002">
err:FOAR0002
</a>
]
via
an
underflow
trap.
</p>
</li>
<li>
<p>
Returning
<code>
0.0E0
</code>
or
<code>
+/-
2**Emin
</code>
or
a
denormalized
value;
where
<code>
Emin
</code>
is
the
smallest
possible
<code>
xs:float
</code>
or
<code>
xs:double
</code>
exponent.
</p>
</li>
</ul>
</li>
<li>
<p>
For
<code>
xs:decimal
</code>
operations,
overflow
behavior
<a title="must" class="termref" href="#must">
<span class= "arrow">
·
</span>
must
<span class="arrow">
·
</span>
</a>
raise
an
error
[
<a href="#ERRFOAR0002" title="err:FOAR0002">
err:FOAR0002
</a>
].
On
underflow,
<code>
0.0
</code>
must
be
returned.
</p>
</li>
<li>
<p>
For
<code>
xs:integer
</code>
operations,
implementations
that
support
limited-precision
integer
operations
<a title="must" class= "termref" href="#must">
<span class="arrow">
·
</span>
must
<span class= "arrow">
·
</span>
</a>
select
from
the
following
options:
</p>
<ul>
<li>
<p>
They
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
choose
to
always
raise
an
error
[
<a href="#ERRFOAR0002" title= "err:FOAR0002">
err:FOAR0002
</a>
].
</p>
</li>
<li>
<p>
They
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
provide
an
<a title="implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
mechanism
that
allows
users
to
choose
between
raising
an
error
and
returning
a
result
that
is
modulo
the
largest
representable
integer
value.
See
<a href="#ISO10967">
[ISO
10967]
</a>.
</p>
</li>
</ul>
</li>
</ul>
<p>
The
functions
<a href= "#func-numeric-add">
<code>
op:numeric-add
</code>
</a>,
<a href= "#func-numeric-subtract">
<code>
op:numeric-subtract
</code>
</a>,
<a href= "#func-numeric-multiply">
<code>
op:numeric-multiply
</code>
</a>,
<a href="#func-numeric-divide">
<code>
op:numeric-divide
</code>
</a>,
<a href= "#func-numeric-integer-divide">
<code>
op:numeric-integer-divide
</code>
</a>
and
<a href="#func-numeric-mod">
<code>
op:numeric-mod
</code>
</a>
are
each
defined
for
pairs
of
numeric
operands,
each
of
which
has
the
same
type:
<code>
xs:integer
</code>,
<code>
xs:decimal
</code>,
<code>
xs:float
</code>,
or
<code>
xs:double
</code>.
The
functions
<a href= "#func-numeric-unary-plus">
<code>
op:numeric-unary-plus
</code>
</a>
and
<a href= "#func-numeric-unary-minus">
<code>
op:numeric-unary-minus
</code>
</a>
are
defined
for
a
single
operand
whose
type
is
one
of
those
same
numeric
types.
</p>
<p>
For
<code>
xs:float
</code>
and
<code>
xs:double
</code>
arguments,
if
either
argument
is
<code>
NaN
</code>,
the
result
is
<code>
NaN
</code>.
</p>
<p>
For
<code>
xs:decimal
</code>
values
the
number
of
digits
of
precision
returned
by
the
numeric
operators
is
<a title= "implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>.
If
the
number
of
digits
in
the
result
exceeds
the
number
of
digits
that
the
implementation
supports,
the
result
is
truncated
or
rounded
in
an
<a title="implementation-defined" class="termref" href="#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
manner.
</p>
<div class="div3">
<h4>
<a name="func-numeric-add" id="func-numeric-add">
</a>
<del class="diff-old">6.2.1
</del>
<ins class="diff-chg">4.2.1
</ins>
op:numeric-add
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
arithmetic
sum
of
its
operands:
(
</ins><code><ins class="diff-new">
$arg1
+
$arg2
</ins></code><ins class="diff-new">
).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"+"
operator
applied
to
numeric
values
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-add
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
numeric
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Backs
up
the
"+"
operator
and
returns
the
arithmetic
sum
of
its
operands:
(
$arg1
+
$arg2
).
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#op.numeric">
<b>
<del class="diff-old">Note:
</del>
<ins class="diff-chg">4.2
Arithmetic
Operators
on
Numeric
Values
</ins>
</b>
</a>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
For
<code>
xs:float
</code>
or
<code>
xs:double
</code>
values,
if
one
of
the
operands
is
a
zero
or
a
finite
number
and
the
other
is
<code>
INF
</code>
or
<code>
-INF
</code>,
<code>
INF
</code>
or
<code>
-INF
</code>
is
returned.
If
both
operands
are
<code>
INF
</code>,
<code>
INF
</code>
is
returned.
If
both
operands
are
<code>
-INF
</code>,
<code>
-INF
</code>
is
returned.
If
one
of
the
operands
is
<code>
INF
</code>
and
the
other
is
<code>
-INF
</code>,
<code>
NaN
</code>
is
returned.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-numeric-subtract" id= "func-numeric-subtract">
</a>
<del class="diff-old">6.2.2
</del>
<ins class="diff-chg">4.2.2
</ins>
op:numeric-subtract
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
arithmetic
difference
of
its
operands:
(
</ins><code><ins class="diff-new">
$arg1
-
$arg2
</ins></code><ins class="diff-new">
).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"-"
operator
applied
to
numeric
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-subtract
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
numeric
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Backs
up
the
"-"
operator
and
returns
the
arithmetic
difference
of
its
operands:
(
$arg1
-
$arg2
).
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#op.numeric">
<b>
<del class="diff-old">Note:
</del>
<ins class="diff-chg">4.2
Arithmetic
Operators
on
Numeric
Values
</ins>
</b>
</a>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
For
<code>
xs:float
</code>
or
<code>
xs:double
</code>
values,
if
one
of
the
operands
is
a
zero
or
a
finite
number
and
the
other
is
<code>
INF
</code>
or
<code>
-INF
</code>,
an
infinity
of
the
appropriate
sign
is
returned.
If
both
operands
are
<code>
INF
</code>
or
<code>
-INF
</code>,
<code>
NaN
</code>
is
returned.
If
one
of
the
operands
is
<code>
INF
</code>
and
the
other
is
<code>
-INF
</code>,
an
infinity
of
the
appropriate
sign
is
returned.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-numeric-multiply" id= "func-numeric-multiply">
</a>
<del class="diff-old">6.2.3
</del>
<ins class="diff-chg">4.2.3
</ins>
op:numeric-multiply
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
arithmetic
product
of
its
operands:
(
</ins><code><ins class="diff-new">
$arg1
*
$arg2
</ins></code><ins class="diff-new">
).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"*"
operator
applied
to
numeric
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-multiply
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
numeric
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Backs
up
the
"*"
operator
and
returns
the
arithmetic
product
of
its
operands:
(
$arg1
*
$arg2
).
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#op.numeric">
<b>
<del class="diff-old">Note:
</del>
<ins class="diff-chg">4.2
Arithmetic
Operators
on
Numeric
Values
</ins>
</b>
</a>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
For
<code>
xs:float
</code>
or
<code>
xs:double
</code>
values,
if
one
of
the
operands
is
a
zero
and
the
other
is
an
infinity,
<code>
NaN
</code>
is
returned.
If
one
of
the
operands
is
a
non-zero
number
and
the
other
is
an
infinity,
an
infinity
with
the
appropriate
sign
is
returned.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-numeric-divide" id= "func-numeric-divide">
</a>
<del class="diff-old">6.2.4
</del>
<ins class="diff-chg">4.2.4
</ins>
op:numeric-divide
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
arithmetic
quotient
of
its
operands:
(
</ins><code><ins class="diff-new">
$arg1
div
$arg2
</ins></code><ins class="diff-new">
).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"div"
operator
applied
to
numeric
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-divide
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
numeric
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Backs
up
the
"div"
operator
and
returns
the
arithmetic
quotient
of
its
operands:
(
$arg1
div
$arg2
).
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#op.numeric"><b><ins class="diff-chg">
4.2
Arithmetic
Operators
on
Numeric
Values
</ins></b></a>.
</p>
<p>
As
a
special
case,
if
the
types
of
both
<code>
$arg1
</code>
and
<code>
$arg2
</code>
are
<code>
xs:integer
</code>,
then
the
return
type
is
<code>
xs:decimal
</code>.
</p>
<del class="diff-old">Notes:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd>
<p>
For
<code>
xs:decimal
</code>
and
<code>
xs:integer
</code>
operands,
if
the
divisor
is
(positive
or
negative)
zero,
an
error
is
raised
[
<a href="#ERRFOAR0001" title= "err:FOAR0001">
err:FOAR0001
</a>
].
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd><p>
For
<code>
xs:float
</code>
and
<code>
xs:double
</code>
operands,
floating
point
division
is
performed
as
specified
in
<a href= "#ieee754">
[IEEE
754-1985]
</a>.
<del class="diff-old">For
xs:float
or
xs:double
values,
a
</del>
<ins class="diff-chg">A
</ins>
positive
number
divided
by
positive
zero
returns
<code>
INF
</code>.
A
negative
number
divided
by
positive
zero
returns
<code>
-INF
</code>.
Division
by
negative
zero
returns
<code>
-INF
</code>
and
<code>
INF
</code>,
respectively.
Positive
or
negative
zero
divided
by
positive
or
negative
zero
returns
<code>
NaN
</code>.
Also,
<code>
INF
</code>
or
<code>
-INF
</code>
divided
by
<code>
INF
</code>
or
<code>
-INF
</code>
returns
<code>
NaN
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-numeric-integer-divide" id= "func-numeric-integer-divide">
</a>
<del class="diff-old">6.2.5
</del>
<ins class="diff-chg">4.2.5
</ins>
op:numeric-integer-divide
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Performs
an
integer
division.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"idiv"
operator
applied
to
numeric
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-integer-divide
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
numeric
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
This
function
backs
up
the
"idiv"
operator
and
performs
an
integer
division:
that
is,
it
divides
the
first
argument
by
the
second,
and
returns
the
integer
obtained
by
truncating
the
fractional
part
of
the
result.
The
division
is
performed
so
that
the
sign
of
the
fractional
part
is
the
same
as
the
sign
of
the
dividend.
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#op.numeric"><b><ins class="diff-chg">
4.2
Arithmetic
Operators
on
Numeric
Values
</ins></b></a>.
</p>
<p>
If
<del class="diff-old">the
dividend,
</del>
<ins class="diff-chg">$arg2
is
INF
or
-INF,
and
</ins>
$arg1
<del class="diff-old">,
</del>
is
not
<del class="diff-old">evenly
divided
by
the
divisor,
$arg2
,
</del>
<ins class="diff-chg">INF
or
-INF,
</ins>
then
the
<del class="diff-old">quotient
</del>
<ins class="diff-chg">result
</ins>
is
<ins class="diff-new">zero.
</ins></p><p><ins class="diff-new">
Otherwise,
subject
to
limits
of
precision
and
overflow/underflow
conditions,
</ins>
the
<ins class="diff-new">result
is
the
largest
(furthest
from
zero)
</ins>
<code>
xs:integer
</code>
value
<del class="diff-old">obtained,
ignoring
(truncating)
any
remainder
</del>
<code>
<ins class="diff-chg">$N
</ins></code><ins class="diff-chg">
such
</ins>
that
<del class="diff-old">results
from
the
division
(that
is,
no
rounding
is
performed).
Thus,
the
semantics
"
</del>
<a href= "#func-abs">
<code>
<del class="diff-old">$a
idiv
$b
</del>
<ins class="diff-chg">fn:abs($N
*
$arg2)
le
fn:abs($arg1)
and
fn:compare($N
*
$arg2,
0)
eq
fn:compare($arg1,
0)
</ins>
</code>
<del class="diff-old">"
are
</del>
</a>.
</p>
<div class="note">
<p class="prefix">
<b>
<ins class="diff-chg">Note:
</ins></b></p><p><ins class="diff-chg">
The
second
term
in
this
condition
ensures
that
the
result
has
the
correct
sign.
</ins></p></div><p><ins class="diff-chg">
The
implementation
may
adopt
a
different
algorithm
provided
that
it
is
</ins>
equivalent
to
<del class="diff-old">"
</del>
<ins class="diff-chg">this
formulation
in
all
cases
where
</ins><a title= "implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
or
</ins><a title="implementation-defined" class= "termref" href="#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
behavior
does
not
affect
the
outcome,
for
example,
the
implementation-defined
precision
of
the
result
of
</ins>
<code>
<del class="diff-old">($a
div
$b)
cast
as
xs:integer
</del>
<ins class="diff-chg">xs:decimal
</ins>
</code>
<del class="diff-old">"
except
for
error
situations.
</del>
<ins class="diff-chg">division.
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd>
<p>
If
the
divisor
is
(positive
or
negative)
zero,
then
an
error
is
raised
[
<a href="#ERRFOAR0001" title= "err:FOAR0001">
err:FOAR0001
</a>
].
</p>
<p>
If
either
operand
is
<code>
NaN
</code>
or
if
<code>
$arg1
</code>
is
<code>
INF
</code>
or
<code>
-INF
</code>
then
an
error
is
raised
[
<a href="#ERRFOAR0002" title="err:FOAR0002">
err:FOAR0002
</a>
].
</p>
<del class="diff-old">Note:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd><p><ins class="diff-chg">
Except
in
situations
involving
errors,
loss
of
precision,
or
overflow/underflow,
the
result
of
</ins><code><ins class="diff-chg">
$a
idiv
$b
</ins></code><ins class="diff-chg">
is
the
same
as
</ins><code><ins class="diff-chg">
($a
div
$b)
cast
as
xs:integer
</ins></code>.
</p>
<p>
The
semantics
of
this
function
are
different
from
integer
division
as
defined
in
programming
languages
such
as
Java
and
C++.
</p>
<del class="diff-old">6.2.5.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-integer-divide(10,3)
</code>
returns
<code>
3
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-integer-divide(3,-2)
</code>
returns
<code>
-1
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-integer-divide(-3,2)
</code>
returns
<code>
-1
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-integer-divide(-3,-2)
</code>
returns
<code>
1
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-integer-divide(9.0,3)
</code>
returns
<code>
3
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-integer-divide(-3.5,3)
</code>
returns
<code>
-1
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-integer-divide(3.0,4)
</code>
returns
<code>
0
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-integer-divide(3.1E1,6)
</code>
returns
<code>
5
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-integer-divide(3.1E1,7)
</code>
returns
<code>
4
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-numeric-mod" id="func-numeric-mod">
</a>
<del class="diff-old">6.2.6
</del>
<ins class="diff-chg">4.2.6
</ins>
op:numeric-mod
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
remainder
resulting
from
dividing
</ins><code><ins class="diff-new">
$arg1
</ins></code>,<ins class="diff-new">
the
dividend,
by
</ins><code><ins class="diff-new">
$arg2
</ins></code>,<ins class="diff-new">
the
divisor.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"mod"
operator
applied
to
numeric
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-mod
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
numeric
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd><p><ins class="diff-new">
General
rules:
see
</ins><a href="#op.numeric"><b><ins class="diff-new">
4.2
Arithmetic
Operators
on
Numeric
Values
</ins></b></a>.</p>
<p>
<del class="diff-old">Summary:
Backs
up
the
"mod"
operator.
Informally,
this
function
returns
the
remainder
resulting
from
dividing
$arg1
,
the
dividend,
by
$arg2
,
the
divisor.
</del>
The
operation
<code>
a
mod
b
</code>
for
operands
that
are
<code>
xs:integer
</code>
or
<code>
xs:decimal
</code>,
or
types
derived
from
them,
produces
a
result
such
that
<code>
(a
idiv
b)*b+(a
mod
b)
</code>
is
equal
to
<code>
a
</code>
and
the
magnitude
of
the
result
is
always
less
than
the
magnitude
of
<code>
b
</code>.
This
identity
holds
even
in
the
special
case
that
the
dividend
is
the
negative
integer
of
largest
possible
magnitude
for
its
type
and
the
divisor
is
-1
(the
remainder
is
0).
It
follows
from
this
rule
that
the
sign
of
the
result
is
the
sign
of
the
dividend.
</p>
<p>
For
<code>
<del class="diff-old">xs:integer
and
xs:decimal
operands,
if
$arg2
is
zero,
then
an
error
is
raised
[
err:FOAR0001
].
For
</del>
xs:float
</code>
and
<code>
xs:double
</code>
operands
the
following
rules
apply:
</p>
<ul>
<li>
<p>
If
either
operand
is
<code>
NaN
</code>,
the
result
is
<code>
NaN
</code>.
</p>
</li>
<li>
<p>
If
the
dividend
is
positive
or
negative
infinity,
or
the
divisor
is
positive
or
negative
zero
(0),
or
both,
the
result
is
<code>
NaN
</code>.
</p>
</li>
<li>
<p>
If
the
dividend
is
finite
and
the
divisor
is
an
infinity,
the
result
equals
the
dividend.
</p>
</li>
<li>
<p>
If
the
dividend
is
positive
or
negative
zero
and
the
divisor
is
finite,
the
result
is
the
same
as
the
dividend.
</p>
</li>
<li>
<p>
In
the
remaining
cases,
where
neither
positive
or
negative
infinity,
nor
positive
or
negative
zero,
nor
<code>
NaN
</code>
is
involved,
the
result
obeys
<code>
(a
idiv
b)*b+(a
mod
b)
</code>
=
<code>
a
</code>.
Division
is
truncating
division,
analogous
to
integer
division,
not
<a href="#ieee754">
[IEEE
754-1985]
</a>
rounding
division
i.e.
additional
digits
are
truncated,
not
rounded
to
the
required
precision.
</p>
</li>
</ul>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
For
</ins><code><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
operands,
if
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
zero,
then
an
error
is
raised
[
</ins><a href="#ERRFOAR0001" title="err:FOAR0001"><ins class="diff-chg">
err:FOAR0001
</ins>
</a>
<del class="diff-old">6.2.6.1
</del>
<ins class="diff-chg">].
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-mod(10,3)
</code>
returns
<code>
1
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-mod(6,-2)
</code>
returns
<code>
0
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-mod(4.5,1.2)
</code>
returns
<code>
0.9
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:numeric-mod(1.23E2,
0.6E1)
</code>
returns
<code>
3.0E0
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-numeric-unary-plus" id= "func-numeric-unary-plus">
</a>
<del class="diff-old">6.2.7
</del>
<ins class="diff-chg">4.2.7
</ins>
op:numeric-unary-plus
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
its
operand
with
the
sign
unchanged:
(
</ins><code><ins class="diff-new">
+
$arg
</ins></code><ins class="diff-new">
).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
unary
"+"
operator
applied
to
numeric
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-unary-plus
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Backs
up
the
unary
"+"
operator
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#op.numeric"><b><ins class="diff-chg">
4.2
Arithmetic
Operators
on
Numeric
Values
</ins></b></a>.</p><p><ins class="diff-chg">
The
returned
value
is
equal
to
</ins><code><ins class="diff-chg">
$arg
</ins></code>,
and
<del class="diff-old">returns
its
operand
with
</del>
<ins class="diff-chg">is
an
instance
of
</ins><code><ins class="diff-chg">
xs:integer
</ins></code>,<code><ins class="diff-chg">
xs:decimal
</ins></code>,<code><ins class="diff-chg">
xs:double
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
xs:float
</ins></code><ins class="diff-chg">
depending
on
</ins>
the
<del class="diff-old">sign
unchanged:
(+
</del>
<ins class="diff-chg">type
of
</ins>
<code>
$arg
<del class="diff-old">).
Semantically,
this
operation
performs
no
operation.
</del>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-numeric-unary-minus" id= "func-numeric-unary-minus">
</a>
<del class="diff-old">6.2.8
</del>
<ins class="diff-chg">4.2.8
</ins>
op:numeric-unary-minus
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
its
operand
with
the
sign
reversed:
(
</ins><code><ins class="diff-new">
-
$arg
</ins></code><ins class="diff-new">
).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
unary
"-"
operator
applied
to
numeric
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-unary-minus
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Backs
up
the
unary
"-"
operator
and
returns
its
operand
with
the
sign
reversed:
(-
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#op.numeric"><b><ins class="diff-chg">
4.2
Arithmetic
Operators
on
Numeric
Values
</ins></b></a>.</p><p><ins class="diff-chg">
The
returned
value
is
an
instance
of
</ins>
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">xs:integer
</ins></code>,<code><ins class="diff-chg">
xs:decimal
</ins></code>,<code><ins class="diff-chg">
xs:double
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
xs:float
</ins>
</code>
<del class="diff-old">).
If
</del>
<ins class="diff-chg">depending
on
the
type
of
</ins>
<code>
$arg
<del class="diff-old">is
positive,
its
negative
is
returned;
if
it
is
negative,
its
positive
is
returned.
</del>
</code>.
</p>
<p>
For
<code>
xs:integer
</code>
and
<code>
xs:decimal
</code>
arguments,
<code>
0
</code>
and
<code>
0.0
</code>
return
<code>
0
</code>
and
<code>
0.0
</code>,
respectively.
For
<code>
xs:float
</code>
and
<code>
xs:double
</code>
arguments,
<code>
NaN
</code>
returns
<code>
NaN
</code>,
<code>
0.0E0
</code>
returns
<code>
-0.0E0
</code>
and
vice
versa.
<code>
INF
</code>
returns
<code>
-INF
</code>.
<code>
-INF
</code>
returns
<code>
INF
</code>.
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="comp.numeric" id="comp.numeric">
</a>
<del class="diff-old">6.3
</del>
<ins class="diff-chg">4.3
</ins>
Comparison
Operators
on
Numeric
Values
</h3>
<p>
This
specification
defines
the
following
comparison
operators
on
numeric
values.
Comparisons
take
two
arguments
of
the
same
type.
If
the
arguments
are
of
different
types,
one
argument
is
promoted
to
the
type
of
the
other
as
described
above
in
<a href= "#op.numeric">
<b>
<del class="diff-old">6.2
</del>
<ins class="diff-chg">4.2
Arithmetic
</ins>
Operators
on
Numeric
Values
</b>
</a>.
Each
comparison
operator
returns
a
boolean
value.
If
either,
or
both,
operands
are
<code>
NaN
</code>,
<code>
false
</code>
is
returned.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
<del class="diff-old">Operator
</del>
<ins class="diff-chg">Function
</ins>
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-numeric-equal">
<code>
op:numeric-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
comparison
</del>
<ins class="diff-chg">Returns
true
if
and
only
if
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
is
equal
to
the
value
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-numeric-less-than">
<code>
op:numeric-less-than
</code>
</a>
</td>
<td>
<del class="diff-old">Less-than
comparison
</del>
<ins class="diff-chg">Returns
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
if
and
only
if
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
is
numerically
less
than
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-numeric-greater-than">
<code>
op:numeric-greater-than
</code>
</a>
</td>
<td>
<del class="diff-old">Greater-than
comparison
</del>
<ins class="diff-chg">Returns
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
if
and
only
if
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
is
numerically
greater
than
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-numeric-equal" id="func-numeric-equal">
</a>
<del class="diff-old">6.3.1
</del>
<ins class="diff-chg">4.3.1
</ins>
op:numeric-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
and
only
if
the
value
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
equal
to
the
value
of
</ins><code><ins class="diff-new">
$arg2
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
operator
on
numeric
values,
and
is
also
used
in
defining
the
semantics
of
"ne",
"le"
and
"ge".
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-equal
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
numeric
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#op.numeric"><b><ins class="diff-chg">
4.2
Arithmetic
Operators
on
Numeric
Values
</ins></b></a>
and
<del class="diff-old">only
if
the
value
of
$arg1
is
equal
to
the
value
of
$arg2
.
</del>
<a href= "#comp.numeric">
<b>
<ins class="diff-chg">4.3
Comparison
Operators
on
Numeric
Values
</ins></b></a>.</p><p>
For
<code>
xs:float
</code>
and
<code>
xs:double
</code>
values,
positive
zero
and
negative
zero
compare
equal.
<code>
INF
</code>
equals
<code>
INF
</code>,
and
<code>
-INF
</code>
equals
<code>
-INF
</code>.
<code>
NaN
</code>
does
not
equal
itself.
</p>
<del class="diff-old">This
function
backs
up
the
"eq",
"ne",
"le"
and
"ge"
operators
on
numeric
values.
</del>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-numeric-less-than" id= "func-numeric-less-than">
</a>
<del class="diff-old">6.3.2
</del>
<ins class="diff-chg">4.3.2
</ins>
op:numeric-less-than
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
and
only
if
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
numerically
less
than
</ins><code><ins class="diff-new">
$arg2
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"lt"
operator
on
numeric
values,
and
is
also
used
in
defining
the
semantics
of
"le".
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-less-than
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
numeric
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#op.numeric"><b><ins class="diff-chg">
4.2
Arithmetic
Operators
on
Numeric
Values
</ins></b></a>
and
<del class="diff-old">only
if
$arg1
is
less
than
$arg2
.
</del>
<a href= "#comp.numeric">
<b>
<ins class="diff-chg">4.3
Comparison
Operators
on
Numeric
Values
</ins></b></a>.</p><p>
For
<code>
xs:float
</code>
and
<code>
xs:double
</code>
values,
positive
infinity
is
greater
than
all
other
non-
<code>
NaN
</code>
values;
negative
infinity
is
less
than
all
other
non-
<code>
NaN
</code>
values.
If
<code>
$arg1
</code>
or
<code>
$arg2
</code>
is
<code>
NaN
</code>,
the
function
returns
<code>
false
</code>.
</p>
<del class="diff-old">This
function
backs
up
the
"lt"
and
"le"
operators
on
numeric
values.
</del>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-numeric-greater-than" id= "func-numeric-greater-than">
</a>
<del class="diff-old">6.3.3
</del>
<ins class="diff-chg">4.3.3
</ins>
op:numeric-greater-than
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
and
only
if
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
numerically
greater
than
</ins><code><ins class="diff-new">
$arg2
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"gt"
operator
on
numeric
values,
and
is
also
used
in
defining
the
semantics
of
"ge".
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:numeric-greater-than
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
numeric
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
$arg1
is
greater
than
$arg2
.
For
xs:float
and
xs:double
values,
positive
infinity
is
greater
than
all
other
non-
NaN
values;
negative
infinity
is
less
than
all
other
non-
NaN
values.
If
$arg1
or
</del>
<ins class="diff-chg">The
function
call
</ins>
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">op:numeric-greater-than($A,
$B)
</ins>
</code>
is
<del class="diff-old">NaN
,
</del>
<ins class="diff-chg">defined
to
return
</ins>
the
<del class="diff-old">function
returns
</del>
<ins class="diff-chg">same
result
as
</ins><a href= "#func-numeric-less-than">
<code>
<del class="diff-old">false
.
This
function
backs
up
the
"gt"
and
"ge"
operators
on
numeric
values.
</del>
<ins class="diff-chg">op:numeric-less-than($B,
$A)
</ins></code></a>
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="numeric-value-functions" id= "numeric-value-functions">
</a>
<del class="diff-old">6.4
</del>
<ins class="diff-chg">4.4
</ins>
Functions
on
Numeric
Values
</h3>
<p>
The
following
functions
are
defined
on
numeric
types.
Each
function
returns
a
value
of
the
same
type
as
the
type
of
its
argument.
</p>
<ul>
<li>
<p>
If
the
argument
is
the
empty
sequence,
the
empty
sequence
is
returned.
</p>
</li>
<li>
<p>
For
<code>
xs:float
</code>
and
<code>
xs:double
</code>
arguments,
if
the
argument
is
"NaN",
"NaN"
is
returned.
</p>
</li>
<li>
<p>
Except
for
<a href="#func-abs">
<code>
<del class="diff-old">fn:abs()
</del>
<ins class="diff-chg">fn:abs
</ins>
</code>
</a>,
for
<code>
xs:float
</code>
and
<code>
xs:double
</code>
arguments,
if
the
argument
is
positive
or
negative
infinity,
positive
or
negative
infinity
is
returned.
</p>
</li>
</ul>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-abs">
<code>
fn:abs
</code>
</a>
</td>
<td>
Returns
the
absolute
value
of
<del class="diff-old">the
argument.
</del>
<code>
<ins class="diff-chg">$arg
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href="#func-ceiling">
<code>
fn:ceiling
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
the
smallest
number
with
no
fractional
part
that
is
greater
than
or
equal
</del>
<ins class="diff-chg">Rounds
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
upwards
</ins>
to
<del class="diff-old">the
argument.
</del>
<ins class="diff-chg">a
whole
number.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-floor">
<code>
fn:floor
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
the
largest
number
with
no
fractional
part
that
is
less
than
or
equal
</del>
<ins class="diff-chg">Rounds
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
downwards
</ins>
to
<del class="diff-old">the
argument.
</del>
<ins class="diff-chg">a
whole
number.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-round">
<code>
fn:round
</code>
</a>
</td>
<td>
Rounds
<ins class="diff-new">a
value
</ins>
to
<del class="diff-old">the
nearest
</del>
<ins class="diff-chg">a
specified
</ins>
number
<del class="diff-old">with
no
fractional
part.
</del>
<ins class="diff-chg">of
decimal
places,
rounding
upwards
if
two
such
values
are
equally
near.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-round-half-to-even">
<code>
fn:round-half-to-even
</code>
</a>
</td>
<td>
<del class="diff-old">Takes
a
number
and
</del>
<ins class="diff-chg">Rounds
</ins>
a
<del class="diff-old">precision
and
returns
</del>
<ins class="diff-chg">value
to
</ins>
a
<ins class="diff-new">specified
</ins>
number
<del class="diff-old">rounded
</del>
<ins class="diff-chg">of
decimal
places,
rounding
</ins>
to
<ins class="diff-new">make
</ins>
the
<del class="diff-old">given
precision.
If
the
fractional
part
is
exactly
half,
the
result
is
the
number
whose
least
significant
</del>
<ins class="diff-chg">last
</ins>
digit
<del class="diff-old">is
even.
</del>
<ins class="diff-chg">even
if
two
such
values
are
equally
near.
</ins>
</td>
</tr>
</tbody>
</table>
<div class="note">
<p class="prefix">
<b>
<ins class="diff-new">Note:
</ins></b></p><p><a href="#func-round"><code><ins class="diff-new">
fn:round
</ins></code></a><ins class="diff-new">
and
</ins><a href= "#func-round-half-to-even"><code><ins class="diff-new">
fn:round-half-to-even
</ins></code></a><ins class="diff-new">
produce
the
same
result
in
all
cases
except
when
the
argument
is
exactly
midway
between
two
values
with
the
required
precision.
</ins></p><p><ins class="diff-new">
Other
ways
of
rounding
midway
values
can
be
achieved
as
follows:
</ins></p><ul><li><p><ins class="diff-new">
Towards
negative
infinity:
</ins><code><ins class="diff-new">
-fn:round(-$x)
</ins></code></p></li><li><p><ins class="diff-new">
Away
from
zero:
</ins><a href= "#func-round"><code><ins class="diff-new">
fn:round(fn:abs($x))*fn:compare($x,0)
</ins></code></a></p></li><li><p><ins class="diff-new">
Towards
zero:
</ins><a href= "#func-abs"><code><ins class="diff-new">
fn:abs(fn:round(-$x))*-fn:compare($x,0)
</ins></code></a></p></li></ul></div>
<div class="div3">
<h4>
<a name="func-abs" id="func-abs">
</a>
<del class="diff-old">6.4.1
</del>
<ins class="diff-chg">4.4.1
</ins>
fn:abs
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
absolute
value
of
</ins><code><ins class="diff-new">
$arg
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:abs
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
numeric?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd><p><ins class="diff-new">
General
rules:
see
</ins><a href="#numeric-value-functions"><b><ins class="diff-new">
4.4
Functions
on
Numeric
Values
</ins></b></a>.</p>
<p>
<del class="diff-old">Summary:
Returns
the
absolute
value
of
$arg
.
</del>
If
<code>
$arg
</code>
is
negative
<ins class="diff-new">the
function
</ins>
returns
<code>
-$arg
</code>,
otherwise
<ins class="diff-new">it
</ins>
returns
<code>
$arg
</code>.
</p>
<p>
If
<ins class="diff-new">the
</ins>
type
of
<code>
$arg
</code>
is
one
of
the
four
numeric
types
<code>
xs:float
</code>,
<code>
xs:double
</code>,
<code>
xs:decimal
</code>
or
<code>
xs:integer
</code>
the
type
of
the
result
is
the
same
as
the
type
of
<code>
$arg
</code>.
If
the
type
of
<code>
$arg
</code>
is
a
type
derived
from
one
of
the
numeric
types,
the
result
is
an
instance
of
the
base
numeric
type.
</p>
<p>
For
<code>
xs:float
</code>
and
<code>
xs:double
</code>
arguments,
if
the
argument
is
positive
zero
or
negative
zero,
then
positive
zero
is
returned.
If
the
argument
is
positive
or
negative
infinity,
positive
infinity
is
returned.
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_abs_ceil_floor_round">
Section
7.2.3
The
fn:abs,
fn:ceiling,
fn:floor,
fn:round,
and
fn:round-half-to-even
functions
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
<del class="diff-old">6.4.1.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:abs(10.5)
</code>
returns
<code>
10.5
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:abs(-10.5)
</code>
returns
<code>
10.5
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-ceiling" id="func-ceiling">
</a>
<del class="diff-old">6.4.2
</del>
<ins class="diff-chg">4.4.2
</ins>
fn:ceiling
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Rounds
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
upwards
to
a
whole
number.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:ceiling
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#numeric-value-functions"><b><ins class="diff-chg">
4.4
Functions
on
Numeric
Values
</ins></b></a>.</p><p><ins class="diff-chg">
The
function
returns
</ins>
the
smallest
(closest
to
negative
infinity)
number
with
no
fractional
part
that
is
not
less
than
the
value
of
<code>
$arg
</code>.
</p>
<p>
If
<ins class="diff-new">the
</ins>
type
of
<code>
$arg
</code>
is
one
of
the
four
numeric
types
<code>
xs:float
</code>,
<code>
xs:double
</code>,
<code>
xs:decimal
</code>
or
<code>
xs:integer
</code>
the
type
of
the
result
is
the
same
as
the
type
of
<code>
$arg
</code>.
If
the
type
of
<code>
$arg
</code>
is
a
type
derived
from
one
of
the
numeric
types,
the
result
is
an
instance
of
the
base
numeric
type.
</p>
<p>
For
<code>
xs:float
</code>
and
<code>
xs:double
</code>
arguments,
if
the
argument
is
positive
zero,
then
positive
zero
is
returned.
If
the
argument
is
negative
zero,
then
negative
zero
is
returned.
If
the
argument
is
less
than
zero
and
greater
than
-1,
negative
zero
is
returned.
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_abs_ceil_floor_round">
Section
7.2.3
The
fn:abs,
fn:ceiling,
fn:floor,
fn:round,
and
fn:round-half-to-even
functions
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
<del class="diff-old">6.4.2.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:ceiling(10.5)
</code>
returns
<code>
11
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:ceiling(-10.5)
</code>
returns
<code>
-10
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-floor" id="func-floor">
</a>
<del class="diff-old">6.4.3
</del>
<ins class="diff-chg">4.4.3
</ins>
fn:floor
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Rounds
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
downwards
to
a
whole
number.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:floor
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#numeric-value-functions"><b><ins class="diff-chg">
4.4
Functions
on
Numeric
Values
</ins></b></a>.</p><p><ins class="diff-chg">
The
function
returns
</ins>
the
largest
(closest
to
positive
infinity)
number
with
no
fractional
part
that
is
not
greater
than
the
value
of
<code>
$arg
</code>.
</p>
<p>
If
<ins class="diff-new">the
</ins>
type
of
<code>
$arg
</code>
is
one
of
the
four
numeric
types
<code>
xs:float
</code>,
<code>
xs:double
</code>,
<code>
xs:decimal
</code>
or
<code>
xs:integer
</code>
the
type
of
the
result
is
the
same
as
the
type
of
<code>
$arg
</code>.
If
the
type
of
<code>
$arg
</code>
is
a
type
derived
from
one
of
the
numeric
types,
the
result
is
an
instance
of
the
base
numeric
type.
</p>
<p>
For
<code>
<del class="diff-old">float
</del>
<ins class="diff-chg">xs:float
</ins>
</code>
and
<code>
<del class="diff-old">double
</del>
<ins class="diff-chg">xs:double
</ins>
</code>
arguments,
if
the
argument
is
positive
zero,
then
positive
zero
is
returned.
If
the
argument
is
negative
zero,
then
negative
zero
is
returned.
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_abs_ceil_floor_round">
Section
7.2.3
The
fn:abs,
fn:ceiling,
fn:floor,
fn:round,
and
fn:round-half-to-even
functions
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
<del class="diff-old">6.4.3.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:floor(10.5)
</code>
returns
<code>
10
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:floor(-10.5)
</code>
returns
<code>
-11
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-round" id="func-round">
</a>
<del class="diff-old">6.4.4
</del>
<ins class="diff-chg">4.4.4
</ins>
fn:round
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Rounds
a
value
to
a
specified
number
of
decimal
places,
rounding
upwards
if
two
such
values
are
equally
near.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:round
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric?
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
<ins class="diff-new">fn:round
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
numeric?
</ins></code>,<code class= "arg"><ins class="diff-new">
$precision
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:integer
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
numeric?
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">General
rules:
see
</ins><a href="#numeric-value-functions"><b><ins class="diff-chg">
4.4
Functions
on
Numeric
Values
</ins></b></a>.</p><p><ins class="diff-chg">
The
function
returns
</ins>
the
<del class="diff-old">number
with
no
fractional
part
</del>
<ins class="diff-chg">nearest
(that
is,
numerically
closest)
value
to
</ins><code><ins class="diff-chg">
$arg
</ins></code>
that
is
<del class="diff-old">closest
</del>
<ins class="diff-chg">a
multiple
of
ten
</ins>
to
the
<del class="diff-old">argument.
</del>
<ins class="diff-chg">power
of
minus
</ins><code><ins class="diff-chg">
$precision
</ins></code>.
If
<del class="diff-old">there
are
</del>
two
such
<del class="diff-old">numbers,
then
</del>
<ins class="diff-chg">values
are
equally
near
(for
example,
if
the
fractional
part
in
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
exactly
.5),
the
function
returns
</ins>
the
one
that
is
closest
to
positive
<del class="diff-old">infinity
is
returned.
</del>
<ins class="diff-chg">infinity.
</ins></p><p>
If
<ins class="diff-new">the
</ins>
type
of
<code>
$arg
</code>
is
one
of
the
four
numeric
types
<code>
xs:float
</code>,
<code>
xs:double
</code>,
<code>
xs:decimal
</code>
or
<code>
xs:integer
</code>
the
type
of
the
result
is
the
same
as
the
type
of
<code>
$arg
</code>.
If
the
type
of
<code>
$arg
</code>
is
a
type
derived
from
one
of
the
numeric
types,
the
result
is
an
instance
of
the
base
numeric
type.
</p>
<p>
<del class="diff-old">For
</del>
<ins class="diff-chg">The
single-argument
version
of
this
function
produces
the
same
result
as
the
two-argument
version
with
</ins><code><ins class="diff-chg">
$precision=0
</ins></code><ins class="diff-chg">
(that
is,
it
rounds
to
a
whole
number).
</ins></p><p><ins class="diff-chg">
When
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
of
type
</ins>
<code>
xs:float
</code>
and
<code>
xs:double
</code>:
</p>
<ol class="enumar">
<li>
<p>
<ins class="diff-new">If
</ins><code><ins class="diff-new">
$arg
</ins>
</code>
<del class="diff-old">arguments,
if
the
argument
</del>
is
<ins class="diff-new">NaN,
</ins>
positive
<del class="diff-old">infinity,
then
</del>
<ins class="diff-chg">or
negative
zero,
or
</ins>
positive
<del class="diff-old">infinity
is
returned.
If
the
argument
is
</del>
<ins class="diff-chg">or
</ins>
negative
infinity,
then
<del class="diff-old">negative
infinity
</del>
<ins class="diff-chg">the
result
</ins>
is
<del class="diff-old">returned.
If
</del>
<ins class="diff-chg">the
same
as
the
argument.
</ins></p></li><li><p><ins class="diff-chg">
For
other
values,
</ins>
the
argument
is
<del class="diff-old">positive
zero,
then
positive
zero
is
returned.
If
</del>
<ins class="diff-chg">cast
to
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
using
an
implementation
of
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
that
imposes
no
limits
on
</ins>
the
<del class="diff-old">argument
</del>
<ins class="diff-chg">number
of
digits
that
can
be
represented.
The
function
</ins>
is
<del class="diff-old">negative
zero,
then
negative
zero
</del>
<ins class="diff-chg">applied
to
this
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
value,
and
the
resulting
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code>
is
<del class="diff-old">returned.
</del>
<ins class="diff-chg">cast
back
to
</ins><code><ins class="diff-chg">
xs:float
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
as
appropriate
to
form
the
function
result.
</ins>
If
the
<del class="diff-old">argument
</del>
<ins class="diff-chg">resulting
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
value
</ins>
is
<del class="diff-old">less
than
</del>
zero,
<del class="diff-old">but
greater
than
or
equal
to
-0.5,
</del>
then
<del class="diff-old">negative
zero
is
returned.
In
the
cases
where
</del>
positive
<del class="diff-old">zero
</del>
or
negative
zero
is
<del class="diff-old">returned,
negative
zero
or
positive
zero
may
be
</del>
returned
<del class="diff-old">as
[XML
Schema
Part
2:
Datatypes
Second
Edition]
does
not
distinguish
between
the
values
positive
zero
and
negative
zero.
For
the
last
two
cases,
note
that
the
result
is
not
</del>
<ins class="diff-chg">according
to
</ins>
the
<del class="diff-old">same
as
</del>
<ins class="diff-chg">sign
of
</ins>
<code>
<del class="diff-old">fn:floor(x+0.5)
.
</del>
<ins class="diff-chg">$arg
</ins></code>.
</p>
</li>
</ol>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_abs_ceil_floor_round">
Section
7.2.3
The
fn:abs,
fn:ceiling,
fn:floor,
fn:round,
and
fn:round-half-to-even
functions
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
<del class="diff-old">6.4.4.1
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd><p><ins class="diff-chg">
This
function
is
typically
used
with
a
non-zero
</ins><code><ins class="diff-chg">
$precision
</ins></code><ins class="diff-chg">
in
financial
applications
where
the
argument
is
of
type
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code>.<ins class="diff-chg">
For
arguments
of
type
</ins><code><ins class="diff-chg">
xs:float
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
the
results
may
be
counter-intuitive.
For
example,
consider
</ins><code><ins class="diff-chg">
round(35.425e0,
2)
</ins></code>.<ins class="diff-chg">
The
result
is
not
35.43,
as
might
be
expected,
but
35.42.
This
is
because
the
conversion
of
35.425e0
to
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
produces
the
decimal
value
35.42499999999...,
which
is
closer
to
35.42
than
to
35.43.
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:round(2.5)
</code>
returns
<code>
<del class="diff-old">3.
</del>
<ins class="diff-chg">3.0
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:round(2.4999)
</code>
returns
<code>
<del class="diff-old">2
</del>
<ins class="diff-chg">2.0
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:round(-2.5)
</code>
returns
<code>
<del class="diff-old">-2
(not
</del>
<ins class="diff-chg">-2.0
</ins></code>.<em><ins class="diff-chg">
(Not
</ins>
the
possible
alternative,
<code>
-3
</code>
).
</em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
fn:round(1.125,
2)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
1.13
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:round(8452,
-2)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
8500
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:round(3.1415e0,
2)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
3.14e0
</ins></code>.</p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-round-half-to-even" id= "func-round-half-to-even">
</a>
<del class="diff-old">6.4.5
</del>
<ins class="diff-chg">4.4.5
</ins>
fn:round-half-to-even
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Rounds
a
value
to
a
specified
number
of
decimal
places,
rounding
to
make
the
last
digit
even
if
two
such
values
are
equally
near.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:round-half-to-even
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric?
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:round-half-to-even
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric?
</code>,
<code class= "arg">
$precision
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:integer
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
numeric?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd><p><ins class="diff-new">
General
rules:
see
</ins><a href="#numeric-value-functions"><b><ins class="diff-new">
4.4
Functions
on
Numeric
Values
</ins></b></a>.</p>
<p>
<del class="diff-old">Summary:
</del>
The
<del class="diff-old">value
returned
is
</del>
<ins class="diff-chg">function
returns
</ins>
the
nearest
(that
is,
numerically
closest)
value
to
<code>
$arg
</code>
that
is
a
multiple
of
ten
to
the
power
of
minus
<code>
$precision
</code>.
If
two
such
values
are
equally
near
(e.g.
if
the
fractional
part
in
<code>
$arg
</code>
is
exactly
.500...),
the
function
returns
the
one
whose
least
significant
digit
is
even.
</p>
<p>
If
the
type
of
<code>
$arg
</code>
is
one
of
the
four
numeric
types
<code>
xs:float
</code>,
<code>
xs:double
</code>,
<code>
xs:decimal
</code>
or
<code>
xs:integer
</code>
the
type
of
the
result
is
the
same
as
the
type
of
<code>
$arg
</code>.
If
the
type
of
<code>
$arg
</code>
is
a
type
derived
from
one
of
the
numeric
types,
the
result
is
an
instance
of
the
base
numeric
type.
</p>
<p>
The
first
signature
of
this
function
produces
the
same
result
as
the
second
signature
with
<code>
$precision=0
</code>.
</p>
<p>
For
arguments
of
type
<code>
xs:float
</code>
and
<code>
xs:double
<del class="diff-old">,
if
</del>
</code>:
</p>
<ol class="enumar">
<li>
<p>
<ins class="diff-chg">If
</ins>
the
argument
is
<code>
NaN
</code>,
positive
or
negative
zero,
or
positive
or
negative
infinity,
then
the
result
is
the
same
as
the
argument.
</p>
</li>
<li>
<p>
In
all
other
cases,
the
argument
is
cast
to
<code>
xs:decimal
<del class="diff-old">,
</del>
</code>
<span>
<ins class="diff-chg">using
an
implementation
of
xs:decimal
that
imposes
no
limits
on
</ins>
the
<ins class="diff-new">number
of
digits
that
can
be
represented.
</ins></span><ins class="diff-new">
The
</ins>
function
is
applied
to
this
<code>
xs:decimal
</code>
value,
and
the
resulting
<code>
xs:decimal
</code>
is
cast
back
to
<code>
xs:float
</code>
or
<code>
xs:double
</code>
as
appropriate
to
form
the
function
result.
If
the
resulting
<code>
xs:decimal
</code>
value
is
zero,
then
positive
or
negative
zero
is
returned
according
to
the
sign
of
the
original
argument.
</p>
<del class="diff-old">Note
that
the
process
of
casting
to
xs:decimal
may
result
in
an
error
[
err:FOCA0001
].
If
$arg
is
of
type
xs:float
or
xs:double
,
rounding
occurs
on
the
value
of
the
mantissa
computed
with
exponent
=
0.
</del>
</li>
</ol>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_abs_ceil_floor_round">
Section
7.2.3
The
fn:abs,
fn:ceiling,
fn:floor,
fn:round,
and
fn:round-half-to-even
functions
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
<del class="diff-old">Note:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd>
<p>
This
function
is
typically
used
in
financial
applications
where
the
argument
is
of
type
<code>
xs:decimal
</code>.
For
arguments
of
type
<code>
xs:float
</code>
and
<code>
xs:double
</code>
the
results
may
be
<del class="diff-old">counterintuitive.
</del>
<ins class="diff-chg">counter-intuitive.
</ins>
For
example,
consider
<code>
<del class="diff-old">round-half-to-even(xs:float(150.0150),
</del>
<ins class="diff-chg">round-half-to-even(xs:float(150.015),
2)
</ins></code>.<ins class="diff-chg">
The
result
is
not
150.02
as
might
be
expected,
but
150.01.
This
is
because
the
conversion
of
the
</ins><code><ins class="diff-chg">
xs:float
</ins></code><ins class="diff-chg">
value
represented
by
the
literal
150.015
to
an
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
produces
the
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
value
150.014999389...,
which
is
closer
to
150.01
than
to
150.02.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:round-half-to-even(0.5)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
0.0
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:round-half-to-even(1.5)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
2.0
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:round-half-to-even(2.5)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
2.0
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:round-half-to-even(3.567812e+3,
2)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
3567.81e0
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:round-half-to-even(4.7564e-3,
</ins>
2)
</code>
<ins class="diff-new">returns
</ins><code><ins class="diff-new">
0.0e0
</ins>
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins><code><ins class="diff-new">
fn:round-half-to-even(35612.25,
-2)
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
35600
</ins></code>.</p></dd></dl></div></div><div class="div2"><h3><a name="formatting-integers" id="formatting-integers"></a><ins class="diff-new">
4.5
Formatting
Integers
</ins></h3><div class="div3"><h4><a name="func-format-integer" id= "func-format-integer"></a><ins class="diff-new">
4.5.1
fn:format-integer
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
formats
an
integer
according
to
a
given
picture
string,
using
the
conventions
of
a
given
natural
language
if
specified.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:format-integer
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$value
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:integer?
</ins></code>,<code class="arg"><ins class="diff-new">
$picture
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></div></div><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="3"><code class= "function"><ins class="diff-new">
fn:format-integer
</ins></code><ins class="diff-new">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-new">
$value
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:integer?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$picture
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:string
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$language
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:language
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-new">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-new">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
This
function
is
created
to
extract
that
subset
of
the
functionality
of
the
</ins><code><ins class="diff-new">
xsl:number
</ins></code><ins class="diff-new">
instruction
in
XSLT
which
is
needed
to
support
</ins><code><ins class="diff-new">
format-dateTime
</ins></code>,<ins class="diff-new">
thus
avoiding
any
dependency
on
the
XSLT
specification,
while
also
making
this
functionality
available
in
XPath
and
XQuery
in
contexts
other
than
date
formatting.
</ins></td></tr></table><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$value
</ins></code><ins class="diff-new">
is
an
empty
sequence,
the
function
returns
a
zero-length
string.
</ins></p><p><ins class="diff-new">
In
all
other
cases,
the
</ins><code><ins class="diff-new">
$picture
</ins></code><ins class="diff-new">
argument
describes
the
format
in
which
</ins><code><ins class="diff-new">
$value
</ins></code><ins class="diff-new">
is
output.
</ins></p><p><ins class="diff-new">
The
rules
that
follow
describe
how
non-negative
numbers
are
output.
If
the
value
of
</ins><code><ins class="diff-new">
$value
</ins></code><ins class="diff-new">
is
negative,
the
rules
below
are
applied
to
the
absolute
value
of
</ins><code><ins class="diff-new">
$value
</ins></code>,<ins class="diff-new">
and
the
result
is
prepended
with
a
minus
sign.
</ins></p><p><ins class="diff-new">
A
picture
consists
of
a
primary
format
token,
followed
by
an
optional
format
modifier.
</ins></p><p><ins class="diff-new">
The
primary
format
token
is
one
of
the
following:
</ins></p><ul><li><p><ins class="diff-new">
Any
sequence
of
Unicode
digits
drawn
from
the
same
digit
family,
where
a
digit
family
is
a
sequence
of
ten
consecutive
Unicode
characters
in
category
Nd,
having
digit
values
0
through
9.
The
corresponding
output
format
is
a
decimal
number,
using
this
digit
family,
with
at
least
as
many
digits
as
there
are
in
the
format
token.
Thus,
a
format
token
</ins><code><ins class="diff-new">
1
</ins></code><ins class="diff-new">
generates
the
sequence
</ins><code><ins class="diff-new">
0
1
2
...
10
11
12
...
</ins></code>,<ins class="diff-new">
and
a
format
token
</ins><code><ins class="diff-new">
01
</ins></code><ins class="diff-new">
(or
equivalently,
</ins><code><ins class="diff-new">
00
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
99
</ins></code><ins class="diff-new">
)
generates
the
sequence
</ins><code><ins class="diff-new">
00
01
02
...
09
10
11
12
...
99
100
101
</ins></code>.<ins class="diff-new">
A
format
token
of
</ins><code><ins class="diff-new">
&amp;#x661;
</ins></code><ins class="diff-new">
(Arabic-Indic
digit
one)
generates
the
sequence
</ins><code><ins class="diff-new">
١
</ins></code><ins class="diff-new">
then
</ins><code><ins class="diff-new">
٢
</ins></code><ins class="diff-new">
then
</ins><code><ins class="diff-new">
٣
</ins></code><ins class="diff-new">
...
</ins></p></li><li><p><ins class="diff-new">
Any
sequence
of
Unicode
digits
drawn
from
the
same
digit
family,
interspersed
by
grouping
separators.
The
digits
are
handled
as
above,
and
the
grouping
separators
are
handled
as
follows.
A
character
is
recognized
as
a
grouping
separator
if
it
is
non-alphanumeric,
that
is,
if
its
Unicode
character
category
is
other
than
Nd,
Nl,
No,
Lu,
Ll,
Lt,
Lm
or
Lo.
The
position
of
grouping
separators
within
the
format
token,
counting
backwards
from
the
last
digit,
indicates
the
position
of
grouping
separators
to
appear
within
the
formatted
number,
and
the
character
used
as
the
grouping
separator
within
the
format
token
indicates
the
character
to
be
used
as
the
corresponding
grouping
separator
in
the
formatted
number.
If
grouping
separators
appear
at
regular
intervals
within
the
format
token,
that
is
if
the
same
grouping
separator
appears
at
positions
forming
a
sequence
N,
2N,
3N,
...
for
some
integer
value
N
(including
the
case
where
there
is
only
one
number
in
the
list),
then
the
sequence
is
extrapolated
to
the
left,
so
grouping
separators
will
be
used
in
the
formatted
number
at
every
multiple
of
N.
For
example,
if
the
format
token
is
</ins><code><ins class="diff-new">
0'000
</ins></code><ins class="diff-new">
then
the
number
one
million
will
be
formatted
as
</ins><code><ins class="diff-new">
1'000'000
</ins></code>.</p></li><li><p><ins class="diff-new">
A
format
token
</ins><code><ins class="diff-new">
A
</ins></code><ins class="diff-new">
generates
the
sequence
</ins><code><ins class="diff-new">
A
B
C
...
Z
AA
AB
AC...
</ins></code>.</p></li><li><p><ins class="diff-new">
A
format
token
</ins><code><ins class="diff-new">
a
</ins></code><ins class="diff-new">
generates
the
sequence
</ins><code><ins class="diff-new">
a
b
c
...
z
aa
ab
ac...
</ins></code>.</p></li><li><p><ins class="diff-new">
A
format
token
</ins><code><ins class="diff-new">
i
</ins></code><ins class="diff-new">
generates
the
sequence
</ins><code><ins class="diff-new">
i
ii
iii
iv
v
vi
vii
viii
ix
x
...
</ins></code>.</p></li><li><p><ins class="diff-new">
A
format
token
</ins><code><ins class="diff-new">
I
</ins></code><ins class="diff-new">
generates
the
sequence
</ins><code><ins class="diff-new">
I
II
III
IV
V
VI
VII
VIII
IX
X
...
</ins></code>.</p></li><li><p><ins class="diff-new">
A
format
token
</ins><code><ins class="diff-new">
w
</ins></code><ins class="diff-new">
generates
numbers
written
as
lower-case
words,
for
example
in
English,
</ins><code><ins class="diff-new">
one
two
three
four
...
</ins></code></p></li><li><p><ins class="diff-new">
A
format
token
</ins><code><ins class="diff-new">
W
</ins></code><ins class="diff-new">
generates
numbers
written
as
upper-case
words,
for
example
in
English,
</ins><code><ins class="diff-new">
ONE
TWO
THREE
FOUR
...
</ins></code></p></li><li><p><ins class="diff-new">
A
format
token
</ins><code><ins class="diff-new">
Ww
</ins></code><ins class="diff-new">
generates
numbers
written
as
title-case
words,
for
example
in
English,
</ins><code><ins class="diff-new">
One
Two
Three
Four
...
</ins></code></p></li><li><p><ins class="diff-new">
Any
other
format
token
indicates
a
numbering
sequence
in
which
that
token
represents
the
number
1
(one)
(but
see
the
note
below).
It
is
</ins><a title="implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation-defined
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
which
numbering
sequences,
additional
to
those
listed
above,
are
supported.
If
an
implementation
does
not
support
a
numbering
sequence
represented
by
the
given
token,
it
</ins><strong><ins class="diff-new">
must
</ins></strong><ins class="diff-new">
use
a
format
token
of
</ins><code><ins class="diff-new">
1
</ins></code>.</p><div class="note"><p class="prefix"><b><ins class="diff-new">
Note:
</ins></b></p><p><ins class="diff-new">
In
some
traditional
numbering
sequences
additional
signs
are
added
to
denote
that
the
letters
should
be
interpreted
as
numbers;
these
are
not
included
in
the
format
token.
</ins>
An
<ins class="diff-new">example,
see
also
the
example
below,
is
classical
Greek
where
a
</ins><em><ins class="diff-new">
dexia
keraia
</ins></em><ins class="diff-new">
and
sometimes
an
</ins><em><ins class="diff-new">
aristeri
keraia
</ins></em><ins class="diff-new">
is
added.
</ins></p></div></li></ul><p><ins class="diff-new">
For
all
format
tokens
other
than
the
first
kind
above
(one
that
consists
of
decimal
digits),
there
</ins><strong><ins class="diff-new">
may
</ins></strong><ins class="diff-new">
be
</ins><a title="implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation-defined
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
lower
and
upper
bounds
on
the
range
of
numbers
that
can
be
formatted
using
this
format
token;
indeed,
for
some
numbering
sequences
there
may
be
intrinsic
limits.
For
example,
the
format
token
</ins><code><ins class="diff-new">
&amp;#x2460;
</ins></code><ins class="diff-new">
(circled
digit
one,
①)
has
a
range
of
1
to
20
imposed
by
the
Unicode
character
repertoire.
For
the
numbering
sequences
described
above
any
upper
bound
imposed
by
the
</ins>
implementation
<strong>
<ins class="diff-new">must
not
</ins></strong><ins class="diff-new">
be
less
than
1000
(one
thousand)
and
any
lower
bound
must
not
be
greater
than
1.
Numbers
</ins>
that
<del class="diff-old">supports
18
</del>
<ins class="diff-chg">fall
outside
this
range
</ins><strong><ins class="diff-chg">
must
</ins></strong><ins class="diff-chg">
be
formatted
using
the
format
token
</ins><code><ins class="diff-chg">
1
</ins></code>.</p><p><ins class="diff-chg">
The
above
expansions
of
numbering
sequences
for
format
tokens
such
as
</ins><code><ins class="diff-chg">
a
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
i
</ins></code><ins class="diff-chg">
are
indicative
but
not
prescriptive.
There
are
various
conventions
in
use
for
how
alphabetic
sequences
continue
when
the
alphabet
is
exhausted,
and
differing
conventions
for
how
roman
numerals
are
written
(for
example,
</ins><code><ins class="diff-chg">
IV
</ins></code><ins class="diff-chg">
versus
</ins><code><ins class="diff-chg">
IIII
</ins></code><ins class="diff-chg">
as
the
representation
of
the
number
4).
Sometimes
alphabetic
sequences
are
used
that
omit
letters
such
as
</ins><code><ins class="diff-chg">
i
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
o
</ins></code>.<ins class="diff-chg">
This
specification
does
not
prescribe
the
detail
of
any
sequence
other
than
those
sequences
consisting
entirely
of
decimal
digits.
</ins></p><p><ins class="diff-chg">
Many
numbering
sequences
are
language-sensitive.
This
applies
especially
to
the
sequence
selected
by
the
tokens
</ins><code><ins class="diff-chg">
w
</ins></code>,<code><ins class="diff-chg">
W
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
Ww
</ins></code>.<ins class="diff-chg">
It
also
applies
to
other
sequences,
for
example
different
languages
using
the
Cyrillic
alphabet
use
different
sequences
of
characters,
each
starting
with
the
letter
#x410
(Cyrillic
capital
letter
A).
In
such
cases,
the
</ins><code><ins class="diff-chg">
$language
</ins></code><ins class="diff-chg">
argument
specifies
which
language's
conventions
are
to
be
used;
it
has
the
same
range
of
values
as
</ins><code><ins class="diff-chg">
xml:lang
</ins></code><ins class="diff-chg">
(see
</ins><a href="#REC-xml"><ins class="diff-chg">
[REC-xml]
</ins></a><ins class="diff-chg">
).
If
no
</ins><code><ins class="diff-chg">
$language
</ins></code><ins class="diff-chg">
argument
is
specified,
the
language
that
is
used
is
</ins><a title="implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.<ins class="diff-chg">
The
set
of
languages
for
which
numbering
is
supported
is
</ins><a title="implementation-defined" class="termref" href="#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.<ins class="diff-chg">
If
a
language
is
requested
that
is
not
supported,
the
processor
uses
the
language
that
it
would
use
if
the
</ins><code><ins class="diff-chg">
$language
</ins></code><ins class="diff-chg">
argument
were
omitted.
</ins></p><p><ins class="diff-chg">
The
format
modifier,
if
present,
is
one
of:
</ins></p><ul><li><p><code><ins class="diff-chg">
o
</ins></code>,<ins class="diff-chg">
optionally
followed
by
a
sequence
of
characters
enclosed
between
parentheses,
to
indicate
ordinal
numbering
</ins></p></li><li><p><code><ins class="diff-chg">
t
</ins></code><ins class="diff-chg">
to
indicate
traditional
numbering
</ins></p></li></ul><p><ins class="diff-chg">
If
the
</ins><code><ins class="diff-chg">
o
</ins></code><ins class="diff-chg">
modifier
is
present,
this
indicates
a
request
to
output
ordinal
numbers
rather
than
cardinal
numbers.
For
example,
in
English,
when
used
with
the
format
token
</ins><code><ins class="diff-chg">
1
</ins></code>,<ins class="diff-chg">
this
outputs
the
sequence
</ins><code><ins class="diff-chg">
1st
2nd
3rd
4th
...
</ins></code>,<ins class="diff-chg">
and
when
used
with
the
format
token
</ins><code><ins class="diff-chg">
w
</ins></code><ins class="diff-chg">
outputs
the
sequence
</ins><code><ins class="diff-chg">
first
second
third
fourth
...
</ins></code>.</p><p><ins class="diff-chg">
In
some
languages,
ordinal
numbers
vary
depending
on
the
grammatical
context,
for
example
they
may
have
different
genders
and
may
decline
with
the
noun
that
they
qualify.
In
such
cases
the
string
appearing
in
parentheses
after
the
letter
</ins><code><ins class="diff-chg">
o
</ins></code><ins class="diff-chg">
may
be
used
to
indicate
the
variation
of
the
ordinal
number
required.
The
way
in
which
the
variation
is
indicated
will
depend
on
the
conventions
of
the
language.
For
inflected
languages
that
vary
the
ending
of
the
word,
the
preferred
approach
is
to
indicate
the
required
ending,
preceded
by
a
hyphen:
for
example
in
German,
appropriate
values
are
</ins><code><ins class="diff-chg">
o(-e)
</ins></code>,<code><ins class="diff-chg">
o(-er)
</ins></code>,<code><ins class="diff-chg">
o(-es)
</ins></code>,<code><ins class="diff-chg">
o(-en)
</ins></code>.</p><p><ins class="diff-chg">
It
is
</ins><a title="implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
what
combinations
of
values
of
the
format
token,
the
language,
and
the
</ins><code><ins class="diff-chg">
ordinal
</ins></code><ins class="diff-chg">
attribute
are
supported.
If
ordinal
numbering
is
not
supported
for
the
combination
of
the
format
token,
the
language,
and
the
string
appearing
in
parentheses,
the
request
is
ignored
and
cardinal
numbers
are
generated
instead.
</ins></p><div class="exampleOuter"><div class="exampleHeader"><a name="d6e4899" id= "d6e4899"></a><ins class="diff-chg">
Example:
Ordinal
Numbering
in
Italian
</ins></div><p><ins class="diff-chg">
The
specification
</ins><code><ins class="diff-chg">
"1o(-º)"
</ins></code><ins class="diff-chg">
with
</ins><code><ins class="diff-chg">
$language
</ins></code><ins class="diff-chg">
equal
to
</ins><code><ins class="diff-chg">
it
</ins></code>,<ins class="diff-chg">
if
supported,
should
produce
the
sequence:
</ins></p><div class="exampleInner"><pre><ins class="diff-chg">
1º 2º 3º 4º ...
</ins></pre></div><p><ins class="diff-chg">
The
specification
</ins><code><ins class="diff-chg">
"Wwo"
</ins></code><ins class="diff-chg">
with
</ins><code><ins class="diff-chg">
$language
</ins></code><ins class="diff-chg">
equal
to
</ins><code><ins class="diff-chg">
it
</ins></code>,<ins class="diff-chg">
if
supported,
should
produce
the
sequence:
</ins></p><div class="exampleInner"><pre><ins class="diff-chg">
Primo Secondo Terzo Quarto Quinto ...
</ins></pre></div></div><p><ins class="diff-chg">
The
</ins><code><ins class="diff-chg">
t
</ins></code><ins class="diff-chg">
modifier
disambiguates
between
numbering
sequences
that
use
letters.
In
many
languages
there
are
two
commonly
used
numbering
sequences
that
use
letters.
One
numbering
sequence
assigns
numeric
values
to
letters
in
alphabetic
sequence,
and
the
other
assigns
numeric
values
to
each
letter
in
some
other
manner
traditional
in
that
language.
In
English,
these
would
correspond
to
the
numbering
sequences
specified
by
the
format
tokens
</ins><code><ins class="diff-chg">
a
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
i
</ins></code>.<ins class="diff-chg">
In
some
languages,
the
first
member
of
each
sequence
is
the
same,
and
so
the
format
token
alone
would
be
ambiguous.
By
default
the
alphabetic
sequence
is
used;
the
</ins><code><ins class="diff-chg">
t
</ins></code><ins class="diff-chg">
modifier
requests
the
other
sequence.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
format-integer(123,
'0000')
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
"0123"
</ins></code>.</p><p><code><ins class="diff-chg">
format-integer(123,
'w')
</ins></code><ins class="diff-chg">
might
return
</ins><code><ins class="diff-chg">
"one
hundred
and
twenty-three"
</ins></code></p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
format-integer(21,
'1o',
'en')
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
"21st"
</ins></code>.</p><p><code><ins class="diff-chg">
format-integer(14,
'Wwo(-e)',
'de')
</ins></code><ins class="diff-chg">
might
return
</ins><code><ins class="diff-chg">
"Vierzehnte"
</ins></code></p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
format-integer(7,
'a')
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
"g"
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
format-integer(57,
'I')
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
"LVII"
</ins></code>.</p></dd></dl></div></div><div class="div2"><h3><a name="formatting-numbers" id="formatting-numbers"></a><ins class="diff-chg">
4.6
Formatting
Numbers
</ins></h3><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-chg">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-chg">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-chg">
This
section
has
been
created
by
the
editor
in
response
to
a
WG
decision
in
principle;
the
detailed
text
needs
to
be
reviewed
and
approved.
</ins></td></tr></table><p><ins class="diff-chg">
This
section
defines
a
function
for
formatting
decimal
and
floating
point
numbers.
</ins></p><table summary="Function/operator summary" border="1"><thead><tr><th><ins class="diff-chg">
Function
</ins></th><th><ins class="diff-chg">
Meaning
</ins></th></tr></thead><tbody><tr><td><a href= "#func-format-number"><code><ins class="diff-chg">
fn:format-number
</ins></code></a></td><td><ins class="diff-chg">
Returns
a
string
containing
a
number
formatted
according
to
a
given
picture
string,
taking
account
of
decimal
formats
specified
in
the
static
context.
</ins></td></tr></tbody></table><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b></p><p><ins class="diff-chg">
This
function
can
be
used
to
format
any
numeric
quantity,
including
an
integer.
For
integers,
however,
the
</ins><a href= "#func-format-integer"><code><ins class="diff-chg">
fn:format-integer
</ins></code></a><ins class="diff-chg">
function
offers
additional
possibilities.
Note
also
that
the
picture
strings
used
by
the
two
functions
are
not
100%
compatible,
though
they
share
some
options
in
common.
</ins></p></div><div class="div3"><h4><a name="defining-decimal-format" id= "defining-decimal-format"></a><ins class="diff-chg">
4.6.1
Defining
a
Decimal
Format
</ins></h4><p><ins class="diff-chg">
Decimal
formats
are
defined
in
the
static
context,
and
the
way
they
are
defined
is
therefore
outside
the
scope
of
this
specification.
XSLT
and
XQuery
both
provide
custom
syntax
for
creating
a
decimal
format.
</ins></p><p><ins class="diff-chg">
The
static
context
provides
a
set
of
decimal
formats.
One
of
the
decimal
formats
is
unnamed,
the
others
(if
any)
are
identified
by
a
QName.
There
is
always
an
unnamed
decimal
format
available,
but
its
contents
are
implementation-defined.
</ins></p><p><ins class="diff-chg">
Each
decimal
format
provides
a
set
of
named
variables,
described
in
the
following
table:
</ins></p><table summary="A table [this is bad style]" border="1"><thead><tr><th><ins class="diff-chg">
Name
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Usage
(non-normative)
</ins></th></tr></thead><tbody><tr><td valign="top"><ins class="diff-chg">
decimal-separator-sign
</ins></td><td valign="top"><ins class="diff-chg">
A
single
character
</ins></td><td valign="top"><ins class="diff-chg">
Defines
the
character
used
to
represent
the
decimal
point
(typically
".")
both
in
the
picture
string
and
in
the
formatted
number
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
grouping-separator-sign
</ins></td><td valign="top"><ins class="diff-chg">
A
single
character
</ins></td><td valign="top"><ins class="diff-chg">
Defines
the
character
used
to
separate
groups
of
digits
(typically
",")
both
in
the
picture
string
and
in
the
formatted
number
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
infinity
</ins></td><td valign="top"><ins class="diff-chg">
A
string
</ins></td><td valign="top"><ins class="diff-chg">
Defines
the
string
used
to
represent
the
value
positive
or
negative
infinity
in
the
formatted
number
(typically
"Infinity")
</ins></td></tr><tr><td><ins class="diff-chg">
valign="top"minus-sign
</ins></td><td valign="top"><ins class="diff-chg">
A
single
character
</ins></td><td valign="top"><ins class="diff-chg">
Defines
the
character
used
as
a
minus
sign
in
the
formatted
number
if
there
is
no
subpicture
for
formatting
negative
numbers
(typically
"-",
x2D)
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
NaN
</ins></td><td><ins class="diff-chg">
valign="top"A
string
</ins></td><td valign="top"><ins class="diff-chg">
Defines
the
string
used
to
represent
the
value
</ins><code><ins class="diff-chg">
NaN
</ins></code><ins class="diff-chg">
in
the
formatted
number
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
percent-sign
</ins></td><td valign="top"><ins class="diff-chg">
A
single
character
</ins></td><td valign="top"><ins class="diff-chg">
Defines
the
character
used
as
a
percent
sign
(typically
"%")
both
in
the
picture
string
and
in
the
formatted
number
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
per-mille-sign
</ins></td><td valign="top"><ins class="diff-chg">
Defines
the
character
used
as
a
per-mille
sign
(typically
"‰",
x2030)
both
in
the
picture
string
and
in
the
formatted
number
</ins></td><td valign="top"></td></tr><tr><td valign="top"><ins class="diff-chg">
mandatory-digit-sign
</ins></td><td valign="top"><ins class="diff-chg">
A
single
character,
which
must
be
defined
in
Unicode
as
a
digit
with
the
value
zero
</ins></td><td valign="top"><ins class="diff-chg">
Defines
the
character
(typically
"0")
used
in
the
picture
string
to
represent
a
mandatory
digit,
and
in
the
formatted
number
to
represent
the
digit
zero;
by
implication,
this
also
defines
the
characters
used
to
represent
the
digits
one
to
nine.
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
optional-digit-sign
</ins></td><td valign="top"><ins class="diff-chg">
A
single
character
</ins></td><td valign="top"><ins class="diff-chg">
Defines
the
character
used
in
the
picture
string
to
represent
an
optional
digit
(typically
"#")
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
pattern-separator-sign
</ins></td><td><ins class="diff-chg">
valign="top"A
single
character
</ins></td><td valign="top"><ins class="diff-chg">
Defines
the
character
used
in
the
picture
string
to
separate
the
positive
and
negative
subpictures
(typically
";")
</ins></td></tr></tbody></table><p><span class="termdef"><a name="dt-decimal-digit-family" id= "dt-decimal-digit-family"></a><ins class="diff-chg">
[Definition]
The
</ins><b><ins class="diff-chg">
decimal
digit
family
</ins></b><ins class="diff-chg">
of
a
decimal
format
is
the
sequence
of
ten
</ins>
digits
<ins class="diff-new">with
consecutive
Unicode
codepoints
starting
with
the
</ins><var><ins class="diff-new">
mandatory-digit-sign
</ins></var>.</span></p><p><ins class="diff-new">
It
is
a
constraint
that,
</ins>
for
<ins class="diff-new">any
named
or
unnamed
decimal
format,
the
variables
representing
characters
used
in
a
</ins><a title= "picture string" class="termref" href= "#dt-picture-string"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
picture
string
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
must
have
distinct
values.
These
variables
are
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var>,<var><ins class="diff-new">
grouping-separator-sign
</ins></var>,<var><ins class="diff-new">
percent-sign
</ins></var>,<var><ins class="diff-new">
per-mille-sign
</ins></var>,<var><ins class="diff-new">
optional-digit-sign
</ins></var>,<ins class="diff-new">
and
</ins><var><ins class="diff-new">
pattern-separator-sign
</ins></var>.<ins class="diff-new">
Furthermore,
none
of
these
variables
may
be
equal
to
any
character
in
the
</ins><a title= "digit family" class="termref" href= "#dt-decimal-digit-family"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
decimal
digit
family
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a>.</p></div><div class="div3"><h4><a name="func-format-number" id="func-format-number"></a><ins class="diff-new">
4.6.2
fn:format-number
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
string
containing
a
number
formatted
according
to
a
given
picture
string,
taking
account
of
decimal
formats
specified
in
the
static
context.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:format-number
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$value
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
numeric?
</ins></code>,<code class="arg"><ins class="diff-new">
$picture
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></div></div><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="3"><code class= "function"><ins class="diff-new">
fn:format-number
</ins></code><ins class="diff-new">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-new">
$value
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
numeric?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$picture
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:string
</ins></code>,</td></tr><tr><td valign="baseline"><code class= "arg"><ins class="diff-new">
$decimal-format-name
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
The
function
formats
</ins><code><ins class="diff-new">
$value
</ins></code><ins class="diff-new">
as
a
string
using
the
</ins><a title="picture string" class="termref" href= "#dt-picture-string"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
picture
string
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
specified
by
the
</ins><code><ins class="diff-new">
$picture
</ins></code><ins class="diff-new">
argument
and
the
decimal-format
named
by
the
</ins><code><ins class="diff-new">
$decimal-format-name
</ins></code><ins class="diff-new">
argument,
or
the
default
decimal-format,
if
there
is
no
</ins><code><ins class="diff-new">
$decimal-format-name
</ins></code><ins class="diff-new">
argument.
The
syntax
of
the
picture
string
is
described
in
</ins><a href= "#syntax-of-picture-string"><b><ins class="diff-new">
4.6.3
Syntax
of
the
Picture
String
</ins></b></a>.</p><p><ins class="diff-new">
The
</ins><code><ins class="diff-new">
$value
</ins></code><ins class="diff-new">
argument
may
be
of
any
numeric
data
type
(
</ins><code><ins class="diff-new">
xs:double
</ins></code>,<code><ins class="diff-new">
xs:float
</ins></code>,<code><ins class="diff-new">
xs:decimal
</ins></code>,<ins class="diff-new">
or
their
subtypes
including
</ins><code><ins class="diff-new">
xs:integer
</ins></code><ins class="diff-new">
).
Note
that
if
an
</ins>
<code>
xs:decimal
</code>
<del class="diff-old">will
convert
</del>
<ins class="diff-chg">is
supplied,
it
is
not
automatically
promoted
to
an
</ins><code><ins class="diff-chg">
xs:double
</ins></code>,<ins class="diff-chg">
as
such
promotion
can
involve
a
loss
of
precision.
</ins></p><p><ins class="diff-chg">
If
the
supplied
value
of
the
</ins><code><ins class="diff-chg">
$value
</ins></code><ins class="diff-chg">
argument
is
an
empty
sequence,
the
function
behaves
as
if
the
supplied
value
were
the
</ins><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
value
</ins><code><ins class="diff-chg">
NaN
</ins></code>.</p><p><ins class="diff-chg">
The
value
of
</ins><code><ins class="diff-chg">
$decimal-format-name
</ins></code><strong><ins class="diff-chg">
must
</ins></strong><ins class="diff-chg">
be
a
lexical
QName,
which
is
expanded
using
the
in-scope
namespaces
from
the
static
context.
The
default
namespace
is
not
used
(no
prefix
means
no
namespace).
</ins></p><p><ins class="diff-chg">
The
evaluation
of
the
</ins><code><ins class="diff-chg">
format-number
</ins></code><ins class="diff-chg">
function
takes
place
in
two
phases,
an
analysis
phase
described
in
</ins><a href= "#analysing-picture-string"><b><ins class="diff-chg">
4.6.4
Analysing
the
Picture
String
</ins></b></a><ins class="diff-chg">
and
a
formatting
phase
described
in
</ins><a href= "#formatting-the-number"><b><ins class="diff-chg">
4.6.5
Formatting
the
Number
</ins></b></a>.</p><p><ins class="diff-chg">
The
analysis
phase
takes
as
its
inputs
the
</ins><a title= "picture string" class="termref" href= "#dt-picture-string"><span class="arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
picture
string
</ins><span class="arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
and
the
variables
derived
from
the
relevant
decimal
format
in
the
static
context,
and
produces
as
its
output
a
number
of
variables
with
defined
values.
The
formatting
phase
takes
as
its
inputs
the
number
to
be
formatted
and
the
variables
produced
by
the
analysis
phase,
and
produces
as
its
output
a
string
containing
a
formatted
representation
of
the
number.
</ins></p><p><ins class="diff-chg">
The
result
of
the
function
is
the
formatted
string
representation
of
the
supplied
number.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
An
error
is
raised
[
</ins><a href="#ERRFODF1280" title= "err:FODF1280"><ins class="diff-chg">
err:FODF1280
</ins></a><ins class="diff-chg">
]
if
</ins>
the
<ins class="diff-new">name
specified
as
the
</ins><code><ins class="diff-new">
$decimal-format-name
</ins></code>
argument
<ins class="diff-new">is
not
a
valid
lexical
QName,
or
if
its
prefix
has
not
been
declared
in
an
in-scope
namespace
declaration,
or
if
the
static
context
does
not
contain
a
declaration
of
a
decimal-format
with
a
matching
expanded
QName.
If
the
processor
is
able
</ins>
to
<ins class="diff-new">detect
the
error
statically
(for
example,
when
the
argument
is
supplied
as
a
string
literal),
then
the
processor
</ins><strong><ins class="diff-new">
may
</ins></strong><ins class="diff-new">
optionally
signal
this
as
a
static
error.
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
Numbers
will
always
be
formatted
with
the
most
significant
digit
on
the
left.
</ins></p></dd></dl></div><div class="div3"><h4><a name="syntax-of-picture-string" id= "syntax-of-picture-string"></a><ins class="diff-new">
4.6.3
Syntax
of
the
Picture
String
</ins></h4><div class="note"><p class="prefix"><b><ins class="diff-new">
Note:
</ins></b></p><p><ins class="diff-new">
This
differs
from
</ins>
the
<code>
<del class="diff-old">xs:decimal
</del>
<ins class="diff-chg">format-number
</ins>
</code>
<del class="diff-old">150.014999389...
</del>
<ins class="diff-chg">function
previously
defined
in
XSLT
2.0
in
that
any
digit
can
be
used
in
the
picture
string
to
represent
a
mandatory
digit:
for
example
the
picture
strings
'000',
'001',
and
'999'
are
equivalent.
This
is
to
align
</ins><code><ins class="diff-chg">
format-number
</ins></code><ins class="diff-chg">
(which
previously
used
'000')
with
</ins><code><ins class="diff-chg">
format-dateTime
</ins></code><ins class="diff-chg">
(which
used
'001').
</ins></p></div><p><span class="termdef"><a name="dt-picture-string" id= "dt-picture-string"></a><ins class="diff-chg">
[Definition]
The
formatting
of
a
number
is
controlled
by
a
</ins><b><ins class="diff-chg">
picture
string
</ins></b>.<ins class="diff-chg">
The
picture
string
is
a
sequence
of
characters,
in
</ins>
which
<ins class="diff-new">the
characters
assigned
to
the
variables
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var>,<var><ins class="diff-new">
grouping-sign
</ins></var>,<var><ins class="diff-new">
decimal-digit-family
</ins></var>,<var><ins class="diff-new">
optional-digit-sign
</ins></var><ins class="diff-new">
and
</ins><var><ins class="diff-new">
pattern-separator-sign
</ins></var><ins class="diff-new">
are
classified
as
active
characters,
and
all
other
characters
(including
the
</ins><var><ins class="diff-new">
percent-sign
</ins></var><ins class="diff-new">
and
</ins><var><ins class="diff-new">
per-mille-sign
</ins></var><ins class="diff-new">
)
are
classified
as
passive
characters.
</ins></span></p><p><ins class="diff-new">
The
</ins><var><ins class="diff-new">
integer
part
</ins></var><ins class="diff-new">
of
the
sub-picture
is
defined
as
the
part
that
appears
to
the
left
of
the
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var><ins class="diff-new">
if
there
is
one,
or
the
entire
sub-picture
otherwise.
The
</ins><var><ins class="diff-new">
fractional
part
</ins></var><ins class="diff-new">
of
the
sub-picture
is
defined
as
the
part
that
appears
to
the
right
of
the
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var><ins class="diff-new">
if
there
is
one;
it
is
a
zero-length
string
otherwise.
</ins></p><p><ins class="diff-new">
An
error
is
raised
[
</ins><a href="#ERRFODF1310" title= "err:FODF1310"><ins class="diff-new">
err:FODF1310
</ins></a><ins class="diff-new">
]
if
the
</ins><a title="picture string" class="termref" href="#dt-picture-string"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
picture
string
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
does
not
conform
to
the
following
rules.
Note
that
in
these
rules
the
words
"preceded"
and
"followed"
refer
to
characters
anywhere
in
the
string,
they
are
not
to
be
read
as
"immediately
preceded"
and
"immediately
followed".
</ins></p><ul><li><p><ins class="diff-new">
A
picture-string
consists
either
of
a
sub-picture,
or
of
two
sub-pictures
separated
by
a
</ins><var><ins class="diff-new">
pattern-separator-sign
</ins></var>.<ins class="diff-new">
A
picture-string
</ins><strong><ins class="diff-new">
must
not
</ins></strong><ins class="diff-new">
contain
more
than
one
</ins><var><ins class="diff-new">
pattern-separator-sign
</ins></var>.<ins class="diff-new">
If
the
picture-string
contains
two
sub-pictures,
the
first
is
used
for
positive
values
and
the
second
for
negative
values.
</ins></p></li><li><p><ins class="diff-new">
A
sub-picture
</ins><strong><ins class="diff-new">
must
not
</ins></strong><ins class="diff-new">
contain
more
than
one
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var>.</p></li><li><p><ins class="diff-new">
A
sub-picture
</ins><strong><ins class="diff-new">
must
not
</ins></strong><ins class="diff-new">
contain
more
than
one
</ins><var><ins class="diff-new">
percent-sign
</ins></var><ins class="diff-new">
or
</ins><var><ins class="diff-new">
per-mille-sign
</ins></var>,<ins class="diff-new">
and
it
</ins><strong><ins class="diff-new">
must
not
</ins></strong><ins class="diff-new">
contain
one
of
each.
</ins></p></li><li><p><ins class="diff-new">
A
sub-picture
</ins><strong><ins class="diff-new">
must
</ins></strong><ins class="diff-new">
contain
at
least
one
character
that
is
an
</ins><var><ins class="diff-new">
optional-digit-sign
</ins></var><ins class="diff-new">
or
a
member
of
the
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var>.</p></li><li><p><ins class="diff-new">
A
sub-picture
</ins><strong><ins class="diff-new">
must
not
</ins></strong><ins class="diff-new">
contain
a
passive
character
that
is
preceded
by
an
active
character
and
that
is
followed
by
another
active
character.
</ins></p></li><li><p><ins class="diff-new">
A
sub-picture
</ins><strong><ins class="diff-new">
must
not
</ins></strong><ins class="diff-new">
contain
a
</ins><var><ins class="diff-new">
grouping-separator-sign
</ins></var><ins class="diff-new">
adjacent
to
a
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var>.</p></li><li><p><ins class="diff-new">
The
integer
part
of
a
sub-picture
</ins><strong><ins class="diff-new">
must
not
</ins></strong><ins class="diff-new">
contain
a
member
of
the
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var><ins class="diff-new">
that
is
followed
by
an
</ins><var><ins class="diff-new">
optional-digit-sign
</ins></var>.<ins class="diff-new">
The
fractional
part
of
a
sub-picture
</ins><strong><ins class="diff-new">
must
not
</ins></strong><ins class="diff-new">
contain
an
</ins><var><ins class="diff-new">
optional-digit-sign
</ins></var><ins class="diff-new">
that
is
followed
by
a
member
of
the
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var>.</p></li></ul></div><div class="div3"><h4><a name="analysing-picture-string" id= "analysing-picture-string"></a><ins class="diff-new">
4.6.4
Analysing
the
Picture
String
</ins></h4><p><ins class="diff-new">
This
phase
of
the
algorithm
analyses
the
</ins><a title= "picture string" class="termref" href= "#dt-picture-string"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
picture
string
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
and
the
variables
from
the
selected
decimal
format
in
the
static
context,
and
it
has
the
effect
of
setting
the
values
of
various
variables,
which
are
used
in
the
subsequent
formatting
phase.
These
variables
are
listed
below.
Each
is
shown
with
its
initial
setting
and
its
data
type.
</ins></p><p><ins class="diff-new">
Several
variables
are
associated
with
each
sub-picture.
If
there
are
two
sub-pictures,
then
these
rules
are
applied
to
one
sub-picture
to
obtain
the
values
that
apply
to
positive
numbers,
and
to
the
other
to
obtain
the
values
that
apply
to
negative
numbers.
If
there
is
only
one
sub-picture,
then
the
values
for
both
cases
are
derived
from
this
sub-picture.
</ins></p><p><ins class="diff-new">
The
variables
are
as
follows:
</ins></p><ul><li><p><ins class="diff-new">
The
</ins><var><ins class="diff-new">
integer-part-grouping-positions
</ins></var><ins class="diff-new">
is
a
sequence
of
integers
representing
the
positions
of
grouping
separators
within
the
integer
part
of
the
sub-picture.
For
each
</ins><var><ins class="diff-new">
grouping-separator-sign
</ins></var><ins class="diff-new">
that
appears
within
the
integer
part
of
the
sub-picture,
this
sequence
contains
an
integer
that
is
equal
to
the
total
number
of
</ins><var><ins class="diff-new">
optional-digit-sign
</ins></var><ins class="diff-new">
and
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var><ins class="diff-new">
characters
that
appear
within
the
integer
part
of
the
sub-picture
and
to
the
right
of
the
</ins><var><ins class="diff-new">
grouping-separator-sign
</ins></var>.<ins class="diff-new">
In
addition,
if
these
</ins><var><ins class="diff-new">
integer-part-grouping-positions
</ins></var><ins class="diff-new">
are
at
regular
intervals
(that
is,
if
they
form
a
sequence
</ins><var><ins class="diff-new">
N
</ins></var>,<var><ins class="diff-new">
2N
</ins></var>,<var><ins class="diff-new">
3N
</ins></var>,<ins class="diff-new">
...
for
some
integer
value
</ins><var><ins class="diff-new">
N
</ins></var>,<ins class="diff-new">
including
the
case
where
there
is
only
one
number
in
the
list),
then
the
sequence
contains
all
integer
multiples
of
</ins><var><ins class="diff-new">
N
</ins></var><ins class="diff-new">
as
far
as
necessary
to
accommodate
the
largest
possible
number.
</ins></p></li><li><p><ins class="diff-new">
The
</ins><var><ins class="diff-new">
minimum-integer-part-size
</ins></var><ins class="diff-new">
is
an
integer
indicating
the
minimum
number
of
digits
that
will
appear
to
the
left
of
the
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var>.<ins class="diff-new">
It
is
normally
set
to
the
number
of
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var><ins class="diff-new">
characters
found
in
the
integer
part
of
the
sub-picture.
But
if
the
sub-picture
contains
no
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var><ins class="diff-new">
character
and
no
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var>,<ins class="diff-new">
it
is
set
to
one.
</ins></p><div class="note"><p class="prefix"><b><ins class="diff-new">
Note:
</ins></b></p><p><ins class="diff-new">
There
is
no
maximum
integer
part
size.
All
significant
digits
in
the
integer
part
of
the
number
</ins>
will
<ins class="diff-new">be
displayed,
even
if
this
exceeds
the
number
of
</ins><var><ins class="diff-new">
optional-digit-sign
</ins></var><ins class="diff-new">
and
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var><ins class="diff-new">
characters
in
the
subpicture.
</ins></p></div></li><li><p><ins class="diff-new">
The
</ins><var><ins class="diff-new">
prefix
</ins></var><ins class="diff-new">
is
set
to
contain
all
passive
characters
in
the
sub-picture
to
the
left
of
the
leftmost
active
character.
If
the
picture
string
contains
only
one
sub-picture,
the
</ins><var><ins class="diff-new">
prefix
</ins></var><ins class="diff-new">
for
the
negative
sub-picture
is
set
by
concatenating
the
</ins><var><ins class="diff-new">
minus-sign
</ins></var><ins class="diff-new">
character
and
the
</ins><var><ins class="diff-new">
prefix
</ins></var><ins class="diff-new">
for
the
positive
sub-picture
(if
any),
in
that
order.
</ins></p></li><li><p><ins class="diff-new">
The
</ins><var><ins class="diff-new">
fractional-part-grouping-positions
</ins></var><ins class="diff-new">
is
a
sequence
of
integers
representing
the
positions
of
grouping
separators
within
the
fractional
part
of
the
sub-picture.
For
each
</ins><var><ins class="diff-new">
grouping-separator-sign
</ins></var><ins class="diff-new">
that
appears
within
the
fractional
part
of
the
sub-picture,
this
sequence
contains
an
integer
that
is
equal
to
the
total
number
of
</ins><var><ins class="diff-new">
optional-digit-sign
</ins></var><ins class="diff-new">
and
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var><ins class="diff-new">
characters
that
appear
within
the
fractional
part
of
the
sub-picture
and
to
the
left
of
the
</ins><var><ins class="diff-new">
grouping-separator-sign
</ins></var>.</p></li><li><p><ins class="diff-new">
The
</ins><var><ins class="diff-new">
minimum-fractional-part-size
</ins></var><ins class="diff-new">
is
set
to
the
number
of
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var><ins class="diff-new">
characters
found
in
the
fractional
part
of
the
sub-picture.
</ins></p></li><li><p><ins class="diff-new">
The
</ins><var><ins class="diff-new">
maximum-fractional-part-size
</ins></var><ins class="diff-new">
is
set
to
the
total
number
of
</ins><var><ins class="diff-new">
optional-digit-sign
</ins></var><ins class="diff-new">
and
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var><ins class="diff-new">
characters
found
in
the
fractional
part
of
the
sub-picture.
</ins></p></li><li><p><ins class="diff-new">
The
</ins><var><ins class="diff-new">
suffix
</ins></var><ins class="diff-new">
is
set
to
contain
all
passive
characters
to
the
right
of
the
rightmost
active
character
in
the
fractional
part
of
the
sub-picture.
</ins></p></li></ul><div class="note"><p class="prefix"><b><ins class="diff-new">
Note:
</ins></b></p><p><ins class="diff-new">
If
there
is
only
one
sub-picture,
</ins>
then
<ins class="diff-new">all
variables
for
positive
numbers
and
negative
numbers
will
</ins>
be
<del class="diff-old">rounded
</del>
<ins class="diff-chg">the
same,
except
for
</ins><var><ins class="diff-chg">
prefix
</ins></var>:<ins class="diff-chg">
the
prefix
for
negative
numbers
will
be
preceded
by
the
</ins><var><ins class="diff-chg">
minus-sign
</ins></var><ins class="diff-chg">
character.
</ins></p></div></div><div class="div3"><h4><a name="formatting-the-number" id= "formatting-the-number"></a><ins class="diff-chg">
4.6.5
Formatting
the
Number
</ins></h4><p><ins class="diff-chg">
This
section
describes
the
second
phase
of
processing
of
the
</ins><code><ins class="diff-chg">
format-number
</ins></code><ins class="diff-chg">
function.
This
phase
takes
as
input
a
number
</ins>
to
<ins class="diff-new">be
formatted
(referred
to
as
the
</ins><em><ins class="diff-new">
input
number
</ins></em><ins class="diff-new">
),
and
the
variables
set
up
by
analysing
the
decimal
format
in
the
static
context
and
the
</ins><a title="picture string" class="termref" href="#dt-picture-string"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
picture
string
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a>,<ins class="diff-new">
as
described
above.
The
result
of
this
phase
is
a
string,
which
forms
the
return
value
of
</ins>
the
<code>
<ins class="diff-new">format-number
</ins></code><ins class="diff-new">
function.
</ins></p><p><ins class="diff-new">
The
algorithm
for
this
second
stage
of
processing
is
as
follows:
</ins></p><ol class="enumar"><li><p><ins class="diff-new">
If
the
input
number
is
NaN
(not
a
number),
the
result
is
the
specified
</ins><var><ins class="diff-new">
NaN-symbol
</ins></var><ins class="diff-new">
(with
no
</ins><var><ins class="diff-new">
prefix
</ins></var><ins class="diff-new">
or
</ins><var><ins class="diff-new">
suffix
</ins></var><ins class="diff-new">
).
</ins></p></li><li><p><ins class="diff-new">
In
the
rules
below,
the
positive
sub-picture
and
its
associated
variables
are
used
if
the
input
number
is
positive,
and
the
negative
sub-picture
and
its
associated
variables
are
used
otherwise.
Negative
zero
is
taken
as
negative,
positive
zero
as
positive.
</ins></p></li><li><p><ins class="diff-new">
If
the
input
number
is
positive
or
negative
infinity,
the
result
is
the
concatenation
of
the
appropriate
</ins><var><ins class="diff-new">
prefix
</ins></var>,<ins class="diff-new">
the
</ins><var><ins class="diff-new">
infinity-symbol
</ins></var>,<ins class="diff-new">
and
the
appropriate
</ins><var><ins class="diff-new">
suffix
</ins></var>.</p></li><li><p><ins class="diff-new">
If
the
sub-picture
contains
a
</ins><var><ins class="diff-new">
percent-sign
</ins></var>,<ins class="diff-new">
the
number
is
multiplied
by
100.
If
the
sub-picture
contains
a
</ins><var><ins class="diff-new">
per-mille-sign
</ins></var>,<ins class="diff-new">
the
number
is
multiplied
by
1000.
The
resulting
number
is
referred
to
below
as
the
</ins><var><ins class="diff-new">
adjusted
number
</ins></var>.</p></li><li><p><ins class="diff-new">
The
</ins><var><ins class="diff-new">
adjusted
number
</ins></var><ins class="diff-new">
is
converted
(if
necessary)
to
an
</ins><code>
xs:decimal
</code>
<del class="diff-old">150.01
which
</del>
<ins class="diff-chg">value,
using
an
implementation
of
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
that
imposes
no
limits
on
the
</ins><code><ins class="diff-chg">
totalDigits
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
fractionDigits
</ins></code><ins class="diff-chg">
facets.
If
there
are
several
such
values
that
are
numerically
equal
to
the
</ins><var><ins class="diff-chg">
adjusted
number
</ins></var><ins class="diff-chg">
(bearing
in
mind
that
if
the
</ins><var><ins class="diff-chg">
adjusted
number
</ins></var><ins class="diff-chg">
is
an
</ins><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
xs:float
</ins></code>,<ins class="diff-chg">
the
comparison
</ins>
will
be
<del class="diff-old">converted
</del>
<ins class="diff-chg">done
by
converting
the
decimal
value
</ins>
back
to
<del class="diff-old">the
</del>
<ins class="diff-chg">an
</ins><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
or
</ins>
<code>
xs:float
</code>
<del class="diff-old">whose
exact
</del>
<ins class="diff-chg">),
the
one
that
is
chosen
</ins><strong><ins class="diff-chg">
should
</ins></strong><ins class="diff-chg">
be
one
with
the
smallest
possible
number
of
digits
not
counting
leading
or
trailing
zeroes
(whether
significant
or
insignificant).
For
example,
1.0
is
preferred
to
0.9999999999,
and
100000000
is
preferred
to
100000001.
This
</ins>
value
is
<del class="diff-old">150.0099945068...
whereas
</del>
<ins class="diff-chg">then
rounded
so
that
it
uses
no
more
than
</ins>
<code>
<del class="diff-old">round-half-to-even(xs:decimal(150.0150),
2)
</del>
<ins class="diff-chg">maximum-fractional-part-size
</ins></code><ins class="diff-chg">
digits
in
its
fractional
part.
The
</ins><var><ins class="diff-chg">
rounded
number
</ins></var><ins class="diff-chg">
is
defined
to
be
the
result
of
converting
the
</ins><var><ins class="diff-chg">
adjusted
number
</ins></var><ins class="diff-chg">
to
an
</ins><code><ins class="diff-chg">
xs:decimal
</ins>
</code>
<ins class="diff-new">value,
as
described
above,
and
then
calling
the
function
</ins><code><ins class="diff-new">
fn:round-half-to-even
</ins></code><ins class="diff-new">
with
this
converted
number
as
the
first
argument
and
the
</ins><code><ins class="diff-new">
maximum-fractional-part-size
</ins></code><ins class="diff-new">
as
the
second
argument,
again
with
no
limits
on
the
</ins><code><ins class="diff-new">
totalDigits
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
fractionDigits
</ins></code><ins class="diff-new">
in
the
result.
</ins></p></li><li><p><ins class="diff-new">
The
absolute
value
of
the
</ins><var><ins class="diff-new">
rounded
number
</ins></var><ins class="diff-new">
is
converted
to
a
string
in
decimal
notation,
with
no
insignificant
leading
or
trailing
zeroes,
using
the
digits
in
the
</ins><var><ins class="diff-new">
decimal-digit-family
</ins></var><ins class="diff-new">
to
represent
the
ten
decimal
digits,
and
the
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var><ins class="diff-new">
to
separate
the
integer
part
and
the
fractional
part.
(The
value
zero
</ins>
will
<ins class="diff-new">at
this
stage
be
represented
by
a
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var><ins class="diff-new">
on
its
own.)
</ins></p></li><li><p><ins class="diff-new">
If
the
number
of
digits
to
the
left
of
the
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var><ins class="diff-new">
is
less
than
</ins><var><ins class="diff-new">
minimum-integer-part-size
</ins></var>,<ins class="diff-new">
leading
</ins><var><ins class="diff-new">
zero-digit-sign
</ins></var><ins class="diff-new">
characters
are
added
to
pad
out
to
that
size.
</ins></p></li><li><p><ins class="diff-new">
If
the
number
of
digits
to
the
right
of
the
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var><ins class="diff-new">
is
less
than
</ins><var><ins class="diff-new">
minimum-fractional-part-size
</ins></var>,<ins class="diff-new">
trailing
</ins><var><ins class="diff-new">
zero-digit-sign
</ins></var><ins class="diff-new">
characters
are
added
to
pad
out
to
that
size.
</ins></p></li><li><p><ins class="diff-new">
For
each
integer
</ins><var><ins class="diff-new">
N
</ins></var><ins class="diff-new">
in
the
</ins><var><ins class="diff-new">
integer-part-grouping-positions
</ins></var><ins class="diff-new">
list,
a
</ins><var><ins class="diff-new">
grouping-separator-sign
</ins></var><ins class="diff-new">
character
is
inserted
into
the
string
immediately
after
that
digit
that
appears
in
the
integer
part
of
the
number
and
has
</ins><var><ins class="diff-new">
N
</ins></var><ins class="diff-new">
digits
between
it
and
the
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var>,<ins class="diff-new">
if
there
is
such
a
digit.
</ins></p></li><li><p><ins class="diff-new">
For
each
integer
</ins><var><ins class="diff-new">
N
</ins></var><ins class="diff-new">
in
the
</ins><var><ins class="diff-new">
fractional-part-grouping-positions
</ins></var><ins class="diff-new">
list,
a
</ins><var><ins class="diff-new">
grouping-separator-sign
</ins></var><ins class="diff-new">
character
is
inserted
into
the
string
immediately
before
that
digit
that
appears
in
the
fractional
part
of
the
number
and
has
</ins><var><ins class="diff-new">
N
</ins></var><ins class="diff-new">
digits
between
it
and
the
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var>,<ins class="diff-new">
if
there
is
such
a
digit.
</ins></p></li><li><p><ins class="diff-new">
If
there
is
no
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var><ins class="diff-new">
in
the
sub-picture,
or
if
there
are
no
digits
to
the
right
of
the
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var><ins class="diff-new">
character
in
the
string,
then
the
</ins><var><ins class="diff-new">
decimal-separator-sign
</ins></var><ins class="diff-new">
character
is
removed
from
the
string
(it
will
be
the
rightmost
character
in
the
string).
</ins></p></li><li><p><ins class="diff-new">
The
result
of
the
function
is
the
concatenation
of
the
appropriate
</ins><var><ins class="diff-new">
prefix
</ins></var>,<ins class="diff-new">
the
string
conversion
of
the
number
as
obtained
above,
and
the
appropriate
</ins><var><ins class="diff-new">
suffix
</ins></var>.</p></li></ol></div></div><div class="div2"><h3><a name="trigonometry" id="trigonometry"></a><ins class="diff-new">
4.7
Trigonometrical
Functions
</ins></h3><p><ins class="diff-new">
The
functions
in
this
section
perform
trigonometrical
calculations
on
</ins><code><ins class="diff-new">
xs:double
</ins></code><ins class="diff-new">
values.
They
are
designed
for
use
in
applications
performing
geometrical
computation,
for
example
when
generating
SVG
graphics.
</ins></p><p><ins class="diff-new">
Functions
are
provided
to
support
the
six
most
commonly
used
trigonometric
calculations:
sine,
cosine
and
tangent,
and
their
inverses
arc
sine,
arc
cosine,
and
arc
tangent.
Other
functions
such
as
secant,
cosecant,
and
cotangent
are
not
provided
because
they
are
easily
computed
in
terms
of
these
six.
</ins></p><table summary="Function/operator summary" border="1"><thead><tr><th><ins class="diff-new">
Function
</ins></th><th><ins class="diff-new">
Meaning
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-new">
math:pi
</ins></code></td><td><ins class="diff-new">
Returns
the
value
of
the
mathematical
constant
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span>.</td></tr><tr><td><code><ins class="diff-new">
math:sqrt
</ins></code></td><td><ins class="diff-new">
Returns
the
square
root
of
the
argument.
</ins></td></tr><tr><td><code><ins class="diff-new">
math:sin
</ins></code></td><td><ins class="diff-new">
Returns
the
sine
of
the
argument,
expressed
in
radians.
</ins></td></tr><tr><td><code><ins class="diff-new">
math:cos
</ins></code></td><td><ins class="diff-new">
Returns
the
cosine
of
the
argument,
expressed
in
radians.
</ins></td></tr><tr><td><code><ins class="diff-new">
math:tan
</ins></code></td><td><ins class="diff-new">
Returns
the
tangent
of
the
argument,
expressed
in
radians.
</ins></td></tr><tr><td><code><ins class="diff-new">
math:asin
</ins></code></td><td><ins class="diff-new">
Returns
the
arc
sine
of
the
argument,
the
</ins>
result
<ins class="diff-new">being
</ins>
in
the
<ins class="diff-new">range
-
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span><ins class="diff-new">
/2
to
+
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span><ins class="diff-new">
/2
radians.
</ins></td></tr><tr><td>
<code>
<del class="diff-old">xs:decimal
</del>
<ins class="diff-chg">math:acos
</ins>
</code>
<del class="diff-old">whose
</del>
</td>
<td>
<ins class="diff-chg">Returns
the
arc
cosine
of
the
argument,
the
result
being
in
the
range
zero
to
+
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
radians.
</ins></td></tr><tr><td><code><ins class="diff-chg">
math:atan
</ins></code></td><td><ins class="diff-chg">
Returns
the
arc
tangent
of
the
argument,
the
result
being
in
the
range
-
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
/2
to
+
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
/2
radians.
</ins></td></tr></tbody></table><p><span class="termdef"><a name="either-side-of" id= "either-side-of"></a><ins class="diff-chg">
[Definition]
In
this
section,
when
the
rules
for
a
function
say
that
the
returned
value
must
be
the
</ins><code><ins class="diff-chg">
xs:double
</ins></code><b><ins class="diff-chg">
either
side
of
</ins></b><ins class="diff-chg">
some
mathematical
quantity,
then
if
the
mathematical
quantity
is
precisely
representable
in
the
value
space
of
</ins><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
the
</ins>
exact
<ins class="diff-new">result
must
be
returned;
otherwise
it
is
acceptable
to
return
either
the
nearest
higher
</ins><code><ins class="diff-new">
xs:double
</ins></code><ins class="diff-new">
or
the
nearest
lower
</ins><code><ins class="diff-new">
xs:double
</ins></code>,<ins class="diff-new">
and
it
is
</ins><a title= "implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation-dependent
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
which
of
the
two
is
returned.
</ins></span></p><div class="div3"><h4><a name="func-pi" id="func-pi"></a><ins class="diff-new">
4.7.1
math:pi
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
</ins>
value
<ins class="diff-new">of
the
mathematical
constant
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
math:pi
</ins></code><ins class="diff-new">
()
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:double
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
This
function
returns
the
</ins><code><ins class="diff-new">
xs:double
</ins></code><ins class="diff-new">
value
whose
lexical
representation
</ins>
is
<del class="diff-old">150.02.
</del>
<ins class="diff-chg">3.141592653589793e0
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Examples
</ins></dt><dd><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
2*math:pi()
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
6.283185307179586e0
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
60
*
(math:pi()
div
180)
</ins></code><ins class="diff-new">
converts
an
angle
of
60
degrees
to
radians.
</ins></p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-sqrt" id="func-sqrt">
</a>
<del class="diff-old">6.4.5.1
Examples
</del>
<ins class="diff-chg">4.7.2
math:sqrt
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd>
<p>
<ins class="diff-new">Returns
the
square
root
of
the
argument.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto">
<code class= "function">
<ins class="diff-new">math:sqrt
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:double?
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
</ins>
<code>
<del class="diff-old">fn:round-half-to-even(0.5)
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<ins class="diff-new">is
the
empty
sequence,
the
function
</ins>
returns
<ins class="diff-new">the
empty
sequence.
</ins></p><p><ins class="diff-new">
If
</ins>
<code>
<del class="diff-old">0
</del>
<ins class="diff-chg">$arg
</ins></code><ins class="diff-chg">
is
less
than
zero,
the
result
is
</ins><code><ins class="diff-chg">
NaN
</ins></code>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
positive
or
negative
zero,
positive
infinity,
or
</ins><code><ins class="diff-chg">
NaN
</ins></code>,<ins class="diff-chg">
then
the
result
is
</ins><code><ins class="diff-chg">
$arg
</ins>
</code>.
</p>
<p>
<ins class="diff-new">Otherwise
the
result
is
the
</ins><code><ins class="diff-new">
xs:double
</ins></code><ins class="diff-new">
value
</ins><a title="either side of" class="termref" href= "#either-side-of"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
either
side
of
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span>
</a>
<ins class="diff-new">the
mathematical
square
root
of
</ins>
<code>
<del class="diff-old">fn:round-half-to-even(1.5)
</del>
<ins class="diff-chg">$arg
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-sin" id="func-sin"></a><ins class="diff-chg">
4.7.3
math:sin
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
sine
of
the
argument,
expressed
in
radians.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
math:sin
</ins></code><ins class="diff-chg">
(
</ins><code class="arg"><ins class="diff-chg">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:double?
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$
</ins>
</code>
<span style= "font-family:Times; font-style:italic">
<ins class="diff-new">θ
</ins></span><ins class="diff-new">
is
the
empty
sequence,
the
function
</ins>
returns
<ins class="diff-new">the
empty
sequence.
</ins></p><p><ins class="diff-new">
If
</ins>
<code>
<del class="diff-old">2
</del>
<ins class="diff-chg">$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><ins class="diff-chg">
is
positive
or
negative
zero,
the
result
is
</ins><code><ins class="diff-chg">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><ins class="diff-chg">
is
positive
or
negative
infinity,
or
</ins><code><ins class="diff-chg">
NaN
</ins></code>,<ins class="diff-chg">
then
the
result
is
</ins><code><ins class="diff-chg">
NaN
</ins>
</code>.
</p>
<p>
<ins class="diff-new">Otherwise
the
result
is
the
sine
of
</ins><code><ins class="diff-new">
$
</ins></code>
<span style= "font-family:Times; font-style:italic">
<ins class="diff-new">θ
</ins></span>,<ins class="diff-new">
treated
as
an
angle
in
radians.
If
</ins>
<code>
<del class="diff-old">fn:round-half-to-even(2.5)
</del>
<ins class="diff-chg">$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><ins class="diff-chg">
is
in
the
range
-2
</ins><span style="font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
to
+2
</ins><span style="font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
then
the
result
is
the
</ins><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
value
</ins><a title= "either side of" class="termref" href= "#either-side-of"><span class="arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
either
side
of
</ins><span class="arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
the
mathematical
sine
of
the
angle;
if
it
is
outside
this
range,
then
the
precision
of
the
result
is
</ins><a title="implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.</p></dd></dl></div><div class="div3"><h4><a name="func-cos" id="func-cos"></a><ins class="diff-chg">
4.7.4
math:cos
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
cosine
of
the
argument,
expressed
in
radians.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
math:cos
</ins>
</code>
<ins class="diff-new">(
</ins><code class="arg"><ins class="diff-new">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
θ
</ins></span><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:double?
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
θ
</ins></span><ins class="diff-new">
is
the
empty
sequence,
the
function
</ins>
returns
<ins class="diff-new">the
empty
sequence.
</ins></p><p><ins class="diff-new">
If
</ins>
<code>
<del class="diff-old">2
</del>
<ins class="diff-chg">$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><ins class="diff-chg">
is
positive
or
negative
infinity,
or
</ins><code><ins class="diff-chg">
NaN
</ins></code>,<ins class="diff-chg">
then
the
result
is
</ins><code><ins class="diff-chg">
NaN
</ins>
</code>.
</p>
<p>
<ins class="diff-new">Otherwise
the
result
is
the
cosine
of
</ins><code><ins class="diff-new">
$
</ins></code>
<span style= "font-family:Times; font-style:italic">
<ins class="diff-new">θ
</ins></span>,<ins class="diff-new">
treated
as
an
angle
in
radians.
If
</ins>
<code>
<del class="diff-old">fn:round-half-to-even(3.567812E+3,
2)
</del>
<ins class="diff-chg">$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><ins class="diff-chg">
is
in
the
range
-2
</ins><span style="font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
to
+2
</ins><span style="font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
then
the
result
is
the
</ins><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
value
</ins><a title= "either side of" class="termref" href= "#either-side-of"><span class="arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
either
side
of
</ins><span class="arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
the
mathematical
cosine
of
the
angle;
if
it
is
outside
this
range,
then
the
precision
of
the
result
is
</ins><a title="implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.</p></dd></dl></div><div class="div3"><h4><a name="func-tan" id="func-tan"></a><ins class="diff-chg">
4.7.5
math:tan
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
tangent
of
the
argument,
expressed
in
radians.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
math:tan
</ins></code><ins class="diff-chg">
(
</ins><code class="arg"><ins class="diff-chg">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:double?
</ins>
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
θ
</ins></span><ins class="diff-new">
is
the
empty
sequence,
the
function
</ins>
returns
<ins class="diff-new">the
empty
sequence.
</ins></p><p><ins class="diff-new">
If
</ins>
<code>
<del class="diff-old">3567.81E0
</del>
<ins class="diff-chg">$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><ins class="diff-chg">
is
positive
or
negative
infinity,
or
</ins><code><ins class="diff-chg">
NaN
</ins></code>,<ins class="diff-chg">
then
the
result
is
</ins><code><ins class="diff-chg">
NaN
</ins>
</code>.
</p>
<p>
<ins class="diff-new">Otherwise
the
result
is
the
tangent
of
</ins><code><ins class="diff-new">
$
</ins></code>
<span style="font-family:Times; font-style:italic">
<ins class="diff-new">θ
</ins></span>,<ins class="diff-new">
treated
as
an
angle
in
radians.
If
</ins>
<code>
<del class="diff-old">fn:round-half-to-even(4.7564E-3,
2)
</del>
<ins class="diff-chg">$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><ins class="diff-chg">
is
in
the
range
-2
</ins><span style="font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
to
+2
</ins><span style="font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
then
the
result
is
the
</ins><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
value
</ins><a title= "either side of" class="termref" href= "#either-side-of"><span class="arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
either
side
of
</ins><span class="arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
the
mathematical
tangent
of
the
angle;
if
it
is
outside
this
range,
then
the
precision
of
the
result
is
</ins><a title="implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.</p></dd></dl></div><div class="div3"><h4><a name="func-asin" id="func-asin"></a><ins class="diff-chg">
4.7.6
math:asin
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
arc
sine
of
the
argument,
the
result
being
in
the
range
-
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
/2
to
+
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span><ins class="diff-chg">
/2
radians.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
math:asin
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg"><ins class="diff-chg">
$arg
</ins></code><code class="as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:double?
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins>
</code>
<ins class="diff-new">is
the
empty
sequence,
the
function
</ins>
returns
<ins class="diff-new">the
empty
sequence.
</ins></p><p><ins class="diff-new">
If
</ins>
<code>
<del class="diff-old">0.0E0
</del>
<ins class="diff-chg">$arg
</ins></code><ins class="diff-chg">
is
positive
or
negative
zero,
the
result
is
</ins><code><ins class="diff-chg">
$arg
</ins>
</code>.
</p>
<p>
<ins class="diff-new">If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
</ins><code><ins class="diff-new">
NaN
</ins></code>,<ins class="diff-new">
or
if
its
absolute
value
is
greater
than
one,
then
the
result
is
</ins><code><ins class="diff-new">
NaN
</ins></code>.</p><p><ins class="diff-new">
Otherwise
the
result
is
the
arc
sine
of
</ins><code><ins class="diff-new">
$arg
</ins></code>,<ins class="diff-new">
returned
as
an
angle
in
radians
in
the
range
-
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span><ins class="diff-new">
/2
to
+
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span><ins class="diff-new">
/2.
The
result
is
the
</ins><code><ins class="diff-new">
xs:double
</ins></code><ins class="diff-new">
value
</ins><a title="either side of" class= "termref" href="#either-side-of"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
either
side
of
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
the
mathematical
arc
sine
of
the
argument.
</ins></p></dd></dl></div><div class="div3"><h4><a name="func-acos" id="func-acos"></a><ins class="diff-new">
4.7.7
math:acos
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
arc
cosine
of
the
argument,
the
result
being
in
the
range
zero
to
+
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span><ins class="diff-new">
radians.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
math:acos
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code>
<code class= "return-type">
<ins class="diff-new">xs:double?
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
</ins>
<code>
<del class="diff-old">fn:round-half-to-even(35612.25,
-2)
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<ins class="diff-new">is
the
empty
sequence,
the
function
</ins>
returns
<ins class="diff-new">the
empty
sequence.
</ins></p><p><ins class="diff-new">
If
</ins>
<code>
<del class="diff-old">35600
</del>
<ins class="diff-chg">$arg
</ins></code><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
NaN
</ins></code>,<ins class="diff-chg">
or
if
its
absolute
value
is
greater
than
one,
then
the
result
is
</ins><code><ins class="diff-chg">
NaN
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">Otherwise
the
result
is
the
arc
cosine
of
</ins><code><ins class="diff-chg">
$arg
</ins></code>,<ins class="diff-chg">
returned
as
an
angle
in
radians
in
the
range
0
to
+
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
π
</ins></span>.<ins class="diff-chg">
The
result
is
the
</ins><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
value
</ins><a title="either side of" class= "termref" href="#either-side-of"><span class="arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
either
side
of
</ins><span class="arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
the
mathematical
arc
cosine
of
the
argument.
</ins></p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-atan" id="func-atan">
</a>
<ins class="diff-new">4.7.8
math:atan
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
arc
tangent
of
the
argument,
the
result
being
in
the
range
-
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span><ins class="diff-new">
/2
to
+
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span><ins class="diff-new">
/2
radians.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
math:atan
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:double?
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
positive
or
negative
zero,
the
result
is
</ins><code><ins class="diff-new">
$arg
</ins></code>.</p><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
</ins><code><ins class="diff-new">
NaN
</ins></code><ins class="diff-new">
then
the
result
is
</ins><code><ins class="diff-new">
NaN
</ins></code>.</p><p><ins class="diff-new">
Otherwise
the
result
is
the
arc
tangent
of
</ins><code><ins class="diff-new">
$arg
</ins></code>,<ins class="diff-new">
returned
as
an
angle
in
radians
in
the
range
-
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span><ins class="diff-new">
/2
to
+
</ins><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
π
</ins></span><ins class="diff-new">
/2.
The
result
is
the
</ins><code><ins class="diff-new">
xs:double
</ins></code><ins class="diff-new">
value
</ins><a title="either side of" class= "termref" href="#either-side-of"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
either
side
of
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
the
mathematical
arc
tangent
of
the
argument.
</ins></p><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-new">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-new">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
Need
to
add
rules
for
the
infinities?
</ins></td></tr></table></dd></dl>
</div>
</div>
</div>
<div class="div1">
<h2>
<a name="string-functions" id="string-functions">
</a>
<del class="diff-old">7
</del>
<ins class="diff-chg">5
</ins>
Functions
on
Strings
</h2>
<p>
This
section
<del class="diff-old">discusses
</del>
<ins class="diff-chg">specifies
</ins>
functions
and
operators
on
the
<a href= "#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
<code>
xs:string
</code>
datatype
and
the
datatypes
derived
from
it.
</p>
<div class="div2">
<h3>
<a name="string-types" id="string-types">
</a>
<del class="diff-old">7.1
</del>
<ins class="diff-chg">5.1
</ins>
String
Types
</h3>
<p>
The
operators
described
in
this
section
are
defined
on
the
following
types.
Each
type
whose
name
is
indented
is
derived
from
the
type
whose
name
appears
nearest
above
with
one
less
level
of
indentation.
</p>
<table class="hierarchy" summary="Type summary" border="0">
<tbody>
<tr>
<td class="castOther" align="left" valign="middle">
xs:string
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:normalizedString
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:token
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:language
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:NMTOKEN
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:Name
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:NCName
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:ID
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:IDREF
</td>
</tr>
<tr>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
</td>
<td class="castOther" align="left" valign="middle">
xs:ENTITY
</td>
</tr>
</tbody>
</table>
<p>
They
also
apply
to
user-defined
types
derived
by
restriction
from
the
above
types.
</p>
<p>
It
is
<a title="implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
which
version
of
<a href="#Unicode4">
[The
Unicode
Standard]
</a>
is
supported,
but
it
is
recommended
that
the
most
recent
version
of
Unicode
be
used.
</p>
<p>
Unless
explicitly
stated,
the
<code>
xs:string
</code>
values
returned
by
the
functions
in
this
document
are
not
normalized
in
the
sense
of
<a href="#charmod">
[Character
Model
for
the
World
Wide
Web
1.0:
Fundamentals]
</a>.
</p>
<div class="note">
<p class="prefix">
<b>
Notes:
</b>
</p>
<p>
This
document
uses
the
term
<del class="diff-old">"code
point",
sometimes
spelt
</del>
"codepoint"
<del class="diff-old">(also
known
as
"character
number"
or
"code
position")
</del>
to
mean
<del class="diff-old">a
</del>
<ins class="diff-chg">the
</ins>
non-negative
integer
<del class="diff-old">that
represents
</del>
<ins class="diff-chg">assigned
to
</ins>
a
character
<ins class="diff-new">by
the
Unicode
consortium.
Equivalent
terms
found
</ins>
in
<del class="diff-old">some
encoding.
</del>
<ins class="diff-chg">other
specifications
are
"code
point",
"character
number",
or
"code
position".
</ins>
See
<a href= "#charmod">
[Character
Model
for
the
World
Wide
Web
1.0:
Fundamentals]
</a>.
The
use
of
the
word
"character"
in
this
document
is
in
the
sense
of
production
[2]
of
<a href= "#REC-xml">
<del class="diff-old">[Extensible
Markup
Language
(XML)
1.0
Recommendation
(Third
Edition)]
</del>
<ins class="diff-chg">[REC-xml]
</ins>
</a>.
<a href="#Unicode4">
[The
Unicode
Standard]
</a>,
defines
<del class="diff-old">code
points
</del>
<ins class="diff-chg">codepoints
</ins>
that
range
from
#x0000
to
#x10FFFF
inclusive
and
may
include
<del class="diff-old">code
points
</del>
<ins class="diff-chg">codepoints
</ins>
that
have
not
yet
been
assigned
to
characters.
</p>
<p>
In
functions
that
involve
character
counting
such
as
<a href= "#func-substring">
<code>
fn:substring
</code>
</a>,
<a href= "#func-string-length">
<code>
fn:string-length
</code>
</a>
and
<a href="#func-translate">
<code>
fn:translate
</code>
</a>,
what
is
counted
is
the
number
of
XML
characters
in
the
string
(or
equivalently,
the
number
of
Unicode
<del class="diff-old">code
points).
</del>
<ins class="diff-chg">codepoints).
</ins>
Some
implementations
may
represent
a
<del class="diff-old">code
point
</del>
<ins class="diff-chg">codepoint
</ins>
above
xFFFF
using
two
16-bit
values
known
as
a
<del class="diff-old">surrogate.
</del>
<ins class="diff-chg">surrogate
pair.
</ins>
A
surrogate
<ins class="diff-new">pair
</ins>
counts
as
one
character,
not
two.
</p>
</div>
</div>
<div class="div2">
<h3>
<a name="func-assemble-disassemble-string" id= "func-assemble-disassemble-string">
</a>
<del class="diff-old">7.2
</del>
<ins class="diff-chg">5.2
</ins>
Functions
to
Assemble
and
Disassemble
Strings
</h3>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-codepoints-to-string">
<code>
fn:codepoints-to-string
</code>
</a>
</td>
<td>
Creates
an
<code>
xs:string
</code>
from
a
sequence
of
<a href= "#Unicode4">
<ins class="diff-new">[The
</ins>
Unicode
<del class="diff-old">code
points.
</del>
<ins class="diff-chg">Standard]
</ins></a><ins class="diff-chg">
codepoints.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-string-to-codepoints">
<code>
fn:string-to-codepoints
</code>
</a>
</td>
<td>
Returns
the
sequence
of
<a href="#Unicode4">
<ins class="diff-new">[The
</ins>
Unicode
<del class="diff-old">code
points
</del>
<ins class="diff-chg">Standard]
</ins></a><ins class="diff-chg">
codepoints
</ins>
that
constitute
an
<code>
xs:string
<del class="diff-old">.
</del>
</code>
<ins class="diff-chg">value.
</ins>
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-codepoints-to-string" id= "func-codepoints-to-string">
</a>
<del class="diff-old">7.2.1
</del>
<ins class="diff-chg">5.2.1
</ins>
fn:codepoints-to-string
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Creates
an
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
from
a
sequence
of
</ins><a href= "#Unicode4"><ins class="diff-new">
[The
Unicode
Standard]
</ins></a><ins class="diff-new">
codepoints.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:codepoints-to-string
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:integer*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Creates
an
xs:string
</del>
<ins class="diff-chg">The
function
returns
the
string
made
up
</ins>
from
<del class="diff-old">a
sequence
of
[The
</del>
<ins class="diff-chg">the
characters
whose
</ins>
Unicode
<del class="diff-old">Standard]
code
points.
Returns
</del>
<ins class="diff-chg">codepoints
are
supplied
in
</ins><code><ins class="diff-chg">
$arg
</ins></code>.<ins class="diff-chg">
This
will
be
</ins>
the
zero-length
string
if
<code>
$arg
</code>
is
the
empty
sequence.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p>
If
any
of
the
<del class="diff-old">code
points
</del>
<ins class="diff-chg">codepoints
</ins>
in
<code>
$arg
</code>
is
not
a
legal
XML
character,
an
error
is
raised
[
<a href="#ERRFOCH0001" title= "err:FOCH0001">
err:FOCH0001
</a>
].
</p>
<del class="diff-old">7.2.1.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:codepoints-to-string((2309,
2358,
2378,
2325))
</code>
returns
<code>
"अशॊक"
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-string-to-codepoints" id= "func-string-to-codepoints">
</a>
<del class="diff-old">7.2.2
</del>
<ins class="diff-chg">5.2.2
</ins>
fn:string-to-codepoints
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
sequence
of
</ins><a href="#Unicode4"><ins class="diff-new">
[The
Unicode
Standard]
</ins></a><ins class="diff-new">
codepoints
that
constitute
an
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
value.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:string-to-codepoints
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
</del>
<ins class="diff-chg">The
function
returns
a
</ins>
sequence
of
<del class="diff-old">[The
</del>
<ins class="diff-chg">integers,
each
integer
being
the
</ins>
Unicode
<del class="diff-old">Standard]
code
points
that
constitute
an
</del>
<ins class="diff-chg">codepoint
of
the
corresponding
character
in
</ins>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">$arg
</ins>
</code>.
</p>
<p>
If
<code>
$arg
</code>
is
a
zero-length
string
or
the
empty
sequence,
the
<ins class="diff-new">function
returns
the
</ins>
empty
<del class="diff-old">sequence
is
returned.
</del>
<ins class="diff-chg">sequence.
</ins>
</p>
<del class="diff-old">7.2.2.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:string-to-codepoints("Thérèse")
</code>
returns
<del class="diff-old">the
sequence
</del>
<code>
(84,
104,
233,
114,
232,
115,
101)
</code>.
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="string-compare" id="string-compare">
</a>
<del class="diff-old">7.3
</del>
<ins class="diff-chg">5.3
</ins>
Equality
and
Comparison
of
Strings
</h3>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
<ins class="diff-new">Function
</ins></th><th><ins class="diff-new">
Meaning
</ins></th></tr></thead><tbody><tr><td><a href="#func-compare"><code><ins class="diff-new">
fn:compare
</ins></code></a></td><td><ins class="diff-new">
Returns
-1,
0,
or
1,
depending
on
whether
</ins><code><ins class="diff-new">
$comparand1
</ins></code><ins class="diff-new">
collates
before,
equal
to,
or
after
</ins><code><ins class="diff-new">
$comparand2
</ins></code><ins class="diff-new">
according
to
the
rules
of
a
selected
collation.
</ins></td></tr><tr><td><a href= "#func-codepoint-equal"><code><ins class="diff-new">
fn:codepoint-equal
</ins></code></a></td><td><ins class="diff-new">
Returns
true
if
two
strings
are
equal,
considered
codepoint-by-codepoint.
</ins></td></tr></tbody></table>
<div class="div3">
<h4>
<a name="collations" id="collations">
</a>
<del class="diff-old">7.3.1
</del>
<ins class="diff-chg">5.3.1
</ins>
Collations
</h4>
<p>
A
collation
is
a
specification
of
the
manner
in
which
character
strings
are
compared
and,
by
extension,
ordered.
When
values
whose
type
is
<code>
xs:string
</code>
or
a
type
derived
from
<code>
xs:string
</code>
are
compared
(or,
equivalently,
sorted),
the
comparisons
are
inherently
performed
according
to
some
collation
(even
if
that
collation
is
defined
entirely
on
<del class="diff-old">code
point
</del>
<ins class="diff-chg">codepoint
</ins>
values).
The
<a href="#charmod">
[Character
Model
for
the
World
Wide
Web
1.0:
Fundamentals]
</a>
observes
that
some
applications
may
require
different
comparison
and
ordering
behaviors
than
other
applications.
Similarly,
some
users
having
particular
linguistic
expectations
may
require
different
behaviors
than
other
users.
Consequently,
the
collation
must
be
taken
into
account
when
comparing
strings
in
any
context.
Several
functions
in
this
and
the
following
section
make
use
of
a
collation.
</p>
<p>
Collations
can
indicate
that
two
different
<del class="diff-old">code
points
</del>
<ins class="diff-chg">codepoints
</ins>
are,
in
fact,
equal
for
comparison
purposes
(e.g.,
"v"
and
"w"
are
considered
equivalent
in
<del class="diff-old">Swedish).
</del>
<ins class="diff-chg">some
Swedish
collations).
</ins>
Strings
can
be
compared
codepoint-by-codepoint
or
in
a
linguistically
appropriate
manner,
as
defined
by
the
collation.
</p>
<p>
Some
collations,
especially
those
based
on
the
<a href= "#Unicode-Collations">
[Unicode
Collation
Algorithm]
</a>
can
be
"tailored"
for
various
purposes.
This
document
does
not
discuss
such
tailoring,
nor
does
it
provide
a
mechanism
to
perform
tailoring.
Instead,
it
assumes
that
the
collation
argument
to
the
various
functions
below
is
a
tailored
and
named
collation.
<del class="diff-old">A
specific
</del>
</p>
<p>
<ins class="diff-chg">The
</ins><a title="Unicode codepoint collation" class="termref" href= "#dt-codepoint-collation"><span class="arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
Unicode
codepoint
</ins>
collation
<del class="diff-old">with
</del>
<span class="arrow">
<ins class="diff-chg">·
</ins></span></a><ins class="diff-chg">
is
</ins>
a
<del class="diff-old">distinguished
name,
http://www.w3.org/2005/xpath-functions/collation/codepoint
,
provides
the
ability
to
compare
strings
based
on
code
point
values.
Every
implementation
of
XQuery/XPath
must
support
the
</del>
collation
<ins class="diff-new">available
in
every
implementation,
which
sorts
</ins>
based
on
<del class="diff-old">code
point
</del>
<ins class="diff-chg">codepoint
</ins>
values.
<ins class="diff-new">For
further
details
see
</ins><a href= "#codepoint-collation"><b><ins class="diff-new">
5.3.2
The
Unicode
Codepoint
Collation
</ins></b></a>
</p>
<p>
In
the
ideal
case,
a
collation
should
treat
two
strings
as
equal
if
the
two
strings
are
identical
after
Unicode
normalization.
Thus,
the
<a href="#charmod-normalization">
[Character
Model
for
the
World
Wide
Web
1.0:
Normalization]
</a>
recommends
that
all
strings
be
subjected
to
early
Unicode
normalization
and
some
collations
will
raise
runtime
errors
if
they
encounter
strings
that
are
not
properly
normalized.
However,
it
is
not
possible
to
guarantee
that
all
strings
in
all
XML
documents
are,
in
fact,
normalized,
or
that
they
are
normalized
in
the
same
manner.
In
order
to
maximize
interoperability
of
operations
on
XML
documents
in
general,
there
may
be
collations
that
operate
on
unnormalized
strings
and
other
collations
that
implicitly
normalize
strings
before
comparing
them.
Applications
may
choose
the
kind
of
collation
best
suited
for
their
needs.
Note
that
collations
based
on
the
Unicode
collation
algorithm
implicitly
normalize
strings
before
comparison
and
produce
equivalent
results
regardless
of
a
string's
normalization.
</p>
<p>
This
specification
assumes
that
collations
are
named
and
that
the
collation
name
may
be
provided
as
an
argument
to
string
functions.
Functions
that
allow
specification
of
a
collation
do
so
with
an
argument
whose
type
is
<code>
xs:string
</code>
but
whose
lexical
form
must
conform
to
an
<code>
xs:anyURI
</code>.
If
the
collation
is
specified
using
a
relative
URI,
it
is
assumed
to
be
relative
to
the
value
of
the
base-uri
property
in
the
static
context.
This
specification
also
defines
the
manner
in
which
a
default
collation
is
determined
if
the
collation
argument
is
not
specified
in
<del class="diff-old">invocations
</del>
<ins class="diff-chg">calls
</ins>
of
functions
that
use
a
collation
but
allow
it
to
be
omitted.
</p>
<p>
This
specification
does
not
define
whether
or
not
the
collation
URI
is
dereferenced.
The
collation
URI
may
be
an
abstract
identifier,
or
it
may
refer
to
an
actual
resource
describing
the
collation.
If
it
refers
to
a
resource,
this
specification
does
not
define
the
nature
of
that
resource.
One
possible
candidate
is
that
the
resource
is
a
locale
description
expressed
using
the
Locale
Data
Markup
Language:
see
<a href="#LDML">
[Locale
Data
Markup
Language]
</a>.
</p>
<p>
Functions
such
as
<a href= "#func-compare">
<code>
fn:compare
</code>
</a>
and
<a href= "#func-max">
<code>
fn:max
</code>
</a>
that
compare
<code>
xs:string
</code>
values
use
a
single
collation
URI
to
identify
all
aspects
of
the
collation
rules.
This
means
that
any
parameters
such
as
the
strength
of
the
collation
must
be
specified
as
part
of
the
collation
URI.
For
example,
suppose
there
is
a
collation
"
<code>
http://www.example.com/collations/French
</code>
"
that
refers
to
a
French
collation
that
compares
on
the
basis
of
base
characters.
Collations
that
use
the
same
basic
rules,
but
with
higher
strengths,
for
example,
base
characters
and
accents,
or
base
characters,
accents
and
case,
would
need
to
be
given
different
names,
say
"
<code>
http://www.example.com/collations/French1
</code>
"
and
"
<code>
http://www.example.com/collations/French2
</code>
".
Note
that
some
specifications
use
the
term
collation
to
refer
to
an
algorithm
that
can
be
parameterized,
but
in
this
specification,
each
possible
parameterization
is
considered
to
be
a
distinct
collation.
</p>
<p>
The
XQuery/XPath
static
context
includes
a
provision
for
a
default
collation
that
can
be
used
for
string
comparisons
and
ordering
operations.
See
the
description
of
the
static
context
in
<a href="http://www.w3.org/TR/xpath20/#static_context">
Section
2.1.1
Static
Context
</a>
<sup>
<small>
XP
</small>
</sup>.
If
the
default
collation
is
not
specified
by
the
user
or
the
system,
the
default
collation
is
the
<a title="Unicode codepoint collation" class="termref" href="#dt-codepoint-collation">
<span class= "arrow">
<ins class="diff-new">·
</ins></span>
Unicode
<del class="diff-old">code
point
</del>
<ins class="diff-chg">codepoint
</ins>
collation
<del class="diff-old">(
</del>
<span class= "arrow">
<ins class="diff-chg">·
</ins></span></a>.</p><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b></p><p><ins class="diff-chg">
XML
allows
elements
to
specify
the
</ins><code><ins class="diff-chg">
xml:lang
</ins></code><ins class="diff-chg">
attribute
to
indicate
the
language
associated
with
the
content
of
such
an
element.
This
specification
does
not
use
</ins><code><ins class="diff-chg">
xml:lang
</ins></code><ins class="diff-chg">
to
identify
the
default
collation
because
using
</ins><code><ins class="diff-chg">
xml:lang
</ins></code><ins class="diff-chg">
does
not
produce
desired
effects
when
the
two
strings
to
be
compared
have
different
</ins><code><ins class="diff-chg">
xml:lang
</ins></code><ins class="diff-chg">
values
or
when
a
string
is
multilingual.
</ins></p></div></div><div class="div3"><h4><a name="codepoint-collation" id= "codepoint-collation"></a><ins class="diff-chg">
5.3.2
The
Unicode
Codepoint
Collation
</ins></h4><p><span class="termdef"><a name="dt-codepoint-collation" id= "dt-codepoint-collation"></a><ins class="diff-chg">
[Definition]
The
collation
URI
</ins>
<code>
http://www.w3.org/2005/xpath-functions/collation/codepoint
</code>
<del class="diff-old">).
</del>
<ins class="diff-chg">identifies
a
collation
which
must
be
recognized
by
every
implementation:
it
is
referred
to
as
the
</ins><b><ins class="diff-chg">
Unicode
codepoint
collation
</ins></b><ins class="diff-chg">
(not
to
be
confused
with
the
Unicode
collation
algorithm).
</ins></span>
</p>
<p>
The
<del class="diff-old">decision
</del>
<ins class="diff-chg">Unicode
codepoint
collation
does
not
perform
any
normalization
on
the
supplied
strings.
</ins></p><p><ins class="diff-chg">
The
collation
is
defined
as
follows.
Each
</ins>
of
<del class="diff-old">which
</del>
<ins class="diff-chg">the
two
strings
is
converted
to
a
sequence
of
integers
using
the
</ins><code><ins class="diff-chg">
fn:string-to-codepoints
</ins></code><ins class="diff-chg">
function.
These
two
sequences
</ins><code><ins class="diff-chg">
$A
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
$B
</ins></code><ins class="diff-chg">
are
then
compared
as
follows:
</ins></p><ul><li><p><ins class="diff-chg">
If
both
sequences
are
empty,
the
strings
are
equal
</ins></p></li><li><p><ins class="diff-chg">
If
one
sequence
is
empty
and
the
other
is
not,
then
the
string
corresponding
to
the
empty
sequence
is
less
than
the
other
string.
</ins></p></li><li><p><ins class="diff-chg">
If
the
first
integer
in
</ins><code><ins class="diff-chg">
$A
</ins></code><ins class="diff-chg">
is
less
than
the
first
integer
in
</ins><code><ins class="diff-chg">
$B
</ins></code>,<ins class="diff-chg">
then
the
string
corresponding
to
</ins><code><ins class="diff-chg">
$A
</ins></code><ins class="diff-chg">
is
less
than
the
string
corresponding
to
</ins><code><ins class="diff-chg">
$B
</ins></code>.</p></li><li><p><ins class="diff-chg">
If
the
first
integer
in
</ins><code><ins class="diff-chg">
$A
</ins></code><ins class="diff-chg">
is
greater
than
the
first
integer
in
</ins><code><ins class="diff-chg">
$B
</ins></code>,<ins class="diff-chg">
then
the
string
corresponding
to
</ins><code><ins class="diff-chg">
$A
</ins></code><ins class="diff-chg">
is
greater
than
the
string
corresponding
to
</ins><code><ins class="diff-chg">
$B
</ins></code>.</p></li><li><p><ins class="diff-chg">
Otherwise
(the
first
pair
of
integers
are
equal),
the
result
is
obtained
by
applying
the
same
rules
recursively
to
</ins><a href= "#func-subsequence"><code><ins class="diff-chg">
fn:subsequence($A,
2)
</ins></code></a><ins class="diff-chg">
and
</ins><a href="#func-subsequence"><code><ins class="diff-chg">
fn:subsequence($B,
2)
</ins></code></a></p></li></ul><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b></p><p><ins class="diff-chg">
While
the
Unicode
codepoint
collation
does
not
produce
results
suitable
for
quality
publishing
of
printed
indexes
or
directories,
it
is
adequate
for
many
purposes
where
a
restricted
alphabet
is
used,
such
as
sorting
of
vehicle
registrations.
</ins></p></div></div><div class="div3"><h4><a name="choosing-a-collation" id= "choosing-a-collation"></a><ins class="diff-chg">
5.3.3
Choosing
a
Collation
</ins></h4><p><ins class="diff-chg">
Many
functions
have
two
signatures,
where
one
signature
includes
a
</ins><code><ins class="diff-chg">
$collation
</ins></code><ins class="diff-chg">
argument
and
the
other
omits
this
argument.
</ins></p><p><ins class="diff-chg">
The
</ins>
collation
to
use
for
<del class="diff-old">a
given
comparison
or
ordering
function
</del>
<ins class="diff-chg">these
functions
</ins>
is
determined
by
the
following
<del class="diff-old">algorithm:
</del>
<ins class="diff-chg">rules:
</ins>
</p>
<ol class="enumar">
<li>
<p>
If
the
function
specifies
an
explicit
collation,
CollationA
(e.g.,
if
the
optional
collation
argument
is
specified
in
<del class="diff-old">an
invocation
</del>
<ins class="diff-chg">a
call
</ins>
of
the
<a href="#func-compare">
<code>
<del class="diff-old">fn:compare()
</del>
<ins class="diff-chg">fn:compare
</ins>
</code>
</a>
function),
then:
</p>
<ul>
<li>
<p>
If
CollationA
is
supported
by
the
implementation,
then
CollationA
is
used.
</p>
</li>
<li>
<p>
Otherwise,
an
error
is
raised
[
<a href="#ERRFOCH0002" title= "err:FOCH0002">
err:FOCH0002
</a>
].
</p>
</li>
</ul>
</li>
<li>
<p>
If
no
collation
is
explicitly
specified
for
the
function
and
the
default
collation
in
the
XQuery/XPath
static
context
is
CollationB,
then:
</p>
<ul>
<li>
<p>
If
CollationB
is
supported
by
the
implementation,
then
CollationB
is
used.
</p>
</li>
<li>
<p>
Otherwise,
an
error
is
raised
[
<a href="#ERRFOCH0002" title= "err:FOCH0002">
err:FOCH0002
</a>
].
</p>
</li>
</ul>
</li>
</ol>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
<del class="diff-old">XML
allows
elements
to
specify
the
xml:lang
attribute
to
indicate
the
language
associated
with
</del>
<ins class="diff-chg">Because
</ins>
the
<del class="diff-old">content
</del>
<ins class="diff-chg">set
</ins>
of
<del class="diff-old">such
</del>
<ins class="diff-chg">collations
that
are
supported
is
</ins><a title= "implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>,
an
<del class="diff-old">element.
This
specification
does
not
use
xml:lang
to
identify
the
default
collation
because
using
xml:lang
does
not
produce
desired
effects
when
</del>
<ins class="diff-chg">implementation
has
</ins>
the
<del class="diff-old">two
strings
</del>
<ins class="diff-chg">option
</ins>
to
<del class="diff-old">be
compared
have
different
xml:lang
values
or
when
a
string
is
multilingual.
</del>
<ins class="diff-chg">support
all
collation
URIs,
in
which
case
it
will
never
raise
this
error.
</ins>
</p>
</div>
<del class="diff-old">Function
Meaning
</del>
</div>
<div class="div3">
<h4>
<del class="diff-old">fn:compare
</del>
<a name="func-compare" id="func-compare">
</a>
<ins class="diff-chg">5.3.4
fn:compare
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p>
Returns
-1,
0,
or
1,
depending
on
whether
<del class="diff-old">the
value
of
the
first
argument
is
respectively
less
than,
</del>
<code>
<ins class="diff-chg">$comparand1
</ins></code><ins class="diff-chg">
collates
before,
</ins>
equal
to,
or
<del class="diff-old">greater
than
the
value
of
the
second
argument,
</del>
<ins class="diff-chg">after
</ins><code><ins class="diff-chg">
$comparand2
</ins></code>
according
to
the
rules
of
<del class="diff-old">the
collation
that
is
used.
fn:codepoint-equal
Returns
true
if
the
two
arguments
are
equal
using
the
Unicode
code
point
</del>
<ins class="diff-chg">a
selected
</ins>
collation.
<del class="diff-old">7.3.2
fn:compare
</del>
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:compare
</code>
(
<code class= "arg">
$comparand1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$comparand2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:compare
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$comparand1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$comparand2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
-1,
0,
or
1,
depending
on
whether
the
value
of
the
<code>
$comparand1
</code>
is
respectively
less
than,
equal
to,
or
greater
than
the
value
of
<code>
$comparand2
</code>,
according
to
the
rules
of
the
collation
that
is
used.
</p>
<p>
The
collation
used
by
<del class="diff-old">the
invocation
of
</del>
this
function
is
determined
according
to
the
rules
in
<a href="#choosing-a-collation">
<b>
<del class="diff-old">7.3.1
Collations
</del>
<ins class="diff-chg">5.3.3
Choosing
a
Collation
</ins>
</b>
</a>.
</p>
<p>
If
either
<del class="diff-old">argument
</del>
<code>
<ins class="diff-chg">$comparand1
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
$comparand2
</ins></code>
is
the
empty
sequence,
the
<del class="diff-old">result
is
</del>
<ins class="diff-chg">function
returns
</ins>
the
empty
sequence.
</p>
<p>
This
function,
<del class="diff-old">invoked
</del>
<ins class="diff-chg">called
</ins>
with
the
first
signature,
<del class="diff-old">backs
up
</del>
<ins class="diff-chg">defines
the
semantics
of
</ins>
the
"eq",
"ne",
"gt",
"lt",
"le"
and
"ge"
operators
on
<del class="diff-old">string
</del>
<code>
<ins class="diff-chg">xs:string
</ins></code>
values.
</p>
<del class="diff-old">7.3.2.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:compare('abc',
'abc')
</code>
returns
<del class="diff-old">0.
</del>
<code>
<ins class="diff-chg">0
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:compare('Strasse',
'Straße')
</code>
returns
<code>
0
<del class="diff-old">if
and
only
if
</del>
</code>.
<em>
<ins class="diff-chg">(Assuming
</ins>
the
default
collation
includes
provisions
that
equate
"ss"
and
the
(German)
character
"ß"
("sharp-s").
<del class="diff-old">(Otherwise,
</del>
<ins class="diff-chg">Otherwise,
</ins>
the
returned
value
depends
on
the
semantics
of
the
default
<del class="diff-old">collation.)
</del>
<ins class="diff-chg">collation.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:compare('Strasse',
'Straße',
<del class="diff-old">'deutsch')
</del>
<ins class="diff-chg">'http://example.com/deutsch')
</ins>
</code>
returns
<code>
0
<del class="diff-old">if
</del>
</code>.
<em>
<ins class="diff-chg">(Assuming
</ins>
the
collation
identified
by
the
<del class="diff-old">relative
</del>
URI
<del class="diff-old">constructed
from
the
</del>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">http://example.com/deutsch
</ins>
</code>
<del class="diff-old">value
"deutsch"
</del>
includes
provisions
that
equate
"ss"
and
the
(German)
character
"ß"
("sharp-s").
<del class="diff-old">(Otherwise,
</del>
<ins class="diff-chg">Otherwise,
</ins>
the
returned
value
depends
on
the
semantics
of
that
<del class="diff-old">collation.)
</del>
<ins class="diff-chg">collation.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:compare('Strassen',
'Straße')
</code>
returns
<code>
1
<del class="diff-old">if
</del>
</code>.
<em>
<ins class="diff-chg">(Assuming
</ins>
the
default
collation
includes
provisions
that
treat
differences
between
"ss"
and
the
(German)
character
"ß"
("sharp-s")
with
less
strength
than
the
differences
between
the
base
characters,
such
as
the
final
"n".
<ins class="diff-new">).
</ins></em>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-codepoint-equal" id= "func-codepoint-equal">
</a>
<del class="diff-old">7.3.3
</del>
<ins class="diff-chg">5.3.5
</ins>
fn:codepoint-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
two
strings
are
equal,
considered
codepoint-by-codepoint.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
fn:codepoint-equal
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$comparand1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$comparand2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean?
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
either
argument
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
<code>
true
</code>
or
<code>
false
</code>
depending
on
whether
the
value
of
<code>
$comparand1
</code>
is
equal
to
the
value
of
<code>
$comparand2
</code>,
according
to
the
Unicode
<del class="diff-old">code
point
</del>
<ins class="diff-chg">codepoint
</ins>
collation
(
<code>
http://www.w3.org/2005/xpath-functions/collation/codepoint
</code>
).
</p>
<del class="diff-old">If
either
argument
is
the
empty
sequence,
the
result
is
the
empty
sequence.
Note:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd>
<p>
This
function
allows
<code>
xs:anyURI
</code>
values
to
be
compared
without
having
to
specify
the
Unicode
<del class="diff-old">code
point
</del>
<ins class="diff-chg">codepoint
</ins>
collation.
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="string-value-functions" id= "string-value-functions">
</a>
<del class="diff-old">7.4
</del>
<ins class="diff-chg">5.4
</ins>
Functions
on
String
Values
</h3>
<p>
The
following
functions
are
defined
on
values
of
type
<code>
xs:string
</code>
and
types
derived
from
it.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-concat">
<code>
fn:concat
</code>
</a>
</td>
<td>
<del class="diff-old">Concatenates
two
or
more
xs:anyAtomicType
arguments
cast
to
xs:string
.
</del>
<ins class="diff-chg">Returns
the
concatenation
of
the
string
values
of
the
arguments.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-string-join">
<code>
fn:string-join
</code>
</a>
</td>
<td>
Returns
<del class="diff-old">the
xs:string
produced
</del>
<ins class="diff-chg">a
string
created
</ins>
by
concatenating
<ins class="diff-new">the
items
in
</ins>
a
<del class="diff-old">sequence
of
xs:string
s
using
an
optional
separator.
</del>
<ins class="diff-chg">sequence,
with
a
defined
separator
between
adjacent
items.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-substring">
<code>
fn:substring
</code>
</a>
</td>
<td>
Returns
the
<ins class="diff-new">portion
of
the
value
of
</ins>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">$sourceString
</ins>
</code>
<del class="diff-old">located
</del>
<ins class="diff-chg">beginning
</ins>
at
<del class="diff-old">a
specified
place
within
an
argument
xs:string
.
fn:string-length
Returns
</del>
the
<del class="diff-old">length
of
</del>
<ins class="diff-chg">position
indicated
by
</ins>
the
<del class="diff-old">argument.
</del>
<ins class="diff-chg">value
of
</ins>
<code>
<del class="diff-old">fn:normalize-space
</del>
<ins class="diff-chg">$start
</ins>
</code>
<del class="diff-old">Returns
</del>
<ins class="diff-chg">and
continuing
for
</ins>
the
<del class="diff-old">whitespace-normalized
value
</del>
<ins class="diff-chg">number
</ins>
of
<ins class="diff-new">characters
indicated
by
</ins>
the
<del class="diff-old">argument.
</del>
<ins class="diff-chg">value
of
</ins><code><ins class="diff-chg">
$length
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-string-length">
<code>
<del class="diff-old">fn:normalize-unicode
</del>
<ins class="diff-chg">fn:string-length
</ins>
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">normalized
value
</del>
<ins class="diff-chg">number
</ins>
of
<del class="diff-old">the
first
argument
</del>
<ins class="diff-chg">characters
</ins>
in
<del class="diff-old">the
normalization
form
specified
by
the
second
argument.
</del>
<ins class="diff-chg">a
string.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-normalize-space">
<code>
<del class="diff-old">fn:upper-case
</del>
<ins class="diff-chg">fn:normalize-space
</ins>
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">upper-cased
</del>
value
of
<del class="diff-old">the
argument.
</del>
<code>
<del class="diff-old">fn:lower-case
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<del class="diff-old">Returns
the
lower-cased
value
</del>
<ins class="diff-chg">with
leading
and
trailing
whitespace
removed,
and
sequences
</ins>
of
<del class="diff-old">the
argument.
</del>
<ins class="diff-chg">internal
whitespace
reduced
to
a
single
space
character.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-normalize-unicode">
<code>
<del class="diff-old">fn:translate
</del>
<ins class="diff-chg">fn:normalize-unicode
</ins>
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">first
</del>
<ins class="diff-chg">value
of
</ins>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<del class="diff-old">argument
with
occurrences
of
characters
contained
in
the
second
argument
replaced
by
the
character
at
the
corresponding
position
in
the
third
argument.
</del>
<ins class="diff-chg">after
applying
Unicode
normalization.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-upper-case">
<code>
<del class="diff-old">fn:encode-for-uri
</del>
<ins class="diff-chg">fn:upper-case
</ins>
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
the
xs:string
argument
with
certain
characters
escaped
to
enable
the
resulting
</del>
<ins class="diff-chg">Converts
a
</ins>
string
to
<del class="diff-old">be
used
as
a
path
segment
in
a
URI.
</del>
<ins class="diff-chg">upper
case.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-lower-case">
<code>
<del class="diff-old">fn:iri-to-uri
</del>
<ins class="diff-chg">fn:lower-case
</ins>
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
the
xs:string
argument
with
certain
characters
escaped
to
enable
the
resulting
</del>
<ins class="diff-chg">Converts
a
</ins>
string
to
<del class="diff-old">be
used
as
(part
of)
a
URI.
</del>
<ins class="diff-chg">lower
case.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-translate">
<code>
<del class="diff-old">fn:escape-html-uri
</del>
<ins class="diff-chg">fn:translate
</ins>
</code>
</a>
</td>
<td>
Returns
the
<ins class="diff-new">value
of
</ins>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<del class="diff-old">argument
with
certain
characters
escaped
in
the
manner
that
html
user
agents
handle
attribute
values
that
expect
URIs.
</del>
<ins class="diff-chg">modified
by
replacing
or
removing
individual
characters.
</ins>
</td>
</tr>
</tbody>
</table>
<div class="note">
<p class="prefix">
<b>
Notes:
</b>
</p>
<p>
When
the
above
operators
and
functions
are
applied
to
datatypes
derived
from
<code>
xs:string
</code>,
they
are
guaranteed
to
return
legal
<code>
xs:string
</code>
s,
but
they
might
not
return
a
legal
value
for
the
particular
subtype
to
which
they
were
applied.
</p>
<p>
The
strings
returned
by
<a href= "#func-concat">
<code>
fn:concat
</code>
</a>
and
<a href= "#func-string-join">
<code>
fn:string-join
</code>
</a>
are
not
guaranteed
to
be
normalized.
But
see
note
in
<a href= "#func-concat">
<code>
fn:concat
</code>
</a>.
</p>
</div>
<div class="div3">
<h4>
<a name="func-concat" id="func-concat">
</a>
<del class="diff-old">7.4.1
</del>
<ins class="diff-chg">5.4.1
</ins>
fn:concat
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
concatenation
of
the
string
values
of
the
arguments.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:concat
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<span class="varargs">...
</span>
</td>
<td valign="baseline">
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Accepts
</del>
<ins class="diff-chg">This
function
accepts
</ins>
two
or
more
<code>
xs:anyAtomicType
</code>
arguments
and
casts
<del class="diff-old">them
</del>
<ins class="diff-chg">each
one
</ins>
to
<code>
xs:string
</code>.
<del class="diff-old">Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
<code>
xs:string
</code>
that
is
the
concatenation
of
the
values
of
its
arguments
after
conversion.
If
any
<del class="diff-old">of
the
arguments
</del>
<ins class="diff-chg">argument
</ins>
is
the
empty
sequence,
<del class="diff-old">the
</del>
<ins class="diff-chg">that
</ins>
argument
is
treated
as
the
zero-length
string.
</p>
<p>
The
<code>
fn:concat
</code>
function
is
specified
to
allow
<del class="diff-old">an
</del>
two
or
more
<del class="diff-old">arguments
that
</del>
<ins class="diff-chg">arguments,
which
</ins>
are
concatenated
together.
This
is
the
only
function
specified
in
this
document
that
allows
a
variable
number
of
arguments.
This
capability
is
retained
for
compatibility
with
<a href="#xpath">
[XML
Path
Language
(XPath)
Version
1.0]
</a>.
</p>
<del class="diff-old">Note:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd>
<p>
As
mentioned
in
<a href="#string-types">
<b>
<del class="diff-old">7.1
</del>
<ins class="diff-chg">5.1
</ins>
String
Types
</b>
</a>
Unicode
normalization
is
not
automatically
applied
to
the
result
of
<code>
fn:concat
</code>.
If
a
normalized
result
is
required,
<a href= "#func-normalize-unicode">
<code>
fn:normalize-unicode
</code>
</a>
can
be
applied
to
the
<code>
xs:string
</code>
returned
by
<code>
fn:concat
</code>.
The
following
XQuery:
</p>
<div class="exampleInner">
<pre>
let $v1 := "I plan to go to Mu"
let $v2 := "?nchen in September"
return concat($v1, $v2)
</pre>
</div>
<p>
where
the
"?"
represents
either
the
actual
Unicode
character
COMBINING
DIARESIS
(Unicode
codepoint
U+0308)
or
"&amp;#x0308;",
will
return:
</p>
<p>
"I
plan
to
go
to
Mu?nchen
in
September"
</p>
<p>
where
the
"?"
represents
either
the
actual
Unicode
character
COMBINING
DIARESIS
(Unicode
codepoint
U+0308)
or
"&amp;#x0308;".
It
is
worth
noting
that
the
returned
value
is
not
normalized
in
NFC;
however,
it
is
normalized
in
NFD.
.
</p>
<p>
However,
the
following
XQuery:
</p>
<div class="exampleInner">
<pre>
let $v1 := "I plan to go to Mu"
let $v2 := "?nchen in September"
return normalize-unicode(concat($v1, $v2))
</pre>
</div>
<p>
where
the
"?"
represents
either
the
actual
Unicode
character
COMBINING
DIARESIS
(Unicode
codepoint
U+0308)
or
"&amp;#x0308;",
will
return:
</p>
<p>
"I
plan
to
go
to
München
in
September"
</p>
<p>
This
returned
result
is
normalized
in
NFC.
</p>
<del class="diff-old">7.4.1.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:concat('un',
'grateful')
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">ungrateful
".
</del>
<ins class="diff-chg">"ungrateful"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:concat('Thy
',
(),
'old
',
"groans",
"",
'
ring',
'
yet',
'
in',
'
my',
'
ancient','
ears.')
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">Thy
</del>
<ins class="diff-chg">"Thy
</ins>
old
groans
ring
yet
in
my
ancient
<del class="diff-old">ears.
".
</del>
<ins class="diff-chg">ears."
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:concat('Ciao!',())
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">Ciao!
".
</del>
<ins class="diff-chg">"Ciao!"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:concat('Ingratitude,
',
'thou
',
'marble-hearted',
'
fiend!')
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">Ingratitude,
</del>
<ins class="diff-chg">"Ingratitude,
</ins>
thou
marble-hearted
<del class="diff-old">fiend!
".
</del>
<ins class="diff-chg">fiend!"
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-string-join" id="func-string-join">
</a>
<del class="diff-old">7.4.2
</del>
<ins class="diff-chg">5.4.2
</ins>
fn:string-join
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
string
created
by
concatenating
the
items
in
a
sequence,
with
a
defined
separator
between
adjacent
items.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:string-join
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg1
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:string*
</ins></code><ins class="diff-new">
)
</ins><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="return-type"><ins class="diff-new">
xs:string
</ins></code></div></div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:string-join
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string*
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
effect
of
calling
the
single-argument
version
of
this
function
is
the
same
as
calling
the
two-argument
version
with
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
set
to
</ins>
a
<ins class="diff-new">zero-length
string.
</ins></p><p><ins class="diff-new">
The
function
returns
an
</ins>
<code>
xs:string
</code>
created
by
concatenating
the
<del class="diff-old">members
of
</del>
<ins class="diff-chg">items
in
</ins>
the
<ins class="diff-new">sequence
</ins>
<code>
$arg1
<del class="diff-old">sequence
</del>
</code>,
<ins class="diff-chg">in
order,
</ins>
using
<ins class="diff-new">the
value
of
</ins>
<code>
$arg2
</code>
as
a
<del class="diff-old">separator.
</del>
<ins class="diff-chg">separator
between
adjacent
items.
</ins>
If
the
value
of
<code>
$arg2
</code>
is
the
zero-length
string,
then
the
members
of
<code>
$arg1
</code>
are
concatenated
without
a
separator.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
If
the
value
of
<code>
$arg1
</code>
is
the
empty
sequence,
the
<ins class="diff-new">function
returns
the
</ins>
zero-length
<del class="diff-old">string
is
returned.
</del>
<ins class="diff-chg">string.
</ins>
</p>
<del class="diff-old">7.4.2.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:string-join(('Now',
'is',
'the',
'time',
'...'),
'
')
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">Now
</del>
<ins class="diff-chg">"Now
</ins>
is
the
time
<del class="diff-old">...
".
</del>
<ins class="diff-chg">..."
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:string-join(('Blow,
',
'blow,
',
'thou
',
'winter
',
'wind!'),
'')
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">Blow,
</del>
<ins class="diff-chg">"Blow,
</ins>
blow,
thou
winter
<del class="diff-old">wind!
".
</del>
<ins class="diff-chg">wind!"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:string-join((),
'separator')
</code>
returns
<del class="diff-old">"".
</del>
<code>
<ins class="diff-chg">""
</ins></code>.
</p>
<p>
Assume
a
document:
</p>
<div class="exampleInner">
<pre>
&lt;doc&gt;
  &lt;chap&gt;
<del class="diff-old">    &lt;section&gt;
    &lt;/section&gt;
</del>
<ins class="diff-chg">    &lt;section/&gt;
</ins>
  &lt;/chap&gt;
&lt;/doc&gt;
</pre>
</div>
<p>
with
the
<code>
&lt;section&gt;
</code>
<ins class="diff-new">element
</ins>
as
the
context
node,
the
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>
expression:
</p>
<p>
<code>
<del class="diff-old">fn:string-join(for
$n
in
ancestor-or-self::*
return
name($n),
</del>
<ins class="diff-chg">fn:string-join(ancestor-or-self::*/name(),
</ins>
'/')
</code>
</p>
<p>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">doc/chap/section
</del>
<ins class="diff-chg">"doc/chap/section"
</ins>
</code>
<del class="diff-old">"
</del>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-substring" id="func-substring">
</a>
<del class="diff-old">7.4.3
</del>
<ins class="diff-chg">5.4.3
</ins>
fn:substring
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
portion
of
the
value
of
</ins><code><ins class="diff-new">
$sourceString
</ins></code><ins class="diff-new">
beginning
at
the
position
indicated
by
the
value
of
</ins><code><ins class="diff-new">
$start
</ins></code><ins class="diff-new">
and
continuing
for
the
number
of
characters
indicated
by
the
value
of
</ins><code><ins class="diff-new">
$length
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:substring
</code>
(
<code class= "arg">
$sourceString
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
<del class="diff-old">$startingLoc
</del>
<ins class="diff-chg">$start
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:double
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:substring
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$sourceString
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
<del class="diff-old">$startingLoc
</del>
<ins class="diff-chg">$start
</ins>
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:double
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$length
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:double
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
portion
of
</del>
<ins class="diff-chg">If
</ins>
the
value
of
<code>
$sourceString
</code>
<del class="diff-old">beginning
at
</del>
<ins class="diff-chg">is
the
empty
sequence,
the
function
returns
the
zero-length
string.
</ins></p><p><ins class="diff-chg">
Otherwise,
</ins>
the
<ins class="diff-new">function
returns
a
string
comprising
those
characters
of
</ins><code><ins class="diff-new">
$sourceString
</ins></code><ins class="diff-new">
whose
index
</ins>
position
<del class="diff-old">indicated
by
</del>
<ins class="diff-chg">(counting
from
one)
is
greater
than
or
equal
to
</ins>
the
value
of
<code>
<del class="diff-old">$startingLoc
</del>
<ins class="diff-chg">$start
</ins>
</code>
<ins class="diff-new">(rounded
to
an
integer),
</ins>
and
<del class="diff-old">continuing
for
the
number
of
characters
indicated
by
</del>
<ins class="diff-chg">(if
</ins><code><ins class="diff-chg">
$length
</ins></code><ins class="diff-chg">
is
specified)
less
than
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">sum
</ins>
of
<code>
<ins class="diff-new">$start
</ins></code><ins class="diff-new">
and
</ins><code>
$length
<del class="diff-old">.
</del>
</code>
<ins class="diff-chg">(both
rounded
to
integers).
</ins></p><p>
The
characters
returned
do
not
extend
beyond
<code>
$sourceString
</code>.
If
<code>
<del class="diff-old">$startingLoc
</del>
<ins class="diff-chg">$start
</ins>
</code>
is
zero
or
negative,
only
those
characters
in
positions
greater
than
zero
are
returned.
</p>
<p>
More
specifically,
the
three
argument
version
of
the
function
returns
the
characters
in
<code>
$sourceString
</code>
whose
position
<code>
$p
</code>
<del class="diff-old">obeys:
</del>
<ins class="diff-chg">satisfies:
</ins>
</p>
<p>
<a href="#func-round">
<code>
<del class="diff-old">fn:round($startingLoc)
</del>
<ins class="diff-chg">fn:round($start)
</ins>
&lt;=
$p
&lt;
<del class="diff-old">fn:round($startingLoc)
</del>
<ins class="diff-chg">fn:round($start)
</ins>
+
fn:round($length)
</code>
</a>
</p>
<p>
The
two
argument
version
of
the
function
assumes
that
<code>
$length
</code>
is
infinite
and
<ins class="diff-new">thus
</ins>
returns
the
characters
in
<code>
$sourceString
</code>
whose
position
<code>
$p
</code>
<del class="diff-old">obeys:
</del>
<ins class="diff-chg">satisfies:
</ins>
</p>
<p>
<a href="#func-round">
<code>
<del class="diff-old">fn:round($startingLoc)
</del>
<ins class="diff-chg">fn:round($start)
</ins>
&lt;=
$p
<del class="diff-old">&lt;
fn:round(INF)
</del>
</code>
</a>
</p>
<p>
In
the
above
computations,
the
rules
for
<a href= "#func-numeric-less-than">
<code>
<del class="diff-old">op:numeric-less-than()
</del>
<ins class="diff-chg">op:numeric-less-than
</ins>
</code>
</a>
and
<a href= "#func-numeric-greater-than">
<code>
<del class="diff-old">op:numeric-greater-than()
</del>
<ins class="diff-chg">op:numeric-greater-than
</ins>
</code>
</a>
apply.
</p>
<del class="diff-old">If
the
value
of
$sourceString
is
the
empty
sequence,
the
zero-length
string
is
returned.
Note:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd>
<p>
The
first
character
of
a
string
is
located
at
position
1,
not
position
0.
</p>
<del class="diff-old">7.4.3.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring("motor
car",
6)
</code>
returns
<code>
"
car"
</code>.
<del class="diff-old">Characters
</del>
<em>
<ins class="diff-chg">(Characters
</ins>
starting
at
position
6
to
the
end
of
<code>
$sourceString
</code>
are
<del class="diff-old">selected.
</del>
<ins class="diff-chg">selected.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring("metadata",
4,
3)
</code>
returns
<code>
"ada"
</code>.
<del class="diff-old">Characters
</del>
<em>
<ins class="diff-chg">(Characters
</ins>
at
positions
greater
than
or
equal
to
4
and
less
than
7
are
<del class="diff-old">selected.
</del>
<ins class="diff-chg">selected.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring("12345",
1.5,
2.6)
</code>
returns
<code>
"234"
</code>.
<del class="diff-old">Characters
</del>
<em>
<ins class="diff-chg">(Characters
</ins>
at
positions
greater
than
or
equal
to
2
and
less
than
5
are
<del class="diff-old">selected.
</del>
<ins class="diff-chg">selected.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring("12345",
0,
3)
</code>
returns
<code>
"12"
</code>.
<del class="diff-old">Characters
</del>
<em>
<ins class="diff-chg">(Characters
</ins>
at
positions
greater
than
or
equal
to
0
and
less
than
3
are
selected.
Since
the
first
position
is
1,
these
are
the
characters
at
positions
1
and
<del class="diff-old">2.
</del>
<ins class="diff-chg">2.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring("12345",
5,
-3)
</code>
returns
<code>
""
</code>.
<del class="diff-old">Characters
</del>
<em>
<ins class="diff-chg">(Characters
</ins>
at
positions
greater
than
or
equal
to
5
and
less
than
2
are
<del class="diff-old">selected.
</del>
<ins class="diff-chg">selected.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring("12345",
-3,
5)
</code>
returns
<code>
"1"
</code>.
<del class="diff-old">Characters
</del>
<em>
<ins class="diff-chg">(Characters
</ins>
at
positions
greater
than
or
equal
to
-3
and
less
than
2
are
selected.
Since
the
first
position
is
1,
this
is
the
character
at
position
<del class="diff-old">1.
</del>
<ins class="diff-chg">1.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring("12345",
0
div
0E0,
3)
</code>
returns
<code>
""
</code>.
<del class="diff-old">Since
</del>
<em>
<ins class="diff-chg">(Since
</ins>
<code>
0
div
0E0
</code>
returns
<code>
NaN
</code>,
and
<code>
NaN
</code>
compared
to
any
other
number
returns
<code>
false
</code>,
no
characters
are
<del class="diff-old">selected.
</del>
<ins class="diff-chg">selected.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring("12345",
1,
0
div
0E0)
</code>
returns
<code>
""
</code>.
<em>
<ins class="diff-new">(As
above.).
</ins></em>
</p>
<p>
<del class="diff-old">As
above.
</del>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring((),
1,
3)
</code>
returns
<code>
""
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring("12345",
-42,
1
div
0E0)
</code>
returns
<code>
"12345"
</code>.
<del class="diff-old">Characters
</del>
<em>
<ins class="diff-chg">(Characters
</ins>
at
positions
greater
than
or
equal
to
-42
and
less
than
INF
are
<del class="diff-old">selected.
</del>
<ins class="diff-chg">selected.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring("12345",
-1
div
0E0,
1
div
0E0)
</code>
returns
<code>
""
</code>.
<del class="diff-old">Since
</del>
<em>
<ins class="diff-chg">(Since
the
value
of
</ins>
<code>
-INF
+
INF
</code>
<del class="diff-old">returns
</del>
<ins class="diff-chg">is
</ins>
<code>
NaN
</code>,
no
characters
are
<del class="diff-old">selected.
</del>
<ins class="diff-chg">selected.).
</ins></em>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-string-length" id="func-string-length">
</a>
<del class="diff-old">7.4.4
</del>
<ins class="diff-chg">5.4.4
</ins>
fn:string-length
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
number
of
characters
in
a
string.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:string-length
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:string-length
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
an
<code>
xs:integer
</code>
equal
to
the
length
in
characters
of
the
value
of
<code>
$arg
</code>.
</p>
<p>
<ins class="diff-new">Calling
the
zero-argument
version
of
the
function
is
equivalent
to
calling
</ins><code><ins class="diff-new">
fn:string-length(fn:string(.))
</ins></code>.</p><p>
If
the
value
of
<code>
$arg
</code>
is
the
empty
sequence,
the
<ins class="diff-new">function
returns
the
</ins>
<code>
xs:integer
</code>
<del class="diff-old">0
is
returned.
</del>
<ins class="diff-chg">value
zero
(0).
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd>
<p>
If
<del class="diff-old">no
argument
is
supplied,
</del>
<code>
$arg
</code>
<del class="diff-old">defaults
to
the
string
value
(calculated
using
fn:string()
)
of
the
context
item
(
.
).
If
no
argument
</del>
is
<del class="diff-old">supplied
or
if
the
argument
is
the
context
item
</del>
<ins class="diff-chg">not
specified
</ins>
and
the
context
item
is
<del class="diff-old">undefined
</del>
<ins class="diff-chg">undefined,
</ins>
an
error
is
raised:
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002">
err:XPDY0002
</a>
]
<sup>
<small>
XP
</small>
</sup>.
</p>
<del class="diff-old">7.4.4.1
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd><p><ins class="diff-chg">
Unlike
some
programming
languages,
a
codepoint
greater
than
65535
counts
as
one
character,
not
two.
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:string-length("Harp
not
on
that
string,
madam;
that
is
past.")
</code>
returns
<code>
45
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:string-length(())
</code>
returns
<code>
0
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-normalize-space" id= "func-normalize-space">
</a>
<del class="diff-old">7.4.5
</del>
<ins class="diff-chg">5.4.5
</ins>
fn:normalize-space
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
value
of
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
with
leading
and
trailing
whitespace
removed,
and
sequences
of
internal
whitespace
reduced
to
a
single
space
character.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:normalize-space
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:normalize-space
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins>
the
value
of
<code>
$arg
</code>
<del class="diff-old">with
whitespace
normalized
</del>
<ins class="diff-chg">is
the
empty
sequence,
the
function
returns
the
zero-length
string.
</ins></p><p><ins class="diff-chg">
The
function
returns
a
string
constructed
</ins>
by
stripping
leading
and
trailing
whitespace
<ins class="diff-new">from
the
value
of
</ins><code><ins class="diff-new">
$arg
</ins></code>,
and
replacing
sequences
of
one
or
more
<del class="diff-old">than
one
</del>
<ins class="diff-chg">adjacent
</ins>
whitespace
<del class="diff-old">character
</del>
<ins class="diff-chg">characters
</ins>
with
a
single
space,
<code>
#x20
</code>.
</p>
<p>
The
whitespace
characters
are
defined
in
the
metasymbol
S
(Production
3)
of
<a href="#REC-xml">
<del class="diff-old">[Extensible
Markup
Language
(XML)
1.0
Recommendation
(Third
Edition)]
.
Note:
The
definition
of
the
metasymbol
S
(Production
3),
is
unchanged
in
[Extensible
Markup
Language
(XML)
1.1
Recommendation]
</del>
<ins class="diff-chg">[REC-xml]
</ins>
</a>.
</p>
<del class="diff-old">If
the
value
of
$arg
is
the
empty
sequence,
returns
the
zero-length
string.
</del>
<p>
If
no
argument
is
supplied,
<ins class="diff-new">then
</ins>
<code>
$arg
</code>
defaults
to
the
string
value
(calculated
using
<a href= "#func-string">
<code>
<del class="diff-old">fn:string()
</del>
<ins class="diff-chg">fn:string
</ins>
</code>
</a>
)
of
the
context
item
(
<code>.
</code>
).
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p>
If
no
argument
is
supplied
<del class="diff-old">or
if
the
argument
is
the
context
item
</del>
and
the
context
item
is
undefined
<ins class="diff-new">then
</ins>
an
error
is
raised:
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002">
err:XPDY0002
</a>
]
<sup>
<small>
XP
</small>
</sup>.
</p>
<del class="diff-old">7.4.5.1
Examples
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd>
<p>
<del class="diff-old">fn:normalize-space("
</del>
The
<del class="diff-old">&#160;wealthy
curled
darlings
</del>
<ins class="diff-chg">definition
</ins>
of
<del class="diff-old">&#160;&#160;our
&#160;nation.
")
</del>
<ins class="diff-chg">whitespace
is
unchanged
in
</ins><a href= "#xml11"><ins class="diff-chg">
[Extensible
Markup
Language
(XML)
1.1
Recommendation]
</ins></a>.</p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:normalize-space("&#160;The&#160;&#160;&#160;&#160;wealthy&#160;curled&#160;darlings
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of&#160;&#160;&#160;&#160;our&#160;&#160;&#160;&#160;nation.&#160;")
</ins>
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">The
</del>
<ins class="diff-chg">"The
</ins>
wealthy
curled
darlings
of
our
<del class="diff-old">nation.
".
</del>
<ins class="diff-chg">nation."
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:normalize-space(())
</code>
returns
<del class="diff-old">"".
</del>
<code>
<ins class="diff-chg">""
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-normalize-unicode" id= "func-normalize-unicode">
</a>
<del class="diff-old">7.4.6
</del>
<ins class="diff-chg">5.4.6
</ins>
fn:normalize-unicode
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
value
of
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
after
applying
Unicode
normalization.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:normalize-unicode
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
fn:normalize-unicode
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class= "arg">
$normalizationForm
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
the
value
of
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
zero-length
string.
</ins></p><p><ins class="diff-chg">
If
the
single-argument
version
of
the
function
is
used,
the
result
is
the
same
as
calling
the
two-argument
version
with
</ins><code><ins class="diff-chg">
$normalizationForm
</ins></code><ins class="diff-chg">
set
to
the
string
"NFC".
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
the
value
of
<code>
$arg
</code>
normalized
according
to
the
<del class="diff-old">normalization
criteria
for
a
</del>
<ins class="diff-chg">rules
of
the
</ins>
normalization
form
identified
by
the
value
of
<code>
$normalizationForm
</code>.
</p>
<p>
The
effective
value
of
<del class="diff-old">the
</del>
<code>
$normalizationForm
</code>
is
<del class="diff-old">computed
by
removing
leading
and
trailing
blanks,
if
present,
and
converting
to
upper
case.
If
</del>
the
value
of
<ins class="diff-new">the
expression
</ins><a href= "#func-upper-case">
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">fn:upper-case(fn:normalize-space($normalizationForm))
</ins>
</code>
<del class="diff-old">is
the
empty
sequence,
returns
the
zero-length
string.
</del>
</a>.
</p>
<p>
See
<a href="#charmod-normalization">
[Character
Model
for
the
World
Wide
Web
1.0:
Normalization]
</a>
for
a
description
of
the
normalization
forms.
</p>
<del class="diff-old">If
the
$normalizationForm
is
absent,
as
in
the
first
format
above,
it
shall
be
assumed
to
be
"NFC"
</del>
<ul>
<li>
<p>
If
the
effective
value
of
<code>
$normalizationForm
</code>
is
"NFC",
then
the
<del class="diff-old">value
returned
by
the
</del>
function
<del class="diff-old">is
</del>
<ins class="diff-chg">returns
</ins>
the
value
of
<code>
$arg
</code>
<del class="diff-old">in
</del>
<ins class="diff-chg">converted
to
</ins>
Unicode
Normalization
Form
C
(NFC).
</p>
</li>
<li>
<p>
If
the
effective
value
of
<code>
$normalizationForm
</code>
is
"NFD",
then
the
<del class="diff-old">value
returned
by
the
</del>
function
<del class="diff-old">is
</del>
<ins class="diff-chg">returns
</ins>
the
value
of
<code>
$arg
</code>
<del class="diff-old">in
</del>
<ins class="diff-chg">converted
to
</ins>
Unicode
Normalization
Form
D
(NFD).
</p>
</li>
<li>
<p>
If
the
effective
value
of
<code>
$normalizationForm
</code>
is
"NFKC",
then
the
<del class="diff-old">value
returned
by
the
</del>
function
<del class="diff-old">is
</del>
<ins class="diff-chg">returns
</ins>
the
value
of
<code>
$arg
</code>
in
Unicode
Normalization
Form
KC
(NFKC).
</p>
</li>
<li>
<p>
If
the
effective
value
of
<code>
$normalizationForm
</code>
is
"NFKD",
then
the
<del class="diff-old">value
returned
by
the
</del>
function
<del class="diff-old">is
</del>
<ins class="diff-chg">returns
</ins>
the
value
of
<code>
$arg
</code>
<del class="diff-old">in
</del>
<ins class="diff-chg">converted
to
</ins>
Unicode
Normalization
Form
KD
(NFKD).
</p>
</li>
<li>
<p>
If
the
effective
value
of
<code>
$normalizationForm
</code>
is
"FULLY-NORMALIZED",
then
the
<del class="diff-old">value
returned
by
the
</del>
function
<del class="diff-old">is
</del>
<ins class="diff-chg">returns
</ins>
the
value
of
<code>
$arg
</code>
<del class="diff-old">in
the
</del>
<ins class="diff-chg">converted
to
</ins>
fully
normalized
form.
</p>
</li>
<li>
<p>
If
the
effective
value
of
<code>
$normalizationForm
</code>
is
the
zero-length
string,
no
normalization
is
performed
and
<code>
$arg
</code>
is
returned.
</p>
</li>
</ul>
<p>
Conforming
implementations
<a title="must" class="termref" href= "#must">
<span class="arrow">
·
</span>
must
<span class= "arrow">
·
</span>
</a>
support
normalization
form
"NFC"
and
<a title= "may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
support
normalization
forms
"NFD",
"NFKC",
"NFKD",
<ins class="diff-new">and
</ins>
"FULLY-NORMALIZED".
They
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
also
support
other
normalization
forms
with
<a title="implementation-defined" class="termref" href="#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
semantics.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p>
If
the
effective
value
of
the
<code>
$normalizationForm
</code>
<ins class="diff-new">argument
</ins>
is
<del class="diff-old">other
than
</del>
<ins class="diff-chg">not
</ins>
one
of
the
values
supported
by
the
implementation,
then
an
error
is
raised
[
<a href="#ERRFOCH0003" title= "err:FOCH0003">
err:FOCH0003
</a>
].
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-upper-case" id="func-upper-case">
</a>
<del class="diff-old">7.4.7
</del>
<ins class="diff-chg">5.4.7
</ins>
fn:upper-case
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Converts
a
string
to
upper
case.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:upper-case
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
the
value
of
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
zero-length
string
is
returned.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
the
value
of
<code>
$arg
</code>
after
translating
every
character
to
its
upper-case
correspondent
as
defined
in
the
appropriate
case
mappings
section
in
the
Unicode
standard
<a href="#Unicode4">
[The
Unicode
Standard]
</a>.
For
versions
of
Unicode
beginning
with
the
2.1.8
update,
only
locale-insensitive
case
mappings
should
be
applied.
Beginning
with
version
3.2.0
(and
likely
future
versions)
of
Unicode,
precise
mappings
are
described
in
default
case
operations,
which
are
full
case
mappings
in
the
absence
of
tailoring
for
particular
languages
and
environments.
Every
lower-case
character
that
does
not
have
an
upper-case
correspondent,
as
well
as
every
upper-case
character,
is
included
in
the
returned
value
in
its
original
form.
</p>
<del class="diff-old">If
the
value
of
$arg
is
the
empty
sequence,
the
zero-length
string
is
returned.
Note:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd>
<p>
Case
mappings
may
change
the
length
of
a
string.
In
general,
the
<del class="diff-old">two
</del>
<code>
<ins class="diff-chg">fn:upper-case
</ins></code><ins class="diff-chg">
and
</ins><a href= "#func-lower-case"><code><ins class="diff-chg">
fn:lower-case
</ins></code></a>
functions
are
not
inverses
of
each
<del class="diff-old">other
</del>
<ins class="diff-chg">other:
</ins>
<a href= "#func-lower-case">
<code>
fn:lower-case(fn:upper-case($arg))
</code>
</a>
is
not
guaranteed
to
return
<code>
$arg
</code>,
nor
is
<code>
fn:upper-case(fn:lower-case($arg))
</code>.
The
Latin
small
letter
dotless
i
(as
used
in
Turkish)
is
perhaps
the
most
prominent
lower-case
letter
which
will
not
round-trip.
The
Latin
capital
letter
i
with
dot
above
is
the
most
prominent
upper-case
letter
which
will
not
round
trip;
there
are
<del class="diff-old">others.
</del>
<ins class="diff-chg">others,
such
as
Latin
capital
letter
Sharp
S
(#1E9E)
which
is
introduced
in
Unicode
5.1.
</ins>
</p>
<p>
These
functions
may
not
always
be
linguistically
appropriate
(e.g.
Turkish
i
without
dot)
or
appropriate
for
the
application
(e.g.
titlecase).
In
cases
such
as
Turkish,
a
simple
translation
should
be
used
first.
</p>
<p>
<del class="diff-old">Results
may
violate
</del>
<ins class="diff-chg">Because
the
function
is
not
sensitive
to
locale,
results
will
not
always
match
</ins>
user
<del class="diff-old">expectations
(in
</del>
<ins class="diff-chg">expectations.
In
</ins>
Quebec,
for
example,
the
standard
uppercase
equivalent
of
"è"
is
"È",
while
in
metropolitan
France
it
is
more
commonly
"E";
only
one
of
these
is
supported
by
the
functions
as
<del class="diff-old">defined).
</del>
<ins class="diff-chg">defined.
</ins>
</p>
<p>
Many
characters
of
class
Ll
lack
uppercase
equivalents
in
the
Unicode
case
mapping
tables;
many
characters
of
class
Lu
lack
lowercase
equivalents.
</p>
<del class="diff-old">7.4.7.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:upper-case("abCd0")
</code>
returns
<code>
"ABCD0"
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-lower-case" id="func-lower-case">
</a>
<del class="diff-old">7.4.8
</del>
<ins class="diff-chg">5.4.8
</ins>
fn:lower-case
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Converts
a
string
to
lower
case.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:lower-case
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
the
value
of
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
zero-length
string
is
returned.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
the
value
of
<code>
$arg
</code>
after
translating
every
character
to
its
lower-case
correspondent
as
defined
in
the
appropriate
case
mappings
section
in
the
Unicode
standard
<a href="#Unicode4">
[The
Unicode
Standard]
</a>.
For
versions
of
Unicode
beginning
with
the
2.1.8
update,
only
locale-insensitive
case
mappings
should
be
applied.
Beginning
with
version
3.2.0
(and
likely
future
versions)
of
Unicode,
precise
mappings
are
described
in
default
case
operations,
which
are
full
case
mappings
in
the
absence
of
tailoring
for
particular
languages
and
environments.
Every
upper-case
character
that
does
not
have
a
lower-case
correspondent,
as
well
as
every
lower-case
character,
is
included
in
the
returned
value
in
its
original
form.
</p>
<del class="diff-old">If
the
value
of
$arg
is
the
empty
sequence,
the
zero-length
string
is
returned.
Note:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd>
<p>
Case
mappings
may
change
the
length
of
a
string.
In
general,
the
<del class="diff-old">two
</del>
<a href="#func-upper-case">
<code>
<ins class="diff-chg">fn:upper-case
</ins></code></a><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
fn:lower-case
</ins></code>
functions
are
not
inverses
of
each
<del class="diff-old">other
</del>
<ins class="diff-chg">other:
</ins>
<code>
fn:lower-case(fn:upper-case($arg))
</code>
is
not
guaranteed
to
return
<code>
$arg
</code>,
nor
is
<a href= "#func-upper-case">
<code>
fn:upper-case(fn:lower-case($arg))
</code>
</a>.
The
Latin
small
letter
dotless
i
(as
used
in
Turkish)
is
perhaps
the
most
prominent
lower-case
letter
which
will
not
round-trip.
The
Latin
capital
letter
i
with
dot
above
is
the
most
prominent
upper-case
letter
which
will
not
round
trip;
there
are
<del class="diff-old">others.
</del>
<ins class="diff-chg">others,
such
as
Latin
capital
letter
Sharp
S
(#1E9E)
which
is
introduced
in
Unicode
5.1.
</ins>
</p>
<p>
These
functions
may
not
always
be
linguistically
appropriate
(e.g.
Turkish
i
without
dot)
or
appropriate
for
the
application
(e.g.
titlecase).
In
cases
such
as
Turkish,
a
simple
translation
should
be
used
first.
</p>
<p>
<del class="diff-old">Results
may
violate
</del>
<ins class="diff-chg">Because
the
function
is
not
sensitive
to
locale,
results
will
not
always
match
</ins>
user
<del class="diff-old">expectations
(in
</del>
<ins class="diff-chg">expectations.
In
</ins>
Quebec,
for
example,
the
standard
uppercase
equivalent
of
"è"
is
"È",
while
in
metropolitan
France
it
is
more
commonly
"E";
only
one
of
these
is
supported
by
the
functions
as
<del class="diff-old">defined).
</del>
<ins class="diff-chg">defined.
</ins>
</p>
<p>
Many
characters
of
class
Ll
lack
uppercase
equivalents
in
the
Unicode
case
mapping
tables;
many
characters
of
class
Lu
lack
lowercase
equivalents.
</p>
<del class="diff-old">7.4.8.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:lower-case("ABc!D")
</code>
returns
<code>
"abc!d"
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-translate" id="func-translate">
</a>
<del class="diff-old">7.4.9
</del>
<ins class="diff-chg">5.4.9
</ins>
fn:translate
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
value
of
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
modified
by
replacing
or
removing
individual
characters.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:translate
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$mapString
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$transString
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
value
of
$arg
modified
so
that
every
character
in
the
value
of
$arg
that
occurs
at
some
position
N
in
the
value
of
$mapString
has
been
replaced
by
the
character
that
occurs
at
position
N
in
the
value
of
$transString
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
the
value
of
<code>
$arg
</code>
is
the
empty
sequence,
the
<ins class="diff-new">function
returns
the
</ins>
zero-length
<del class="diff-old">string
is
returned.
</del>
<ins class="diff-chg">string.
</ins>
</p>
<p>
<del class="diff-old">Every
</del>
<ins class="diff-chg">Otherwise,
the
function
returns
a
result
string
constructed
by
processing
each
</ins>
character
in
the
value
of
<code>
$arg
<del class="diff-old">that
</del>
</code>,
<ins class="diff-chg">in
order,
according
to
the
following
rules:
</ins></p><ol class="enumar"><li><p><ins class="diff-chg">
If
the
character
</ins>
does
not
appear
in
the
value
of
<code>
$mapString
</code>
<ins class="diff-new">then
it
</ins>
is
<ins class="diff-new">added
to
the
result
string
</ins>
unchanged.
</p>
</li>
<li>
<p>
<del class="diff-old">Every
</del>
<ins class="diff-chg">If
the
</ins>
character
<ins class="diff-new">first
appears
</ins>
in
the
value
of
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$mapString
</ins>
</code>
<del class="diff-old">that
appears
</del>
at
some
position
<em>
M
</em>,
<ins class="diff-new">where
the
value
of
</ins><code><ins class="diff-new">
$transString
</ins></code><ins class="diff-new">
is
</ins><em><ins class="diff-new">
M
</ins>
</em>
<ins class="diff-new">or
more
characters
in
length,
then
the
character
at
position
</ins><em><ins class="diff-new">
M
</ins></em><ins class="diff-new">
in
</ins><code><ins class="diff-new">
$transString
</ins></code><ins class="diff-new">
is
added
to
the
result
string.
</ins></p></li><li><p><ins class="diff-new">
If
the
character
first
appears
</ins>
in
the
value
of
<code>
$mapString
<del class="diff-old">,
</del>
</code>
<ins class="diff-chg">at
some
position
</ins><em><ins class="diff-chg">
M
</ins></em>,
where
the
value
of
<code>
$transString
</code>
is
less
than
<em>
M
</em>
characters
in
length,
<ins class="diff-new">then
the
character
</ins>
is
omitted
from
the
<del class="diff-old">returned
value.
</del>
<ins class="diff-chg">result
string.
</ins></p></li></ol></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p>
If
<code>
$mapString
</code>
is
the
zero-length
string
<ins class="diff-new">then
the
function
returns
</ins>
<code>
$arg
</code>
<del class="diff-old">is
returned.
</del>
<ins class="diff-chg">unchanged.
</ins>
</p>
<p>
If
a
character
occurs
more
than
once
in
<code>
$mapString
</code>,
then
the
first
occurrence
determines
the
<del class="diff-old">replacement
character.
</del>
<ins class="diff-chg">action
taken.
</ins></p><p>
If
<code>
$transString
</code>
is
longer
than
<code>
$mapString
</code>,
the
excess
characters
are
ignored.
</p>
<del class="diff-old">7.4.9.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:translate("bar","abc","ABC")
</code>
returns
<code>
"BAr"
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:translate("--aaa--","abc-","ABC")
</code>
returns
<code>
"AAA"
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:translate("abcdabc",
"abc",
"AB")
</code>
returns
<code>
"ABdAB"
</code>.
</p>
<del class="diff-old">7.4.10
fn:encode-for-uri
fn:encode-for-uri
(
$uri-part
&#160;as&#160;
xs:string?
)
&#160;as&#160;
xs:string
Summary:
This
function
encodes
reserved
characters
in
an
xs:string
that
is
intended
to
be
used
in
the
path
segment
of
a
URI.
It
is
invertible
but
not
idempotent.
This
function
applies
the
URI
escaping
rules
defined
in
section
2
of
[RFC
3986]
to
the
xs:string
supplied
as
$uri-part
.
The
effect
of
the
function
is
to
escape
reserved
characters.
Each
such
character
in
the
string
is
replaced
with
its
percent-encoded
form
as
described
in
[RFC
3986]
.
If
$uri-part
is
the
empty
sequence,
returns
the
zero-length
string.
All
characters
are
escaped
except
those
identified
as
"unreserved"
by
[RFC
3986]
,
that
is
the
upper-
and
lower-case
letters
A-Z,
the
digits
0-9,
HYPHEN-MINUS
("-"),
LOW
LINE
("_"),
FULL
STOP
".",
and
TILDE
"~".
Note
that
this
function
escapes
URI
delimiters
and
therefore
cannot
be
used
indiscriminately
to
encode
"invalid"
characters
in
a
path
segment.
Since
[RFC
3986]
recommends
that,
for
consistency,
URI
producers
and
normalizers
should
use
uppercase
hexadecimal
digits
for
all
percent-encodings,
this
function
must
always
generate
hexadecimal
values
using
the
upper-case
letters
A-F.
7.4.10.1
Examples
fn:encode-for-uri("http://www.example.com/00/Weather/CA/Los%20Angeles#ocean")
returns
"http%3A%2F%2Fwww.example.com%2F00%2FWeather%2FCA%2FLos%2520Angeles%23ocean"
.
This
is
probably
not
what
the
user
intended
because
all
of
the
delimiters
have
been
encoded.
concat("http://www.example.com/",
encode-for-uri("~bébé"))
returns
"http://www.example.com/~b%C3%A9b%C3%A9"
.
concat("http://www.example.com/",
encode-for-uri("100%
organic"))
returns
"http://www.example.com/100%25%20organic"
.
7.4.11
fn:iri-to-uri
fn:iri-to-uri
(
$iri
&#160;as&#160;
xs:string?
)
&#160;as&#160;
xs:string
Summary:
This
function
converts
an
xs:string
containing
an
IRI
into
a
URI
according
to
the
rules
spelled
out
in
Section
3.1
of
[RFC
3987]
.
It
is
idempotent
but
not
invertible.
If
$iri
contains
a
character
that
is
invalid
in
an
IRI,
such
as
the
space
character
(see
note
below),
the
invalid
character
is
replaced
by
its
percent-encoded
form
as
described
in
[RFC
3986]
before
the
conversion
is
performed.
If
$iri
is
the
empty
sequence,
returns
the
zero-length
string.
Since
[RFC
3986]
recommends
that,
for
consistency,
URI
producers
and
normalizers
should
use
uppercase
hexadecimal
digits
for
all
percent-encodings,
this
function
must
always
generate
hexadecimal
values
using
the
upper-case
letters
A-F.
Notes:
This
function
does
not
check
whether
$iri
is
a
legal
IRI.
It
treats
it
as
an
xs:string
and
operates
on
the
characters
in
the
xs:string
.
The
following
printable
ASCII
characters
are
invalid
in
an
IRI:
"&lt;",
"&gt;",
"
"
"
(double
quote),
space,
"{",
"}",
"|",
"\",
"^",
and
"`".
Since
these
characters
should
not
appear
in
an
IRI,
if
they
do
appear
in
$iri
they
will
be
percent-encoded.
In
addition,
characters
outside
the
range
x20-x126
will
be
percent-encoded
because
they
are
invalid
in
a
URI.
Since
this
function
does
not
escape
the
PERCENT
SIGN
"%"
and
this
character
is
not
allowed
in
data
within
a
URI,
users
wishing
to
convert
character
strings,
such
as
file
names,
that
include
"%"
to
a
URI
should
manually
escape
"%"
by
replacing
it
with
"%25".
7.4.11.1
Examples
fn:iri-to-uri
("http://www.example.com/00/Weather/CA/Los%20Angeles#ocean")
returns
"http://www.example.com/00/Weather/CA/Los%20Angeles#ocean"
.
fn:iri-to-uri
("http://www.example.com/~bébé")
returns
"http://www.example.com/~b%C3%A9b%C3%A9"
.
7.4.12
fn:escape-html-uri
fn:escape-html-uri
(
$uri
&#160;as&#160;
xs:string?
)
&#160;as&#160;
xs:string
Summary:
This
function
escapes
all
characters
except
printable
characters
of
the
US-ASCII
coded
character
set,
specifically
the
octets
ranging
from
32
to
126
(decimal).
The
effect
of
the
function
is
to
escape
a
URI
in
the
manner
html
user
agents
handle
attribute
values
that
expect
URIs.
Each
character
in
$uri
to
be
escaped
is
replaced
by
an
escape
sequence,
which
is
formed
by
encoding
the
character
as
a
sequence
of
octets
in
UTF-8,
and
then
representing
each
of
these
octets
in
the
form
%HH,
where
HH
is
the
hexadecimal
representation
of
the
octet.
This
function
must
always
generate
hexadecimal
values
using
the
upper-case
letters
A-F.
If
$uri
is
the
empty
sequence,
returns
the
zero-length
string.
Note:
The
behavior
of
this
function
corresponds
to
the
recommended
handling
of
non-ASCII
characters
in
URI
attribute
values
as
described
in
[HTML
4.0]
Appendix
B.2.1.
7.4.12.1
Examples
fn:escape-html-uri
("http://www.example.com/00/Weather/CA/Los
Angeles#ocean")
returns
"http://www.example.com/00/Weather/CA/Los
Angeles#ocean"
.
fn:escape-html-uri
("javascript:if
(navigator.browserLanguage
==
'fr')
window.open('http://www.example.com/~bébé');")
returns
"javascript:if
(navigator.browserLanguage
==
'fr')
window.open('http://www.example.com/~b%C3%A9b%C3%A9');"
.
</del>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="substring.functions" id="substring.functions">
</a>
<del class="diff-old">7.5
</del>
<ins class="diff-chg">5.5
</ins>
Functions
Based
on
Substring
Matching
</h3>
<p>
The
functions
described
in
the
section
examine
a
string
<code>
$arg1
</code>
to
see
whether
it
contains
another
string
<code>
$arg2
</code>
as
a
substring.
The
result
depends
on
whether
<code>
$arg2
</code>
is
a
substring
of
<code>
$arg1
</code>,
and
if
so,
on
the
range
of
characters
in
<code>
$arg1
</code>
which
<code>
$arg2
</code>
matches.
</p>
<p>
When
the
<a title="Unicode codepoint collation" class="termref" href="#dt-codepoint-collation">
<span class="arrow">
<ins class="diff-new">·
</ins></span>
Unicode
<del class="diff-old">code
point
</del>
<ins class="diff-chg">codepoint
</ins>
collation
<span class="arrow">
<ins class="diff-new">·
</ins></span></a>
is
used,
this
simply
involves
determining
whether
<code>
$arg1
</code>
contains
a
contiguous
sequence
of
characters
whose
<del class="diff-old">code
points
</del>
<ins class="diff-chg">codepoints
</ins>
are
the
same,
one
for
one,
with
the
<del class="diff-old">code
points
</del>
<ins class="diff-chg">codepoints
</ins>
of
the
characters
in
<code>
$arg2
</code>.
</p>
<p>
When
a
collation
is
specified,
the
rules
are
more
complex.
</p>
<p>
All
collations
support
the
capability
of
deciding
whether
two
strings
are
considered
equal,
and
if
not,
which
of
the
strings
should
be
regarded
as
preceding
the
other.
For
functions
such
as
<a href="#func-compare">
<code>
<del class="diff-old">fn:compare()
</del>
<ins class="diff-chg">fn:compare
</ins>
</code>
</a>,
this
is
all
that
is
required.
For
other
functions,
such
as
<a href= "#func-contains">
<code>
<del class="diff-old">fn:contains()
</del>
<ins class="diff-chg">fn:contains
</ins>
</code>
</a>,
the
collation
needs
to
support
an
additional
property:
it
must
be
able
to
decompose
the
string
into
a
sequence
of
collation
units,
each
unit
consisting
of
one
or
more
characters,
such
that
two
strings
can
be
compared
by
pairwise
comparison
of
these
units.
("collation
unit"
is
equivalent
to
"collation
element"
as
defined
in
<a href= "#Unicode-Collations">
[Unicode
Collation
Algorithm]
</a>.)
The
string
<code>
$arg1
</code>
is
then
considered
to
contain
<code>
$arg2
</code>
as
a
substring
if
the
sequence
of
collation
units
corresponding
to
<code>
$arg2
</code>
is
a
subsequence
of
the
sequence
of
the
collation
units
corresponding
to
<code>
$arg1
</code>.
The
characters
in
<code>
$arg1
</code>
that
match
are
the
characters
corresponding
to
these
collation
units.
</p>
<p>
This
rule
may
occasionally
lead
to
surprises.
For
example,
consider
a
collation
that
treats
"Jaeger"
and
"Jäger"
as
equal.
It
might
do
this
by
treating
"ä"
as
representing
two
collation
units,
in
which
case
the
expression
<a href= "#func-contains">
<code>
fn:contains("Jäger",
"eg")
</code>
</a>
will
return
<code>
true
</code>.
Alternatively,
a
collation
might
treat
"ae"
as
a
single
collation
unit,
in
which
case
the
expression
<a href="#func-contains">
<code>
fn:contains("Jaeger",
"eg")
</code>
</a>
will
return
<code>
false
</code>.
The
results
of
these
functions
thus
depend
strongly
on
the
properties
of
the
collation
that
is
used.
</p>
<p>
In
addition,
collations
may
specify
that
some
collation
units
should
be
ignored
during
matching.
<ins class="diff-new">If
hyphen
is
an
ignored
collation
unit,
then
</ins><a href= "#func-contains"><code><ins class="diff-new">
fn:contains("code-point",
"codepoint")
</ins></code></a><ins class="diff-new">
will
be
true,
and
</ins><a href= "#func-contains"><code><ins class="diff-new">
fn:contains("codepoint",
"-")
</ins></code></a><ins class="diff-new">
will
also
be
true.
</ins>
</p>
<p>
In
the
definitions
below,
we
<del class="diff-old">say
that
$arg1
contains
$arg2
at
positions
m
through
n
if
the
collation
units
corresponding
</del>
<ins class="diff-chg">refer
</ins>
to
<del class="diff-old">characters
</del>
<ins class="diff-chg">the
terms
</ins><b><ins class="diff-chg">
match
</ins></b><ins class="diff-chg">
and
</ins><b><ins class="diff-chg">
minimal
match
</ins></b><ins class="diff-chg">
as
defined
</ins>
in
<del class="diff-old">positions
m
to
n
</del>
<ins class="diff-chg">definitions
DS2
and
DS4
</ins>
of
<a href="#Unicode-Collations">
<ins class="diff-new">[Unicode
Collation
Algorithm]
</ins></a>.<ins class="diff-new">
In
applying
these
definitions:
</ins></p><ul><li><p><var><ins class="diff-new">
C
</ins></var><ins class="diff-new">
is
the
collation;
that
is,
the
value
of
the
</ins>
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">$collation
</ins>
</code>
<del class="diff-old">are
the
same
as
</del>
<ins class="diff-chg">argument
if
specified,
otherwise
</ins>
the
<del class="diff-old">collation
units
corresponding
to
all
</del>
<ins class="diff-chg">default
collation.
</ins></p></li><li><p><var><ins class="diff-chg">
P
</ins></var><ins class="diff-chg">
is
</ins>
the
<del class="diff-old">characters
of
</del>
<ins class="diff-chg">(candidate)
substring
</ins>
<code>
$arg2
</code>
<del class="diff-old">modulo
ignorable
collation
units.
In
the
simple
case
of
</del>
</p>
</li>
<li>
<p>
<var>
<ins class="diff-chg">Q
</ins></var><ins class="diff-chg">
is
</ins>
the
<del class="diff-old">Unicode
code
point
collation,
</del>
<ins class="diff-chg">(candidate)
containing
string
</ins><code><ins class="diff-chg">
$arg1
</ins></code></p></li><li><p><ins class="diff-chg">
The
boundary
condition
</ins><var><ins class="diff-chg">
B
</ins></var><ins class="diff-chg">
is
satisfied
at
</ins>
the
<ins class="diff-new">start
and
end
of
a
string,
and
between
any
two
characters
that
belong
to
different
</ins>
collation
units
<del class="diff-old">are
the
same
as
</del>
<ins class="diff-chg">(collation
elements
in
</ins>
the
<del class="diff-old">characters
</del>
<ins class="diff-chg">language
</ins>
of
<del class="diff-old">the
string.
See
</del>
<a href="#Unicode-Collations">
[Unicode
Collation
Algorithm]
</a>
<del class="diff-old">for
a
detailed
discussion
of
substring
matching.
</del>
<ins class="diff-chg">).
It
is
not
satisfied
between
two
characters
that
belong
to
the
same
collation
unit.
</ins>
</p>
</li>
</ul>
<p>
It
is
possible
to
define
collations
that
do
not
have
the
ability
to
decompose
a
string
into
units
suitable
for
substring
matching.
An
argument
to
a
function
defined
in
this
section
may
be
a
URI
that
identifies
a
collation
that
is
able
to
compare
two
strings,
but
that
does
not
have
the
capability
to
split
the
string
into
collation
units.
Such
a
collation
may
cause
the
function
to
fail,
or
to
give
unexpected
results
or
it
may
be
rejected
as
an
unsuitable
argument.
The
ability
to
decompose
strings
into
collation
units
is
an
<a title="implementation-defined" class= "termref" href="#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
property
of
the
collation.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-contains">
<code>
fn:contains
</code>
</a>
</td>
<td>
<del class="diff-old">Indicates
whether
one
</del>
<ins class="diff-chg">Returns
true
if
the
string
</ins>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
contains
<del class="diff-old">another
</del>
<code>
<del class="diff-old">xs:string
.
A
collation
may
be
specified.
</del>
<ins class="diff-chg">$arg2
</ins></code><ins class="diff-chg">
as
a
substring,
taking
collations
into
account.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-starts-with">
<code>
fn:starts-with
</code>
</a>
</td>
<td>
<del class="diff-old">Indicates
whether
</del>
<ins class="diff-chg">Returns
true
if
</ins>
the
<del class="diff-old">value
of
one
</del>
<ins class="diff-chg">string
</ins>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<del class="diff-old">begins
with
the
collation
units
of
another
</del>
<ins class="diff-chg">contains
</ins>
<code>
<del class="diff-old">xs:string
.
A
collation
may
be
specified.
</del>
<ins class="diff-chg">$arg2
</ins></code><ins class="diff-chg">
as
a
leading
substring,
taking
collations
into
account.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-ends-with">
<code>
fn:ends-with
</code>
</a>
</td>
<td>
<del class="diff-old">Indicates
whether
</del>
<ins class="diff-chg">Returns
true
if
</ins>
the
<del class="diff-old">value
of
one
</del>
<ins class="diff-chg">string
</ins>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<del class="diff-old">ends
with
the
collation
units
of
another
</del>
<ins class="diff-chg">contains
</ins>
<code>
<del class="diff-old">xs:string
.
A
collation
may
be
specified.
</del>
<ins class="diff-chg">$arg2
</ins></code><ins class="diff-chg">
as
a
trailing
substring,
taking
collations
into
account.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-substring-before">
<code>
fn:substring-before
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">collation
units
</del>
<ins class="diff-chg">part
</ins>
of
<del class="diff-old">one
</del>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
that
<del class="diff-old">precede
in
that
xs:string
</del>
<ins class="diff-chg">precedes
</ins>
the
<del class="diff-old">collation
units
</del>
<ins class="diff-chg">first
occurrence
</ins>
of
<del class="diff-old">another
</del>
<code>
<del class="diff-old">xs:string
.
A
collation
may
be
specified.
</del>
<ins class="diff-chg">$arg2
</ins></code>,<ins class="diff-chg">
taking
collations
into
account.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-substring-after">
<code>
fn:substring-after
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">collation
units
</del>
<ins class="diff-chg">part
</ins>
of
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
that
<del class="diff-old">follow
in
that
xs:string
</del>
<ins class="diff-chg">follows
</ins>
the
<del class="diff-old">collation
units
</del>
<ins class="diff-chg">first
occurrence
</ins>
of
<del class="diff-old">another
</del>
<code>
<del class="diff-old">xs:string
.
A
collation
may
be
specified.
</del>
<ins class="diff-chg">$arg2
</ins></code>,<ins class="diff-chg">
taking
collations
into
account.
</ins>
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-contains" id="func-contains">
</a>
<del class="diff-old">7.5.1
</del>
<ins class="diff-chg">5.5.1
</ins>
fn:contains
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
string
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
contains
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
as
a
substring,
taking
collations
into
account.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:contains
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:contains
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Returns
an
xs:boolean
indicating
whether
or
not
the
value
of
$arg1
contains
(at
the
beginning,
at
the
end,
or
anywhere
within)
at
least
one
sequence
of
collation
units
that
provides
a
minimal
match
to
the
collation
units
in
the
value
of
$arg2
,
according
to
the
collation
that
is
used.
Note:
"Minimal
match"
is
defined
in
[Unicode
Collation
Algorithm]
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
the
value
of
<code>
$arg1
</code>
or
<code>
$arg2
</code>
is
the
empty
sequence,
or
contains
only
ignorable
collation
units,
it
is
interpreted
as
the
zero-length
string.
</p>
<p>
If
the
value
of
<code>
$arg2
</code>
is
the
zero-length
string,
then
the
function
returns
<code>
true
</code>.
</p>
<p>
If
the
value
of
<code>
$arg1
</code>
is
the
zero-length
string,
the
function
returns
<code>
false
</code>.
</p>
<p>
The
collation
used
by
<del class="diff-old">the
invocation
of
</del>
this
function
is
determined
according
to
the
rules
in
<a href="#choosing-a-collation">
<b>
<del class="diff-old">7.3.1
Collations
</del>
<ins class="diff-chg">5.3.3
Choosing
a
Collation
</ins></b></a>.</p><p><ins class="diff-chg">
The
function
returns
an
</ins><code><ins class="diff-chg">
xs:boolean
</ins></code><ins class="diff-chg">
indicating
whether
or
not
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
contains
(at
the
beginning,
at
the
end,
or
anywhere
within)
at
least
one
sequence
of
collation
units
that
provides
a
</ins><b><ins class="diff-chg">
minimal
match
</ins></b><ins class="diff-chg">
to
the
collation
units
in
the
value
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>,<ins class="diff-chg">
according
to
the
collation
that
is
used.
</ins></p><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins>
</b>
</p>
<p>
<b>
<ins class="diff-new">Minimal
match
</ins></b><ins class="diff-new">
is
defined
in
</ins><a href= "#Unicode-Collations"><ins class="diff-new">
[Unicode
Collation
Algorithm]
</ins>
</a>.
</p>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p>
If
the
specified
collation
does
not
support
collation
units
an
error
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
be
raised
[
<a href="#ERRFOCH0004" title="err:FOCH0004">
err:FOCH0004
</a>
].
</p>
<del class="diff-old">7.5.1.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">CollationA
</del>
<ins class="diff-chg">The
collation
</ins>
used
in
these
<del class="diff-old">examples
</del>
<ins class="diff-chg">examples,
</ins><code><ins class="diff-chg">
http://example.com/CollationA
</ins></code>
is
a
collation
in
which
both
"-"
and
"*"
are
ignorable
collation
units.
</p>
<del class="diff-old">Note:
</del>
<p>
"Ignorable
collation
unit"
is
equivalent
to
"ignorable
collation
element"
in
<a href="#Unicode-Collations">
[Unicode
Collation
Algorithm]
</a>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:contains
(
"tattoo",
"t")
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:contains
(
"tattoo",
"ttt")
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:contains
(
"",
())
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
<del class="diff-old">The
</del>
<em>
<ins class="diff-chg">(The
</ins>
first
rule
is
applied,
followed
by
the
second
<del class="diff-old">rule.
</del>
<ins class="diff-chg">rule.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:contains
(
"abcdefghi",
"-d-e-f-",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:contains
(
"a*b*c*d*e*f*g*h*i*",
"d-ef-",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:contains
(
"abcd***e---f*--*ghi",
"def",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:contains
(
(),
"--***-*---",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
<del class="diff-old">The
</del>
<em>
<ins class="diff-chg">(The
</ins>
second
argument
contains
only
ignorable
collation
units
and
is
equivalent
to
the
zero-length
<del class="diff-old">string.
</del>
<ins class="diff-chg">string.).
</ins></em>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-starts-with" id="func-starts-with">
</a>
<del class="diff-old">7.5.2
</del>
<ins class="diff-chg">5.5.2
</ins>
fn:starts-with
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
string
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
contains
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
as
a
leading
substring,
taking
collations
into
account.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:starts-with
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:starts-with
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Returns
an
xs:boolean
indicating
whether
or
not
the
value
of
$arg1
starts
with
a
sequence
of
collation
units
that
provides
a
minimal
match
to
the
collation
units
of
$arg2
according
to
the
collation
that
is
used.
Note:
"Minimal
match"
is
defined
in
[Unicode
Collation
Algorithm]
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
the
value
of
<code>
$arg1
</code>
or
<code>
$arg2
</code>
is
the
empty
sequence,
or
contains
only
ignorable
collation
units,
it
is
interpreted
as
the
zero-length
string.
</p>
<p>
If
the
value
of
<code>
$arg2
</code>
is
the
zero-length
string,
then
the
function
returns
<code>
true
</code>.
If
the
value
of
<code>
$arg1
</code>
is
the
zero-length
string
and
the
value
of
<code>
$arg2
</code>
is
not
the
zero-length
string,
then
the
function
returns
<code>
false
</code>.
</p>
<p>
The
collation
used
by
<del class="diff-old">the
invocation
of
</del>
this
function
is
determined
according
to
the
rules
in
<a href="#choosing-a-collation">
<b>
<del class="diff-old">7.3.1
Collations
</del>
<ins class="diff-chg">5.3.3
Choosing
a
Collation
</ins>
</b>
</a>.
</p>
<p>
<ins class="diff-new">The
function
returns
an
</ins><code><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
indicating
whether
or
not
the
value
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
starts
with
a
sequence
of
collation
units
that
provides
a
</ins><b><ins class="diff-new">
match
</ins></b><ins class="diff-new">
to
the
collation
units
of
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
according
to
the
collation
that
is
used.
</ins></p><div class="note"><p class="prefix"><b><ins class="diff-new">
Note:
</ins></b></p><p><b><ins class="diff-new">
Match
</ins></b><ins class="diff-new">
is
defined
in
</ins><a href= "#Unicode-Collations"><ins class="diff-new">
[Unicode
Collation
Algorithm]
</ins></a>.</p></div></dd><dt class="label"><ins class="diff-new">
Error
Conditions
</ins></dt><dd><p>
If
the
specified
collation
does
not
support
collation
units
an
error
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
be
raised
[
<a href="#ERRFOCH0004" title="err:FOCH0004">
err:FOCH0004
</a>
].
</p>
<del class="diff-old">7.5.2.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">CollationA
</del>
<ins class="diff-chg">The
collation
</ins>
used
in
these
<del class="diff-old">examples
</del>
<ins class="diff-chg">examples,
</ins><code><ins class="diff-chg">
http://example.com/CollationA
</ins></code>
is
a
collation
in
which
both
"-"
and
"*"
are
ignorable
collation
units.
</p>
<del class="diff-old">Note:
</del>
<p>
"Ignorable
collation
unit"
is
equivalent
to
"ignorable
collation
element"
in
<a href="#Unicode-Collations">
[Unicode
Collation
Algorithm]
</a>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:starts-with("tattoo",
"tat")
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:starts-with
(
"tattoo",
"att")
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:starts-with
((),
())
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:starts-with
(
"abcdefghi",
"-a-b-c-",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:starts-with
(
"a*b*c*d*e*f*g*h*i*",
"a-bc-",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:starts-with
(
"abcd***e---f*--*ghi",
"abcdef",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:starts-with
(
(),
"--***-*---",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
<del class="diff-old">The
</del>
<em>
<ins class="diff-chg">(The
</ins>
second
argument
contains
only
ignorable
collation
units
and
is
equivalent
to
the
zero-length
<del class="diff-old">string.
</del>
<ins class="diff-chg">string.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
fn:starts-with
(
"-abcdefghi",
"-abc",
"http://example.com/CollationA")
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
true()
</ins></code>.</p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-ends-with" id="func-ends-with">
</a>
<del class="diff-old">7.5.3
</del>
<ins class="diff-chg">5.5.3
</ins>
fn:ends-with
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
string
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
contains
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
as
a
trailing
substring,
taking
collations
into
account.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:ends-with
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:ends-with
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Returns
an
xs:boolean
indicating
whether
or
not
the
value
of
$arg1
ends
with
a
sequence
of
collation
units
that
provides
a
minimal
match
to
the
collation
units
of
$arg2
according
to
the
collation
that
is
used.
Note:
"Minimal
match"
is
defined
in
[Unicode
Collation
Algorithm]
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
the
value
of
<code>
$arg1
</code>
or
<code>
$arg2
</code>
is
the
empty
sequence,
or
contains
only
ignorable
collation
units,
it
is
interpreted
as
the
zero-length
string.
</p>
<p>
If
the
value
of
<code>
$arg2
</code>
is
the
zero-length
string,
then
the
function
returns
<code>
true
</code>.
If
the
value
of
<code>
$arg1
</code>
is
the
zero-length
string
and
the
value
of
<code>
$arg2
</code>
is
not
the
zero-length
string,
then
the
function
returns
<code>
false
</code>.
</p>
<p>
The
collation
used
by
<del class="diff-old">the
invocation
of
</del>
this
function
is
determined
according
to
the
rules
in
<a href="#choosing-a-collation">
<b>
<del class="diff-old">7.3.1
Collations
</del>
<ins class="diff-chg">5.3.3
Choosing
a
Collation
</ins></b></a>.</p><p><ins class="diff-chg">
The
function
returns
an
</ins><code><ins class="diff-chg">
xs:boolean
</ins></code><ins class="diff-chg">
indicating
whether
or
not
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
starts
with
a
sequence
of
collation
units
that
provides
a
</ins><b><ins class="diff-chg">
match
</ins>
</b>
<ins class="diff-new">to
the
collation
units
of
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
according
to
the
collation
that
is
used.
</ins></p><div class="note"><p class="prefix">
<b>
<ins class="diff-new">Note:
</ins></b></p><p><b><ins class="diff-new">
Match
</ins></b><ins class="diff-new">
is
defined
in
</ins><a href= "#Unicode-Collations"><ins class="diff-new">
[Unicode
Collation
Algorithm]
</ins>
</a>.
</p>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p>
If
the
specified
collation
does
not
support
collation
units
an
error
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
be
raised
[
<a href="#ERRFOCH0004" title="err:FOCH0004">
err:FOCH0004
</a>
].
</p>
<del class="diff-old">7.5.3.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">CollationA
</del>
<ins class="diff-chg">The
collation
</ins>
used
in
these
<del class="diff-old">examples
</del>
<ins class="diff-chg">examples,
</ins><code><ins class="diff-chg">
http://example.com/CollationA
</ins></code>
is
a
collation
in
which
both
"-"
and
"*"
are
ignorable
collation
units.
</p>
<del class="diff-old">Note:
</del>
<p>
"Ignorable
collation
unit"
is
equivalent
to
"ignorable
collation
element"
in
<a href="#Unicode-Collations">
[Unicode
Collation
Algorithm]
</a>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:ends-with
(
"tattoo",
"tattoo")
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:ends-with
(
"tattoo",
"atto")
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:ends-with
((),
())
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:ends-with
(
"abcdefghi",
"-g-h-i-",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:ends-with
(
"abcd***e---f*--*ghi",
"defghi",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:ends-with
(
"abcd***e---f*--*ghi",
"defghi",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:ends-with
(
(),
"--***-*---",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
<del class="diff-old">The
</del>
<em>
<ins class="diff-chg">(The
</ins>
second
argument
contains
only
ignorable
collation
units
and
is
equivalent
to
the
zero-length
<del class="diff-old">string.
</del>
<ins class="diff-chg">string.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
fn:ends-with
(
"abcdefghi",
"ghi-",
"http://example.com/CollationA")
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
true()
</ins></code>.</p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-substring-before" id= "func-substring-before">
</a>
<del class="diff-old">7.5.4
</del>
<ins class="diff-chg">5.5.4
</ins>
fn:substring-before
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
part
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
that
precedes
the
first
occurrence
of
</ins><code><ins class="diff-new">
$arg2
</ins></code>,<ins class="diff-new">
taking
collations
into
account.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:substring-before
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:substring-before
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
substring
of
the
value
of
$arg1
that
precedes
in
the
value
of
$arg1
the
first
occurrence
of
a
sequence
of
collation
units
that
provides
a
minimal
match
to
the
collation
units
of
$arg2
according
to
the
collation
that
is
used.
Note:
"Minimal
match"
is
defined
in
[Unicode
Collation
Algorithm]
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
the
value
of
<code>
$arg1
</code>
or
<code>
$arg2
</code>
is
the
empty
sequence,
or
contains
only
ignorable
collation
units,
it
is
interpreted
as
the
zero-length
string.
</p>
<p>
If
the
value
of
<code>
$arg2
</code>
is
the
zero-length
string,
then
the
function
returns
the
zero-length
string.
</p>
<p>
If
the
value
of
<code>
$arg1
</code>
does
not
contain
a
string
that
is
equal
to
the
value
of
<code>
$arg2
</code>,
then
the
function
returns
the
zero-length
string.
</p>
<p>
The
collation
used
by
<del class="diff-old">the
invocation
of
</del>
this
function
is
determined
according
to
the
rules
in
<a href="#choosing-a-collation">
<b>
<del class="diff-old">7.3.1
Collations
</del>
<ins class="diff-chg">5.3.3
Choosing
a
Collation
</ins>
</b>
</a>.
</p>
<p>
<ins class="diff-chg">The
function
returns
the
substring
of
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
that
precedes
in
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
the
first
occurrence
of
a
sequence
of
collation
units
that
provides
a
</ins><b><ins class="diff-chg">
minimal
match
</ins></b><ins class="diff-chg">
to
the
collation
units
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
according
to
the
collation
that
is
used.
</ins></p><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b></p><p><b><ins class="diff-chg">
Minimal
match
</ins></b><ins class="diff-chg">
is
defined
in
</ins><a href= "#Unicode-Collations"><ins class="diff-chg">
[Unicode
Collation
Algorithm]
</ins></a>.</p></div></dd><dt class="label"><ins class="diff-chg">
Error
Conditions
</ins></dt><dd><p>
If
the
specified
collation
does
not
support
collation
units
an
error
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
be
raised
[
<a href="#ERRFOCH0004" title="err:FOCH0004">
err:FOCH0004
</a>
].
</p>
<del class="diff-old">7.5.4.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">CollationA
</del>
<ins class="diff-chg">The
collation
</ins>
used
in
these
<del class="diff-old">examples
</del>
<ins class="diff-chg">examples,
</ins><code><ins class="diff-chg">
http://example.com/CollationA
</ins></code>
is
a
collation
in
which
both
"-"
and
"*"
are
ignorable
collation
units.
</p>
<del class="diff-old">Note:
</del>
<p>
"Ignorable
collation
unit"
is
equivalent
to
"ignorable
collation
element"
in
<a href="#Unicode-Collations">
[Unicode
Collation
Algorithm]
</a>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring-before
(
"tattoo",
"attoo")
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">t
".
</del>
<ins class="diff-chg">"t"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring-before
(
"tattoo",
"tatto")
</code>
returns
<del class="diff-old">"".
</del>
<code>
<ins class="diff-chg">""
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring-before
((),
())
</code>
returns
<del class="diff-old">"".
</del>
<code>
<ins class="diff-chg">""
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring-before
(
"abcdefghi",
"--d-e-",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">abc
".
</del>
<ins class="diff-chg">"abc"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring-before
(
"abc--d-e-fghi",
"--d-e-",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">abc--
".
</del>
<ins class="diff-chg">"abc--"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring-before
(
"a*b*c*d*e*f*g*h*i*",
"***cde",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">a*b*
".
</del>
<ins class="diff-chg">"a*b*"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring-before
(
"Eureka!",
"--***-*---",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<del class="diff-old">"".
The
</del>
<code>
<ins class="diff-chg">""
</ins></code>.<em><ins class="diff-chg">
(The
</ins>
second
argument
contains
only
ignorable
collation
units
and
is
equivalent
to
the
zero-length
<del class="diff-old">string.
</del>
<ins class="diff-chg">string.).
</ins></em>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-substring-after" id= "func-substring-after">
</a>
<del class="diff-old">7.5.5
</del>
<ins class="diff-chg">5.5.5
</ins>
fn:substring-after
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
part
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
that
follows
the
first
occurrence
of
</ins><code><ins class="diff-new">
$arg2
</ins></code>,<ins class="diff-new">
taking
collations
into
account.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:substring-after
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:substring-after
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
substring
of
the
value
of
$arg1
that
follows
in
the
value
of
$arg1
the
first
occurrence
of
a
sequence
of
collation
units
that
provides
a
minimal
match
to
the
collation
units
of
$arg2
according
to
the
collation
that
is
used.
Note:
"Minimal
match"
is
defined
in
[Unicode
Collation
Algorithm]
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
the
value
of
<code>
$arg1
</code>
or
<code>
$arg2
</code>
is
the
empty
sequence,
or
contains
only
ignorable
collation
units,
it
is
interpreted
as
the
zero-length
string.
</p>
<p>
If
the
value
of
<code>
$arg2
</code>
is
the
zero-length
string,
then
the
function
returns
the
value
of
<code>
$arg1
</code>.
</p>
<p>
If
the
value
of
<code>
$arg1
</code>
does
not
contain
a
string
that
is
equal
to
the
value
of
<code>
$arg2
</code>,
then
the
function
returns
the
zero-length
string.
</p>
<p>
The
collation
used
by
<del class="diff-old">the
invocation
of
</del>
this
function
is
determined
according
to
the
rules
in
<a href="#choosing-a-collation">
<b>
<del class="diff-old">7.3.1
Collations
</del>
<ins class="diff-chg">5.3.3
Choosing
a
Collation
</ins>
</b>
</a>.
</p>
<p>
<ins class="diff-chg">The
function
returns
the
substring
of
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
that
follows
in
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
the
first
occurrence
of
a
sequence
of
collation
units
that
provides
a
</ins><b><ins class="diff-chg">
minimal
match
</ins></b><ins class="diff-chg">
to
the
collation
units
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
according
to
the
collation
that
is
used.
</ins></p><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b></p><p><b><ins class="diff-chg">
Minimal
match
</ins></b><ins class="diff-chg">
is
defined
in
</ins><a href= "#Unicode-Collations"><ins class="diff-chg">
[Unicode
Collation
Algorithm]
</ins></a>.</p></div></dd><dt class="label"><ins class="diff-chg">
Error
Conditions
</ins></dt><dd><p>
If
the
specified
collation
does
not
support
collation
units
an
error
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
be
raised
[
<a href="#ERRFOCH0004" title="err:FOCH0004">
err:FOCH0004
</a>
].
</p>
<del class="diff-old">7.5.5.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">CollationA
</del>
<ins class="diff-chg">The
collation
</ins>
used
in
these
<del class="diff-old">examples
</del>
<ins class="diff-chg">examples,
</ins><code><ins class="diff-chg">
http://example.com/CollationA
</ins></code>
is
a
collation
in
which
both
"-"
and
"*"
are
ignorable
collation
units.
</p>
<del class="diff-old">Note:
</del>
<p>
"Ignorable
collation
unit"
is
equivalent
to
"ignorable
collation
element"
in
<a href="#Unicode-Collations">
[Unicode
Collation
Algorithm]
</a>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring-after("tattoo",
"tat")
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">too
".
</del>
<ins class="diff-chg">"too"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:substring-after
(
"tattoo",
</del>
<ins class="diff-chg">fn:substring-after("tattoo",
</ins>
"tattoo")
</code>
returns
<del class="diff-old">"".
</del>
<code>
<ins class="diff-chg">""
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:substring-after
((),
</del>
<ins class="diff-chg">fn:substring-after((),
</ins>
())
</code>
returns
<del class="diff-old">"".
</del>
<code>
<ins class="diff-chg">""
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:substring-after
(
"abcdefghi",
</del>
<ins class="diff-chg">fn:substring-after("abcdefghi",
</ins>
"--d-e-",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">fghi
".
</del>
<ins class="diff-chg">"fghi"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:substring-after
(
"abc--d-e-fghi",
</del>
<ins class="diff-chg">fn:substring-after("abc--d-e-fghi",
</ins>
"--d-e-",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">-fghi
".
</del>
<ins class="diff-chg">"-fghi"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring-after
(
"a*b*c*d*e*f*g*h*i*",
"***cde***",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">*f*g*h*i*
".
</del>
<ins class="diff-chg">"*f*g*h*i*"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:substring-after
(
"Eureka!",
"--***-*---",
<del class="diff-old">"CollationA")
</del>
<ins class="diff-chg">"http://example.com/CollationA")
</ins>
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">Eureka!
".
The
</del>
<ins class="diff-chg">"Eureka!"
</ins></code>.<em><ins class="diff-chg">
(The
</ins>
second
argument
contains
only
ignorable
collation
units
and
is
equivalent
to
the
zero-length
<del class="diff-old">string.
</del>
<ins class="diff-chg">string.).
</ins></em>
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="string.match" id="string.match">
</a>
<del class="diff-old">7.6
</del>
<ins class="diff-chg">5.6
</ins>
String
Functions
that
<del class="diff-old">Use
Pattern
Matching
</del>
<ins class="diff-chg">use
Regular
Expressions
</ins>
</h3>
<p>
The
three
functions
described
in
this
section
make
use
of
a
regular
expression
syntax
for
pattern
matching.
This
is
described
below.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-matches">
<code>
fn:matches
</code>
</a>
</td>
<td>
Returns
<del class="diff-old">an
xs:boolean
value
that
indicates
whether
the
value
of
the
first
argument
is
matched
by
</del>
<ins class="diff-chg">true
if
</ins>
the
<ins class="diff-new">supplied
string
matches
a
given
</ins>
regular
<del class="diff-old">expression
that
is
the
value
of
the
second
argument.
</del>
<ins class="diff-chg">expression.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-replace">
<code>
fn:replace
</code>
</a>
</td>
<td>
Returns
<ins class="diff-new">a
string
produced
from
</ins>
the
<del class="diff-old">value
of
the
first
argument
with
every
substring
matched
</del>
<ins class="diff-chg">input
string
</ins>
by
<del class="diff-old">the
</del>
<ins class="diff-chg">replacing
any
substrings
that
match
a
given
</ins>
regular
expression
<del class="diff-old">that
is
the
value
of
the
second
argument
replaced
by
the
</del>
<ins class="diff-chg">with
a
supplied
</ins>
replacement
<del class="diff-old">string
that
is
the
value
of
the
third
argument.
</del>
<ins class="diff-chg">string.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-tokenize">
<code>
fn:tokenize
</code>
</a>
</td>
<td>
Returns
a
sequence
of
<del class="diff-old">one
or
more
</del>
<ins class="diff-chg">strings
constructed
by
splitting
the
input
wherever
a
separator
is
found;
the
separator
is
any
substring
that
matches
a
given
regular
expression.
</ins></td></tr><tr><td><a href= "#func-analyze-string">
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">fn:analyze-string
</ins>
</code>
<del class="diff-old">s
whose
values
are
substrings
of
the
value
</del>
</a>
</td>
<td>
<ins class="diff-chg">Analyzes
a
string
using
a
regular
expression,
returning
an
XML
structure
that
identifies
which
parts
</ins>
of
the
<del class="diff-old">first
argument
separated
by
substrings
that
</del>
<ins class="diff-chg">input
string
matched
or
failed
to
</ins>
match
the
regular
<del class="diff-old">expression
that
is
</del>
<ins class="diff-chg">expression,
and
in
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">case
</ins>
of
<ins class="diff-new">matched
substrings,
which
substrings
matched
each
capturing
group
in
</ins>
the
<del class="diff-old">second
argument.
</del>
<ins class="diff-chg">regular
expression.
</ins>
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="regex-syntax" id="regex-syntax">
</a>
<del class="diff-old">7.6.1
</del>
<ins class="diff-chg">5.6.1
</ins>
Regular
Expression
Syntax
</h4>
<p>
The
regular
expression
syntax
used
by
these
functions
is
defined
in
terms
of
the
regular
expression
syntax
specified
in
XML
Schema
(see
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
),
which
in
turn
is
based
on
the
established
conventions
of
languages
such
as
Perl.
However,
because
XML
Schema
uses
regular
expressions
only
for
validity
checking,
it
omits
some
facilities
that
are
widely-used
with
languages
such
as
Perl.
This
section,
therefore,
describes
extensions
to
the
XML
Schema
regular
expressions
syntax
that
reinstate
these
capabilities.
</p>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
It
is
recommended
that
implementers
consult
<a href= "#Unicode-Regex">
[Unicode
Regular
Expressions]
</a>
for
information
on
using
regular
expression
processing
on
Unicode
characters.
</p>
</div>
<p>
The
regular
expression
syntax
and
semantics
are
identical
to
those
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
with
the
following
additions:
</p>
<ul>
<li>
<p>
Two
meta-characters,
<code>
^
</code>
and
<code>
$
</code>
are
added.
By
default,
the
meta-character
<code>
^
</code>
matches
the
start
of
the
entire
string,
while
<code>
$
</code>
matches
the
end
of
the
entire
string.
In
multi-line
mode,
<code>
^
</code>
matches
the
start
of
any
line
(that
is,
the
start
of
the
entire
string,
and
the
position
immediately
after
a
newline
character),
while
<code>
$
</code>
matches
the
end
of
any
line
(that
is,
the
end
of
the
entire
string,
and
the
position
immediately
before
a
newline
character).
Newline
here
means
the
character
<code>
#x0A
</code>
only.
</p>
<p>
This
means
that
the
production
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>:
</p>
<p>
<code>
[10]
Char
::=
[^.\?*+()|#x5B#x5D]
</code>
</p>
<p>
is
modified
to
read:
</p>
<p>
<code>
[10]
Char
::=
[^.\?*+{}()|^$#x5B#x5D]
</code>
</p>
<p>
The
characters
<code>
#x5B
</code>
and
<code>
#x5D
</code>
correspond
to
"
<code>
[
</code>
"
and
"
<code>
]
</code>
"
respectively.
</p>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
The
definition
of
Char
(production
[10])
in
<a href= "#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
has
a
known
error
in
which
it
omits
the
left
brace
("{")
and
right
brace
("}").
That
error
is
corrected
here.
</p>
</div>
<p>
The
following
production:
</p>
<p>
<code>
[11]
charClass
::=
charClassEsc
|
charClassExpr
|
WildCardEsc
</code>
</p>
<p>
is
modified
to
read:
</p>
<p>
<code>
[11]
charClass
::=
charClassEsc
|
charClassExpr
|
WildCardEsc
|
"^"
|
"$"
</code>
</p>
</li>
<li>
<p>
<em>
Reluctant
quantifiers
</em>
are
supported.
They
are
indicated
by
a
"
<code>
?
</code>
"
following
a
quantifier.
Specifically:
</p>
<ul>
<li>
<p>
<code>
X??
</code>
matches
X,
once
or
not
at
all
</p>
</li>
<li>
<p>
<code>
X*?
</code>
matches
X,
zero
or
more
times
</p>
</li>
<li>
<p>
<code>
X+?
</code>
matches
X,
one
or
more
times
</p>
</li>
<li>
<p>
<code>
X{n}?
</code>
matches
X,
exactly
n
times
</p>
</li>
<li>
<p>
<code>
X{n,}?
</code>
matches
X,
at
least
n
times
</p>
</li>
<li>
<p>
<code>
X{n,m}?
</code>
matches
X,
at
least
n
times,
but
not
more
than
m
times
</p>
</li>
</ul>
<p>
The
effect
of
these
quantifiers
is
that
the
regular
expression
matches
the
<em>
shortest
</em>
possible
substring
consistent
with
the
match
as
a
whole
succeeding.
Without
the
"
<code>
?
</code>
",
the
regular
expression
matches
the
<em>
longest
</em>
possible
substring.
</p>
<p>
To
achieve
this,
the
production
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>:
</p>
<p>
<code>
[4]
quantifier
::=
[?*+]
|
(
'{'
quantity
'}'
)
</code>
</p>
<p>
is
changed
to:
</p>
<p>
<code>
[4]
quantifier
::=
(
[?*+]
|
(
'{'
quantity
'}'
)
)
'?'?
</code>
</p>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
Reluctant
quantifiers
have
no
effect
on
the
results
of
the
boolean
<a href="#func-matches">
<code>
fn:matches
</code>
</a>
function,
since
this
function
is
only
interested
in
discovering
whether
a
match
exists,
and
not
where
it
exists.
</p>
</div>
</li>
<li>
<p>
Sub-expressions
(groups)
within
the
regular
expression
are
recognized.
The
regular
expression
syntax
defined
by
<a href= "#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
allows
a
regular
expression
to
contain
parenthesized
sub-expressions,
but
attaches
no
special
significance
to
them.
The
<a href="#func-replace">
<code>
<del class="diff-old">fn:replace()
</del>
<ins class="diff-chg">fn:replace
</ins>
</code>
</a>
function
described
below
allows
access
to
the
parts
of
the
input
string
that
matched
a
sub-expression
(called
captured
substrings).
The
sub-expressions
are
numbered
according
to
the
position
of
the
opening
parenthesis
in
left-to-right
order
within
the
top-level
regular
expression:
the
first
opening
parenthesis
identifies
captured
substring
1,
the
second
identifies
captured
substring
2,
and
so
on.
0
identifies
the
substring
captured
by
the
entire
regular
expression.
If
a
sub-expression
matches
more
than
one
substring
(because
it
is
within
a
construct
that
allows
repetition),
then
only
the
<em>
last
</em>
substring
that
it
matched
will
be
captured.
</p>
<p>
<ins class="diff-new">Non-capturing
groups
are
also
recognized.
These
are
indicated
by
the
syntax
</ins><code><ins class="diff-new">
(?:xxxx)
</ins></code>.<ins class="diff-new">
Specifically,
the
production
rule
for
</ins><code><ins class="diff-new">
atom
</ins></code><ins class="diff-new">
in
</ins><a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a><ins class="diff-new">
is
changed
from:
</ins></p><p><code><ins class="diff-new">
[9]
atom
::=
Char
|
charClass
|
(
'('
regExp
')'
)
</ins></code></p><p><ins class="diff-new">
to:
</ins></p><p><code><ins class="diff-new">
[9]
atom
::=
Char
|
charClass
|
(
'('
'?:'?
regExp
')'
)
</ins></code></p><p><ins class="diff-new">
The
presence
of
the
optional
</ins><code><ins class="diff-new">
?:
</ins></code><ins class="diff-new">
has
no
effect
on
the
set
of
strings
that
match
the
regular
expression,
but
causes
the
left
parenthesis
not
to
be
counted
by
operations
that
number
the
groups
within
a
regular
expression,
for
example
the
</ins><a href= "#func-replace"><code><ins class="diff-new">
fn:replace
</ins></code></a><ins class="diff-new">
function.
</ins></p>
</li>
<li>
<p>
Back-references
are
<del class="diff-old">allowed.
</del>
<ins class="diff-chg">allowed
</ins><span><ins class="diff-chg">
outside
a
character
class
expression.
A
back-reference
is
an
additional
kind
of
atom.
</ins></span>
The
construct
<code>
<del class="diff-old">\n
</del>
<ins class="diff-chg">\N
</ins>
</code>
where
<code>
<del class="diff-old">n
</del>
<ins class="diff-chg">N
</ins>
</code>
is
a
single
digit
is
always
recognized
as
a
back-reference;
if
this
is
followed
by
further
digits,
these
digits
are
taken
to
be
part
of
the
back-reference
if
and
only
if
<span>
<ins class="diff-new">the
resulting
number
</ins><code><ins class="diff-new">
NN
</ins></code><ins class="diff-new">
is
such
that
</ins>
the
back-reference
is
preceded
by
<del class="diff-old">sufficiently
many
capturing
subexpressions.
</del>
<code>
<ins class="diff-chg">NN
</ins></code><ins class="diff-chg">
or
more
unescaped
opening
parentheses.
The
regular
expression
is
invalid
if
a
back-reference
refers
to
a
subexpression
that
does
not
exist
or
whose
closing
right
parenthesis
occurs
after
the
back-reference.
</ins></span></p><p>
A
back-reference
matches
the
string
that
was
matched
by
the
<code>
<del class="diff-old">n
</del>
<ins class="diff-chg">N
</ins>
</code>
th
capturing
subexpression
within
the
regular
expression,
that
is,
the
parenthesized
subexpression
whose
opening
left
parenthesis
is
the
<code>
<del class="diff-old">n
</del>
<ins class="diff-chg">N
</ins>
</code>
th
unescaped
left
parenthesis
within
the
regular
expression.
<del class="diff-old">The
closing
right
parenthesis
of
this
subexpression
must
occur
before
the
back-reference.
</del>
For
example,
the
regular
expression
<code>
('|").*\1
</code>
matches
a
sequence
of
characters
delimited
either
by
an
apostrophe
at
the
start
and
end,
or
by
a
quotation
mark
at
the
start
and
end.
</p>
<p>
If
no
string
is
matched
by
the
<code>
<del class="diff-old">n
</del>
<ins class="diff-chg">N
</ins>
</code>
th
capturing
subexpression,
the
back-reference
is
interpreted
as
matching
a
zero-length
string.
</p>
<p>
Back-references
change
the
following
production:
</p>
<p>
<span>
<code>
<del class="diff-old">[23]
charClassEsc
</del>
<ins class="diff-chg">[9]
atom
</ins>
::=
<del class="diff-old">(
SingleCharEsc
|
MultiCharEsc
</del>
<ins class="diff-chg">Char
</ins>
|
<del class="diff-old">catEsc
</del>
<ins class="diff-chg">charClass
</ins>
|
<del class="diff-old">complEsc
</del>
<ins class="diff-chg">(
'('
regExp
')'
</ins>
)
</code>
</span>
</p>
<p>
to
</p>
<p>
<span>
<code>
<del class="diff-old">[23]
charClassEsc
</del>
<ins class="diff-chg">[9]
atom
</ins>
::=
<del class="diff-old">(
SingleCharEsc
|
MultiCharEsc
</del>
<ins class="diff-chg">Char
</ins>
|
<del class="diff-old">catEsc
</del>
<ins class="diff-chg">charClass
</ins>
|
<del class="diff-old">complEsc
</del>
<ins class="diff-chg">(
'('
regExp
')'
)
</ins>
|
backReference
<del class="diff-old">)
</del>
</code>
</span>
</p>
<p>
<span>
<code>
<del class="diff-old">[23a]
</del>
<ins class="diff-chg">[9a]
</ins>
backReference
::=
"\"
[1-9][0-9]*
</code>
</span>
</p>
<div class="note">
<p class="prefix">
<b>
<ins class="diff-new">Note:
</ins></b></p><p><span><ins class="diff-new">
Within
a
character
class
expression,
</ins><code><ins class="diff-new">
\
</ins></code><ins class="diff-new">
followed
by
a
digit
is
invalid.
Some
other
regular
expression
languages
interpret
this
as
an
octal
character
reference.
</ins></span></p></div>
</li>
<li>
<p>
Single
character
escapes
are
extended
to
allow
the
<code>
$
</code>
character
to
be
escaped.
The
following
production
is
changed:
</p>
<p>
<code>
[24]SingleCharEsc
::=
'\'
[nrt\|.?*+(){}#x2D#x5B#x5D#x5E]
</code>
</p>
<p>
to
</p>
<p>
<code>
[24]SingleCharEsc
::=
'\'
[nrt\|.?*+(){}$#x2D#x5B#x5D#x5E]
</code>
</p>
</li>
</ul>
<div class="div4">
<h5>
<a name="flags" id="flags">
</a>
<del class="diff-old">7.6.1.1
</del>
<ins class="diff-chg">5.6.1.1
</ins>
Flags
</h5>
<p>
All
these
functions
provide
an
optional
parameter,
<code>
$flags
</code>,
to
set
options
for
the
interpretation
of
the
regular
expression.
The
parameter
accepts
a
<code>
xs:string
</code>,
in
which
individual
letters
are
used
to
set
options.
The
presence
of
a
letter
within
the
string
indicates
that
the
option
is
on;
its
absence
indicates
that
the
option
is
off.
Letters
may
appear
in
any
order
and
may
be
repeated.
If
there
are
characters
present
that
are
not
defined
here
as
flags,
then
an
error
is
raised
[
<a href= "#ERRFORX0001" title="err:FORX0001">
err:FORX0001
</a>
].
</p>
<p>
The
following
options
are
defined:
</p>
<ul>
<li>
<p>
<code>
s
</code>:
If
present,
the
match
operates
in
"dot-all"
mode.
(Perl
calls
this
the
single-line
mode.)
If
the
<code>
s
</code>
flag
is
not
specified,
the
meta-character
<code>.
</code>
matches
any
character
except
a
newline
(
<code>
#x0A
</code>
)
character.
In
dot-all
mode,
the
meta-character
<code>.
</code>
matches
any
character
whatsoever.
Suppose
the
input
contains
"hello"
and
"world"
on
two
lines.
This
will
not
be
matched
by
the
regular
expression
"hello.*world"
unless
dot-all
mode
is
enabled.
</p>
</li>
<li>
<p>
<code>
m
</code>:
If
present,
the
match
operates
in
multi-line
mode.
By
default,
the
meta-character
<code>
^
</code>
matches
the
start
of
the
entire
string,
while
$
matches
the
end
of
the
entire
string.
In
multi-line
mode,
<code>
^
</code>
matches
the
start
of
any
line
(that
is,
the
start
of
the
entire
string,
and
the
position
immediately
after
a
newline
<del class="diff-old">character),
</del>
<ins class="diff-chg">character
</ins><span><ins class="diff-chg">
other
than
a
newline
that
appears
as
the
last
character
in
the
string
</ins></span><ins class="diff-chg">
),
</ins>
while
<code>
$
</code>
matches
the
end
of
any
line
<span>
(that
is,
the
<del class="diff-old">end
of
the
entire
string,
and
the
</del>
position
immediately
before
a
newline
<del class="diff-old">character).
</del>
<ins class="diff-chg">character,
and
the
end
of
the
entire
string
if
there
is
no
newline
character
at
the
end
of
the
string).
</ins></span>
Newline
here
means
the
character
<code>
#x0A
</code>
only.
</p>
</li>
<li>
<p>
<code>
i
</code>:
If
present,
the
match
operates
in
case-insensitive
mode.
The
detailed
rules
are
as
follows.
In
these
rules,
a
character
C2
is
considered
to
be
a
<em>
case-variant
</em>
of
another
character
C1
if
the
following
XPath
expression
returns
<code>
true
</code>
when
the
two
characters
are
considered
as
strings
of
length
one,
and
the
<a title="Unicode codepoint collation" class="termref" href="#dt-codepoint-collation">
<span class= "arrow">
<ins class="diff-new">·
</ins></span>
Unicode
codepoint
collation
<span class= "arrow">
<ins class="diff-new">·
</ins></span></a>
is
used:
</p>
<p>
<a href="#func-lower-case">
<code>
fn:lower-case(C1)
eq
fn:lower-case(C2)
</code>
</a>
</p>
<p>
or
</p>
<p>
<a href="#func-upper-case">
<code>
fn:upper-case(C1)
eq
fn:upper-case(C2)
</code>
</a>
</p>
<p>
Note
that
the
case-variants
of
a
character
under
this
definition
are
always
single
characters.
</p>
<ol class="enumar">
<li>
<p>
When
a
normal
character
(
<code>
Char
</code>
)
is
used
as
an
atom,
it
represents
the
set
containing
that
character
and
all
its
case-variants.
For
example,
the
regular
expression
"z"
will
match
both
"z"
and
"Z".
</p>
</li>
<li>
<p>
A
character
range
(
<code>
charRange
</code>
)
represents
the
set
containing
all
the
characters
that
it
would
match
in
the
absence
of
the
"
<code>
i
</code>
"
flag,
together
with
their
case-variants.
For
example,
the
regular
expression
"[A-Z]"
will
match
all
the
letters
A-Z
and
all
the
letters
a-z.
It
will
also
match
certain
other
characters
such
as
<code>
#x212A
</code>
(KELVIN
SIGN),
since
<a href="#func-lower-case">
<code>
fn:lower-case("#x212A")
</code>
</a>
is
"k".
</p>
<p>
This
rule
applies
also
to
a
character
range
used
in
a
character
class
subtraction
(
<code>
charClassSub
</code>
):
thus
[A-Z-[IO]]
will
match
characters
such
as
"A",
"B",
"a",
and
"b",
but
will
not
match
"I",
"O",
"i",
or
"o".
</p>
<p>
The
rule
also
applies
to
a
character
range
used
as
part
of
a
negative
character
group:
thus
[^Q]
will
match
every
character
except
"Q"
and
"q"
(these
being
the
only
case-variants
of
"Q"
in
Unicode).
</p>
</li>
<li>
<p>
A
back-reference
is
compared
using
case-blind
comparison:
that
is,
each
character
must
either
be
the
same
as
the
corresponding
character
of
the
previously
matched
string,
or
must
be
a
case-variant
of
that
character.
For
example,
the
strings
"Mum",
"mom",
"Dad",
and
"DUD"
all
match
the
regular
expression
"([md])[aeiou]\1"
when
the
"
<code>
i
</code>
"
flag
is
used.
</p>
</li>
<li>
<p>
All
other
constructs
are
unaffected
by
the
"
<code>
i
</code>
"
flag.
For
example,
"\p{Lu}"
continues
to
match
upper-case
letters
only.
</p>
</li>
</ol>
</li>
<li>
<p>
<code>
x
</code>:
If
present,
whitespace
characters
(#x9,
#xA,
#xD
and
#x20)
in
the
regular
expression
are
removed
prior
to
matching
with
one
exception:
whitespace
characters
within
character
class
expressions
(
<code>
charClassExpr
</code>
)
are
not
removed.
This
flag
can
be
used,
for
example,
to
break
up
long
regular
expressions
into
readable
lines.
</p>
<p>
Examples:
</p>
<p>
<a href="#func-matches">
<code>
fn:matches("helloworld",
"hello
world",
"x")
</code>
</a>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>
</p>
<p>
<a href="#func-matches">
<code>
fn:matches("helloworld",
"hello[
]world",
"x")
</code>
</a>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>
</p>
<p>
<a href="#func-matches">
<code>
fn:matches("hello
world",
"hello\
sworld",
"x")
</code>
</a>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>
</p>
<p>
<a href="#func-matches">
<code>
fn:matches("hello
world",
"hello
world",
"x")
</code>
</a>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins></code></p></li><li><p><code><ins class="diff-chg">
q
</ins></code>:<ins class="diff-chg">
if
present,
all
characters
in
the
regular
expression
are
treated
as
representing
themselves,
not
as
metacharacters.
In
effect,
every
character
that
would
normally
have
a
special
meaning
in
a
regular
expression
is
implicitly
escaped
by
preceding
it
with
a
backslash.
</ins></p><p><ins class="diff-chg">
Furthermore,
when
this
flag
is
present,
the
characters
</ins><code><ins class="diff-chg">
$
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
\
</ins></code><ins class="diff-chg">
have
no
special
significance
when
used
in
the
replacement
string
supplied
to
the
</ins><a href= "#func-replace"><code><ins class="diff-chg">
fn:replace
</ins></code></a><ins class="diff-chg">
function.
</ins></p><p><ins class="diff-chg">
This
flag
can
be
used
in
conjunction
with
the
</ins><code><ins class="diff-chg">
i
</ins></code><ins class="diff-chg">
flag.
If
it
is
used
together
with
the
</ins><code><ins class="diff-chg">
m
</ins></code>,<code><ins class="diff-chg">
s
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
x
</ins></code><ins class="diff-chg">
flag,
that
flag
has
no
effect.
</ins></p><p><ins class="diff-chg">
Examples:
</ins></p><p><a href="#func-tokenize"><code><ins class="diff-chg">
fn:tokenize("12.3.5.6",
".",
"q")
</ins></code></a><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
("12",
"3",
"5",
"6")
</ins></code></p><p><a href="#func-replace"><code><ins class="diff-chg">
fn:replace("a\b\c",
"\",
"\\",
"q")
</ins></code></a><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
"a\\b\\c"
</ins></code></p><p><a href="#func-replace"><code><ins class="diff-chg">
fn:replace("a/b/c",
"/",
"$",
"q")
</ins></code></a><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
"a$b$c"
</ins></code></p><p><a href="#func-matches"><code><ins class="diff-chg">
fn:matches("abcd",
".*",
"q")
</ins></code></a><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
false()
</ins></code></p><p><a href="#func-matches"><code><ins class="diff-chg">
fn:matches("Mr.
B.
Obama",
"B.
OBAMA",
"iq")
</ins></code></a><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
true()
</ins>
</code>
</p>
</li>
</ul>
</div>
</div>
<div class="div3">
<h4>
<a name="func-matches" id="func-matches">
</a>
<del class="diff-old">7.6.2
</del>
<ins class="diff-chg">5.6.2
</ins>
fn:matches
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
supplied
string
matches
a
given
regular
expression.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:matches
</code>
(
<code class= "arg">
$input
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$pattern
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:matches
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$input
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$pattern
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$flags
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
The
function
returns
true
if
$input
matches
the
regular
expression
supplied
as
$pattern
as
influenced
by
the
value
of
$flags
,
if
present;
otherwise,
it
returns
false
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
effect
of
calling
the
first
version
of
this
function
(omitting
the
argument
<code>
$flags
</code>
)
is
the
same
as
the
effect
of
calling
the
second
version
with
the
<code>
$flags
</code>
argument
set
to
a
zero-length
string.
Flags
are
defined
in
<a href= "#flags">
<b>
<del class="diff-old">7.6.1.1
</del>
<ins class="diff-chg">5.6.1.1
</ins>
Flags
</b>
</a>.
</p>
<p>
If
<code>
$input
</code>
is
the
empty
sequence,
it
is
interpreted
as
the
zero-length
string.
</p>
<p>
<ins class="diff-new">The
function
returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
</ins><code><ins class="diff-new">
$input
</ins></code><ins class="diff-new">
or
some
substring
of
</ins><code><ins class="diff-new">
$input
</ins></code><ins class="diff-new">
matches
the
regular
expression
supplied
as
</ins><code><ins class="diff-new">
$pattern
</ins></code>.<ins class="diff-new">
Otherwise,
the
function
returns
</ins><code><ins class="diff-new">
false
</ins></code>.<ins class="diff-new">
The
matching
rules
are
influenced
by
the
value
of
</ins><code><ins class="diff-new">
$flags
</ins></code><ins class="diff-new">
if
present.
</ins></p></dd><dt class="label"><ins class="diff-new">
Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
An
error
is
raised
[
</ins><a href="#ERRFORX0002" title= "err:FORX0002"><ins class="diff-new">
err:FORX0002
</ins></a><ins class="diff-new">
]
if
the
value
of
</ins><code><ins class="diff-new">
$pattern
</ins></code><ins class="diff-new">
is
invalid
according
to
the
rules
described
in
</ins><a href="#regex-syntax"><b><ins class="diff-new">
5.6.1
Regular
Expression
Syntax
</ins></b></a>.</p><p><ins class="diff-new">
An
error
is
raised
[
</ins><a href="#ERRFORX0001" title= "err:FORX0001"><ins class="diff-new">
err:FORX0001
</ins></a><ins class="diff-new">
]
if
the
value
of
</ins><code><ins class="diff-new">
$flags
</ins></code><ins class="diff-new">
is
invalid
according
to
the
rules
described
in
</ins><a href="#flags"><b><ins class="diff-new">
5.6.1.1
Flags
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p>
Unless
the
metacharacters
<code>
^
</code>
and
<code>
$
</code>
are
used
as
anchors,
the
string
is
considered
to
match
the
pattern
if
any
substring
matches
the
pattern.
But
if
anchors
are
used,
the
anchors
must
match
the
start/end
of
the
string
(in
string
mode),
or
the
start/end
of
a
line
(in
multiline
mode).
</p>
<del class="diff-old">Note:
</del>
<p>
This
is
different
from
the
behavior
of
patterns
in
<a href= "#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>,
where
regular
expressions
are
<em>
implicitly
</em>
anchored.
</p>
<p>
<del class="diff-old">An
error
is
raised
[
err:FORX0002
]
if
the
value
of
$pattern
is
invalid
according
to
the
rules
described
in
section
7.6.1
</del>
Regular
<del class="diff-old">Expression
Syntax
.
An
error
</del>
<ins class="diff-chg">expression
matching
</ins>
is
<del class="diff-old">raised
[
err:FORX0001
]
if
</del>
<ins class="diff-chg">defined
on
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">basis
</ins>
of
<del class="diff-old">$flags
is
invalid
according
to
the
rules
described
in
section
7.6.1
Regular
Expression
Syntax
.
</del>
<ins class="diff-chg">Unicode
code
points;
it
takes
no
account
of
collations.
</ins>
</p>
<del class="diff-old">7.6.2.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:matches("abracadabra",
"bra")
</code>
returns
<del class="diff-old">true
</del>
<code>
<ins class="diff-chg">true()
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:matches("abracadabra",
"^a.*a$")
</code>
returns
<del class="diff-old">true
</del>
<code>
<ins class="diff-chg">true()
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:matches("abracadabra",
"^bra")
</code>
returns
<del class="diff-old">false
</del>
<code>
<ins class="diff-chg">false()
</ins></code>.
</p>
<p>
Given
the
source
document:
</p>
<p>
<ins class="diff-new">let
</ins><code><ins class="diff-new">
$poem
</ins></code><ins class="diff-new">
:=
</ins></p>
<div class="exampleInner">
<pre>
&lt;poem author="Wilhelm Busch"&gt; 
Kaum hat dies der Hahn gesehen,
Fängt er auch schon an zu krähen:
<del class="diff-old">«Kikeriki! Kikikerikih!!»
</del>
<ins class="diff-chg">Kikeriki! Kikikerikih!!
</ins>
Tak, tak, tak! - da kommen sie.
&lt;/poem&gt;
</pre>
</div>
<p>
the
following
function
calls
produce
the
following
results,
with
the
<code>
poem
</code>
element
as
the
context
node:
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:matches(.,
</del>
<ins class="diff-chg">fn:matches($poem,
</ins>
"Kaum.*krähen")
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:matches(.,
</del>
<ins class="diff-chg">fn:matches($poem,
</ins>
"Kaum.*krähen",
"s")
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:matches(.,
</del>
<ins class="diff-chg">fn:matches($poem,
</ins>
"^Kaum.*gesehen,$",
"m")
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:matches(.,
</del>
<ins class="diff-chg">fn:matches($poem,
</ins>
"^Kaum.*gesehen,$")
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:matches(.,
</del>
<ins class="diff-chg">fn:matches($poem,
</ins>
"kiki",
"i")
</code>
returns
<code>
<del class="diff-old">true
Note:
Regular
expression
matching
is
defined
on
the
basis
of
Unicode
code
points;
it
takes
no
account
of
collations.
</del>
<ins class="diff-chg">true()
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-replace" id="func-replace">
</a>
<del class="diff-old">7.6.3
</del>
<ins class="diff-chg">5.6.3
</ins>
fn:replace
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
string
produced
from
the
input
string
by
replacing
any
substrings
that
match
a
given
regular
expression
with
a
supplied
replacement
string.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:replace
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$input
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$pattern
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$replacement
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="4">
<code class= "function">
fn:replace
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$input
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$pattern
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$replacement
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$flags
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
The
function
returns
the
xs:string
that
is
obtained
by
replacing
each
non-overlapping
substring
of
$input
that
matches
the
given
$pattern
with
an
occurrence
of
the
$replacement
string.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
effect
of
calling
the
first
version
of
this
function
(omitting
the
argument
<code>
$flags
</code>
)
is
the
same
as
the
effect
of
calling
the
second
version
with
the
<code>
$flags
</code>
argument
set
to
a
zero-length
string.
Flags
are
defined
in
<a href= "#flags">
<b>
<del class="diff-old">7.6.1.1
</del>
<ins class="diff-chg">5.6.1.1
</ins>
Flags
</b>
</a>.
</p>
<p>
The
<code>
$flags
</code>
argument
is
interpreted
in
the
same
manner
as
for
the
<a href= "#func-matches">
<code>
<del class="diff-old">fn:matches()
</del>
<ins class="diff-chg">fn:matches
</ins>
</code>
</a>
function.
</p>
<p>
If
<code>
$input
</code>
is
the
empty
sequence,
it
is
interpreted
as
the
zero-length
string.
</p>
<p>
<ins class="diff-new">The
function
returns
the
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
that
is
obtained
by
replacing
each
non-overlapping
substring
of
</ins><code><ins class="diff-new">
$input
</ins></code><ins class="diff-new">
that
matches
the
given
</ins><code><ins class="diff-new">
$pattern
</ins></code><ins class="diff-new">
with
an
occurrence
of
the
</ins><code><ins class="diff-new">
$replacement
</ins></code><ins class="diff-new">
string.
</ins></p><p>
If
two
overlapping
substrings
of
<code>
$input
</code>
both
match
the
<code>
$pattern
</code>,
then
only
the
first
one
(that
is,
the
one
whose
first
character
comes
first
in
the
<code>
$input
</code>
string)
is
replaced.
</p>
<p>
<del class="diff-old">Within
</del>
<ins class="diff-chg">If
the
</ins><code><ins class="diff-chg">
q
</ins></code><ins class="diff-chg">
flag
is
present,
the
replacement
string
is
used
</ins><em><ins class="diff-chg">
as
is
</ins></em>.</p><p><span><ins class="diff-chg">
Otherwise,
</ins></span><ins class="diff-chg">
within
</ins>
the
<code>
$replacement
</code>
string,
a
variable
<code>
$N
</code>
may
be
used
to
refer
to
the
substring
captured
by
the
Nth
parenthesized
sub-expression
in
the
regular
expression.
For
each
match
of
the
pattern,
these
variables
are
assigned
the
value
of
the
content
matched
by
the
relevant
sub-expression,
and
the
modified
replacement
string
is
then
substituted
for
the
characters
in
<code>
$input
</code>
that
matched
the
pattern.
<code>
$0
</code>
refers
to
the
substring
captured
by
the
regular
expression
as
a
whole.
</p>
<p>
More
specifically,
the
rules
are
as
follows,
where
<code>
S
</code>
is
the
number
of
parenthesized
sub-expressions
in
the
regular
expression,
and
<code>
N
</code>
is
the
decimal
number
formed
by
taking
all
the
digits
that
consecutively
follow
the
<code>
$
</code>
character:
</p>
<ol class="enumar">
<li>
<p>
If
<code>
N
</code>
=
<code>
0
</code>,
then
the
variable
is
replaced
by
the
substring
matched
by
the
regular
expression
as
a
whole.
</p>
</li>
<li>
<p>
If
<code>
1
</code>
&lt;=
<code>
N
</code>
&lt;=
<code>
S
</code>,
then
the
variable
is
replaced
by
the
substring
captured
by
the
Nth
parenthesized
sub-expression.
If
the
<code>
Nth
</code>
parenthesized
sub-expression
was
not
matched,
then
the
variable
is
replaced
by
the
zero-length
string.
</p>
</li>
<li>
<p>
If
<code>
S
</code>
&lt;
<code>
N
</code>
&lt;=
<code>
9
</code>,
then
the
variable
is
replaced
by
the
zero-length
string.
</p>
</li>
<li>
<p>
Otherwise
(if
<code>
N
</code>
&gt;
<code>
S
</code>
and
<code>
N
</code>
&gt;
<code>
9
</code>
),
the
last
digit
of
<code>
N
</code>
is
taken
to
be
a
literal
character
to
be
included
"as
is"
in
the
replacement
string,
and
the
rules
are
reapplied
using
the
number
<code>
N
</code>
formed
by
stripping
off
this
last
digit.
</p>
</li>
</ol>
<p>
For
example,
if
the
replacement
string
is
"
<code>
$23
</code>
"
and
there
are
5
substrings,
the
result
contains
the
value
of
the
substring
that
matches
the
second
sub-expression,
followed
by
the
digit
"
<code>
3
</code>
".
</p>
<p>
<del class="diff-old">A
</del>
<ins class="diff-chg">Unless
the
</ins><code><ins class="diff-chg">
q
</ins></code><ins class="diff-chg">
flag
is
used,
a
</ins>
literal
<del class="diff-old">"
</del>
<code>
$
</code>
<del class="diff-old">"
symbol
</del>
<ins class="diff-chg">character
within
the
replacement
string
</ins>
must
be
written
as
<del class="diff-old">"
</del>
<code>
\$
<del class="diff-old">".
A
</del>
</code>,
<ins class="diff-chg">and
a
</ins>
literal
<del class="diff-old">"
</del>
<code>
\
</code>
<del class="diff-old">"
symbol
</del>
<ins class="diff-chg">character
</ins>
must
be
written
as
<del class="diff-old">"
</del>
<code>
\\
<del class="diff-old">".
</del>
</code>.
</p>
<p>
If
two
alternatives
within
the
pattern
both
match
at
the
same
position
in
the
<code>
$input
</code>,
then
the
match
that
is
chosen
is
the
one
matched
by
the
first
alternative.
For
example:
</p>
<div class="exampleInner">
<pre>
 fn:replace("abcd", "(ab)|(a)", "[1=$1][2=$2]") returns "[1=ab][2=]cd"
</pre>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd>
<p>
An
error
is
raised
[
<a href="#ERRFORX0002" title= "err:FORX0002">
err:FORX0002
</a>
]
if
the
value
of
<code>
$pattern
</code>
is
invalid
according
to
the
rules
described
in
section
<a href="#regex-syntax">
<b>
<del class="diff-old">7.6.1
</del>
<ins class="diff-chg">5.6.1
</ins>
Regular
Expression
Syntax
</b>
</a>.
</p>
<p>
An
error
is
raised
[
<a href="#ERRFORX0001" title= "err:FORX0001">
err:FORX0001
</a>
]
if
the
value
of
<code>
$flags
</code>
is
invalid
according
to
the
rules
described
in
section
<a href="#regex-syntax">
<b>
<del class="diff-old">7.6.1
</del>
<ins class="diff-chg">5.6.1
</ins>
Regular
Expression
Syntax
</b>
</a>.
</p>
<p>
An
error
is
raised
[
<a href="#ERRFORX0003" title= "err:FORX0003">
err:FORX0003
</a>
]
if
the
pattern
matches
a
zero-length
string,
that
is,
if
the
expression
<a href= "#func-matches">
<code>
fn:matches("",
$pattern,
$flags)
</code>
</a>
returns
<code>
true
</code>.
It
is
not
an
error,
however,
if
a
captured
substring
is
zero-length.
</p>
<p>
An
error
is
raised
[
<a href="#ERRFORX0004" title= "err:FORX0004">
err:FORX0004
</a>
]
if
the
value
of
<code>
$replacement
</code>
contains
a
"
<code>
$
</code>
"
character
that
is
not
immediately
followed
by
a
digit
<code>
0-9
</code>
and
not
immediately
preceded
by
a
"\".
</p>
<p>
An
error
is
raised
[
<a href="#ERRFORX0004" title= "err:FORX0004">
err:FORX0004
</a>
]
if
the
value
of
<code>
$replacement
</code>
contains
a
"
<code>
\
</code>
"
character
that
is
not
part
of
a
"
<code>
\\
</code>
"
pair,
unless
it
is
immediately
followed
by
a
"
<code>
$
</code>
"
character.
</p>
<del class="diff-old">7.6.3.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
replace("abracadabra",
"bra",
"*")
</code>
returns
<code>
"a*cada*"
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
replace("abracadabra",
"a.*a",
"*")
</code>
returns
<code>
"*"
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
replace("abracadabra",
"a.*?a",
"*")
</code>
returns
<code>
"*c*bra"
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
replace("abracadabra",
"a",
"")
</code>
returns
<code>
"brcdbr"
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
replace("abracadabra",
"a(.)",
"a$1$1")
</code>
returns
<code>
"abbraccaddabbra"
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
replace("abracadabra",
".*?",
"$1")
</code>
raises
an
error,
because
the
pattern
matches
the
zero-length
string
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
replace("AAAA",
"A+",
"b")
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">b
"
</del>
<ins class="diff-chg">"b"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
replace("AAAA",
"A+?",
"b")
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">bbbb
"
</del>
<ins class="diff-chg">"bbbb"
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
replace("darted",
"^(.*?)d(.*)$",
"$1c$2")
</code>
returns
<del class="diff-old">"
</del>
<code>
<del class="diff-old">carted
".
The
</del>
<ins class="diff-chg">"carted"
</ins></code>.<em><ins class="diff-chg">
(The
</ins>
first
<del class="diff-old">"
</del>
<code>
d
</code>
<del class="diff-old">"
</del>
is
<del class="diff-old">replaced.
</del>
<ins class="diff-chg">replaced.).
</ins></em>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-tokenize" id="func-tokenize">
</a>
<del class="diff-old">7.6.4
</del>
<ins class="diff-chg">5.6.4
</ins>
fn:tokenize
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
sequence
of
strings
constructed
by
splitting
the
input
wherever
a
separator
is
found;
the
separator
is
any
substring
that
matches
a
given
regular
expression.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:tokenize
</code>
(
<code class= "arg">
$input
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$pattern
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string*
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:tokenize
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$input
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$pattern
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$flags
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string*
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
This
function
breaks
the
$input
string
into
a
sequence
of
strings,
treating
any
substring
that
matches
$pattern
as
a
separator.
The
separators
themselves
are
not
returned.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
effect
of
calling
the
first
version
of
this
function
(omitting
the
argument
<code>
$flags
</code>
)
is
the
same
as
the
effect
of
calling
the
second
version
with
the
<code>
$flags
</code>
argument
set
to
a
zero-length
string.
Flags
are
defined
in
<a href= "#flags">
<b>
<del class="diff-old">7.6.1.1
</del>
<ins class="diff-chg">5.6.1.1
</ins>
Flags
</b>
</a>.
</p>
<p>
The
<code>
$flags
</code>
argument
is
interpreted
in
the
same
way
as
for
the
<a href="#func-matches">
<code>
<del class="diff-old">fn:matches()
</del>
<ins class="diff-chg">fn:matches
</ins>
</code>
</a>
function.
</p>
<p>
If
<code>
$input
</code>
is
the
empty
sequence,
or
if
<code>
$input
</code>
is
the
zero-length
string,
the
<del class="diff-old">result
is
</del>
<ins class="diff-chg">function
returns
</ins>
the
empty
sequence.
</p>
<p>
<del class="diff-old">If
</del>
<ins class="diff-chg">The
function
returns
a
sequence
of
strings
formed
by
breaking
</ins>
the
<del class="diff-old">supplied
</del>
<code>
<del class="diff-old">$pattern
</del>
<ins class="diff-chg">$input
</ins>
</code>
<del class="diff-old">matches
</del>
<ins class="diff-chg">string
into
</ins>
a
<del class="diff-old">zero-length
string,
</del>
<ins class="diff-chg">sequence
of
strings,
treating
any
substring
</ins>
that
<del class="diff-old">is,
if
</del>
<ins class="diff-chg">matches
</ins>
<code>
<del class="diff-old">fn:matches("",
$pattern,
$flags)
</del>
<ins class="diff-chg">$pattern
</ins>
</code>
<del class="diff-old">returns
true
,
then
an
error
is
raised:
[
err:FORX0003
].
</del>
<ins class="diff-chg">as
a
separator.
The
separators
themselves
are
not
returned.
</ins>
</p>
<p>
If
a
separator
occurs
at
the
start
of
the
<code>
$input
</code>
string,
the
result
sequence
will
start
with
a
zero-length
string.
Zero-length
strings
will
also
occur
in
the
result
sequence
if
a
separator
occurs
at
the
end
of
the
<code>
$input
</code>
string,
or
if
two
adjacent
substrings
match
the
supplied
<code>
$pattern
</code>.
</p>
<p>
If
two
alternatives
within
the
supplied
<code>
$pattern
</code>
both
match
at
the
same
position
in
the
<code>
$input
</code>
string,
then
the
match
that
is
chosen
is
the
first.
For
example:
</p>
<div class="exampleInner">
<pre>
 fn:tokenize("abracadabra", "(ab)|(a)") returns ("", "r", "c", "d", "r", "")
</pre>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd>
<p>
An
error
is
raised
[
<a href="#ERRFORX0002" title= "err:FORX0002">
err:FORX0002
</a>
]
if
the
value
of
<code>
$pattern
</code>
is
invalid
according
to
the
rules
described
in
section
<a href="#regex-syntax">
<b>
<del class="diff-old">7.6.1
</del>
<ins class="diff-chg">5.6.1
</ins>
Regular
Expression
Syntax
</b>
</a>.
</p>
<p>
An
error
is
raised
[
<a href="#ERRFORX0001" title= "err:FORX0001">
err:FORX0001
</a>
]
if
the
value
of
<code>
$flags
</code>
is
invalid
according
to
the
rules
described
in
section
<a href="#regex-syntax">
<b>
<del class="diff-old">7.6.1
</del>
<ins class="diff-chg">5.6.1
</ins>
Regular
Expression
Syntax
</b>
</a>.
</p>
<p>
<ins class="diff-chg">If
the
supplied
</ins><code><ins class="diff-chg">
$pattern
</ins></code><ins class="diff-chg">
matches
a
zero-length
string,
that
is,
if
</ins><a href="#func-matches">
<code>
<ins class="diff-chg">fn:matches("",
$pattern,
$flags)
</ins></code>
</a>
<del class="diff-old">7.6.4.1
</del>
<ins class="diff-chg">returns
</ins><code><ins class="diff-chg">
true
</ins></code>,<ins class="diff-chg">
then
an
error
is
raised:
[
</ins><a href="#ERRFORX0003" title= "err:FORX0003"><ins class="diff-chg">
err:FORX0003
</ins></a><ins class="diff-chg">
].
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:tokenize("The
cat
sat
on
the
mat",
"\s+")
</code>
returns
<code>
("The",
"cat",
"sat",
"on",
"the",
"mat")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:tokenize("1,
15,
24,
50",
",\s*")
</code>
returns
<code>
("1",
"15",
"24",
"50")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:tokenize("1,15,,24,50,",
",")
</code>
returns
<code>
("1",
"15",
"",
"24",
"50",
"")
</code>.
</p>
<p>
<code>
fn:tokenize("abba",
".?")
</code>
raises
the
error
[
<a href="#ERRFORX0003" title="err:FORX0003">
err:FORX0003
</a>
].
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:tokenize("Some
unparsed
&lt;br&gt;
HTML
&lt;BR&gt;
text",
"\s*&lt;br&gt;\s*",
"i")
</code>
returns
<code>
("Some
unparsed",
"HTML",
"text")
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-analyze-string" id= "func-analyze-string">
</a>
<ins class="diff-new">5.6.5
fn:analyze-string
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Analyzes
a
string
using
a
regular
expression,
returning
an
XML
structure
that
identifies
which
parts
of
the
input
string
matched
or
failed
to
match
the
regular
expression,
and
in
the
case
of
matched
substrings,
which
substrings
matched
each
capturing
group
in
the
regular
expression.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-new">
fn:analyze-string
</ins></code><ins class="diff-new">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-new">
$input
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$pattern
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
element(fn:analyze-string-result)
</ins></code></td></tr></table></div></div><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="3"><code class= "function"><ins class="diff-new">
fn:analyze-string
</ins></code><ins class="diff-new">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-new">
$input
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$pattern
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:string
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$flags
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
element(fn:analyze-string-result)
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
The
effect
of
calling
the
first
version
of
this
function
(omitting
the
argument
</ins><code><ins class="diff-new">
$flags
</ins>
</code>
<ins class="diff-new">)
is
the
same
as
the
effect
of
calling
the
second
version
with
the
</ins><code><ins class="diff-new">
$flags
</ins></code><ins class="diff-new">
argument
set
to
a
zero-length
string.
Flags
are
defined
in
</ins><a href= "#flags"><b><ins class="diff-new">
5.6.1.1
Flags
</ins></b>
</a>.
</p>
<p>
<ins class="diff-chg">The
</ins><code><ins class="diff-chg">
$flags
</ins></code><ins class="diff-chg">
argument
is
interpreted
in
the
same
way
as
for
the
</ins><a href="#func-matches"><code><ins class="diff-chg">
fn:matches
</ins></code></a><ins class="diff-chg">
function.
</ins></p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$input
</ins></code><ins class="diff-chg">
is
the
empty
sequence
the
function
behaves
as
if
</ins><code><ins class="diff-chg">
$input
</ins></code><ins class="diff-chg">
were
the
zero-length
string.
In
this
situation
the
result
will
be
an
element
node
with
no
children.
</ins></p><p><ins class="diff-chg">
The
function
returns
an
element
node
whose
local
name
is
</ins><code><ins class="diff-chg">
analyze-string-result
</ins></code>.<ins class="diff-chg">
This
element
and
all
its
descendant
elements
have
the
namespace
URI
</ins><code><ins class="diff-chg">
http://www.w3.org/2005/xpath-functions
</ins></code>.<ins class="diff-chg">
The
namespace
prefix
is
</ins><a title="implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation
dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.<ins class="diff-chg">
The
children
of
this
element
are
a
sequence
of
</ins><code><ins class="diff-chg">
fn:match
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
fn:non-match
</ins></code><ins class="diff-chg">
elements.
This
sequence
is
formed
by
breaking
the
</ins><code><ins class="diff-chg">
$input
</ins></code><ins class="diff-chg">
string
into
a
sequence
of
strings,
returning
any
substring
that
matches
</ins><code><ins class="diff-chg">
$pattern
</ins></code><ins class="diff-chg">
as
the
content
of
a
</ins><code><ins class="diff-chg">
match
</ins></code><ins class="diff-chg">
element,
and
any
intervening
substring
as
the
content
of
a
</ins><code><ins class="diff-chg">
non-match
</ins></code><ins class="diff-chg">
element.
</ins></p><p><ins class="diff-chg">
More
specifically,
the
function
starts
at
the
beginning
of
the
input
string
and
attempts
to
find
the
first
substring
that
matches
the
regular
expression.
If
there
are
several
matches,
the
first
match
is
defined
to
be
the
one
whose
starting
position
comes
first
in
the
string.
If
several
alternatives
within
the
regular
expression
both
match
at
the
same
position
in
the
input
string,
then
the
match
that
is
chosen
is
the
first
alternative
that
matches.
For
example,
if
the
input
string
is
</ins><code><ins class="diff-chg">
The
quick
brown
fox
jumps
</ins></code><ins class="diff-chg">
and
the
regular
expression
is
</ins><code><ins class="diff-chg">
jump|jumps
</ins></code>,<ins class="diff-chg">
then
the
match
that
is
chosen
is
</ins><code><ins class="diff-chg">
jump
</ins></code>.</p><p><ins class="diff-chg">
Having
found
the
first
match,
the
instruction
proceeds
to
find
the
second
and
subsequent
matches
by
repeating
the
search,
starting
at
the
first
character
that
was
not
included
in
the
previous
match.
</ins></p><p><ins class="diff-chg">
The
input
string
is
thus
partitioned
into
a
sequence
of
substrings,
some
of
which
match
the
regular
expression,
others
which
do
not
match
it.
Each
substring
will
contain
at
least
one
character.
This
sequence
is
represented
in
the
result
by
the
sequence
of
</ins><code><ins class="diff-chg">
fn:match
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
fn:non-match
</ins></code><ins class="diff-chg">
children
of
the
returned
element
node;
the
string
value
of
the
</ins><code><ins class="diff-chg">
fn:match
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
fn:non-match
</ins></code><ins class="diff-chg">
element
will
be
the
corresponding
substring
of
</ins><code><ins class="diff-chg">
$input
</ins></code>,<ins class="diff-chg">
and
the
string
value
of
the
returned
element
node
will
therefore
be
the
same
as
</ins><code><ins class="diff-chg">
$input
</ins></code>.</p><p><ins class="diff-chg">
The
content
of
an
</ins><code><ins class="diff-chg">
fn:non-match
</ins></code><ins class="diff-chg">
element
is
always
a
single
text
node.
</ins></p><p><ins class="diff-chg">
The
content
of
a
</ins><code><ins class="diff-chg">
fn:match
</ins></code><ins class="diff-chg">
element,
however,
is
in
general
a
sequence
of
text
nodes
and
</ins><code><ins class="diff-chg">
fn:group
</ins></code><ins class="diff-chg">
element
children.
An
</ins><code><ins class="diff-chg">
fn:group
</ins></code><ins class="diff-chg">
element
with
a
</ins><code><ins class="diff-chg">
nr
</ins></code><ins class="diff-chg">
attribute
having
the
integer
value
</ins><var><ins class="diff-chg">
N
</ins></var><ins class="diff-chg">
identifies
the
substring
captured
by
the
</ins><var><ins class="diff-chg">
Nth
</ins></var><ins class="diff-chg">
parenthesized
sub-expression
in
the
regular
expression.
For
each
capturing
subexpression
there
will
be
at
most
one
corresponding
</ins><code><ins class="diff-chg">
fn:group
</ins></code><ins class="diff-chg">
element
in
each
</ins><code><ins class="diff-chg">
fn:match
</ins></code><ins class="diff-chg">
element
in
the
result.
</ins></p><p><ins class="diff-chg">
If
the
function
is
called
twice
with
the
same
arguments,
it
is
</ins><a title="implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation
dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
whether
the
two
calls
return
the
same
element
node
or
distinct
(but
deep
equal)
element
nodes.
</ins></p><p><ins class="diff-chg">
A
schema
is
defined
for
the
structure
of
the
returned
element,
containing
the
definitions
below.
The
returned
element
and
its
descendants
will
have
type
annotations
obtained
by
validating
the
returned
element
against
this
schema,
unless
the
function
is
used
in
an
environment
where
type
annotations
are
not
supported
(for
example,
a
Basic
XSLT
Processor),
in
which
case
the
elements
will
all
be
annotated
as
</ins><code><ins class="diff-chg">
xs:untyped
</ins></code><ins class="diff-chg">
and
the
attributes
as
</ins><code><ins class="diff-chg">
xs:untypedAtomic
</ins></code>.</p><div class="exampleInner"><pre><ins class="diff-chg">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.w3.org/2005/xpath-functions"
    xmlns:fn="http://www.w3.org/2005/xpath-functions"
    elementFormDefault="qualified"&gt; 
    &lt;xs:element name="analyze-string-result" type="fn:analyze-string-result-type"/&gt;
    &lt;xs:element name="match" type="fn:match-type"/&gt;
    &lt;xs:element name="non-match" type="xs:string"/&gt;
    &lt;xs:element name="group" type="fn:group-type"/&gt;
    
    &lt;xs:complexType name="analyze-string-result-type" mixed="true"&gt;
        &lt;xs:choice minOccurs="0" maxOccurs="unbounded"&gt;
            &lt;xs:element ref="fn:match"/&gt;
            &lt;xs:element ref="fn:non-match"/&gt;
        &lt;/xs:choice&gt;
    &lt;/xs:complexType&gt;
        
    &lt;xs:complexType name="match-type" mixed="true"&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element ref="fn:group" minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="group-type" mixed="true"&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element ref="fn:group" minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="nr" type="xs:positiveInteger"/&gt;
    &lt;/xs:complexType&gt;    
 
&lt;/xs:schema&gt;
</ins></pre>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
An
error
is
raised
[
</ins><a href="#ERRFORX0002" title= "err:FORX0002"><ins class="diff-new">
err:FORX0002
</ins></a><ins class="diff-new">
]
if
the
value
of
</ins><code><ins class="diff-new">
$pattern
</ins></code><ins class="diff-new">
is
invalid
according
to
the
rules
described
in
section
</ins><a href="#regex-syntax"><b><ins class="diff-new">
5.6.1
Regular
Expression
Syntax
</ins></b></a>.</p><p><ins class="diff-new">
An
error
is
raised
[
</ins><a href="#ERRFORX0001" title= "err:FORX0001"><ins class="diff-new">
err:FORX0001
</ins></a><ins class="diff-new">
]
if
the
value
of
</ins><code><ins class="diff-new">
$flags
</ins></code><ins class="diff-new">
is
invalid
according
to
the
rules
described
in
section
</ins><a href="#regex-syntax"><b><ins class="diff-new">
5.6.1
Regular
Expression
Syntax
</ins></b></a>.</p><p><ins class="diff-new">
If
the
supplied
</ins><code><ins class="diff-new">
$pattern
</ins></code><ins class="diff-new">
matches
a
zero-length
string,
that
is,
if
</ins><a href="#func-matches"><code><ins class="diff-new">
fn:matches("",
$pattern,
$flags)
</ins></code></a><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
true
</ins></code>,<ins class="diff-new">
then
an
error
is
raised:
[
</ins><a href="#ERRFORX0003" title= "err:FORX0003"><ins class="diff-new">
err:FORX0003
</ins></a><ins class="diff-new">
].
</ins></p></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><p><ins class="diff-new">
In
the
following
examples,
the
result
document
is
shown
in
serialized
form,
with
whitespace
between
the
element
nodes.
This
whitespace
is
not
actually
present
in
the
result.
</ins></p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:analyze-string("The
cat
sat
on
the
mat.",
"\w+")
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
&lt;analyze-string-result
xmlns="http://www.w3.org/2005/xpath-functions"&gt;
&lt;match&gt;The&lt;/match&gt;
&lt;non-match&gt;
&lt;/non-match&gt;
&lt;match&gt;cat&lt;/match&gt;
&lt;non-match&gt;
&lt;/non-match&gt;
&lt;match&gt;sat&lt;/match&gt;
&lt;non-match&gt;
&lt;/non-match&gt;
&lt;match&gt;on&lt;/match&gt;
&lt;non-match&gt;
&lt;/non-match&gt;
&lt;match&gt;the&lt;/match&gt;
&lt;non-match&gt;
&lt;/non-match&gt;
&lt;match&gt;mat&lt;/match&gt;
&lt;non-match&gt;.&lt;/non-match&gt;
&lt;/analyze-string-result&gt;
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:analyze-string("2008-12-03",
"^(\d+)\-(\d+)\-(\d+)$")
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
&lt;analyze-string-result
xmlns="http://www.w3.org/2005/xpath-functions"&gt;
&lt;match&gt;&lt;group
nr="1"&gt;2008&lt;/group&gt;-&lt;group
nr="2"&gt;12&lt;/group&gt;-&lt;group
nr="3"&gt;03&lt;/group&gt;&lt;/match&gt;
&lt;/analyze-string-result&gt;
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:analyze-string("A1,C15,,D24,
X50,",
"([A-Z])([0-9]+)")
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
&lt;analyze-string-result
xmlns="http://www.w3.org/2005/xpath-functions"&gt;
&lt;match&gt;&lt;group
nr="1"&gt;A&lt;/group&gt;&lt;group
nr="2"&gt;1&lt;/group&gt;&lt;/match&gt;
&lt;non-match&gt;,&lt;/non-match&gt;
&lt;match&gt;&lt;group
nr="1"&gt;C&lt;/group&gt;&lt;group
nr="2"&gt;15&lt;/group&gt;&lt;/match&gt;
&lt;non-match&gt;,,&lt;/non-match&gt;
&lt;match&gt;&lt;group
nr="1"&gt;D&lt;/group&gt;&lt;group
nr="2"&gt;24&lt;/group&gt;&lt;/match&gt;
&lt;non-match&gt;,
&lt;/non-match&gt;
&lt;match&gt;&lt;group
nr="1"&gt;X&lt;/group&gt;&lt;group
nr="2"&gt;50&lt;/group&gt;&lt;/match&gt;
&lt;non-match&gt;,&lt;/non-match&gt;
&lt;/analyze-string-result&gt;
</ins></code>.</p></dd></dl>
</div>
</div>
</div>
<div class="div1">
<h2>
<a name="anyURI-functions" id="anyURI-functions">
</a>
<del class="diff-old">8
</del>
<ins class="diff-chg">6
</ins>
Functions
<del class="diff-old">on
anyURI
</del>
<ins class="diff-chg">that
manipulate
URIs
</ins>
</h2>
<p>
This
section
specifies
functions
that
<del class="diff-old">take
anyURI
</del>
<ins class="diff-chg">manipulate
URI
values,
either
</ins>
as
<del class="diff-old">arguments.
</del>
<ins class="diff-chg">instances
of
</ins><code><ins class="diff-chg">
xs:anyURI
</ins></code><ins class="diff-chg">
or
as
strings.
</ins>
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-resolve-uri">
<code>
fn:resolve-uri
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
</del>
<ins class="diff-chg">Resolves
a
relative
URI
reference
against
</ins>
an
<ins class="diff-new">absolute
URI.
</ins></td></tr><tr><td><a href= "#func-encode-for-uri">
<code>
<del class="diff-old">xs:anyURI
</del>
<ins class="diff-chg">fn:encode-for-uri
</ins>
</code>
<del class="diff-old">representing
an
absolute
</del>
</a>
</td>
<td>
<ins class="diff-chg">Encodes
reserved
characters
in
a
string
that
is
intended
to
be
used
in
the
path
segment
of
a
URI.
</ins></td></tr><tr><td><a href="#func-iri-to-uri">
<code>
<del class="diff-old">xs:anyURI
</del>
<ins class="diff-chg">fn:iri-to-uri
</ins>
</code>
<del class="diff-old">given
</del>
</a>
</td>
<td>
<ins class="diff-chg">Converts
a
string
containing
an
IRI
into
</ins>
a
<del class="diff-old">base
</del>
URI
<del class="diff-old">and
</del>
<ins class="diff-chg">according
to
the
rules
of
</ins><a href="#rfc3987"><ins class="diff-chg">
[RFC
3987]
</ins></a>.</td></tr><tr><td><a href= "#func-escape-html-uri"><code><ins class="diff-chg">
fn:escape-html-uri
</ins></code></a></td><td><ins class="diff-chg">
Escapes
</ins>
a
<del class="diff-old">relative
URI.
</del>
<ins class="diff-chg">URI
in
the
same
way
that
HTML
user
agents
handle
attribute
values
expected
to
contain
URIs.
</ins>
</td>
</tr>
</tbody>
</table>
<div class="div2">
<h3>
<a name="func-resolve-uri" id="func-resolve-uri">
</a>
<del class="diff-old">8.1
</del>
<ins class="diff-chg">6.1
</ins>
fn:resolve-uri
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Resolves
a
relative
URI
reference
against
an
absolute
URI.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:resolve-uri
</code>
(
<code class= "arg">
$relative
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyURI?
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:resolve-uri
</code>
(
<code class= "arg">
$relative
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$base
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyURI?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
The
purpose
of
this
function
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$relative
</ins></code>
is
<del class="diff-old">to
enable
a
relative
URI
to
be
resolved
against
an
absolute
URI.
</del>
<ins class="diff-chg">the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins>
</p>
<p>
The
first
form
of
this
function
resolves
<code>
$relative
</code>
against
the
value
of
the
base-uri
property
from
the
static
context.
<del class="diff-old">If
the
base-uri
property
is
not
initialized
in
the
static
context
an
error
is
raised
[
err:FONS0005
].
</del>
</p>
<p>
If
<code>
$relative
</code>
is
a
relative
URI
reference,
it
is
resolved
against
<code>
$base
</code>,
or
<ins class="diff-new">against
</ins>
the
base-uri
property
from
the
static
context,
using
an
algorithm
such
as
<del class="diff-old">the
ones
</del>
<ins class="diff-chg">those
</ins>
described
in
<a href="#rfc2396">
[RFC
2396]
</a>
or
<a href= "#rfc3986">
[RFC
3986]
</a>,
and
the
resulting
absolute
URI
reference
is
returned.
<del class="diff-old">An
error
may
be
raised
[
err:FORG0009
]
in
the
resolution
process.
</del>
</p>
<p>
If
<code>
$relative
</code>
is
an
absolute
URI
reference,
it
is
returned
unchanged.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd>
<p>
<del class="diff-old">If
</del>
<ins class="diff-chg">The
first
form
of
this
function
resolves
</ins>
<code>
$relative
</code>
<del class="diff-old">or
</del>
<ins class="diff-chg">against
the
value
of
the
base-uri
property
from
the
static
context.
If
the
base-uri
property
is
not
initialized
in
the
static
context
an
error
is
raised
[
</ins><a href="#ERRFONS0005" title= "err:FONS0005"><ins class="diff-chg">
err:FONS0005
</ins></a><ins class="diff-chg">
].
</ins></p><p><span><ins class="diff-chg">
If
</ins>
<code>
<del class="diff-old">$base
</del>
<ins class="diff-chg">$relative
</ins>
</code>
is
not
a
valid
<ins class="diff-new">URI
according
to
the
rules
of
the
</ins>
<code>
xs:anyURI
</code>
<ins class="diff-new">data
type,
or
if
it
is
not
a
suitable
relative
reference
to
use
as
input
to
the
chosen
resolution
algorithm,
then
</ins>
an
error
is
raised
[
<a href= "#ERRFORG0002" title="err:FORG0002">
err:FORG0002
</a>
].
</span>
</p>
<p>
<span>
If
<code>
<del class="diff-old">$relative
</del>
<ins class="diff-chg">$base
</ins>
</code>
is
<ins class="diff-new">not
a
valid
URI
according
to
</ins>
the
<del class="diff-old">empty
sequence,
</del>
<ins class="diff-chg">rules
of
</ins>
the
<del class="diff-old">empty
sequence
</del>
<code>
<ins class="diff-chg">xs:anyURI
</ins></code><ins class="diff-chg">
data
type,
if
it
</ins>
is
<del class="diff-old">returned.
</del>
<ins class="diff-chg">not
a
suitable
URI
to
use
as
input
to
the
chosen
resolution
algorithm
(for
example,
if
it
is
a
relative
URI
reference,
if
it
is
a
non-hierarchic
URI,
or
if
it
contains
a
fragment
identifier),
then
an
error
is
raised
[
</ins><a href="#ERRFORG0002" title= "err:FORG0002"><ins class="diff-chg">
err:FORG0002
</ins></a><ins class="diff-chg">
].
</ins></span>
</p>
<p>
<del class="diff-old">Note:
</del>
<span>
<ins class="diff-chg">If
the
chosen
resolution
algorithm
fails
for
any
other
reason
then
an
error
is
raised
[
</ins><a href="#ERRFORG0009" title= "err:FORG0009"><ins class="diff-chg">
err:FORG0009
</ins></a><ins class="diff-chg">
].
</ins></span>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
Resolving
a
URI
does
not
dereference
it.
This
is
merely
a
syntactic
operation
on
two
character
strings.
</p>
<p>
<span>
<ins class="diff-new">The
algorithms
in
the
cited
RFCs
include
some
variations
that
are
optional
or
recommended
rather
than
mandatory;
they
also
describe
some
common
practices
that
are
not
recommended,
but
which
are
permitted
for
backwards
compatibility.
Where
the
cited
RFCs
permit
variations
in
behavior,
so
does
this
specification.
</ins></span></p></dd></dl></div><div class="div2"><h3><a name="func-encode-for-uri" id="func-encode-for-uri"></a><ins class="diff-new">
6.2
fn:encode-for-uri
</ins></h3><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Encodes
reserved
characters
in
a
string
that
is
intended
to
be
used
in
the
path
segment
of
a
URI.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:encode-for-uri
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$uri-part
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$uri-part
</ins></code><ins class="diff-new">
is
the
empty
sequence,
the
function
returns
the
zero-length
string.
</ins></p><p><ins class="diff-new">
This
function
applies
the
URI
escaping
rules
defined
in
section
2
of
</ins><a href="#rfc3986"><ins class="diff-new">
[RFC
3986]
</ins></a><ins class="diff-new">
to
the
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
supplied
as
</ins><code><ins class="diff-new">
$uri-part
</ins></code>.<ins class="diff-new">
The
effect
of
the
function
is
to
escape
reserved
characters.
Each
such
character
in
the
string
is
replaced
with
its
percent-encoded
form
as
described
in
</ins><a href="#rfc3986"><ins class="diff-new">
[RFC
3986]
</ins></a>.</p><p><ins class="diff-new">
Since
</ins><a href="#rfc3986"><ins class="diff-new">
[RFC
3986]
</ins></a><ins class="diff-new">
recommends
that,
for
consistency,
URI
producers
and
normalizers
should
use
uppercase
hexadecimal
digits
for
all
percent-encodings,
this
function
must
always
generate
hexadecimal
values
using
the
upper-case
letters
A-F.
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
All
characters
are
escaped
except
those
identified
as
"unreserved"
by
</ins><a href="#rfc3986"><ins class="diff-new">
[RFC
3986]
</ins></a>,<ins class="diff-new">
that
is
the
upper-
and
lower-case
letters
A-Z,
the
digits
0-9,
HYPHEN-MINUS
("-"),
LOW
LINE
("_"),
FULL
STOP
".",
and
TILDE
"~".
</ins></p><p><ins class="diff-new">
This
function
escapes
URI
delimiters
and
therefore
cannot
be
used
indiscriminately
to
encode
"invalid"
characters
in
a
path
segment.
</ins></p><p><ins class="diff-new">
This
function
is
invertible
but
not
idempotent.
This
is
because
a
string
containing
a
percent
character
will
be
modified
by
applying
the
function:
for
example
</ins><code><ins class="diff-new">
100%
</ins></code><ins class="diff-new">
becomes
</ins><code><ins class="diff-new">
100%25
</ins></code>,<ins class="diff-new">
while
</ins><code><ins class="diff-new">
100%25
</ins></code><ins class="diff-new">
becomes
</ins><code><ins class="diff-new">
100%2525
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:encode-for-uri("http://www.example.com/00/Weather/CA/Los%20Angeles#ocean")
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
"http%3A%2F%2Fwww.example.com%2F00%2FWeather%2FCA%2FLos%2520Angeles%23ocean"
</ins></code>.<em><ins class="diff-new">
(This
is
probably
not
what
the
user
intended
because
all
of
the
delimiters
have
been
encoded.).
</ins></em></p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
concat("http://www.example.com/",
encode-for-uri("~bébé"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
"http://www.example.com/~b%C3%A9b%C3%A9"
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
concat("http://www.example.com/",
encode-for-uri("100%
organic"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
"http://www.example.com/100%25%20organic"
</ins></code>.</p></dd></dl></div><div class="div2"><h3><a name="func-iri-to-uri" id="func-iri-to-uri"></a><ins class="diff-new">
6.3
fn:iri-to-uri
</ins></h3><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Converts
a
string
containing
an
IRI
into
a
URI
according
to
the
rules
of
</ins><a href="#rfc3987"><ins class="diff-new">
[RFC
3987]
</ins></a>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:iri-to-uri
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$iri
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$iri
</ins></code><ins class="diff-new">
is
the
empty
sequence,
the
function
returns
the
zero-length
string.
</ins></p><p><ins class="diff-new">
Otherwise,
the
function
converts
the
value
of
</ins><code><ins class="diff-new">
$iri
</ins></code><ins class="diff-new">
into
a
URI
according
to
the
rules
given
in
Section
3.1
of
</ins><a href= "#rfc3987"><ins class="diff-new">
[RFC
3987]
</ins></a><ins class="diff-new">
by
percent-encoding
characters
that
are
allowed
in
an
IRI
but
not
in
a
URI.
If
</ins><code><ins class="diff-new">
$iri
</ins></code><ins class="diff-new">
contains
a
character
that
is
invalid
in
an
IRI,
such
as
the
space
character
(see
note
below),
the
invalid
character
is
replaced
by
its
percent-encoded
form
as
described
in
</ins><a href="#rfc3986"><ins class="diff-new">
[RFC
3986]
</ins></a><ins class="diff-new">
before
the
conversion
is
performed.
</ins></p><p><ins class="diff-new">
Since
</ins><a href="#rfc3986"><ins class="diff-new">
[RFC
3986]
</ins></a><ins class="diff-new">
recommends
that,
for
consistency,
URI
producers
and
normalizers
should
use
uppercase
hexadecimal
digits
for
all
percent-encodings,
this
function
must
always
generate
hexadecimal
values
using
the
upper-case
letters
A-F.
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
The
function
is
idempotent
but
not
invertible.
Both
the
inputs
</ins><code><ins class="diff-new">
My
Documents
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
My%20Documents
</ins></code><ins class="diff-new">
will
be
converted
to
the
output
</ins><code><ins class="diff-new">
My%20Documents
</ins></code>.</p><p><ins class="diff-new">
This
function
does
not
check
whether
</ins><code><ins class="diff-new">
$iri
</ins></code><ins class="diff-new">
is
a
legal
IRI.
It
treats
it
as
an
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
and
operates
on
the
characters
in
the
</ins><code><ins class="diff-new">
xs:string
</ins></code>.</p><p><ins class="diff-new">
The
following
printable
ASCII
characters
are
invalid
in
an
IRI:
"&lt;",
"&gt;",
"
"
"
(double
quote),
space,
"{",
"}",
"|",
"\",
"^",
and
"`".
Since
these
characters
should
not
appear
in
an
IRI,
if
they
do
appear
in
</ins><code><ins class="diff-new">
$iri
</ins></code><ins class="diff-new">
they
will
be
percent-encoded.
In
addition,
characters
outside
the
range
x20-
</ins><span><ins class="diff-new">
x7E
</ins></span><ins class="diff-new">
will
be
percent-encoded
because
they
are
invalid
in
a
URI.
</ins></p><p><ins class="diff-new">
Since
this
function
does
not
escape
the
PERCENT
SIGN
"%"
and
this
character
is
not
allowed
in
data
within
a
URI,
users
wishing
to
convert
character
strings
(such
as
file
names)
that
include
"%"
to
a
URI
should
manually
escape
"%"
by
replacing
it
with
"%25".
</ins></p></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:iri-to-uri
("http://www.example.com/00/Weather/CA/Los%20Angeles#ocean")
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
"http://www.example.com/00/Weather/CA/Los%20Angeles#ocean"
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:iri-to-uri
("http://www.example.com/~bébé")
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
"http://www.example.com/~b%C3%A9b%C3%A9"
</ins></code>.</p></dd></dl>
</div>
<div class="div2">
<h3>
<a name="func-escape-html-uri" id= "func-escape-html-uri">
</a>
<ins class="diff-new">6.4
fn:escape-html-uri
</ins></h3><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Escapes
a
URI
in
the
same
way
that
HTML
user
agents
handle
attribute
values
expected
to
contain
URIs.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:escape-html-uri
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$uri
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$uri
</ins></code><ins class="diff-new">
is
the
empty
sequence,
the
function
returns
the
zero-length
string.
</ins></p><p><ins class="diff-new">
Otherwise,
the
function
escapes
all
characters
except
printable
characters
of
the
US-ASCII
coded
character
set,
specifically
the
codepoints
between
32
and
126
(decimal)
inclusive.
Each
character
in
</ins><code><ins class="diff-new">
$uri
</ins></code><ins class="diff-new">
to
be
escaped
is
replaced
by
an
escape
sequence,
which
is
formed
by
encoding
the
character
as
a
sequence
of
octets
in
UTF-8,
and
then
representing
each
of
these
octets
in
the
form
%HH,
where
HH
is
the
hexadecimal
representation
of
the
octet.
This
function
must
always
generate
hexadecimal
values
using
the
upper-case
letters
A-F.
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
The
behavior
of
this
function
corresponds
to
the
recommended
handling
of
non-ASCII
characters
in
URI
attribute
values
as
described
in
</ins><a href="#HTML40"><ins class="diff-new">
[HTML
4.0]
</ins></a><ins class="diff-new">
Appendix
B.2.1.
</ins></p></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:escape-html-uri
("http://www.example.com/00/Weather/CA/Los
Angeles#ocean")
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
"http://www.example.com/00/Weather/CA/Los
Angeles#ocean"
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:escape-html-uri
("javascript:if
(navigator.browserLanguage
==
'fr')
window.open('http://www.example.com/~bébé');")
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
"javascript:if
(navigator.browserLanguage
==
'fr')
window.open('http://www.example.com/~b%C3%A9b%C3%A9');"
</ins></code>.</p></dd></dl>
</div>
</div>
<div class="div1">
<h2>
<a name="boolean-functions" id="boolean-functions">
</a>
<del class="diff-old">9
</del>
<ins class="diff-chg">7
</ins>
Functions
and
Operators
on
Boolean
Values
</h2>
<p>
This
section
defines
functions
and
operators
on
the
<del class="diff-old">[XML
Schema
Part
2:
Datatypes
Second
Edition]
boolean
</del>
<code>
<ins class="diff-chg">xs:boolean
</ins></code>
datatype.
</p>
<div class="div2">
<h3>
<a name="boolean-constructors" id= "boolean-constructors">
</a>
<del class="diff-old">9.1
Additional
</del>
<ins class="diff-chg">7.1
</ins>
Boolean
<del class="diff-old">Constructor
</del>
<ins class="diff-chg">Constant
</ins>
Functions
</h3>
<p>
<del class="diff-old">The
following
additional
constructor
functions
</del>
<ins class="diff-chg">Since
no
literals
</ins>
are
defined
<del class="diff-old">on
</del>
<ins class="diff-chg">in
XPath
to
reference
</ins>
the
<ins class="diff-new">constant
</ins>
boolean
<del class="diff-old">type.
</del>
<ins class="diff-chg">values
true
and
false,
two
functions
are
provided
for
the
purpose.
</ins>
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-true">
<code>
fn:true
</code>
</a>
</td>
<td>
<del class="diff-old">Constructs
</del>
<ins class="diff-chg">Returns
</ins>
the
<code>
xs:boolean
</code>
value
<del class="diff-old">'true'.
</del>
<code>
<ins class="diff-chg">true
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href="#func-false">
<code>
fn:false
</code>
</a>
</td>
<td>
<del class="diff-old">Constructs
</del>
<ins class="diff-chg">Returns
</ins>
the
<code>
xs:boolean
</code>
value
<del class="diff-old">'false'.
</del>
<code>
<ins class="diff-chg">false
</ins></code>.
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-true" id="func-true">
</a>
<del class="diff-old">9.1.1
</del>
<ins class="diff-chg">7.1.1
</ins>
fn:true
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
</ins><code><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
value
</ins><code><ins class="diff-new">
true
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:true
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
xs:boolean
value
true
.
Equivalent
</del>
<ins class="diff-chg">The
result
is
equivalent
</ins>
to
<code>
xs:boolean("1")
</code>.
</p>
<del class="diff-old">9.1.1.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:true()
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">xs:boolean(1)
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-false" id="func-false">
</a>
<del class="diff-old">9.1.2
</del>
<ins class="diff-chg">7.1.2
</ins>
fn:false
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
</ins><code><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
value
</ins><code><ins class="diff-new">
false
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:false
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
xs:boolean
value
false
.
Equivalent
</del>
<ins class="diff-chg">The
result
is
equivalent
</ins>
to
<code>
xs:boolean("0")
</code>.
</p>
<del class="diff-old">9.1.2.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:false()
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">xs:boolean(0)
</ins>
</code>.
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="op.boolean" id="op.boolean">
</a>
<del class="diff-old">9.2
</del>
<ins class="diff-chg">7.2
</ins>
Operators
on
Boolean
Values
</h3>
<p>
The
following
functions
define
the
semantics
of
operators
on
boolean
values
in
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
and
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>:
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
<del class="diff-old">Operator
</del>
<ins class="diff-chg">Function
</ins>
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-boolean-equal">
<code>
op:boolean-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
of
</del>
<ins class="diff-chg">Returns
</ins>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">true
</ins>
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">if
the
two
arguments
are
the
same
boolean
value.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-boolean-less-than">
<code>
op:boolean-less-than
</code>
</a>
</td>
<td>
<del class="diff-old">A
less-than
operator
on
xs:boolean
values:
</del>
<ins class="diff-chg">Returns
true
if
the
first
argument
is
</ins>
false
<ins class="diff-chg">and
the
second
</ins>
is
<del class="diff-old">less
than
true
.
</del>
<ins class="diff-chg">true.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-boolean-greater-than">
<code>
op:boolean-greater-than
</code>
</a>
</td>
<td>
<del class="diff-old">A
greater-than
operator
on
xs:boolean
values:
</del>
<ins class="diff-chg">Returns
</ins>
true
<ins class="diff-chg">if
the
first
argument
</ins>
is
<del class="diff-old">greater
than
false
.
</del>
<ins class="diff-chg">true
and
the
second
is
false.
</ins>
</td>
</tr>
</tbody>
</table>
<p>
The
ordering
operators
<a href= "#func-boolean-less-than">
<code>
op:boolean-less-than
</code>
</a>
and
<a href= "#func-boolean-greater-than">
<code>
op:boolean-greater-than
</code>
</a>
are
provided
for
application
purposes
and
for
compatibility
with
<a href="#xpath">
[XML
Path
Language
(XPath)
Version
1.0]
</a>.
The
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
datatype
<code>
xs:boolean
</code>
is
not
ordered.
</p>
<div class="div3">
<h4>
<a name="func-boolean-equal" id="func-boolean-equal">
</a>
<del class="diff-old">9.2.1
</del>
<ins class="diff-chg">7.2.1
</ins>
op:boolean-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
the
two
arguments
are
the
same
boolean
value.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
operator
on
</ins><code><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:boolean-equal
</code>
(
<code class= "arg">
$value1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:boolean
</code>,
<code class="arg">
$value2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:boolean
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
<code>
true
</code>
if
both
arguments
are
<code>
true
</code>
or
if
both
arguments
are
<code>
false
</code>.
<del class="diff-old">Returns
</del>
<ins class="diff-chg">It
returns
</ins>
<code>
false
</code>
if
one
of
the
arguments
is
<code>
true
</code>
and
the
other
argument
is
<code>
false
</code>.
</p>
<del class="diff-old">This
function
backs
up
the
"eq"
operator
on
xs:boolean
values.
</del>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-boolean-less-than" id= "func-boolean-less-than">
</a>
<del class="diff-old">9.2.2
</del>
<ins class="diff-chg">7.2.2
</ins>
op:boolean-less-than
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
first
argument
is
false
and
the
second
is
true.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"lt"
operator
on
</ins><code><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ge"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:boolean-less-than
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:boolean
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:boolean
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
<code>
true
</code>
if
<code>
$arg1
</code>
is
<code>
false
</code>
and
<code>
$arg2
</code>
is
<code>
true
</code>.
Otherwise,
<ins class="diff-new">it
</ins>
returns
<code>
false
</code>.
</p>
<del class="diff-old">This
function
backs
up
the
"lt"
and
"ge"
operators
on
xs:boolean
values.
</del>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-boolean-greater-than" id= "func-boolean-greater-than">
</a>
<del class="diff-old">9.2.3
</del>
<ins class="diff-chg">7.2.3
</ins>
op:boolean-greater-than
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
first
argument
is
true
and
the
second
is
false.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"gt"
operator
on
</ins><code><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"le"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:boolean-greater-than
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:boolean
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:boolean
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
$arg1
is
true
and
</del>
<ins class="diff-chg">The
function
call
</ins>
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">op:boolean-greater-than($A,
$B)
</ins>
</code>
is
<del class="diff-old">false
.
Otherwise,
returns
false
.
This
function
backs
up
</del>
<ins class="diff-chg">defined
to
return
</ins>
the
<del class="diff-old">"gt"
and
"le"
operators
on
</del>
<ins class="diff-chg">same
result
as
</ins><a href= "#func-boolean-less-than">
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">op:boolean-less-than($B,
$A)
</ins>
</code>
<del class="diff-old">values.
</del>
</a>
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="boolean-value-functions" id= "boolean-value-functions">
</a>
<del class="diff-old">9.3
</del>
<ins class="diff-chg">7.3
</ins>
Functions
on
Boolean
Values
</h3>
<p>
The
following
functions
are
defined
on
boolean
values:
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-boolean">
<code>
<ins class="diff-new">fn:boolean
</ins></code></a></td><td><ins class="diff-new">
Computes
the
effective
boolean
value
of
the
sequence
</ins><code><ins class="diff-new">
$arg
</ins></code>.</td></tr><tr><td>
<a href="#func-not">
<code>
fn:not
</code>
</a>
</td>
<td>
<del class="diff-old">Inverts
the
</del>
<ins class="diff-chg">Returns
</ins>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">true
</ins>
</code>
<ins class="diff-new">if
the
effective
boolean
</ins>
value
of
<del class="diff-old">the
argument.
</del>
<code>
<ins class="diff-chg">$arg
</ins></code><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
false
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
false
</ins></code><ins class="diff-chg">
if
it
is
</ins><code><ins class="diff-chg">
true
</ins></code>.
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-boolean" id="func-boolean">
</a>
<ins class="diff-new">7.3.1
fn:boolean
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Computes
the
effective
boolean
value
of
the
sequence
</ins><code><ins class="diff-new">
$arg
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:boolean
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
item()*
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:boolean
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
The
function
computes
the
effective
boolean
value
of
a
sequence,
defined
according
to
the
following
rules.
See
also
</ins><a href= "http://www.w3.org/TR/xpath20/#id-ebv"><ins class="diff-new">
Section
2.4.3
Effective
Boolean
Value
</ins></a><sup><small><ins class="diff-new">
XP
</ins></small></sup>.</p><ul><li><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
the
empty
sequence,
</ins><code><ins class="diff-new">
fn:boolean
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
false
</ins></code>.</p></li><li><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
a
sequence
whose
first
item
is
a
node,
</ins><code><ins class="diff-new">
fn:boolean
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
true
</ins></code>.</p></li><li><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
a
singleton
value
of
type
</ins><code><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
or
a
derived
from
</ins><code><ins class="diff-new">
xs:boolean
</ins></code>,<code><ins class="diff-new">
fn:boolean
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
$arg
</ins></code>.</p></li><li><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
a
singleton
value
of
type
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
or
a
type
derived
from
</ins><code><ins class="diff-new">
xs:string
</ins></code>,<code><ins class="diff-new">
xs:anyURI
</ins></code><ins class="diff-new">
or
a
type
derived
from
</ins><code><ins class="diff-new">
xs:anyURI
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
xs:untypedAtomic
</ins></code>,<code><ins class="diff-new">
fn:boolean
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
false
</ins></code><ins class="diff-new">
if
the
operand
value
has
zero
length;
otherwise
it
returns
</ins><code><ins class="diff-new">
true
</ins></code>.</p></li><li><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
a
singleton
value
of
any
numeric
type
or
a
type
derived
from
a
numeric
type,
</ins><code><ins class="diff-new">
fn:boolean
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
false
</ins></code><ins class="diff-new">
if
the
operand
value
is
</ins><code><ins class="diff-new">
NaN
</ins></code><ins class="diff-new">
or
is
numerically
equal
to
zero;
otherwise
it
returns
</ins><code><ins class="diff-new">
true
</ins></code>.</p></li><li><p><ins class="diff-new">
In
all
other
cases,
</ins><code><ins class="diff-new">
fn:boolean
</ins></code><ins class="diff-new">
raises
a
type
error
[
</ins><a href="#ERRFORG0006" title="err:FORG0006"><ins class="diff-new">
err:FORG0006
</ins></a><ins class="diff-new">
].
</ins></p></li></ul><p><ins class="diff-new">
The
static
semantics
of
this
function
are
described
in
</ins><a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_boolean"><ins class="diff-new">
Section
7.2.4
The
fn:boolean
function
</ins></a><sup><small><ins class="diff-new">
FS
</ins></small></sup>.</p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
The
result
of
this
function
is
not
necessarily
the
same
as
</ins><code><ins class="diff-new">
$arg
cast
as
xs:boolean
</ins></code>.<ins class="diff-new">
For
example,
</ins><code><ins class="diff-new">
fn:boolean("false")
</ins></code><ins class="diff-new">
returns
the
value
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
whereas
</ins><code><ins class="diff-new">
"false"cast
as
xs:boolean
</ins></code><ins class="diff-new">
(which
can
also
be
written
</ins><code><ins class="diff-new">
xs:boolean("false")
</ins></code><ins class="diff-new">
)
returns
</ins><code><ins class="diff-new">
false
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><p><ins class="diff-new">
let
</ins><code><ins class="diff-new">
$abc
</ins></code><ins class="diff-new">
:=
</ins><code><ins class="diff-new">
("a",
"b",
"")
</ins></code></p><p><code><ins class="diff-new">
fn:boolean($abc)
</ins></code><ins class="diff-new">
raises
a
type
error
[
</ins><a href= "#ERRFORG0006" title="err:FORG0006"><ins class="diff-new">
err:FORG0006
</ins></a><ins class="diff-new">
].
</ins></p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:boolean($abc[1])
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
true()
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:boolean($abc[0])
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
false()
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:boolean($abc[3])
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
false()
</ins></code>.</p></dd></dl></div><div class="div3"><h4>
<a name="func-not" id="func-not">
</a>
<del class="diff-old">9.3.1
</del>
<ins class="diff-chg">7.3.2
</ins>
fn:not
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
the
effective
boolean
value
of
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
</ins><code><ins class="diff-new">
false
</ins></code>,<ins class="diff-new">
or
</ins><code><ins class="diff-new">
false
</ins></code><ins class="diff-new">
if
it
is
</ins><code><ins class="diff-new">
true
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:not
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
<ins class="diff-chg">The
value
of
</ins>
<code>
$arg
</code>
is
first
reduced
to
an
effective
boolean
value
by
applying
the
<a href= "#func-boolean">
<code>
fn:boolean()
</code>
</a>
function.
<del class="diff-old">Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
<code>
true
</code>
if
the
effective
boolean
value
is
<code>
false
</code>,
<del class="diff-old">and
</del>
<ins class="diff-chg">or
</ins>
<code>
false
</code>
if
the
effective
boolean
value
is
<code>
true
</code>.
</p>
<del class="diff-old">9.3.1.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:not(fn:true())
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:not("false")
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="div1">
<h2>
<a name="durations" id="durations">
</a>
<del class="diff-old">10
</del>
<ins class="diff-chg">8
</ins>
Functions
and
Operators
on
<del class="diff-old">Durations,
Dates
and
Times
</del>
<ins class="diff-chg">Durations
</ins>
</h2>
<p>
<del class="diff-old">This
section
discusses
operations
on
the
[XML
Schema
Part
2:
Datatypes
Second
Edition]
date
and
time
types.
It
also
discusses
operations
on
two
subtypes
of
xs:duration
that
are
defined
in
Section
2.6
Types
DM
.
See
10.3
Two
Totally
Ordered
Subtypes
of
Duration
.
See
[Working
With
Timezones]
for
a
disquisition
on
working
with
date
and
time
values
with
and
without
timezones.
10.1
Duration,
Date
and
Time
Types
The
operators
described
in
this
section
</del>
<ins class="diff-chg">Operators
</ins>
are
defined
on
the
following
<del class="diff-old">date
and
time
types:
xs:dateTime
xs:date
xs:time
xs:gYearMonth
xs:gYear
xs:gMonthDay
xs:gMonth
xs:gDay
Note
that
only
equality
is
defined
on
xs:gYearMonth
,
xs:gYear
,
xs:gMonthDay
,
xs:gMonth
and
xs:gDay
values.
In
addition,
operators
are
defined
on:
</del>
<ins class="diff-chg">type:
</ins>
</p>
<ul>
<li>
<p>
xs:duration
</p>
</li>
</ul>
<p>
and
on
the
<ins class="diff-chg">two
defined
subtypes
(see
</ins><a href= "#duration-subtypes">
<b>
<del class="diff-old">10.3
</del>
<ins class="diff-chg">8.2
</ins>
Two
Totally
Ordered
Subtypes
of
Duration
</b>
<del class="diff-old">:
</del>
</a>
<ins class="diff-chg">):
</ins>
</p>
<ul>
<li>
<p>
xs:yearMonthDuration
</p>
</li>
<li>
<p>
xs:dayTimeDuration
</p>
</li>
</ul>
<p>
<del class="diff-old">Note
that
no
</del>
<ins class="diff-chg">No
</ins>
ordering
relation
is
defined
on
<code>
xs:duration
</code>
<del class="diff-old">values.Two
</del>
<ins class="diff-chg">values.
Two
</ins>
<code>
xs:duration
</code>
values
may
however
be
compared
for
equality.
</p>
<p>
Operations
on
durations
(including
equality
comparison,
casting
to
string,
and
extraction
of
components)
all
treat
the
duration
as
normalized.
This
means
that
the
seconds
and
minutes
components
will
always
be
less
than
60,
the
hours
component
less
than
24,
and
the
months
component
less
than
12.
Thus,
for
example,
a
duration
of
120
seconds
always
gives
the
same
result
as
a
duration
of
two
minutes.
</p>
<div class="note">
<p class="prefix">
<b>
<ins class="diff-chg">Note:
</ins></b>
<del class="diff-old">10.1.1
Limits
and
Precision
</del>
</p>
<p>
<del class="diff-old">For
a
number
of
the
above
datatypes
[XML
Schema
Part
2:
Datatypes
Second
Edition]
extends
</del>
<ins class="diff-chg">This
means
that
in
practice,
</ins>
the
<del class="diff-old">basic
[ISO
8601]
lexical
representations,
such
as
YYYY-MM-DDThh:mm:ss.s
for
dateTime,
by
allowing
a
preceding
minus
sign,
more
than
four
digits
</del>
<ins class="diff-chg">information
content
of
an
</ins><code><ins class="diff-chg">
xs:duration
</ins></code><ins class="diff-chg">
value
can
be
reduced
</ins>
to
<del class="diff-old">represent
the
year
field
—
no
maximum
is
specified
—
</del>
<ins class="diff-chg">an
</ins><code><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
number
of
months,
</ins>
and
an
<del class="diff-old">unlimited
</del>
<code>
<ins class="diff-chg">xs:decimal
</ins></code>
number
of
<del class="diff-old">digits
for
fractional
</del>
seconds.
<del class="diff-old">Leap
seconds
are
not
supported.
All
minimally
conforming
processors
·
must
·
support
positive
year
values
with
a
minimum
</del>
<ins class="diff-chg">For
the
two
defined
subtypes
this
is
further
simplified
so
that
one
</ins>
of
<del class="diff-old">4
digits
(i.e.,
YYYY)
and
a
minimum
fractional
second
precision
</del>
<ins class="diff-chg">these
two
components
is
fixed
at
zero.
Operations
such
as
comparison
</ins>
of
<del class="diff-old">1
millisecond
or
three
digits
(i.e.,
s.sss).
However,
conforming
processors
·
may
·
set
larger
·
implementation-defined
·
limits
</del>
<ins class="diff-chg">durations
and
arithmetic
</ins>
on
<del class="diff-old">the
maximum
number
of
digits
they
support
</del>
<ins class="diff-chg">durations
can
be
expressed
</ins>
in
<ins class="diff-new">terms
of
numeric
operations
applied
to
</ins>
these
two
<del class="diff-old">situations.
Processors
</del>
<ins class="diff-chg">components.
</ins></p></div><div class="div2"><h3>
<del class="diff-old">·
may
·
</del>
<a name="duration-limits" id="duration-limits">
</a>
<del class="diff-old">also
choose
to
support
the
year
0000
</del>
<ins class="diff-chg">8.1
Limits
</ins>
and
<del class="diff-old">years
with
negative
values.
The
results
of
operations
on
dates
that
cross
the
year
0000
are
</del>
<ins class="diff-chg">Precision
</ins></h3><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%">
<del class="diff-old">·
implementation-defined
·
</del>
<b>
<ins class="diff-chg">Editorial
note
</ins></b>
<del class="diff-old">.
</del>
</td>
<td align="right" valign="top" width="50%">
<ins class="diff-chg">&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-chg">
This
section
needs
revision
-
it
comes
from
the
old
text
describing
both
duration
and
date/time
operations,
but
it's
not
clear
exactly
what
it
should
say
for
durations.
</ins></td></tr></table>
<p>
A
processor
that
limits
the
number
of
digits
in
date
and
time
datatype
representations
may
encounter
overflow
and
underflow
conditions
when
it
tries
to
execute
the
functions
in
<a href= "#dateTime-arithmetic">
<b>
<del class="diff-old">10.8
</del>
<ins class="diff-chg">9.7
</ins>
Arithmetic
Operators
on
Durations,
Dates
and
Times
</b>
</a>.
In
these
situations,
the
processor
<a title="must" class="termref" href="#must">
<span class= "arrow">
·
</span>
must
<span class="arrow">
·
</span>
</a>
return
P0M
or
PT0S
in
case
of
duration
underflow
and
00:00:00
in
case
of
time
underflow.
It
<a title="must" class="termref" href= "#must">
<span class="arrow">
·
</span>
must
<span class= "arrow">
·
</span>
</a>
raise
an
error
[
<a href="#ERRFODT0001" title= "err:FODT0001">
err:FODT0001
</a>
]
in
case
of
overflow.
</p>
<p>
The
value
spaces
of
the
two
totally
ordered
subtypes
of
<code>
xs:duration
</code>
described
in
<a href= "#duration-subtypes">
<b>
<del class="diff-old">10.3
</del>
<ins class="diff-chg">8.2
</ins>
Two
Totally
Ordered
Subtypes
of
Duration
</b>
</a>
are
<code>
xs:integer
</code>
months
for
<code>
xs:yearMonthDuration
</code>
and
<code>
xs:decimal
</code>
seconds
for
<code>
xs:dayTimeDuration
</code>.
If
a
processor
limits
the
number
of
digits
allowed
in
the
representation
of
<code>
xs:integer
</code>
and
<code>
xs:decimal
</code>
then
overflow
and
underflow
situations
can
arise
when
it
tries
to
execute
the
functions
in
<a href="#duration-arithmetic">
<b>
<del class="diff-old">10.6
</del>
<ins class="diff-chg">8.5
</ins>
Arithmetic
Operators
on
Durations
</b>
</a>.
In
these
situations
the
processor
<a title="must" class="termref" href="#must">
<span class= "arrow">
·
</span>
must
<span class="arrow">
·
</span>
</a>
return
zero
in
case
of
numeric
underflow
and
P0M
or
PT0S
in
case
of
duration
underflow.
It
<a title="must" class="termref" href= "#must">
<span class="arrow">
·
</span>
must
<span class= "arrow">
·
</span>
</a>
raise
an
error
[
<a href="#ERRFODT0002" title= "err:FODT0002">
err:FODT0002
</a>
]
in
case
of
overflow.
</p>
</div>
<del class="diff-old">10.2
Date/time
datatype
values
As
defined
in
Section
3.3.2
Dates
and
Times
DM
,
xs:dateTime
,
xs:date
,
xs:time
,
xs:gYearMonth
,
xs:gYear
,
xs:gMonthDay
,
xs:gMonth
,
xs:gDay
values,
referred
to
collectively
as
date/time
values,
are
represented
as
seven
components
or
properties:
year
,
month
,
day
,
hour
,
minute
,
second
and
timezone
.
The
value
of
the
first
five
components
are
xs:integer
s.
The
value
of
the
second
component
is
an
xs:decimal
and
the
value
of
the
timezone
component
is
an
xs:dayTimeDuration
.
For
all
the
date/time
datatypes,
the
timezone
property
is
optional
and
may
or
may
not
be
present.
Depending
on
the
datatype,
some
of
the
remaining
six
properties
must
be
present
and
some
must
be
absent.
Absent,
or
missing,
properties
are
represented
by
the
empty
sequence.
This
value
is
referred
to
as
the
local
value
in
that
the
value
is
in
the
given
timezone.
Before
comparing
or
subtracting
xs:dateTime
values,
this
local
value
·
must
·
be
translated
or
normalized
to
UTC.
For
xs:time
,
"00:00:00"
and
"24:00:00"
are
alternate
lexical
forms
for
the
same
value,
whose
canonical
representation
is
"00:00:00"
.
For
xs:dateTime
,
a
time
component
"24:00:00"
translates
to
"00:00:00"
of
the
following
day.
10.2.1
Examples
An
xs:dateTime
with
lexical
representation
1999-05-31T05:00:00
is
represented
in
the
datamodel
by
{1999,
5,
31,
5,
0,
0.0,
()}
.
An
xs:dateTime
with
lexical
representation
1999-05-31T13:20:00-05:00
is
represented
by
{1999,
5,
31,
13,
20,
0.0,
-PT5H}
.
An
xs:dateTime
with
lexical
representation
1999-12-31T24:00:00
is
represented
by
{2000,
1,
1,
0,
0,
0.0,
()}
.
An
xs:date
with
lexical
representation
2005-02-28+8:00
is
represented
by
{2005,
2,
28,
(),
(),
(),
PT8H}
.
An
xs:time
with
lexical
representation
24:00:00
is
represented
by
{(),
(),
(),
0,
0,
0,
()}
.
</del>
<div class="div2">
<h3>
<a name="duration-subtypes" id="duration-subtypes">
</a>
<del class="diff-old">10.3
</del>
<ins class="diff-chg">8.2
</ins>
Two
Totally
Ordered
Subtypes
of
Duration
</h3>
<p>
Two
totally
ordered
subtypes
of
<code>
xs:duration
</code>
are
defined
in
<a href= "http://www.w3.org/TR/xpath-datamodel/#types">
Section
2.6
Types
</a>
<sup>
<small>
DM
</small>
</sup>
specification
using
the
mechanisms
described
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
for
defining
user-defined
types.
Additional
details
about
these
types
is
given
below.
</p>
<div class="note">
<p class="prefix">
<b>
<ins class="diff-new">Note:
</ins></b></p><p><ins class="diff-new">
These
types
were
not
defined
in
XSD
1.0,
but
they
are
defined
in
the
current
draft
of
XSD
1.1.
The
description
given
here
is
believed
to
be
equivalent
to
that
in
XSD
1.1,
and
will
become
non-normative
when
XSD
1.1
reaches
Recommendation
status.
</ins></p></div>
<div class="div3">
<h4>
<a name="dt-yearMonthDuration" id= "dt-yearMonthDuration">
</a>
<del class="diff-old">10.3.1
</del>
<ins class="diff-chg">8.2.1
</ins>
xs:yearMonthDuration
</h4>
<p>
[Definition]
<code>
xs:yearMonthDuration
</code>
is
derived
from
<code>
xs:duration
</code>
by
restricting
its
lexical
representation
to
contain
only
the
year
and
month
components.
The
value
space
of
<code>
xs:yearMonthDuration
</code>
is
the
set
of
<code>
xs:integer
</code>
month
values.
The
year
and
month
components
of
<code>
xs:yearMonthDuration
</code>
correspond
to
the
Gregorian
year
and
month
components
defined
in
section
5.5.3.2
of
<a href= "#ISO8601">
[ISO
8601]
</a>,
respectively.
</p>
<div class="div4">
<h5>
<a name="lexical-yearMonthDuration" id= "lexical-yearMonthDuration">
</a>
<del class="diff-old">10.3.1.1
</del>
<ins class="diff-chg">8.2.1.1
</ins>
Lexical
representation
</h5>
<p>
The
lexical
representation
for
<code>
xs:yearMonthDuration
</code>
is
the
<a href="#ISO8601">
[ISO
8601]
</a>
reduced
format
PnYnM,
where
nY
represents
the
number
of
years
and
nM
the
number
of
months.
The
values
of
the
years
and
months
components
are
not
restricted
but
allow
an
arbitrary
unsigned
<code>
xs:integer
</code>.
</p>
<p>
An
optional
preceding
minus
sign
('-')
is
allowed
to
indicate
a
negative
duration.
If
the
sign
is
omitted
a
positive
duration
is
indicated.
To
indicate
a
<code>
xs:yearMonthDuration
</code>
of
1
year,
2
months,
one
would
write:
P1Y2M.
One
could
also
indicate
a
<code>
xs:yearMonthDuration
</code>
of
minus
13
months
as:
-P13M.
</p>
<p>
Reduced
precision
and
truncated
representations
of
this
format
are
allowed
provided
they
conform
to
the
following:
</p>
<p>
If
the
number
of
years
or
months
in
any
expression
equals
zero
(0),
the
number
and
its
corresponding
designator
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
be
omitted.
However,
at
least
one
number
and
its
designator
<a title="must" class="termref" href="#must">
<span class= "arrow">
·
</span>
must
<span class="arrow">
·
</span>
</a>
be
present.
For
example,
P1347Y
and
P1347M
are
allowed;
P-1347M
is
not
allowed,
although
-P1347M
is
allowed.
P1Y2MT
is
not
allowed.
Also,
P24YM
is
not
allowed,
nor
is
PY43M
since
Y
must
have
at
least
one
preceding
digit
and
M
must
have
one
preceding
digit.
</p>
</div>
<div class="div4">
<h5>
<a name="calculating-value-yearMonthDuration" id= "calculating-value-yearMonthDuration">
</a>
<del class="diff-old">10.3.1.2
</del>
<ins class="diff-chg">8.2.1.2
</ins>
Calculating
the
value
from
the
lexical
representation
</h5>
<p>
The
value
of
a
<code>
xs:yearMonthDuration
</code>
lexical
form
is
obtained
by
multiplying
the
value
of
the
years
component
by
12
and
adding
the
value
of
the
months
component.
The
value
is
positive
or
negative
depending
on
the
preceding
sign.
</p>
</div>
<div class="div4">
<h5>
<a name="canonical-yearMonthDuration" id= "canonical-yearMonthDuration">
</a>
<del class="diff-old">10.3.1.3
</del>
<ins class="diff-chg">8.2.1.3
</ins>
Canonical
representation
</h5>
<p>
The
canonical
representation
of
<code>
xs:yearMonthDuration
</code>
restricts
the
value
of
the
months
component
to
<code>
xs:integer
</code>
values
between
0
and
11,
both
inclusive.
To
convert
from
a
non-canonical
representation
to
the
canonical
representation,
the
lexical
representation
is
first
converted
to
a
value
in
<code>
xs:integer
</code>
months
as
defined
above.
This
value
is
then
divided
by
12
to
obtain
the
value
of
the
years
component
of
the
canonical
representation.
The
remaining
number
of
months
is
the
value
of
the
months
component
of
the
canonical
representation.
For
negative
durations,
the
canonical
form
is
calculated
using
the
absolute
value
of
the
duration
and
a
negative
sign
is
prepended
to
it.
If
a
component
has
the
value
zero
(0),
then
the
number
and
the
designator
for
that
component
<a title="must" class="termref" href="#must">
<span class= "arrow">
·
</span>
must
<span class="arrow">
·
</span>
</a>
be
omitted.
However,
if
the
value
is
zero
(0)
months,
the
canonical
form
is
"P0M".
</p>
</div>
<div class="div4">
<h5>
<a name="order-yearMonthDuration" id= "order-yearMonthDuration">
</a>
<del class="diff-old">10.3.1.4
</del>
<ins class="diff-chg">8.2.1.4
</ins>
Order
relation
on
xs:yearMonthDuration
</h5>
<p>
Let
the
function
that
calculates
the
value
of
an
<code>
xs:yearMonthDuration
</code>
in
the
manner
described
above
be
called
V(d).
Then
for
two
<code>
xs:yearMonthDuration
</code>
values
x
and
y,
x
&gt;
y
if
and
only
if
V(x)
&gt;
V(y).
The
order
relation
on
<code>
yearMonthDuration
</code>
is
a
total
order.
</p>
</div>
</div>
<div class="div3">
<h4>
<a name="dt-dayTimeDuration" id="dt-dayTimeDuration">
</a>
<del class="diff-old">10.3.2
</del>
<ins class="diff-chg">8.2.2
</ins>
xs:dayTimeDuration
</h4>
<p>
[Definition]
<code>
xs:dayTimeDuration
</code>
is
derived
from
<code>
xs:duration
</code>
by
restricting
its
lexical
representation
to
contain
only
the
days,
hours,
minutes
and
seconds
components.
The
value
space
of
<code>
xs:dayTimeDuration
</code>
is
the
set
of
fractional
second
values.
The
components
of
<code>
xs:dayTimeDuration
</code>
correspond
to
the
day,
hour,
minute
and
second
components
defined
in
Section
5.5.3.2
of
<a href= "#ISO8601">
[ISO
8601]
</a>,
respectively.
</p>
<div class="div4">
<h5>
<a name="lexical-dayTimeDuration" id= "lexical-dayTimeDuration">
</a>
<del class="diff-old">10.3.2.1
</del>
<ins class="diff-chg">8.2.2.1
</ins>
Lexical
representation
</h5>
<p>
The
lexical
representation
for
<code>
xs:dayTimeDuration
</code>
is
the
<a href="#ISO8601">
[ISO
8601]
</a>
truncated
format
PnDTnHnMnS,
where
nD
represents
the
number
of
days,
T
is
the
date/time
separator,
nH
the
number
of
hours,
nM
the
number
of
minutes
and
nS
the
number
of
seconds.
</p>
<p>
The
values
of
the
days,
hours
and
minutes
components
are
not
restricted,
but
allow
an
arbitrary
unsigned
<code>
xs:integer
</code>.
Similarly,
the
value
of
the
seconds
component
allows
an
arbitrary
unsigned
<code>
xs:decimal
</code>.
An
optional
minus
sign
('-')
is
allowed
to
precede
the
'P',
indicating
a
negative
duration.
If
the
sign
is
omitted,
the
duration
is
positive.
See
also
<a href="#ISO8601">
[ISO
8601]
</a>
Date
and
Time
Formats.
</p>
<p>
For
example,
to
indicate
a
duration
of
3
days,
10
hours
and
30
minutes,
one
would
write:
P3DT10H30M.
One
could
also
indicate
a
duration
of
minus
120
days
as:
-P120D.
Reduced
precision
and
truncated
representations
of
this
format
are
allowed,
provided
they
conform
to
the
following:
</p>
<ul>
<li>
<p>
If
the
number
of
days,
hours,
minutes,
or
seconds
in
any
expression
equals
zero
(0),
the
number
and
its
corresponding
designator
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
be
omitted.
However,
at
least
one
number
and
its
designator
<a title="must" class="termref" href="#must">
<span class= "arrow">
·
</span>
must
<span class="arrow">
·
</span>
</a>
be
present.
</p>
</li>
<li>
<p>
The
seconds
part
<a title="may" class="termref" href= "#may">
<span class="arrow">
·
</span>
may
<span class= "arrow">
·
</span>
</a>
have
a
decimal
fraction.
</p>
</li>
<li>
<p>
The
designator
'T'
<a title="must" class="termref" href= "#must">
<span class="arrow">
·
</span>
must
<span class= "arrow">
·
</span>
</a>
be
absent
if
and
only
if
all
of
the
time
items
are
absent.
The
designator
'P'
<a title="must" class="termref" href="#must">
<span class="arrow">
·
</span>
must
<span class= "arrow">
·
</span>
</a>
always
be
present.
</p>
</li>
</ul>
<p>
For
example,
P13D,
PT47H,
P3DT2H,
-PT35.89S
and
P4DT251M
are
all
allowed.
P-134D
is
not
allowed
(invalid
location
of
minus
sign),
although
-P134D
is
allowed.
</p>
</div>
<div class="div4">
<h5>
<a name="calculating-value-dayTimeDuration" id= "calculating-value-dayTimeDuration">
</a>
<del class="diff-old">10.3.2.2
</del>
<ins class="diff-chg">8.2.2.2
</ins>
Calculating
the
value
of
a
xs:dayTimeDuration
from
the
lexical
representation
</h5>
<p>
The
value
of
a
<code>
xs:dayTimeDuration
</code>
lexical
form
in
fractional
seconds
is
obtained
by
converting
the
days,
hours,
minutes
and
seconds
value
to
fractional
seconds
using
the
conversion
rules:
24
hours
=
1
day,
60
minutes
=
1
hour
and
60
seconds
=
1
minute.
</p>
</div>
<div class="div4">
<h5>
<a name="canonical-dayTimeDuration" id= "canonical-dayTimeDuration">
</a>
<del class="diff-old">10.3.2.3
</del>
<ins class="diff-chg">8.2.2.3
</ins>
Canonical
representation
</h5>
<p>
The
canonical
representation
of
<code>
xs:dayTimeDuration
</code>
restricts
the
value
of
the
hours
component
to
<code>
xs:integer
</code>
values
between
0
and
23,
both
inclusive;
the
value
of
the
minutes
component
to
<code>
xs:integer
</code>
values
between
0
and
59;
both
inclusive;
and
the
value
of
the
seconds
component
to
<code>
xs:decimal
</code>
valued
from
0.0
to
59.999...
(see
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>,
Appendix
D).
</p>
<p>
To
convert
from
a
non-canonical
representation
to
the
canonical
representation,
the
value
of
the
lexical
form
in
fractional
seconds
is
first
calculated
in
the
manner
described
above.
The
value
of
the
days
component
in
the
canonical
form
is
then
calculated
by
dividing
the
value
by
86,400
(24*60*60).
The
remainder
is
in
fractional
seconds.
The
value
of
the
hours
component
in
the
canonical
form
is
calculated
by
dividing
this
remainder
by
3,600
(60*60).
The
remainder
is
again
in
fractional
seconds.
The
value
of
the
minutes
component
in
the
canonical
form
is
calculated
by
dividing
this
remainder
by
60.
The
remainder
in
fractional
seconds
is
the
value
of
the
seconds
component
in
the
canonical
form.
For
negative
durations,
the
canonical
form
is
calculated
using
the
absolute
value
of
the
duration
and
a
negative
sign
is
prepended
to
it.
If
a
component
has
the
value
zero
(0)
then
the
number
and
the
designator
for
that
component
must
be
omitted.
However,
if
all
the
components
of
the
lexical
form
are
zero
(0),
the
canonical
form
is
"PT0S".
</p>
</div>
<div class="div4">
<h5>
<a name="order-dayTimeDuration" id= "order-dayTimeDuration">
</a>
<del class="diff-old">10.3.2.4
</del>
<ins class="diff-chg">8.2.2.4
</ins>
Order
relation
on
xs:dayTimeDuration
</h5>
<p>
Let
the
function
that
calculates
the
value
of
a
<code>
xs:dayTimeDuration
</code>
in
the
manner
described
above
be
called
<em>
V(d)
</em>.
Then
for
two
<code>
xs:dayTimeDuration
</code>
values
<em>
x
</em>
and
<em>
y,
x
&gt;
y
</em>
if
and
only
if
<em>
V(x)
&gt;
V(y)
</em>.
The
order
relation
on
<code>
xs:dayTimeDuration
</code>
is
a
total
order.
</p>
</div>
</div>
</div>
<div class="div2">
<h3>
<a name="comp.duration" id="comp.duration">
</a>
<del class="diff-old">10.4
</del>
<ins class="diff-chg">8.3
</ins>
Comparison
Operators
on
<del class="diff-old">Duration,
Date
and
Time
Values
</del>
<ins class="diff-chg">Durations
</ins>
</h3>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
<del class="diff-old">Operator
</del>
<ins class="diff-chg">Function
</ins>
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-yearMonthDuration-less-than">
<code>
op:yearMonthDuration-less-than
</code>
</a>
</td>
<td>
<del class="diff-old">Less-than
comparison
on
</del>
<ins class="diff-chg">Returns
true
if
</ins>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">is
a
shorter
duration
than
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-yearMonthDuration-greater-than">
<code>
op:yearMonthDuration-greater-than
</code>
</a>
</td>
<td>
<del class="diff-old">Greater-than
comparison
on
</del>
<ins class="diff-chg">Returns
true
if
</ins>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">is
a
longer
duration
than
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-dayTimeDuration-less-than">
<code>
op:dayTimeDuration-less-than
</code>
</a>
</td>
<td>
<del class="diff-old">Less-than
comparison
on
</del>
<ins class="diff-chg">Returns
true
if
</ins>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">is
a
shorter
duration
than
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-dayTimeDuration-greater-than">
<code>
op:dayTimeDuration-greater-than
</code>
</a>
</td>
<td>
<del class="diff-old">Greater-than
comparison
on
</del>
<ins class="diff-chg">Returns
true
if
</ins>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">is
a
longer
duration
than
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-duration-equal">
<code>
op:duration-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
</del>
<ins class="diff-chg">Returns
true
if
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
are
durations
of
the
same
length.
</ins></td></tr></tbody></table><p><ins class="diff-chg">
The
following
</ins>
comparison
<ins class="diff-new">operators
are
defined
on
the
</ins><a href= "#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a><ins class="diff-new">
duration
datatypes.
Each
operator
takes
two
operands
of
the
same
type
and
returns
an
</ins><code><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
result.
As
discussed
in
</ins><a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a>,<ins class="diff-new">
the
order
relation
on
</ins><code><ins class="diff-new">
xs:duration
</ins></code><ins class="diff-new">
is
not
a
total
order
but,
rather,
a
partial
order.
For
this
reason,
only
equality
is
defined
</ins>
on
<code>
xs:duration
</code>.
<ins class="diff-new">A
full
complement
of
comparison
and
arithmetic
functions
are
defined
on
the
two
subtypes
of
duration
described
in
</ins><a href= "#duration-subtypes"><b><ins class="diff-new">
8.2
Two
Totally
Ordered
Subtypes
of
Duration
</ins></b></a><ins class="diff-new">
which
do
have
a
total
order.
</ins></p><div class="div3"><h4><a name="func-yearMonthDuration-less-than" id= "func-yearMonthDuration-less-than"></a><ins class="diff-new">
8.3.1
op:yearMonthDuration-less-than
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
a
shorter
duration
than
</ins><code><ins class="diff-new">
$arg2
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"lt"
operator
on
</ins><code><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ge"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-new">
op:yearMonthDuration-less-than
</ins></code><ins class="diff-new">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-new">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:yearMonthDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:boolean
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
the
number
of
months
in
the
value
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
numerically
less
than
the
number
of
months
in
the
value
of
</ins><code><ins class="diff-new">
$arg2
</ins></code>,<ins class="diff-new">
the
function
returns
true.
</ins></p><p><ins class="diff-new">
Otherwise,
the
function
returns
false.
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
Either
or
both
durations
may
be
negative
</ins></p></dd></dl></div><div class="div3"><h4><a name="func-yearMonthDuration-greater-than" id= "func-yearMonthDuration-greater-than"></a><ins class="diff-new">
8.3.2
op:yearMonthDuration-greater-than
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
a
longer
duration
than
</ins><code><ins class="diff-new">
$arg2
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"gt"
operator
on
</ins><code><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"le"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-new">
op:yearMonthDuration-greater-than
</ins></code><ins class="diff-new">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-new">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:yearMonthDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:boolean
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
The
function
call
</ins><code><ins class="diff-new">
op:yearMonthDuration-greater-than($A,
$B)
</ins></code><ins class="diff-new">
is
defined
to
return
the
same
result
as
</ins><a href= "#func-yearMonthDuration-less-than"><code><ins class="diff-new">
op:yearMonthDuration-less-than($B,
$A)
</ins></code></a></p></dd></dl></div><div class="div3"><h4><a name="func-dayTimeDuration-less-than" id= "func-dayTimeDuration-less-than"></a><ins class="diff-new">
8.3.3
op:dayTimeDuration-less-than
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
a
shorter
duration
than
</ins><code><ins class="diff-new">
$arg2
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"lt"
operator
on
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ge"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-new">
op:dayTimeDuration-less-than
</ins>
</code>
<ins class="diff-new">(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-new">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:dayTimeDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:boolean
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
the
number
of
seconds
in
the
value
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
numerically
less
than
the
number
of
seconds
in
the
value
of
</ins><code><ins class="diff-new">
$arg2
</ins></code>,<ins class="diff-new">
the
function
returns
true.
</ins></p><p><ins class="diff-new">
Otherwise,
the
function
returns
false.
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
Either
or
both
durations
may
be
negative
</ins></p></dd></dl></div><div class="div3"><h4><a name="func-dayTimeDuration-greater-than" id= "func-dayTimeDuration-greater-than"></a><ins class="diff-new">
8.3.4
op:dayTimeDuration-greater-than
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
a
longer
duration
than
</ins><code><ins class="diff-new">
$arg2
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"gt"
operator
on
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"le"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-new">
op:dayTimeDuration-greater-than
</ins></code><ins class="diff-new">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-new">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:dayTimeDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:boolean
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
The
function
call
</ins><code><ins class="diff-new">
op:dayTimeDuration-greater-than($A,
$B)
</ins></code><ins class="diff-new">
is
defined
to
return
the
same
result
as
</ins><a href= "#func-dayTimeDuration-less-than"><code><ins class="diff-new">
op:dayTimeDuration-less-than($B,
$A)
</ins></code></a></p></dd></dl></div><div class="div3"><h4><a name="func-duration-equal" id= "func-duration-equal"></a><ins class="diff-new">
8.3.5
op:duration-equal
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
are
durations
of
the
same
length.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
operators
on
</ins><code><ins class="diff-new">
xs:duration
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ne"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
op:duration-equal
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg1
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:duration
</ins></code>,<code class="arg"><ins class="diff-new">
$arg2
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:duration
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:boolean
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
the
</ins><code><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
components
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
are
equal
and
the
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
components
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
are
equal,
the
function
returns
</ins><code><ins class="diff-new">
true
</ins></code>.</p><p><ins class="diff-new">
Otherwise,
the
function
returns
false.
</ins></p><p><ins class="diff-new">
The
semantics
of
this
function
are:
</ins></p><div class="exampleInner"><pre><ins class="diff-new">
xs:yearMonthDuration($arg1) div xs:yearMonthDuration('P1M')  eq
xs:yearMonthDuration($arg2) div xs:yearMonthDuration('P1M')
    and
xs:dayTimeDuration($arg1) div xs:dayTimeDuration('PT1S')  eq
xs:dayTimeDuration($arg2) div xs:dayTimeDuration('PT1S')
</ins></pre></div><p><ins class="diff-new">
that
is,
the
function
returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
the
months
and
seconds
</ins>
values
<ins class="diff-new">of
the
two
durations
are
equal.
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
Note
that
this
function,
like
any
other,
may
be
applied
to
arguments
that
are
derived
from
the
types
given
in
the
function
signature,
including
the
two
subtypes
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:yearMonthDuration
</ins></code>.<ins class="diff-new">
With
the
exception
of
the
zero-length
duration,
no
instance
of
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
can
ever
be
equal
to
an
instance
of
</ins><code><ins class="diff-new">
xs:yearMonthDuration
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
op:duration-equal(xs:duration("P1Y"),
xs:duration("P12M"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
true()
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
op:duration-equal(xs:duration("PT24H"),
xs:duration("P1D"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
true()
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
op:duration-equal(xs:duration("P1Y"),
xs:duration("P365D"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
false()
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
op:duration-equal(xs:yearMonthDuration("P0Y"),
xs:dayTimeDuration("P0D"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
true()
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
op:duration-equal(xs:yearMonthDuration("P1Y"),
xs:dayTimeDuration("P365D"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
false()
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
op:duration-equal(xs:yearMonthDuration("P2Y"),
xs:yearMonthDuration("P24M"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
true()
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
op:duration-equal(xs:dayTimeDuration("P10D"),
xs:dayTimeDuration("PT240H"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
true()
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
op:duration-equal(xs:duration("P2Y0M0DT0H0M0S"),
xs:yearMonthDuration("P24M"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
true()
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
op:duration-equal(xs:duration("P0Y0M10D"),
xs:dayTimeDuration("PT240H"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
true()
</ins></code>.</p></dd></dl></div></div><div class="div2"><h3><a name="component-extraction-durations" id= "component-extraction-durations"></a><ins class="diff-new">
8.4
Component
Extraction
Functions
on
Durations
</ins></h3><p><ins class="diff-new">
The
duration
datatype
may
be
considered
to
be
a
composite
datatypes
in
that
it
contains
distinct
properties
or
components.
The
extraction
functions
specified
below
extract
a
single
component
from
a
duration
value.
For
</ins><code><ins class="diff-new">
xs:duration
</ins></code><ins class="diff-new">
and
its
subtypes,
including
the
two
subtypes
</ins><code><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code>,<ins class="diff-new">
the
components
are
normalized:
this
means
that
the
seconds
and
minutes
components
will
always
be
less
than
60,
the
hours
component
less
than
24,
and
the
months
component
less
than
12.
</ins></p><table summary="Function/operator summary" border="1"><thead><tr><th><ins class="diff-new">
Function
</ins></th><th><ins class="diff-new">
Meaning
</ins></th></tr></thead><tbody><tr><td><a href= "#func-years-from-duration"><code><ins class="diff-new">
fn:years-from-duration
</ins></code></a></td><td><ins class="diff-new">
Returns
the
number
of
years
in
a
duration.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-months-from-duration">
<code>
<del class="diff-old">op:dateTime-equal
</del>
<ins class="diff-chg">fn:months-from-duration
</ins>
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
</del>
<ins class="diff-chg">Returns
the
number
of
months
in
a
duration.
</ins></td></tr><tr><td><a href= "#func-days-from-duration"><code><ins class="diff-chg">
fn:days-from-duration
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
number
of
days
in
a
duration.
</ins></td></tr><tr><td><a href= "#func-hours-from-duration"><code><ins class="diff-chg">
fn:hours-from-duration
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
number
of
hours
in
a
duration.
</ins></td></tr><tr><td><a href= "#func-minutes-from-duration"><code><ins class="diff-chg">
fn:minutes-from-duration
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
number
of
minutes
in
a
duration.
</ins></td></tr><tr><td><a href= "#func-seconds-from-duration"><code><ins class="diff-chg">
fn:seconds-from-duration
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
number
of
seconds
in
a
duration.
</ins></td></tr></tbody></table><div class="div3"><h4><a name="func-years-from-duration" id= "func-years-from-duration"></a><ins class="diff-chg">
8.4.1
fn:years-from-duration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
number
of
years
in
a
duration.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
fn:years-from-duration
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg"><ins class="diff-chg">
$arg
</ins></code><code class="as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:duration?
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:integer?
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
an
</ins><code><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
representing
the
years
component
in
the
value
of
</ins><code><ins class="diff-chg">
$arg
</ins></code>.<ins class="diff-chg">
The
result
is
obtained
by
casting
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
to
an
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
(see
</ins><a href= "#casting-to-durations"><b><ins class="diff-chg">
18.1.4
Casting
to
duration
types
</ins></b></a><ins class="diff-chg">
)
and
then
computing
the
years
component
as
described
in
</ins><a href="#canonical-yearMonthDuration"><b><ins class="diff-chg">
8.2.1.3
Canonical
representation
</ins></b></a>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
a
negative
duration
then
the
result
will
be
negative..
</ins></p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
an
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
the
function
returns
0.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:years-from-duration(xs:yearMonthDuration("P20Y15M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
21
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:years-from-duration(xs:yearMonthDuration("-P15M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
-1
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:years-from-duration(xs:dayTimeDuration("-P2DT15H"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
0
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-months-from-duration" id= "func-months-from-duration"></a><ins class="diff-chg">
8.4.2
fn:months-from-duration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
number
of
months
in
a
duration.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
fn:months-from-duration
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg"><ins class="diff-chg">
$arg
</ins></code><code class="as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:duration?
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:integer?
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
an
</ins><code><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
representing
the
months
component
in
the
value
of
</ins><code><ins class="diff-chg">
$arg
</ins></code>.<ins class="diff-chg">
The
result
is
obtained
by
casting
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
to
an
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
(see
</ins><a href="#casting-to-durations"><b><ins class="diff-chg">
18.1.4
Casting
to
duration
types
</ins></b></a><ins class="diff-chg">
)
and
then
computing
the
months
component
as
described
in
</ins><a href="#canonical-yearMonthDuration"><b><ins class="diff-chg">
8.2.1.3
Canonical
representation
</ins></b></a>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
a
negative
duration
then
the
result
will
be
negative..
</ins></p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
an
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
the
function
returns
0.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:months-from-duration(xs:yearMonthDuration("P20Y15M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
3
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:months-from-duration(xs:yearMonthDuration("-P20Y18M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
-6
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:months-from-duration(xs:dayTimeDuration("-P2DT15H0M0S"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
0
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-days-from-duration" id= "func-days-from-duration"></a><ins class="diff-chg">
8.4.3
fn:days-from-duration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
number
of
days
in
a
duration.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
fn:days-from-duration
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg"><ins class="diff-chg">
$arg
</ins></code><code class="as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:duration?
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:integer?
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
an
</ins><code><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
representing
the
days
component
in
the
value
of
</ins><code><ins class="diff-chg">
$arg
</ins></code>.<ins class="diff-chg">
The
result
is
obtained
by
casting
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
to
an
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
(see
</ins><a href= "#casting-to-durations"><b><ins class="diff-chg">
18.1.4
Casting
to
duration
types
</ins></b></a><ins class="diff-chg">
)
and
then
computing
the
days
component
as
described
in
</ins><a href="#canonical-dayTimeDuration"><b><ins class="diff-chg">
8.2.2.3
Canonical
representation
</ins></b></a>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
a
negative
duration
then
the
result
will
be
negative..
</ins></p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
an
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
the
function
returns
0.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:days-from-duration(xs:dayTimeDuration("P3DT10H"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
3
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:days-from-duration(xs:dayTimeDuration("P3DT55H"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
5
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:days-from-duration(xs:yearMonthDuration("P3Y5M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
0
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-hours-from-duration" id= "func-hours-from-duration"></a><ins class="diff-chg">
8.4.4
fn:hours-from-duration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
number
of
hours
in
a
duration.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
fn:hours-from-duration
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg"><ins class="diff-chg">
$arg
</ins></code><code class="as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:duration?
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:integer?
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
an
</ins><code><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
representing
the
hours
component
in
the
value
of
</ins><code><ins class="diff-chg">
$arg
</ins></code>.<ins class="diff-chg">
The
result
is
obtained
by
casting
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
to
an
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
(see
</ins><a href= "#casting-to-durations"><b><ins class="diff-chg">
18.1.4
Casting
to
duration
types
</ins></b></a><ins class="diff-chg">
)
and
then
computing
the
hours
component
as
described
in
</ins><a href="#canonical-dayTimeDuration"><b><ins class="diff-chg">
8.2.2.3
Canonical
representation
</ins></b></a>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
a
negative
duration
then
the
result
will
be
negative..
</ins></p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
an
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
the
function
returns
0.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:hours-from-duration(xs:dayTimeDuration("P3DT10H"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
10
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:hours-from-duration(xs:dayTimeDuration("P3DT12H32M12S"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
12
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:hours-from-duration(xs:dayTimeDuration("PT123H"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
3
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:hours-from-duration(xs:dayTimeDuration("-P3DT10H"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
-10
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-minutes-from-duration" id= "func-minutes-from-duration"></a><ins class="diff-chg">
8.4.5
fn:minutes-from-duration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
number
of
minutes
in
a
duration.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
fn:minutes-from-duration
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg"><ins class="diff-chg">
$arg
</ins></code><code class="as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:duration?
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:integer?
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
an
</ins><code><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
representing
the
minutes
component
in
the
value
of
</ins><code><ins class="diff-chg">
$arg
</ins></code>.<ins class="diff-chg">
The
result
is
obtained
by
casting
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
to
an
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
(see
</ins><a href="#casting-to-durations"><b><ins class="diff-chg">
18.1.4
Casting
to
duration
types
</ins></b></a><ins class="diff-chg">
)
and
then
computing
the
minutes
component
as
described
in
</ins><a href="#canonical-dayTimeDuration"><b><ins class="diff-chg">
8.2.2.3
Canonical
representation
</ins></b></a>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
a
negative
duration
then
the
result
will
be
negative..
</ins></p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
an
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
the
function
returns
0.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:minutes-from-duration(xs:dayTimeDuration("P3DT10H"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
0
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:minutes-from-duration(xs:dayTimeDuration("-P5DT12H30M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
-30
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-seconds-from-duration" id= "func-seconds-from-duration"></a><ins class="diff-chg">
8.4.6
fn:seconds-from-duration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
number
of
seconds
in
a
duration.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
fn:seconds-from-duration
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg"><ins class="diff-chg">
$arg
</ins></code><code class="as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:duration?
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:decimal?
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
an
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
representing
the
seconds
component
in
the
value
of
</ins><code><ins class="diff-chg">
$arg
</ins></code>.<ins class="diff-chg">
The
result
is
obtained
by
casting
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
to
an
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
(see
</ins><a href="#casting-to-durations"><b><ins class="diff-chg">
18.1.4
Casting
to
duration
types
</ins></b></a><ins class="diff-chg">
)
and
then
computing
the
seconds
component
as
described
in
</ins><a href="#canonical-dayTimeDuration"><b><ins class="diff-chg">
8.2.2.3
Canonical
representation
</ins></b></a>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
a
negative
duration
then
the
result
will
be
negative..
</ins></p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
an
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
the
function
returns
0.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:seconds-from-duration(xs:dayTimeDuration("P3DT10H12.5S"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
12.5
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:seconds-from-duration(xs:dayTimeDuration("-PT256S"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
-16.0
</ins></code>.</p></dd></dl></div></div><div class="div2"><h3><a name="duration-arithmetic" id="duration-arithmetic"></a><ins class="diff-chg">
8.5
Arithmetic
Operators
on
Durations
</ins></h3><table summary="Function/operator summary" border="1"><thead><tr><th><ins class="diff-chg">
Function
</ins></th><th><ins class="diff-chg">
Meaning
</ins></th></tr></thead><tbody><tr><td><a href= "#func-add-yearMonthDurations"><code><ins class="diff-chg">
op:add-yearMonthDurations
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
result
of
adding
two
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
values.
</ins></td></tr><tr><td><a href= "#func-subtract-yearMonthDurations"><code><ins class="diff-chg">
op:subtract-yearMonthDurations
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
result
of
subtracting
one
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
value
from
another.
</ins></td></tr><tr><td><a href= "#func-multiply-yearMonthDuration"><code><ins class="diff-chg">
op:multiply-yearMonthDuration
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
result
of
multiplying
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
by
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
The
result
is
rounded
to
the
nearest
month.
</ins></td></tr><tr><td><a href= "#func-divide-yearMonthDuration"><code><ins class="diff-chg">
op:divide-yearMonthDuration
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
result
of
dividing
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
by
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
The
result
is
rounded
to
the
nearest
month.
</ins></td></tr><tr><td><a href= "#func-divide-yearMonthDuration-by-yearMonthDuration"><code><ins class="diff-chg">
op:divide-yearMonthDuration-by-yearMonthDuration
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
ratio
of
two
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
values.
</ins></td></tr><tr><td><a href= "#func-add-dayTimeDurations"><code><ins class="diff-chg">
op:add-dayTimeDurations
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
sum
of
two
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
values.
</ins></td></tr><tr><td><a href= "#func-subtract-dayTimeDurations"><code><ins class="diff-chg">
op:subtract-dayTimeDurations
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
result
of
subtracting
one
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
from
another.
</ins></td></tr><tr><td><a href= "#func-multiply-dayTimeDuration"><code><ins class="diff-chg">
op:multiply-dayTimeDuration
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
result
of
multiplying
a
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
by
a
number.
</ins></td></tr><tr><td><a href= "#func-divide-dayTimeDuration"><code><ins class="diff-chg">
op:divide-dayTimeDuration
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
result
of
multiplying
a
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
by
a
number.
</ins></td></tr><tr><td><a href= "#func-divide-dayTimeDuration-by-dayTimeDuration"><code><ins class="diff-chg">
op:divide-dayTimeDuration-by-dayTimeDuration
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
ratio
of
two
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
values,
as
a
decimal
number.
</ins></td></tr></tbody></table><p><ins class="diff-chg">
For
operators
that
combine
a
duration
and
a
date/time
value,
see
</ins><a href="#dateTime-arithmetic"><b><ins class="diff-chg">
9.7
Arithmetic
Operators
on
Durations,
Dates
and
Times
</ins></b></a>.</p><div class="div3"><h4><a name="func-add-yearMonthDurations" id= "func-add-yearMonthDurations"></a><ins class="diff-chg">
8.5.1
op:add-yearMonthDurations
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
result
of
adding
two
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"+"
operator
on
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-chg">
op:add-yearMonthDurations
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
function
returns
the
result
of
adding
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
to
the
value
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
The
result
will
be
an
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
whose
length
in
months
is
equal
to
the
length
in
months
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
plus
the
length
in
months
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.</p><p><ins class="diff-chg">
For
handling
of
overflow,
see
</ins><a href="#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Either
duration
(and
therefore
the
result)
may
be
negative.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:add-yearMonthDurations(xs:yearMonthDuration("P2Y11M"),
xs:yearMonthDuration("P3Y3M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:yearMonthDuration("P6Y2M")
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-subtract-yearMonthDurations" id= "func-subtract-yearMonthDurations"></a><ins class="diff-chg">
8.5.2
op:subtract-yearMonthDurations
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
result
of
subtracting
one
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
value
from
another.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"-"
operator
on
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-chg">
op:subtract-yearMonthDurations
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
function
returns
the
result
of
subtracting
the
value
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
from
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code>.<ins class="diff-chg">
The
result
will
be
an
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
whose
length
in
months
is
equal
to
the
length
in
months
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
minus
the
length
in
months
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.</p><p><ins class="diff-chg">
For
handling
of
overflow,
see
</ins><a href="#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Either
duration
(and
therefore
the
result)
may
be
negative.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:subtract-yearMonthDurations(xs:yearMonthDuration("P2Y11M"),
xs:yearMonthDuration("P3Y3M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:yearMonthDuration("-P4M")
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-multiply-yearMonthDuration" id= "func-multiply-yearMonthDuration"></a><ins class="diff-chg">
8.5.3
op:multiply-yearMonthDuration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
result
of
multiplying
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
by
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
The
result
is
rounded
to
the
nearest
month.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"*"
operator
on
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-chg">
op:multiply-yearMonthDuration
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
result
is
the
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
whose
length
in
months
is
equal
to
the
result
of
applying
the
</ins><a href= "#func-round"><code><ins class="diff-chg">
fn:round
</ins></code></a><ins class="diff-chg">
function
to
the
value
obtained
by
multiplying
the
length
in
months
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
by
the
value
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
positive
or
negative
zero,
the
result
is
a
zero-length
duration.
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
positive
or
negative
infinity,
the
result
overflows
and
is
handled
as
discussed
in
</ins><a href="#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p><p><ins class="diff-chg">
For
handling
of
overflow
and
underflow,
see
</ins><a href= "#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-chg">
Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
NaN
</ins></code><ins class="diff-chg">
an
error
is
raised
[
</ins><a href="#ERRFOCA0005" title="err:FOCA0005"><ins class="diff-chg">
err:FOCA0005
</ins></a><ins class="diff-chg">
].
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Either
duration
(and
therefore
the
result)
may
be
negative.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:multiply-yearMonthDuration(xs:yearMonthDuration("P2Y11M"),
2.3)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:yearMonthDuration("P6Y9M")
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-divide-yearMonthDuration" id= "func-divide-yearMonthDuration"></a><ins class="diff-chg">
8.5.4
op:divide-yearMonthDuration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
result
of
dividing
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
by
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
The
result
is
rounded
to
the
nearest
month.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"div"
operator
on
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
and
numeric
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-chg">
op:divide-yearMonthDuration
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
result
is
the
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
whose
length
in
months
is
equal
to
the
result
of
applying
the
</ins><a href= "#func-round"><code><ins class="diff-chg">
fn:round
</ins></code></a><ins class="diff-chg">
function
to
the
value
obtained
by
dividing
the
length
in
months
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
by
the
value
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
positive
or
negative
infinity,
the
result
is
a
zero-length
duration.
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
positive
or
negative
zero,
the
result
overflows
and
is
handled
as
discussed
in
</ins><a href="#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p><p><ins class="diff-chg">
For
handling
of
overflow
and
underflow,
see
</ins><a href= "#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-chg">
Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
NaN
</ins></code><ins class="diff-chg">
an
error
is
raised
[
</ins><a href="#ERRFOCA0005" title="err:FOCA0005"><ins class="diff-chg">
err:FOCA0005
</ins></a><ins class="diff-chg">
].
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Either
operand
(and
therefore
the
result)
may
be
negative.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:divide-yearMonthDuration(xs:yearMonthDuration("P2Y11M"),
1.5)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:yearMonthDuration("P1Y11M")
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-divide-yearMonthDuration-by-yearMonthDuration" id="func-divide-yearMonthDuration-by-yearMonthDuration"></a><ins class="diff-chg">
8.5.5
op:divide-yearMonthDuration-by-yearMonthDuration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
ratio
of
two
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"div"
operator
on
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-chg">
op:divide-yearMonthDuration-by-yearMonthDuration
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:decimal
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
function
returns
the
result
of
dividing
the
length
in
months
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
by
the
length
in
months
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>,<ins class="diff-chg">
according
to
the
rules
of
the
</ins><a href= "#func-numeric-divide"><code><ins class="diff-chg">
op:numeric-divide
</ins></code></a><ins class="diff-chg">
function
for
integer
operands.
</ins></p><p><ins class="diff-chg">
For
handling
of
overflow
and
underflow,
see
</ins><a href= "#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Either
duration
(and
therefore
the
result)
may
be
negative.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:divide-yearMonthDuration-by-yearMonthDuration(xs:yearMonthDuration("P3Y4M"),
xs:yearMonthDuration("-P1Y4M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
-2.5
</ins></code>.</p><p><ins class="diff-chg">
The
following
example
demonstrates
how
to
calculate
the
length
of
an
</ins><code><ins class="diff-chg">
xs:yearMonthDuration
</ins></code><ins class="diff-chg">
value
in
months:
</ins></p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:divide-yearMonthDuration-by-yearMonthDuration(xs:yearMonthDuration("P3Y4M"),
xs:yearMonthDuration("P1M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
40
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-add-dayTimeDurations" id= "func-add-dayTimeDurations"></a><ins class="diff-chg">
8.5.6
op:add-dayTimeDurations
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
sum
of
two
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"+"
operator
on
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-chg">
op:add-dayTimeDurations
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
function
returns
the
result
of
adding
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
to
the
value
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
The
result
is
the
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
whose
length
in
seconds
is
equal
to
the
sum
of
the
length
in
seconds
of
the
two
input
durations.
</ins></p><p><ins class="diff-chg">
For
handling
of
overflow,
see
</ins><a href="#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Either
duration
(and
therefore
the
result)
may
be
negative.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:add-dayTimeDurations(xs:dayTimeDuration("P2DT12H5M"),
xs:dayTimeDuration("P5DT12H"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:dayTimeDuration('P8DT5M')
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-subtract-dayTimeDurations" id= "func-subtract-dayTimeDurations"></a><ins class="diff-chg">
8.5.7
op:subtract-dayTimeDurations
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
result
of
subtracting
one
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
from
another.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"-"
operator
on
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-chg">
op:subtract-dayTimeDurations
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
function
returns
the
result
of
subtracting
the
value
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
from
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code>.<ins class="diff-chg">
The
result
is
the
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
whose
length
in
seconds
is
equal
to
the
length
in
seconds
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
minus
the
length
in
seconds
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.</p><p><ins class="diff-chg">
For
handling
of
overflow,
see
</ins><a href="#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Either
duration
(and
therefore
the
result)
may
be
negative.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:subtract-dayTimeDurations(xs:dayTimeDuration("P2DT12H"),
xs:dayTimeDuration("P1DT10H30M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:dayTimeDuration('P1DT1H30M')
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-multiply-dayTimeDuration" id= "func-multiply-dayTimeDuration"></a><ins class="diff-chg">
8.5.8
op:multiply-dayTimeDuration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
result
of
multiplying
a
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
by
a
number.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"*"
operator
on
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
and
numeric
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-chg">
op:multiply-dayTimeDuration
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
function
returns
the
result
of
multiplying
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
by
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
The
result
is
the
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
whose
length
in
seconds
is
equal
to
the
length
in
seconds
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
multiplied
by
the
numeric
value
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.</p><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-chg">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-chg">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-chg">
We
ought
to
say
whether
the
calculation
is
performed
using
double
or
decimal
arithmetic.
</ins></td></tr></table><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
positive
or
negative
zero,
the
result
is
a
zero-length
duration.
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
positive
or
negative
infinity,
the
result
overflows
and
is
handled
as
discussed
in
</ins><a href="#date-time-duration-conformance"><b><ins class="diff-chg">
9.1.1
Limits
and
Precision
</ins></b></a>.</p><p><ins class="diff-chg">
For
handling
of
overflow
and
underflow,
see
</ins><a href= "#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-chg">
Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
NaN
</ins></code><ins class="diff-chg">
an
error
is
raised
[
</ins><a href="#ERRFOCA0005" title="err:FOCA0005"><ins class="diff-chg">
err:FOCA0005
</ins></a><ins class="diff-chg">
].
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Either
operand
(and
therefore
the
result)
may
be
negative.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:multiply-dayTimeDuration(xs:dayTimeDuration("PT2H10M"),
2.1)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:dayTimeDuration('PT4H33M')
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-divide-dayTimeDuration" id= "func-divide-dayTimeDuration"></a><ins class="diff-chg">
8.5.9
op:divide-dayTimeDuration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
result
of
multiplying
a
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
by
a
number.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"div"
operator
on
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-chg">
op:divide-dayTimeDuration
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
function
returns
the
result
of
dividing
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
by
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
The
result
is
the
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
whose
length
in
seconds
is
equal
to
the
length
in
seconds
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
divided
by
the
numeric
value
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.</p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
positive
or
negative
infinity,
the
result
is
a
zero-length
duration.
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
positive
or
negative
zero,
the
result
overflows
and
is
handled
as
discussed
in
</ins><a href="#date-time-duration-conformance"><b><ins class="diff-chg">
9.1.1
Limits
and
Precision
</ins></b></a>.</p><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-chg">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-chg">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-chg">
We
ought
to
say
whether
the
calculation
is
performed
using
double
or
decimal
arithmetic.
</ins></td></tr></table><p><ins class="diff-chg">
For
handling
of
overflow
and
underflow,
see
</ins><a href= "#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-chg">
Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
NaN
</ins></code><ins class="diff-chg">
an
error
is
raised
[
</ins><a href="#ERRFOCA0005" title="err:FOCA0005"><ins class="diff-chg">
err:FOCA0005
</ins></a><ins class="diff-chg">
]
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Either
operand
(and
therefore
the
result)
may
be
negative.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:divide-dayTimeDuration(xs:dayTimeDuration("P1DT2H30M10.5S"),
1.5)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:duration("PT17H40M7S")
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-divide-dayTimeDuration-by-dayTimeDuration" id= "func-divide-dayTimeDuration-by-dayTimeDuration"></a><ins class="diff-chg">
8.5.10
op:divide-dayTimeDuration-by-dayTimeDuration
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
ratio
of
two
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
values,
as
a
decimal
number.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"div"
operator
on
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
values.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-chg">
op:divide-dayTimeDuration-by-dayTimeDuration
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg1
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:decimal
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
function
returns
the
result
of
dividing
the
value
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
by
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
The
result
is
the
</ins><code><ins class="diff-chg">
xs:dayTimeDuration
</ins></code><ins class="diff-chg">
whose
length
in
seconds
is
equal
to
the
length
in
seconds
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
divided
by
the
length
in
seconds
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
The
calculation
is
performed
by
applying
</ins><a href= "#func-numeric-divide"><code><ins class="diff-chg">
op:numeric-divide
</ins></code></a><ins class="diff-chg">
to
the
two
</ins><code><ins class="diff-chg">
xs:decimal
</ins></code><ins class="diff-chg">
operands.
</ins></p><p><ins class="diff-chg">
For
handling
of
overflow
and
underflow,
see
</ins><a href= "#duration-limits"><b><ins class="diff-chg">
8.1
Limits
and
Precision
</ins></b></a>.</p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Either
operand
(and
therefore
the
result)
may
be
negative.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><a href= "#func-round-half-to-even"><code><ins class="diff-chg">
fn:round-half-to-even(
op:divide-dayTimeDuration-by-dayTimeDuration(
xs:dayTimeDuration("P2DT53M11S"),
xs:dayTimeDuration("P1DT10H")),
4)
</ins></code></a><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
1.4378
</ins></code>.</p><p><ins class="diff-chg">
This
examples
shows
how
to
determine
the
number
of
seconds
in
a
duration.
</ins></p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:divide-dayTimeDuration-by-dayTimeDuration(xs:dayTimeDuration("P2DT53M11S"),
xs:dayTimeDuration("PT1S"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
175991.0
</ins></code>.</p></dd></dl></div></div></div><div class="div1"><h2><a name="dates-times" id="dates-times"></a><ins class="diff-chg">
9
Functions
and
Operators
on
Dates
and
Times
</ins></h2><p><ins class="diff-chg">
This
section
defines
operations
on
the
</ins><a href= "#xmlschema-2"><ins class="diff-chg">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a><ins class="diff-chg">
date
and
time
types.
</ins></p><p><ins class="diff-chg">
See
</ins><a href="#Working-With-Timezones"><ins class="diff-chg">
[Working
With
Timezones]
</ins></a><ins class="diff-chg">
for
a
disquisition
on
working
with
date
and
time
values
with
and
without
timezones.
</ins></p><div class="div2"><h3><a name="date-time-types" id="date-time-types"></a><ins class="diff-chg">
9.1
Date
and
Time
Types
</ins></h3><p><ins class="diff-chg">
The
operators
described
in
this
section
are
defined
on
the
following
date
and
time
types:
</ins></p><ul><li><p><ins class="diff-chg">
xs:dateTime
</ins></p></li><li><p><ins class="diff-chg">
xs:date
</ins></p></li><li><p><ins class="diff-chg">
xs:time
</ins></p></li><li><p><ins class="diff-chg">
xs:gYearMonth
</ins></p></li><li><p><ins class="diff-chg">
xs:gYear
</ins></p></li><li><p><ins class="diff-chg">
xs:gMonthDay
</ins></p></li><li><p><ins class="diff-chg">
xs:gMonth
</ins></p></li><li><p><ins class="diff-chg">
xs:gDay
</ins></p></li></ul><p><ins class="diff-chg">
The
only
operations
defined
on
</ins><code><ins class="diff-chg">
xs:gYearMonth
</ins></code>,<code><ins class="diff-chg">
xs:gYear
</ins></code>,<code><ins class="diff-chg">
xs:gMonthDay
</ins></code>,<code><ins class="diff-chg">
xs:gMonth
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
xs:gDay
</ins></code><ins class="diff-chg">
values
are
equality
</ins>
comparison
<ins class="diff-new">and
component
extraction.
For
other
types,
further
operations
are
provided,
including
order
comparisons,
arithmetic,
formatted
display,
and
timezone
adjustment.
</ins></p><div class="div3"><h4><a name="date-time-duration-conformance" id= "date-time-duration-conformance"></a><ins class="diff-new">
9.1.1
Limits
and
Precision
</ins></h4><p><ins class="diff-new">
For
a
number
of
the
above
datatypes
</ins><a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a><ins class="diff-new">
extends
the
basic
</ins><a href="#ISO8601"><ins class="diff-new">
[ISO
8601]
</ins></a><ins class="diff-new">
lexical
representations,
such
as
YYYY-MM-DDThh:mm:ss.s
for
dateTime,
by
allowing
a
preceding
minus
sign,
more
than
four
digits
to
represent
the
year
field
—
no
maximum
is
specified
—
and
an
unlimited
number
of
digits
for
fractional
seconds.
Leap
seconds
are
not
supported.
</ins></p><p><ins class="diff-new">
All
</ins><em><ins class="diff-new">
minimally
conforming
</ins></em><ins class="diff-new">
processors
</ins><a title="must" class="termref" href="#must"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
must
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
support
positive
year
values
with
a
minimum
of
4
digits
(i.e.,
YYYY)
and
a
minimum
fractional
second
precision
of
1
millisecond
or
three
digits
(i.e.,
s.sss).
However,
</ins><em><ins class="diff-new">
conforming
</ins></em><ins class="diff-new">
processors
</ins><a title="may" class="termref" href="#may"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
may
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
set
larger
</ins><a title="implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation-defined
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
limits
on
the
maximum
number
of
digits
they
support
in
these
two
situations.
Processors
</ins><a title="may" class= "termref" href="#may"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
may
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
also
choose
to
support
the
year
0000
and
years
with
negative
values.
The
results
of
operations
</ins>
on
<ins class="diff-new">dates
that
cross
the
year
0000
are
</ins><a title="implementation-defined" class="termref" href="#implementation-defined"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation-defined
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a>.</p><p><ins class="diff-new">
A
processor
that
limits
the
number
of
digits
in
date
and
time
datatype
representations
may
encounter
overflow
and
underflow
conditions
when
it
tries
to
execute
the
functions
in
</ins><a href= "#dateTime-arithmetic"><b><ins class="diff-new">
9.7
Arithmetic
Operators
on
Durations,
Dates
and
Times
</ins></b></a>.<ins class="diff-new">
In
these
situations,
the
processor
</ins><a title="must" class="termref" href="#must"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
must
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
return
00:00:00
in
case
of
time
underflow.
It
</ins><a title="must" class= "termref" href="#must"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
must
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
raise
an
error
[
</ins><a href="#ERRFODT0001" title= "err:FODT0001"><ins class="diff-new">
err:FODT0001
</ins></a><ins class="diff-new">
]
in
case
of
overflow.
</ins></p><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-new">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-new">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
Can
time
underflow
occur,
and
if
so
when?
</ins></td></tr></table></div></div><div class="div2"><h3><a name="date-time-values" id="date-time-values"></a><ins class="diff-new">
9.2
Date/time
datatype
values
</ins></h3><p><ins class="diff-new">
As
defined
in
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#dates-and-times"><ins class="diff-new">
Section
3.3.2
Dates
and
Times
</ins></a><sup><small><ins class="diff-new">
DM
</ins></small></sup>,<code><ins class="diff-new">
xs:dateTime
</ins></code>,<code><ins class="diff-new">
xs:date
</ins></code>,<code><ins class="diff-new">
xs:time
</ins></code>,<code><ins class="diff-new">
xs:gYearMonth
</ins></code>,<code><ins class="diff-new">
xs:gYear
</ins></code>,<code><ins class="diff-new">
xs:gMonthDay
</ins></code>,<code><ins class="diff-new">
xs:gMonth
</ins></code>,<code><ins class="diff-new">
xs:gDay
</ins></code><ins class="diff-new">
values,
referred
to
collectively
as
date/time
values,
are
represented
as
seven
components
or
properties:
</ins><code><ins class="diff-new">
year
</ins></code>,<code><ins class="diff-new">
month
</ins></code>,<code><ins class="diff-new">
day
</ins></code>,<code><ins class="diff-new">
hour
</ins></code>,<code><ins class="diff-new">
minute
</ins></code>,<code><ins class="diff-new">
second
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
timezone
</ins></code>.<ins class="diff-new">
The
value
of
the
first
five
components
are
</ins><code><ins class="diff-new">
xs:integer
</ins></code><ins class="diff-new">
s.
The
value
of
the
</ins><code><ins class="diff-new">
second
</ins></code><ins class="diff-new">
component
is
an
</ins><code><ins class="diff-new">
xs:decimal
</ins></code><ins class="diff-new">
and
the
value
of
the
</ins><code><ins class="diff-new">
timezone
</ins></code><ins class="diff-new">
component
is
an
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code>.<ins class="diff-new">
For
all
the
primitive
date/time
datatypes,
the
</ins><code><ins class="diff-new">
timezone
</ins></code><ins class="diff-new">
property
is
optional
and
may
or
may
not
be
present.
Depending
on
the
datatype,
some
of
the
remaining
six
properties
must
be
present
and
some
must
be
absent.
Absent,
or
missing,
properties
are
represented
by
the
empty
sequence.
This
value
is
referred
to
as
the
</ins><em><ins class="diff-new">
local
</ins></em><ins class="diff-new">
value
in
that
the
value
retains
its
original
timezone.
Before
comparing
or
subtracting
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
values,
this
local
value
</ins><a title="must" class="termref" href="#must"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
must
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
be
translated
or
</ins><em><ins class="diff-new">
normalized
</ins></em><ins class="diff-new">
to
UTC.
</ins></p><p><ins class="diff-new">
For
</ins><code><ins class="diff-new">
xs:time
</ins></code>,<code><ins class="diff-new">
00:00:00
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
24:00:00
</ins></code><ins class="diff-new">
are
alternate
lexical
forms
for
the
same
value,
whose
canonical
representation
is
</ins><code><ins class="diff-new">
00:00:00
</ins></code>.<ins class="diff-new">
For
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code>,<ins class="diff-new">
a
time
component
</ins><code><ins class="diff-new">
24:00:00
</ins></code><ins class="diff-new">
translates
to
</ins><code><ins class="diff-new">
00:00:00"
</ins></code><ins class="diff-new">
of
the
following
day.
</ins></p><div class="div3"><h4><a name="date-time-lexical-mapping" id= "date-time-lexical-mapping"></a><ins class="diff-new">
9.2.1
Examples
</ins></h4><ul><li><p><ins class="diff-new">
An
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
with
lexical
representation
</ins><code><ins class="diff-new">
1999-05-31T05:00:00
</ins></code><ins class="diff-new">
is
represented
in
the
datamodel
by
</ins><code><ins class="diff-new">
{1999,
5,
31,
5,
0,
0.0,
()}
</ins></code>.</p></li><li><p><ins class="diff-new">
An
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
with
lexical
representation
</ins><code><ins class="diff-new">
1999-05-31T13:20:00-05:00
</ins></code><ins class="diff-new">
is
represented
by
</ins><code><ins class="diff-new">
{1999,
5,
31,
13,
20,
0.0,
-PT5H}
</ins></code>.</p></li><li><p><ins class="diff-new">
An
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
with
lexical
representation
</ins><code><ins class="diff-new">
1999-12-31T24:00:00
</ins></code><ins class="diff-new">
is
represented
by
</ins><code><ins class="diff-new">
{2000,
1,
1,
0,
0,
0.0,
()}
</ins></code>.</p></li><li><p><ins class="diff-new">
An
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
with
lexical
representation
</ins><code><ins class="diff-new">
2005-02-28+8:00
</ins></code><ins class="diff-new">
is
represented
by
</ins><code><ins class="diff-new">
{2005,
2,
28,
(),
(),
(),
PT8H}
</ins></code>.</p></li><li><p><ins class="diff-new">
An
</ins><code><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
with
lexical
representation
</ins><code><ins class="diff-new">
24:00:00
</ins></code><ins class="diff-new">
is
represented
by
</ins><code><ins class="diff-new">
{(),
(),
(),
0,
0,
0,
()}
</ins></code>.</p></li></ul></div></div><div class="div2"><h3><a name="constructing-dateTime" id= "constructing-dateTime"></a><ins class="diff-new">
9.3
Constructing
a
dateTime
</ins></h3><p><ins class="diff-new">
A
function
is
provided
for
constructing
a
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
value
from
a
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
value
and
a
</ins><code><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
value.
</ins></p><div class="div3"><h4><a name="func-dateTime" id="func-dateTime"></a><ins class="diff-new">
9.3.1
fn:dateTime
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
an
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
value
created
by
combining
an
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
and
an
</ins><code><ins class="diff-new">
xs:time
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:dateTime
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg1
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:date?
</ins></code>,<code class="arg"><ins class="diff-new">
$arg2
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:time?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:dateTime?
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
either
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
is
the
empty
sequence
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-new">
Otherwise,
the
function
returns
an
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
whose
date
component
is
equal
to
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
and
whose
time
component
is
equal
to
</ins><code><ins class="diff-new">
$arg2
</ins></code>.</p><p><ins class="diff-new">
The
timezone
of
the
result
is
computed
as
follows:
</ins></p><ul><li><p><ins class="diff-new">
If
neither
argument
has
a
timezone,
the
result
has
no
timezone.
</ins></p></li><li><p><ins class="diff-new">
If
exactly
one
of
the
arguments
has
a
timezone,
or
if
both
arguments
have
the
same
timezone,
the
result
has
this
timezone.
</ins></p></li></ul></dd><dt class="label"><ins class="diff-new">
Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
If
the
two
arguments
both
have
timezones
and
the
timezones
are
different,
an
error
is
raised:
[
</ins><a href="#ERRFORG0008" title= "err:FORG0008"><ins class="diff-new">
err:FORG0008
</ins></a><ins class="diff-new">
]
</ins></p></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:dateTime(xs:date("1999-12-31"),
xs:time("12:00:00"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
xs:dateTime("1999-12-31T12:00:00")
</ins></code>.</p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:dateTime(xs:date("1999-12-31"),
xs:time("24:00:00"))
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
xs:dateTime("1999-12-31T00:00:00")
</ins></code>.<em><ins class="diff-new">
(This
is
because
</ins><code><ins class="diff-new">
"24:00:00"
</ins></code><ins class="diff-new">
is
an
alternate
lexical
form
for
</ins><code><ins class="diff-new">
"00:00:00"
</ins></code><ins class="diff-new">
).
</ins></em></p></dd></dl></div></div><div class="div2"><h3><a name="comp.datetime" id="comp.datetime"></a><ins class="diff-new">
9.4
Comparison
Operators
on
Duration,
Date
and
Time
Values
</ins></h3><table summary="Function/operator summary" border="1"><thead><tr><th><ins class="diff-new">
Function
</ins></th><th><ins class="diff-new">
Meaning
</ins></th></tr></thead><tbody><tr><td><a href= "#func-dateTime-equal"><code><ins class="diff-new">
op:dateTime-equal
</ins></code></a></td><td><ins class="diff-new">
Returns
true
if
the
two
supplied
</ins>
<code>
xs:dateTime
</code>
values
<ins class="diff-new">refer
to
the
same
instant
in
time.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-dateTime-less-than">
<code>
op:dateTime-less-than
</code>
</a>
</td>
<td>
<del class="diff-old">Less-than
comparison
on
</del>
<ins class="diff-chg">Returns
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">true
</ins>
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">if
the
first
argument
represents
an
earlier
instant
in
time
than
the
second
argument.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-dateTime-greater-than">
<code>
op:dateTime-greater-than
</code>
</a>
</td>
<td>
<del class="diff-old">Greater-than
comparison
on
</del>
<ins class="diff-chg">Returns
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">true
</ins>
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">if
the
first
argument
represents
a
later
instant
in
time
than
the
second
argument.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-date-equal">
<code>
op:date-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
comparison
on
</del>
<ins class="diff-chg">Returns
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
if
and
only
if
the
starting
instants
of
the
two
supplied
</ins>
<code>
xs:date
</code>
values
<ins class="diff-new">are
the
same.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-date-less-than">
<code>
op:date-less-than
</code>
</a>
</td>
<td>
<del class="diff-old">Less-than
comparison
on
</del>
<ins class="diff-chg">Returns
</ins>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">true
</ins>
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">if
and
only
if
the
starting
instant
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
is
less
than
the
starting
instant
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
Returns
</ins><code><ins class="diff-chg">
false
</ins></code><ins class="diff-chg">
otherwise.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-date-greater-than">
<code>
op:date-greater-than
</code>
</a>
</td>
<td>
<del class="diff-old">Greater-than
comparison
on
</del>
<ins class="diff-chg">Returns
</ins>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">true
</ins>
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">if
and
only
if
the
starting
instant
of
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
is
greater
than
the
starting
instant
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>.<ins class="diff-chg">
Returns
</ins><code><ins class="diff-chg">
false
</ins></code><ins class="diff-chg">
otherwise.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-time-equal">
<code>
op:time-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
comparison
on
</del>
<ins class="diff-chg">Returns
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
if
the
two
</ins>
<code>
xs:time
</code>
values
<ins class="diff-new">represent
the
same
instant
in
time,
when
treated
as
being
times
on
the
same
date,
before
adjusting
the
timezone.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-time-less-than">
<code>
op:time-less-than
</code>
</a>
</td>
<td>
<del class="diff-old">Less-than
comparison
on
</del>
<ins class="diff-chg">Returns
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
if
the
first
</ins>
<code>
xs:time
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">value
represents
an
earlier
instant
in
time
than
the
second,
when
both
are
treated
as
being
times
on
the
same
date,
before
adjusting
the
timezone.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-time-greater-than">
<code>
op:time-greater-than
</code>
</a>
</td>
<td>
<del class="diff-old">Greater-than
comparison
on
</del>
<ins class="diff-chg">Returns
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
if
the
first
</ins>
<code>
xs:time
</code>
<del class="diff-old">values
</del>
<ins class="diff-chg">value
represents
a
later
instant
in
time
than
the
second,
when
both
are
treated
as
being
times
on
the
same
date,
before
adjusting
the
timezone.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-gYearMonth-equal">
<code>
op:gYearMonth-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
comparison
on
</del>
<ins class="diff-chg">Returns
true
if
the
two
</ins>
<code>
xs:gYearMonth
</code>
values
<ins class="diff-new">have
the
same
starting
instant.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-gYear-equal">
<code>
op:gYear-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
comparison
on
</del>
<ins class="diff-chg">Returns
true
if
the
two
</ins>
<code>
xs:gYear
</code>
values
<ins class="diff-new">have
the
same
starting
instant.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-gMonthDay-equal">
<code>
op:gMonthDay-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
comparison
on
</del>
<ins class="diff-chg">Returns
true
if
the
two
</ins>
<code>
xs:gMonthDay
</code>
values
<ins class="diff-new">have
the
same
starting
instant,
when
considered
as
days
in
the
same
year.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-gMonth-equal">
<code>
op:gMonth-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
comparison
on
</del>
<ins class="diff-chg">Returns
true
if
the
two
</ins>
<code>
xs:gMonth
</code>
values
<ins class="diff-new">have
the
same
starting
instant,
when
considered
as
months
in
the
same
year.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-gDay-equal">
<code>
op:gDay-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Equality
comparison
on
</del>
<ins class="diff-chg">Returns
true
if
the
two
</ins>
<code>
xs:gDay
</code>
values
<ins class="diff-new">have
the
same
starting
instant,
when
considered
as
days
in
the
same
month
of
the
same
year.
</ins>
</td>
</tr>
</tbody>
</table>
<p>
The
following
comparison
operators
are
defined
on
the
<a href= "#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
<del class="diff-old">date,
time
and
duration
</del>
<ins class="diff-chg">date/time
</ins>
datatypes.
Each
operator
takes
two
operands
of
the
same
type
and
returns
an
<code>
xs:boolean
</code>
result.
<del class="diff-old">As
discussed
in
[XML
Schema
Part
2:
Datatypes
Second
Edition]
,
the
order
relation
on
xs:duration
is
not
a
total
order
but,
rather,
a
partial
order.
For
this
reason,
only
equality
is
defined
on
xs:duration
.
A
full
complement
of
comparison
and
arithmetic
functions
are
defined
on
the
two
subtypes
of
duration
described
in
10.3
Two
Totally
Ordered
Subtypes
of
Duration
which
do
have
a
total
order.
</del>
</p>
<p>
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
also
states
that
the
order
relation
on
date
and
time
datatypes
is
not
a
total
order
but
a
partial
order
because
these
datatypes
may
or
may
not
have
a
timezone.
This
is
handled
as
follows.
If
either
operand
to
a
comparison
function
on
date
or
time
values
does
not
have
an
(explicit)
timezone
then,
for
the
purpose
of
the
operation,
an
implicit
timezone,
provided
by
the
dynamic
context
<a href= "http://www.w3.org/TR/xpath20/#id-xp-evaluation-context-components">
Section
C.2
Dynamic
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>,
is
assumed
to
be
present
as
part
of
the
value.
This
creates
a
total
order
for
all
date
and
time
values.
</p>
<table border="1" summary="Editorial note">
<tr>
<td align="left" valign="top" width="50%">
<b>
<ins class="diff-new">Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-new">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
The
following
paragraph
seems
to
duplicate
material
that
has
already
been
covered.
</ins></td></tr></table>
<p>
An
<code>
xs:dateTime
</code>
can
be
considered
to
consist
of
seven
components:
<code>
year
</code>,
<code>
month
</code>,
<code>
day
</code>,
<code>
hour
</code>,
<code>
minute
</code>,
<code>
second
</code>
and
<code>
timezone
</code>.
For
<code>
xs:dateTime
</code>
six
components:
<code>
year
</code>,
<code>
month
</code>,
<code>
day
</code>,
<code>
hour
</code>,
<code>
minute
</code>
and
<code>
second
</code>
are
required
and
<code>
timezone
</code>
is
optional.
For
other
date/time
values,
of
the
first
six
components,
some
are
required
and
others
must
be
absent
or
missing.
<code>
Timezone
</code>
is
always
optional.
For
example,
for
<code>
xs:date
</code>,
the
<code>
year
</code>,
<code>
month
</code>
and
<code>
day
</code>
components
are
required
and
<code>
hour
</code>,
<code>
minute
</code>
and
<code>
second
</code>
components
must
be
absent;
for
<code>
xs:time
</code>
the
<code>
hour
</code>,
<code>
minute
</code>
and
<code>
second
</code>
components
are
required
and
<code>
year
</code>,
<code>
month
</code>
and
<code>
day
</code>
are
missing;
for
<code>
xs:gDay
</code>,
<code>
day
</code>
is
required
and
<code>
year
</code>,
<code>
month
</code>,
<code>
hour
</code>,
<code>
minute
</code>
and
<code>
second
</code>
are
missing.
</p>
<p>
Values
of
the
date/time
datatypes
<code>
xs:time
</code>,
<code>
xs:gMonthDay
</code>,
<code>
xs:gMonth
</code>,
and
<code>
xs:gDay
</code>,
can
be
considered
to
represent
a
sequence
of
recurring
time
instants
or
time
periods.
An
<code>
xs:time
</code>
occurs
every
day.
An
<code>
xs:gMonth
</code>
occurs
every
year.
Comparison
operators
on
these
datatypes
compare
the
starting
instants
of
equivalent
occurrences
in
the
recurring
series.
These
<code>
xs:dateTime
</code>
values
are
calculated
as
described
below.
</p>
<p>
Comparison
operators
on
<code>
xs:date
</code>,
<code>
xs:gYearMonth
</code>
and
<code>
xs:gYear
</code>
compare
their
starting
instants.
These
<code>
xs:dateTime
</code>
values
are
calculated
as
described
below.
</p>
<p>
The
starting
instant
of
an
occurrence
of
a
date/time
value
is
an
<code>
xs:dateTime
</code>
calculated
by
filling
in
the
missing
components
of
the
local
value
from
a
reference
<code>
xs:dateTime
</code>.
<del class="diff-old">If
the
value
filled
in
for
a
missing
day
component
exceeds
the
maximum
day
value
for
the
month,
the
last
day
</del>
<ins class="diff-chg">An
example
</ins>
of
<del class="diff-old">the
month
is
used.
Suppose,
for
example,
that
the
</del>
<ins class="diff-chg">a
suitable
</ins>
reference
<code>
xs:dateTime
</code>
is
<code>
<del class="diff-old">1972-12-31T00:00:00
and
</del>
<ins class="diff-chg">1972-01-01T00:00:00
</ins></code>.<ins class="diff-chg">
Then,
for
example,
the
starting
instant
corresponding
to
</ins>
the
<code>
xs:date
</code>
value
<del class="diff-old">to
be
compared
is
1993-03-31
.
Filling
in
the
time
components
from
the
reference
</del>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">2009-03-12
</ins>
</code>
<del class="diff-old">we
get
</del>
<ins class="diff-chg">is
</ins>
<code>
<del class="diff-old">1993-03-31T00:00:00
</del>
<ins class="diff-chg">2009-03-12T00:00:00
</ins>
</code>
<del class="diff-old">which
is
</del>
<ins class="diff-chg">;
</ins>
the
starting
instant
<del class="diff-old">of
that
day.
Similarly,
if
</del>
<ins class="diff-chg">corresponding
to
</ins>
the
<code>
xs:time
</code>
value
<code>
<del class="diff-old">12:30:00
</del>
<ins class="diff-chg">13:30:02
</ins>
</code>
is
<del class="diff-old">to
be
compared,
we
fill
in
</del>
<code>
<ins class="diff-chg">1972-01-01T13:30:02
</ins></code><ins class="diff-chg">
;
and
</ins>
the
<del class="diff-old">missing
components
from
</del>
<ins class="diff-chg">starting
instant
corresponding
to
</ins>
the
<del class="diff-old">reference
</del>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">gMonthDay
</ins>
</code>
<del class="diff-old">and
we
get
</del>
<ins class="diff-chg">value
</ins>
<code>
<del class="diff-old">1972-12-31T12:30:00
</del>
<ins class="diff-chg">--02-29
</ins>
</code>
<del class="diff-old">which
</del>
is
<del class="diff-old">the
time
on
that
day.
For
an
</del>
<code>
<del class="diff-old">xs:gYearMonth
</del>
<ins class="diff-chg">1972-02-29T00:00:00
</ins>
</code>
<del class="diff-old">value
</del>
<ins class="diff-chg">(which
explains
why
a
leap
year
was
chosen
for
the
reference).
</ins></p><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b></p><p><ins class="diff-chg">
In
the
previous
version
</ins>
of
<ins class="diff-new">this
specification,
the
reference
date/time
chosen
was
</ins>
<code>
<del class="diff-old">1976-02
we
fill
in
</del>
<ins class="diff-chg">1972-12-31T00:00:00
</ins></code>.<ins class="diff-chg">
While
this
gives
</ins>
the
<del class="diff-old">missing
components,
adjust
</del>
<ins class="diff-chg">same
results,
it
produces
a
"starting
instant"
</ins>
for
<ins class="diff-new">a
</ins><code><ins class="diff-new">
gMonth
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
gMonthDay
</ins></code><ins class="diff-new">
that
bears
no
relation
to
</ins>
the
<del class="diff-old">last
day
in
</del>
<ins class="diff-chg">English
meaning
of
</ins>
the
<del class="diff-old">month
</del>
<ins class="diff-chg">term,
</ins>
and
<del class="diff-old">get
1976-02-29T00:00:00
.
</del>
<ins class="diff-chg">it
also
required
special
handling
of
short
months.
The
original
choice
was
made
to
allow
for
leap
seconds;
but
since
leap
seconds
are
not
recognized
in
date/time
arithmetic,
this
is
not
actually
necessary.
</ins>
</p>
</div>
<p>
If
the
<code>
xs:time
</code>
value
written
as
<code>
24:00:00
</code>
is
to
be
compared,
filling
in
the
missing
components
gives
<code>
<del class="diff-old">1972-12-31T00:00:00
</del>
<ins class="diff-chg">1972-01-01T00:00:00
</ins>
</code>,
because
<code>
24:00:00
</code>
is
an
alternative
representation
of
<code>
00:00:00
</code>
(the
lexical
value
<code>
"24:00:00"
</code>
is
converted
to
the
time
components
{0,0,0}
before
the
missing
components
are
filled
in).
This
has
the
consequence
that
when
ordering
<code>
xs:time
</code>
values,
<code>
24:00:00
</code>
is
considered
to
be
earlier
than
<code>
23:59:59
</code>.
However,
when
ordering
<code>
xs:dateTime
</code>
values,
a
time
component
of
<code>
24:00:00
</code>
is
considered
equivalent
to
<code>
00:00:00
</code>
on
the
following
day.
</p>
<p>
Note
that
the
reference
<code>
xs:dateTime
</code>
does
not
have
a
timezone.
The
<code>
timezone
</code>
component
is
never
filled
in
from
the
reference
<code>
xs:dateTime
</code>.
In
some
cases,
if
the
date/time
value
does
not
have
a
timezone,
the
implicit
timezone
from
the
dynamic
context
is
used
as
the
timezone.
</p>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
This
<del class="diff-old">proposal
</del>
<ins class="diff-chg">specification
</ins>
uses
the
reference
<code>
xs:dateTime
<del class="diff-old">1972-12-31T00:00:00
</del>
<ins class="diff-chg">1972-01-01T00:00:00
</ins>
</code>
in
the
description
of
the
comparison
operators.
Implementations
<del class="diff-old">are
allowed
to
</del>
<ins class="diff-chg">may
</ins>
use
other
reference
<code>
xs:dateTime
</code>
values
as
long
as
they
yield
the
same
results.
The
reference
<code>
xs:dateTime
</code>
used
must
meet
the
following
constraints:
when
it
is
used
to
supply
components
into
<code>
xs:gMonthDay
</code>
values,
the
year
must
allow
for
February
29
and
so
must
be
a
leap
year;
when
it
is
used
to
supply
missing
components
into
<code>
xs:gDay
</code>
values,
the
month
must
allow
for
31
days.
Different
reference
<code>
xs:dateTime
</code>
values
may
be
used
for
different
operators.
</p>
</div>
<div class="div3">
<h4>
<a name="func-dateTime-equal" id= "func-dateTime-equal">
</a>
<del class="diff-old">10.4.1
op:yearMonthDuration-less-than
</del>
<ins class="diff-chg">9.4.1
op:dateTime-equal
</ins>
</h4>
<del class="diff-old">op:yearMonthDuration-less-than
(
$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
&#160;as&#160;
xs:yearMonthDuration
)
&#160;as&#160;
xs:boolean
</del>
<dl>
<dt class="label">
<ins class="diff-chg">Summary
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
true
<del class="diff-old">if
and
only
</del>
if
<del class="diff-old">$arg1
is
less
than
$arg2
.
Returns
false
otherwise.
This
function
backs
up
</del>
the
<del class="diff-old">"lt"
and
"le"
operators
on
xs:yearMonthDuration
values.
10.4.2
op:yearMonthDuration-greater-than
op:yearMonthDuration-greater-than
(
$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
&#160;as&#160;
xs:yearMonthDuration
)
&#160;as&#160;
xs:boolean
Summary:
Returns
true
if
and
only
if
$arg1
is
greater
than
$arg2
.
Returns
</del>
<ins class="diff-chg">two
supplied
</ins>
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
<del class="diff-old">otherwise.
This
function
backs
up
</del>
<ins class="diff-chg">values
refer
to
</ins>
the
<del class="diff-old">"gt"
and
"ge"
operators
on
xs:yearMonthDuration
values.
10.4.3
op:dayTimeDuration-less-than
op:dayTimeDuration-less-than
(
$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
&#160;as&#160;
xs:dayTimeDuration
)
&#160;as&#160;
xs:boolean
Summary:
Returns
true
if
and
only
if
$arg1
is
less
than
$arg2
.
Returns
false
otherwise.
</del>
<ins class="diff-chg">same
instant
in
time.
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Operator
Mapping
</ins></dt><dd>
<p>
<del class="diff-old">This
function
backs
up
</del>
<ins class="diff-chg">Defines
</ins>
the
<del class="diff-old">"lt"
and
"le"
operators
</del>
<ins class="diff-chg">semantics
of
the
"eq"
operator
</ins>
on
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
values.
<del class="diff-old">10.4.4
op:dayTimeDuration-greater-than
op:dayTimeDuration-greater-than
(
$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
&#160;as&#160;
xs:dayTimeDuration
)
&#160;as&#160;
xs:boolean
Summary:
Returns
true
if
and
only
if
$arg1
is
greater
than
$arg2
.
Returns
false
otherwise.
This
function
backs
up
</del>
<ins class="diff-chg">Also
used
in
</ins>
the
<del class="diff-old">"gt"
</del>
<ins class="diff-chg">definition
of
the
"ne",
"le"
</ins>
and
"ge"
<del class="diff-old">operators
on
xs:dayTimeDuration
values.
</del>
<ins class="diff-chg">operators.
</ins>
</p>
<del class="diff-old">10.4.5
op:duration-equal
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
<del class="diff-old">op:duration-equal
</del>
<ins class="diff-chg">op:dateTime-equal
</ins>
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
<del class="diff-old">xs:duration
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
<del class="diff-old">xs:duration
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
xs:yearMonthDuration
and
the
xs:dayTimeDuration
components
of
</del>
<ins class="diff-chg">If
either
</ins>
<code>
$arg1
</code>
<del class="diff-old">and
</del>
<ins class="diff-chg">or
</ins>
<code>
$arg2
</code>
<del class="diff-old">compare
equal
respectively.
Returns
false
otherwise.
This
function
backs
up
the
"eq"
and
"ne"
operators
on
xs:duration
values.
Note
that
this
function,
like
any
other,
may
be
applied
to
arguments
that
are
derived
from
the
types
given
in
</del>
<ins class="diff-chg">has
no
timezone
component,
</ins>
the
<del class="diff-old">function
signature,
including
</del>
<ins class="diff-chg">effective
value
of
</ins>
the
<del class="diff-old">two
subtypes
xs:dayTimeDuration
and
xs:yearMonthDuration
.
With
</del>
<ins class="diff-chg">argument
is
obtained
by
substituting
</ins>
the
<del class="diff-old">exception
of
</del>
<ins class="diff-chg">implicit
timezone
from
</ins>
the
<del class="diff-old">zero-length
duration,
no
instance
of
xs:dayTimeDuration
can
ever
be
equal
to
an
instance
of
xs:yearMonthDuration
.
</del>
<ins class="diff-chg">dynamic
evaluation
context.
</ins>
</p>
<p>
The
<del class="diff-old">semantics
of
this
</del>
function
<del class="diff-old">are:
xs:yearMonthDuration($arg1) div xs:yearMonthDuration('P1M')  eq
xs:yearMonthDuration($arg2) div xs:yearMonthDuration('P1M')
    and
xs:dayTimeDuration($arg1) div xs:dayTimeDuration('PT1S')  eq
xs:dayTimeDuration($arg2) div xs:dayTimeDuration('PT1S')
that
is,
the
function
returns
true
if
the
months
and
seconds
values
of
the
two
durations
are
equal.
10.4.5.1
Examples
op:duration-equal(xs:duration("P1Y"),
xs:duration("P12M"))
returns
true
.
op:duration-equal(xs:duration("PT24H"),
xs:duration("P1D"))
returns
true
.
op:duration-equal(xs:duration("P1Y"),
xs:duration("P365D"))
returns
false
.
op:duration-equal(xs:yearMonthDuration("P0Y"),
xs:dayTimeDuration("PT0D"))
returns
true
.
op:duration-equal(xs:yearMonthDuration("P1Y"),
xs:dayTimeDuration("PT365D"))
returns
false
.
op:duration-equal(xs:yearMonthDuration("P2Y"),
xs:yearMonthDuration("P24M"))
returns
true
.
op:duration-equal(xs:dayTimeDuration("PT10D"),
xs:dayTimeDuration("PT240H"))
returns
true
.
op:duration-equal(xs:duration("P2Y0M0DT0H0M0S"),
xs:yearMonthDuration("P24M"))
</del>
<ins class="diff-chg">then
</ins>
returns
<code>
true
<del class="diff-old">.
op:duration-equal(xs:duration("P0Y0M10D"),
xs:dayTimeDuration("PT240H"))
returns
true
.
10.4.6
op:dateTime-equal
op:dateTime-equal
(
$arg1
&#160;as&#160;
xs:dateTime
,
$arg2
&#160;as&#160;
xs:dateTime
)
&#160;as&#160;
xs:boolean
Summary:
Returns
true
</del>
</code>
if
and
only
if
the
<ins class="diff-new">effective
</ins>
value
of
<code>
$arg1
</code>
is
equal
to
the
<ins class="diff-new">effective
</ins>
value
of
<code>
$arg2
</code>
according
to
the
algorithm
defined
in
section
3.2.7.4
of
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
"Order
relation
on
dateTime"
for
<code>
xs:dateTime
</code>
values
with
timezones.
<del class="diff-old">Returns
false
otherwise.
This
function
backs
up
</del>
<ins class="diff-chg">Otherwise
</ins>
the
<del class="diff-old">"eq",
"ne",
"le"
and
"ge"
operators
on
</del>
<ins class="diff-chg">function
returns
</ins>
<code>
<del class="diff-old">xs:dateTime
values.
</del>
<ins class="diff-chg">false
</ins></code>.
</p>
<del class="diff-old">10.4.6.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
-05:00
<del class="diff-old">.
</del>
</code>
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
op:dateTime-equal(xs:dateTime("2002-04-02T12:00:00-01:00"),
xs:dateTime("2002-04-02T17:00:00+04:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:dateTime-equal(xs:dateTime("2002-04-02T12:00:00"),
xs:dateTime("2002-04-02T23:00:00+06:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:dateTime-equal(xs:dateTime("2002-04-02T12:00:00"),
xs:dateTime("2002-04-02T17:00:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:dateTime-equal(xs:dateTime("2002-04-02T12:00:00"),
xs:dateTime("2002-04-02T12:00:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
op:dateTime-equal(xs:dateTime("2002-04-02T23:00:00-04:00"),
xs:dateTime("2002-04-03T02:00:00-01:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:dateTime-equal(xs:dateTime("1999-12-31T24:00:00"),
xs:dateTime("2000-01-01T00:00:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:dateTime-equal(xs:dateTime("2005-04-04T24:00:00"),
xs:dateTime("2005-04-04T00:00:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-dateTime-less-than" id= "func-dateTime-less-than">
</a>
<del class="diff-old">10.4.7
</del>
<ins class="diff-chg">9.4.2
</ins>
op:dateTime-less-than
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
the
first
argument
represents
an
earlier
instant
in
time
than
the
second
argument.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"lt"
operator
on
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"le"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:dateTime-less-than
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:dateTime
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
either
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
has
no
timezone
component,
the
effective
value
of
the
argument
is
obtained
by
substituting
the
implicit
timezone
from
the
dynamic
evaluation
context.
</ins></p><p><ins class="diff-chg">
The
function
then
returns
</ins>
<code>
true
</code>
if
and
only
if
the
<ins class="diff-new">effective
</ins>
value
of
<code>
$arg1
</code>
is
less
than
the
<ins class="diff-new">effective
</ins>
value
of
<code>
$arg2
</code>
according
to
the
algorithm
defined
in
section
3.2.7.4
of
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
"Order
relation
on
dateTime"
for
<code>
xs:dateTime
</code>
values
with
timezones.
<del class="diff-old">Returns
false
otherwise.
This
function
backs
up
</del>
<ins class="diff-chg">Otherwise
</ins>
the
<del class="diff-old">"lt"
and
"le"
operators
on
</del>
<ins class="diff-chg">function
returns
</ins>
<code>
<del class="diff-old">xs:dateTime
values.
</del>
<ins class="diff-chg">false
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-dateTime-greater-than" id= "func-dateTime-greater-than">
</a>
<del class="diff-old">10.4.8
</del>
<ins class="diff-chg">9.4.3
</ins>
op:dateTime-greater-than
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
the
first
argument
represents
a
later
instant
in
time
than
the
second
argument.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"gt"
operator
on
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ge"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:dateTime-greater-than
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd><p><ins class="diff-new">
The
function
call
</ins><code><ins class="diff-new">
op:dateTime-greater-than($A,
$B)
</ins></code><ins class="diff-new">
is
defined
to
return
the
same
result
as
</ins><a href= "#func-dateTime-less-than"><code><ins class="diff-new">
op:dateTime-less-than($B,
$A)
</ins></code></a></p></dd></dl></div><div class="div3"><h4><a name="func-date-equal" id="func-date-equal"></a><ins class="diff-new">
9.4.4
op:date-equal
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
<code>
true
</code>
if
and
only
if
the
<del class="diff-old">value
of
$arg1
is
greater
than
the
value
</del>
<ins class="diff-chg">starting
instants
</ins>
of
<del class="diff-old">$arg2
according
to
</del>
the
<del class="diff-old">algorithm
defined
in
section
3.2.7.4
of
[XML
Schema
Part
2:
Datatypes
Second
Edition]
"Order
relation
on
dateTime"
for
</del>
<ins class="diff-chg">two
supplied
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
values
<del class="diff-old">with
timezones.
Returns
false
otherwise.
</del>
<ins class="diff-chg">are
the
same.
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Operator
Mapping
</ins></dt><dd>
<p>
<del class="diff-old">This
function
backs
up
</del>
<ins class="diff-chg">Defines
</ins>
the
<del class="diff-old">"gt"
and
"ge"
operators
</del>
<ins class="diff-chg">semantics
of
the
"eq"
operator
</ins>
on
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
values.
<ins class="diff-new">Also
used
in
the
definition
of
the
"ne",
"le"
and
"ge"
operators.
</ins>
</p>
<del class="diff-old">10.4.9
op:date-equal
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:date-equal
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:date
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:date
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
starting
instant
of
$arg1
is
equal
to
starting
instant
of
$arg2
.
Returns
false
otherwise.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
starting
instant
of
an
<code>
xs:date
</code>
is
the
<code>
xs:dateTime
</code>
at
time
<code>
00:00:00
</code>
on
that
date.
</p>
<p>
The
<del class="diff-old">two
starting
instants
are
compared
using
op:dateTime-equal
.
This
</del>
function
<del class="diff-old">backs
up
</del>
<ins class="diff-chg">returns
</ins>
the
<del class="diff-old">"eq",
"ne",
"le"
and
"ge"
operators
on
xs:date
values.
</del>
<ins class="diff-chg">result
of
the
expression:
</ins>
</p>
<div class="exampleInner">
<pre>
<ins class="diff-chg">op:dateTime-equal(xs:dateTime($arg1), xs:dateTime($arg2))
</ins></pre>
<del class="diff-old">10.4.9.1
</del>
</div>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:date-equal(xs:date("2004-12-25Z"),
xs:date("2004-12-25+07:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
<del class="diff-old">The
</del>
<em>
<ins class="diff-chg">(The
</ins>
starting
instants
are
<code>
xs:dateTime("2004-12-25T00:00:00Z")
</code>
and
<code>
xs:dateTime("2004-12-25T00:00:00+07:00")
</code>.
These
are
normalized
to
<code>
xs:dateTime("2004-12-25T00:00:00Z")
</code>
and
<code>
xs:dateTime("2004-12-24T17:00:00Z")
</code>.
<ins class="diff-new">).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:date-equal(xs:date("2004-12-25-12:00"),
xs:date("2004-12-26+12:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-date-less-than" id= "func-date-less-than">
</a>
<del class="diff-old">10.4.10
</del>
<ins class="diff-chg">9.4.5
</ins>
op:date-less-than
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
and
only
if
the
starting
instant
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
less
than
the
starting
instant
of
</ins><code><ins class="diff-new">
$arg2
</ins></code>.<ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
false
</ins></code><ins class="diff-new">
otherwise.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"lt"
operator
on
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"le"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:date-less-than
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:date
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:date
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
starting
instant
of
$arg1
is
less
than
the
starting
instant
of
$arg2
.
Returns
false
otherwise.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
starting
instant
of
an
<code>
xs:date
</code>
is
the
<code>
xs:dateTime
</code>
at
time
<code>
00:00:00
</code>
on
that
date.
</p>
<p>
The
<del class="diff-old">two
starting
instants
are
compared
using
op:dateTime-less-than
.
This
</del>
function
<del class="diff-old">backs
up
</del>
<ins class="diff-chg">returns
</ins>
the
<del class="diff-old">"lt"
and
"le"
operators
on
xs:date
values.
</del>
<ins class="diff-chg">result
of
the
expression:
</ins>
</p>
<div class="exampleInner">
<pre>
<ins class="diff-chg">op:dateTime-less-than(xs:dateTime($arg1), xs:dateTime($arg2))
</ins></pre>
<del class="diff-old">10.4.10.1
</del>
</div>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:date-less-than(xs:date("2004-12-25Z"),
xs:date("2004-12-25-05:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:date-less-than(xs:date("2004-12-25-12:00"),
xs:date("2004-12-26+12:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-date-greater-than" id= "func-date-greater-than">
</a>
<del class="diff-old">10.4.11
</del>
<ins class="diff-chg">9.4.6
</ins>
op:date-greater-than
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
and
only
if
the
starting
instant
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
is
greater
than
the
starting
instant
of
</ins><code><ins class="diff-new">
$arg2
</ins></code>.<ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
false
</ins></code><ins class="diff-new">
otherwise.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"gt"
operator
on
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ge"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:date-greater-than
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:date
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:date
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
starting
instant
of
$arg1
is
greater
than
the
starting
instant
of
$arg2
.
Returns
false
otherwise.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
<del class="diff-old">starting
instant
of
an
</del>
<ins class="diff-chg">function
call
</ins>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">op:date-greater-than($A,
$B)
</ins>
</code>
is
<ins class="diff-new">defined
to
return
</ins>
the
<del class="diff-old">xs:dateTime
at
time
00:00:00
on
that
date.
The
two
starting
instants
are
compared
using
op:dateTime-greater-than
</del>
<ins class="diff-chg">same
result
as
</ins><a href= "#func-date-less-than">
<del class="diff-old">.
This
function
backs
up
the
"gt"
and
"ge"
operators
on
</del>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">op:date-less-than($B,
$A)
</ins>
</code>
<del class="diff-old">values.
</del>
</a>
<del class="diff-old">10.4.11.1
</del>
</p>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:date-greater-than(xs:date("2004-12-25Z"),
xs:date("2004-12-25+07:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:date-greater-than(xs:date("2004-12-25-12:00"),
xs:date("2004-12-26+12:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-time-equal" id="func-time-equal">
</a>
<del class="diff-old">10.4.12
</del>
<ins class="diff-chg">9.4.7
</ins>
op:time-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
the
two
</ins><code><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
values
represent
the
same
instant
in
time,
when
treated
as
being
times
on
the
same
date,
before
adjusting
the
timezone.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
operator
on
</ins><code><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ne",
"le"
and
"ge"
operators.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:time-equal
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:time
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:time
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
value
</del>
<ins class="diff-chg">Each
</ins>
of
<del class="diff-old">$arg1
converted
to
an
xs:dateTime
using
the
date
components
from
</del>
the
<del class="diff-old">reference
</del>
<ins class="diff-chg">supplied
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:time
</ins>
</code>
<ins class="diff-new">values
</ins>
is
<del class="diff-old">equal
to
the
value
of
$arg2
converted
</del>
<ins class="diff-chg">expanded
</ins>
to
an
<code>
xs:dateTime
</code>
<del class="diff-old">using
the
date
components
from
</del>
<ins class="diff-chg">value
by
associating
</ins>
the
<del class="diff-old">same
reference
xs:dateTime
.
Returns
false
otherwise.
</del>
<ins class="diff-chg">time
with
an
arbitrary
date.
</ins>
The
<ins class="diff-new">function
returns
the
result
of
comparing
these
</ins>
two
<code>
xs:dateTime
</code>
values
<del class="diff-old">are
compared
</del>
using
<a href= "#func-dateTime-equal">
<code>
op:dateTime-equal
</code>
</a>.
</p>
<p>
<del class="diff-old">This
</del>
<ins class="diff-chg">The
result
of
the
</ins>
function
<del class="diff-old">backs
up
</del>
<ins class="diff-chg">is
thus
</ins>
the
<del class="diff-old">"eq",
"ne",
"le"
and
"ge"
operators
on
xs:time
values.
</del>
<ins class="diff-chg">same
as
the
value
of
the
expression:
</ins>
</p>
<div class="exampleInner">
<pre>
<ins class="diff-chg">op:dateTime-equal(
        fn:dateTime(xs:date('1972-12-31'), $arg1), 
        fn:dateTime(xs:date('1972-12-31'), $arg2))
</ins></pre>
<del class="diff-old">10.4.12.1
</del>
</div>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
date
components
from
the
reference
<code>
xs:dateTime
</code>
correspond
to
<code>
1972-12-31
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:time-equal(xs:time("08:00:00+09:00"),
xs:time("17:00:00-06:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
<del class="diff-old">The
</del>
<em>
<ins class="diff-chg">(The
</ins>
<code>
xs:dateTime
</code>
s
calculated
using
the
reference
date
components
are
<code>
1972-12-31T08:00:00+09:00
</code>
and
<code>
1972-12-31T17:00:00-06:00
</code>.
These
normalize
to
<code>
1972-12-30T23:00:00Z
</code>
and
<code>
1972-12-31T23:00:00
</code>.
<ins class="diff-new">).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:time-equal(xs:time("21:30:00+10:30"),
xs:time("06:00:00-05:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:time-equal(xs:time("24:00:00+01:00"),
xs:time("00:00:00+01:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
<del class="diff-old">This
</del>
<em>
<ins class="diff-chg">(This
</ins>
not
the
result
one
might
expect.
For
<code>
xs:dateTime
</code>
values,
a
time
of
<code>
24:00:00
</code>
is
equivalent
to
<code>
00:00:00
</code>
on
the
following
day.
For
<code>
xs:time
</code>,
the
normalization
from
<code>
24:00:00
</code>
to
<code>
00:00:00
</code>
happens
before
the
<code>
xs:time
</code>
is
converted
into
an
<code>
xs:dateTime
</code>
for
the
purpose
of
the
equality
comparison.
For
<code>
xs:time
</code>,
any
operation
on
<code>
24:00:00
</code>
produces
the
same
result
as
the
same
operation
on
<code>
00:00:00
</code>
because
these
are
two
different
lexical
representations
of
the
same
value.
<ins class="diff-new">).
</ins></em>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-time-less-than" id= "func-time-less-than">
</a>
<del class="diff-old">10.4.13
</del>
<ins class="diff-chg">9.4.8
</ins>
op:time-less-than
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
the
first
</ins><code><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
value
represents
an
earlier
instant
in
time
than
the
second,
when
both
are
treated
as
being
times
on
the
same
date,
before
adjusting
the
timezone.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"lt"
operator
on
</ins><code><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"le"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:time-less-than
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:time
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:time
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
value
</del>
<ins class="diff-chg">Each
</ins>
of
<del class="diff-old">$arg1
converted
to
an
xs:dateTime
using
</del>
the
<del class="diff-old">date
components
from
the
reference
</del>
<ins class="diff-chg">supplied
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:time
</ins>
</code>
<ins class="diff-new">values
</ins>
is
<del class="diff-old">less
than
the
normalized
value
of
$arg2
converted
</del>
<ins class="diff-chg">expanded
</ins>
to
an
<code>
xs:dateTime
</code>
<del class="diff-old">using
the
date
components
from
</del>
<ins class="diff-chg">value
by
associating
</ins>
the
<del class="diff-old">same
reference
xs:dateTime
.
Returns
false
otherwise.
</del>
<ins class="diff-chg">time
with
an
arbitrary
date.
</ins>
The
<ins class="diff-new">function
returns
the
result
of
comparing
these
</ins>
two
<code>
xs:dateTime
</code>
values
<del class="diff-old">are
compared
</del>
using
<a href= "#func-dateTime-less-than">
<code>
op:dateTime-less-than
</code>
</a>.
</p>
<p>
<del class="diff-old">This
</del>
<ins class="diff-chg">The
result
of
the
</ins>
function
<del class="diff-old">backs
up
</del>
<ins class="diff-chg">is
thus
</ins>
the
<del class="diff-old">"lt"
and
"le"
operators
on
xs:time
values.
</del>
<ins class="diff-chg">same
as
the
value
of
the
expression:
</ins>
</p>
<div class="exampleInner">
<pre>
<ins class="diff-chg">op:dateTime-less-than(
        fn:dateTime(xs:date('1972-12-31'), $arg1), 
        fn:dateTime(xs:date('1972-12-31'), $arg2))
</ins></pre>
<del class="diff-old">10.4.13.1
</del>
</div>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
-05:00
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:time-less-than(xs:time("12:00:00"),
xs:time("23:00:00+06:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:time-less-than(xs:time("11:00:00"),
xs:time("17:00:00Z"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:time-less-than(xs:time("23:59:59"),
xs:time("24:00:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-time-greater-than" id= "func-time-greater-than">
</a>
<del class="diff-old">10.4.14
</del>
<ins class="diff-chg">9.4.9
</ins>
op:time-greater-than
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
the
first
</ins><code><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
value
represents
a
later
instant
in
time
than
the
second,
when
both
are
treated
as
being
times
on
the
same
date,
before
adjusting
the
timezone.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"gt"
operator
on
</ins><code><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ge"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:time-greater-than
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:time
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:time
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
value
of
$arg1
converted
to
an
xs:dateTime
using
the
date
components
from
the
reference
</del>
<ins class="diff-chg">The
function
call
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">op:time-greater-than($A,
$B)
</ins>
</code>
is
<del class="diff-old">greater
than
the
value
of
$arg2
converted
</del>
<ins class="diff-chg">defined
</ins>
to
<del class="diff-old">an
xs:dateTime
using
the
date
components
from
</del>
<ins class="diff-chg">return
</ins>
the
same
<del class="diff-old">reference
xs:dateTime
.
Returns
false
otherwise.
The
two
xs:dateTime
values
are
compared
using
op:dateTime-greater-than
</del>
<ins class="diff-chg">result
as
</ins><a href= "#func-time-less-than">
<del class="diff-old">.
This
function
backs
up
the
"gt"
and
"ge"
operators
on
</del>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">op:time-less-than($B,
$A)
</ins>
</code>
<del class="diff-old">values.
</del>
</a>
<del class="diff-old">10.4.14.1
</del>
</p>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:time-greater-than(xs:time("08:00:00+09:00"),
xs:time("17:00:00-06:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-gYearMonth-equal" id= "func-gYearMonth-equal">
</a>
<del class="diff-old">10.4.15
</del>
<ins class="diff-chg">9.4.10
</ins>
op:gYearMonth-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
two
</ins><code><ins class="diff-new">
xs:gYearMonth
</ins></code><ins class="diff-new">
values
have
the
same
starting
instant.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
operator
on
</ins><code><ins class="diff-new">
xs:gYearMonth
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ne"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:gYearMonth-equal
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:gYearMonth
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:gYearMonth
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
xs:dateTime
s
representing
the
starting
instants
of
$arg1
and
$arg2
compare
equal.
</del>
The
starting
instants
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
are
calculated
by
<del class="diff-old">adding
</del>
<ins class="diff-chg">supplying
</ins>
the
missing
components
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
from
the
<code>
xs:dateTime
</code>
template
<code>
<del class="diff-old">xxxx-xx-ddT00:00:00
where
dd
represents
the
last
day
of
the
month
component
in
$arg1
or
$arg2
</del>
<ins class="diff-chg">xxxx-xx-01T00:00:00
</ins>
</code>.
<del class="diff-old">Returns
false
otherwise.
</del>
The
<del class="diff-old">two
xs:dateTime
values
representing
</del>
<ins class="diff-chg">function
returns
</ins>
the
<ins class="diff-new">result
of
comparing
these
two
</ins>
starting
instants
<del class="diff-old">of
$arg1
and
$arg2
are
compared
</del>
using
<a href= "#func-dateTime-equal">
<code>
op:dateTime-equal
</code>
</a>.
</p>
<del class="diff-old">This
function
backs
up
the
"eq"
and
"ne"
operators
on
xs:gYearMonth
values.
10.4.15.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
-05:00
</code>.
</p>
<p>
<code>
<del class="diff-old">op:gYearMonth-equal(xs:gYearMonth("1976-02"),
xs:gYearMonth("1976-03Z"))
</del>
<ins class="diff-chg">op:gYearMonth-equal(xs:gYearMonth("1986-02"),
xs:gYearMonth("1986-03"))
</ins>
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
The
starting
instants
are
<code>
<del class="diff-old">1972-02-29T00:00:00-05:00
</del>
<ins class="diff-chg">1986-02-01T00:00:00-05:00
</ins>
</code>
and
<code>
<del class="diff-old">1972-03-31T00:00:00Z
</del>
<ins class="diff-chg">1986-03-01T00:00:00
</ins>
</code>,
respectively.
</p>
<p>
<code>
<del class="diff-old">op:gYearMonth-equal(xs:gYearMonth("1976-03"),
xs:gYearMonth("1976-03Z"))
</del>
<ins class="diff-chg">op:gYearMonth-equal(xs:gYearMonth("1978-03"),
xs:gYearMonth("1986-03Z"))
</ins>
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
<ins class="diff-new">The
starting
instants
are
</ins><code><ins class="diff-new">
1986-03-01T00:00:00-05:00
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
1986-03-01T00:00:00Z
</ins></code>,<ins class="diff-new">
respectively.
</ins>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-gYear-equal" id="func-gYear-equal">
</a>
<del class="diff-old">10.4.16
</del>
<ins class="diff-chg">9.4.11
</ins>
op:gYear-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
two
</ins><code><ins class="diff-new">
xs:gYear
</ins></code><ins class="diff-new">
values
have
the
same
starting
instant.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
operator
on
</ins><code><ins class="diff-new">
xs:gYear
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ne"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:gYear-equal
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:gYear
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:gYear
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
xs:dateTime
s
representing
the
starting
instants
of
$arg1
and
$arg2
compare
equal.
</del>
The
starting
instants
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
are
calculated
by
<del class="diff-old">adding
</del>
<ins class="diff-chg">supplying
</ins>
the
missing
components
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
from
<del class="diff-old">a
</del>
<ins class="diff-chg">the
</ins>
<code>
xs:dateTime
</code>
template
<del class="diff-old">such
as
</del>
<code>
xxxx-01-01T00:00:00
</code>.
<del class="diff-old">Returns
false
otherwise.
</del>
The
<del class="diff-old">two
xs:dateTime
values
representing
</del>
<ins class="diff-chg">function
returns
</ins>
the
<ins class="diff-new">result
of
comparing
these
two
</ins>
starting
instants
<del class="diff-old">of
$arg1
and
$arg2
are
compared
</del>
using
<a href= "#func-dateTime-equal">
<code>
op:dateTime-equal
</code>
</a>.
</p>
<del class="diff-old">This
function
backs
up
the
"eq"
and
"ne"
operators
on
xs:gYear
values.
10.4.16.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
-05:00
</code>.
Assume,
also,
that
the
<code>
xs:dateTime
</code>
template
is
<code>
xxxx-01-01T00:00:00
</code>.
</p>
<p>
<code>
op:gYear-equal(xs:gYear("2005-12:00"),
xs:gYear("2005+12:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
The
starting
instants
are
<code>
2005-01-01T00:00:00-12:00
</code>
and
<code>
2005-01-01T00:00:00+12:00
</code>,
respectively,
and
normalize
to
<code>
<del class="diff-old">2005-01-015T12:00:00Z
</del>
<ins class="diff-chg">2005-01-01T12:00:00Z
</ins>
</code>
and
<code>
2004-12-31T12:00:00Z
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:gYear-equal(xs:gYear("1976-05:00"),
xs:gYear("1976"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-gMonthDay-equal" id= "func-gMonthDay-equal">
</a>
<del class="diff-old">10.4.17
</del>
<ins class="diff-chg">9.4.12
</ins>
op:gMonthDay-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
two
</ins><code><ins class="diff-new">
xs:gMonthDay
</ins></code><ins class="diff-new">
values
have
the
same
starting
instant,
when
considered
as
days
in
the
same
year.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
operator
on
</ins><code><ins class="diff-new">
xs:gMonthDay
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ne"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:gMonthDay-equal
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:gMonthDay
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:gMonthDay
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Summary:
Returns
true
if
and
only
if
the
xs:dateTime
s
representing
the
starting
instants
of
equivalent
occurrences
of
$arg1
and
$arg2
compare
equal.
</del>
The
starting
instants
of
<del class="diff-old">equivalent
occurrences
of
</del>
<code>
$arg1
</code>
and
<code>
$arg2
</code>
are
calculated
by
<del class="diff-old">adding
</del>
<ins class="diff-chg">supplying
</ins>
the
missing
components
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
from
<del class="diff-old">an
</del>
<ins class="diff-chg">the
</ins>
<code>
xs:dateTime
</code>
template
<del class="diff-old">such
as
</del>
<code>
1972-xx-xxT00:00:00
<del class="diff-old">.
Returns
false
</del>
</code>
<del class="diff-old">otherwise.
</del>
<ins class="diff-chg">or
an
equivalent.
</ins>
The
<del class="diff-old">two
xs:dateTime
values
representing
</del>
<ins class="diff-chg">function
returns
</ins>
the
<ins class="diff-new">result
of
comparing
these
two
</ins>
starting
instants
<del class="diff-old">of
equivalent
occurrences
of
$arg1
and
$arg2
are
compared
</del>
using
<a href= "#func-dateTime-equal">
<code>
op:dateTime-equal
</code>
</a>.
</p>
<del class="diff-old">This
function
backs
up
the
"eq"
and
"ne"
operators
on
xs:gMonthDay
values.
10.4.17.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
-05:00
</code>.
<del class="diff-old">Assume,
also,
</del>
<ins class="diff-chg">Assume
for
the
purposes
of
illustration
</ins>
that
the
<code>
xs:dateTime
</code>
template
<ins class="diff-new">used
</ins>
is
<code>
<del class="diff-old">1976-xx-xxT00:00:00
.
</del>
<ins class="diff-chg">1972-xx-xxT00:00:00
</ins></code><ins class="diff-chg">
(this
does
not
affect
the
result).
</ins>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:gMonthDay-equal(xs:gMonthDay("--12-25-14:00"),
xs:gMonthDay("--12-26+10:00"))
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
<em>
<ins class="diff-new">(
</ins>
The
starting
instants
are
<code>
<del class="diff-old">1976-12-25T00:00:00-14:00
</del>
<ins class="diff-chg">1972-12-25T00:00:00-14:00
</ins>
</code>
and
<code>
<del class="diff-old">1976-12-26T00:00:00+10:00
</del>
<ins class="diff-chg">1972-12-26T00:00:00+10:00
</ins>
</code>,
respectively,
and
normalize
to
<code>
<del class="diff-old">1976-12-25T14:00:00Z
</del>
<ins class="diff-chg">1972-12-25T14:00:00Z
</ins>
</code>
and
<code>
<del class="diff-old">1976-12-25T14:00:00Z
</del>
<ins class="diff-chg">1972-12-25T14:00:00Z
</ins>
</code>.
<ins class="diff-new">).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:gMonthDay-equal(xs:gMonthDay("--12-25"),
xs:gMonthDay("--12-26Z"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-gMonth-equal" id="func-gMonth-equal">
</a>
<del class="diff-old">10.4.18
</del>
<ins class="diff-chg">9.4.13
</ins>
op:gMonth-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
two
</ins><code><ins class="diff-new">
xs:gMonth
</ins></code><ins class="diff-new">
values
have
the
same
starting
instant,
when
considered
as
months
in
the
same
year.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
operator
on
</ins><code><ins class="diff-new">
xs:gMonth
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ne"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:gMonth-equal
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:gMonth
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:gMonth
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
xs:dateTime
s
representing
the
starting
instants
of
equivalent
occurrences
of
$arg1
and
$arg2
compare
equal.
</del>
The
starting
instants
of
<del class="diff-old">equivalent
occurrences
of
</del>
<code>
$arg1
</code>
and
<code>
$arg2
</code>
are
calculated
by
<del class="diff-old">adding
</del>
<ins class="diff-chg">supplying
</ins>
the
missing
components
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
from
<del class="diff-old">an
</del>
<ins class="diff-chg">the
</ins>
<code>
xs:dateTime
</code>
template
<del class="diff-old">such
as
</del>
<code>
<del class="diff-old">1972-xx-ddT00:00:00
where
dd
represents
the
last
day
of
the
month
component
in
$arg1
</del>
<ins class="diff-chg">1972-xx-01T00:00:00
</ins>
</code>
or
<del class="diff-old">$arg2
.
Returns
false
otherwise.
</del>
<ins class="diff-chg">an
equivalent.
</ins>
The
<del class="diff-old">two
xs:dateTime
values
representing
</del>
<ins class="diff-chg">function
returns
</ins>
the
<ins class="diff-new">result
of
comparing
these
two
</ins>
starting
instants
<del class="diff-old">of
equivalent
occurrences
of
$arg1
and
$arg2
are
compared
</del>
using
<a href= "#func-dateTime-equal">
<code>
op:dateTime-equal
</code>
</a>.
</p>
<del class="diff-old">This
function
backs
up
the
"eq"
and
"ne"
operators
on
xs:gMonth
values.
10.4.18.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
-05:00
</code>.
Assume,
also,
that
the
<code>
xs:dateTime
</code>
template
<ins class="diff-new">chosen
</ins>
is
<code>
<del class="diff-old">1972-xx-29T00:00:00
</del>
<ins class="diff-chg">1972-xx-01T00:00:00
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:gMonth-equal(xs:gMonth("--12-14:00"),
<del class="diff-old">xs:gMonth("--12+10:00")
</del>
<ins class="diff-chg">xs:gMonth("--12+10:00"))
</ins>
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
<em>
<ins class="diff-new">(
</ins>
The
starting
instants
are
<code>
<del class="diff-old">1972-12-29T00:00:00-14:00
</del>
<ins class="diff-chg">1972-12-01T00:00:00-14:00
</ins>
</code>
and
<code>
<del class="diff-old">1972-12-29T00:00:00+10:00
</del>
<ins class="diff-chg">1972-12-01T00:00:00+10:00
</ins>
</code>,
respectively,
and
normalize
to
<code>
<del class="diff-old">1972-12-29T14:00:00Z
</del>
<ins class="diff-chg">1972-11-30T14:00:00Z
</ins>
</code>
and
<code>
<del class="diff-old">1972-12-28T14:00:00Z
</del>
<ins class="diff-chg">1972-12-01T14:00:00Z
</ins>
</code>.
<ins class="diff-new">).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:gMonth-equal(xs:gMonth("--12"),
xs:gMonth("--12Z"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-gDay-equal" id="func-gDay-equal">
</a>
<del class="diff-old">10.4.19
</del>
<ins class="diff-chg">9.4.14
</ins>
op:gDay-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
two
</ins><code><ins class="diff-new">
xs:gDay
</ins></code><ins class="diff-new">
values
have
the
same
starting
instant,
when
considered
as
days
in
the
same
month
of
the
same
year.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
operator
on
</ins><code><ins class="diff-new">
xs:gDay
</ins></code><ins class="diff-new">
values.
Also
used
in
the
definition
of
the
"ne"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:gDay-equal
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:gDay
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:gDay
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
true
if
and
only
if
the
xs:dateTime
s
representing
the
starting
instants
of
equivalent
occurrences
of
$arg1
and
$arg2
compare
equal.
</del>
The
starting
instants
of
<del class="diff-old">equivalent
occurrences
of
</del>
<code>
$arg1
</code>
and
<code>
$arg2
</code>
are
calculated
by
<del class="diff-old">adding
</del>
<ins class="diff-chg">supplying
</ins>
the
missing
components
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
from
<del class="diff-old">an
</del>
<ins class="diff-chg">the
</ins>
<code>
xs:dateTime
</code>
template
<del class="diff-old">such
as
</del>
<code>
1972-12-xxT00:00:00
<del class="diff-old">.
Returns
false
</del>
</code>
<del class="diff-old">otherwise.
</del>
<ins class="diff-chg">or
an
equivalent.
</ins>
The
<del class="diff-old">two
xs:dateTime
values
representing
</del>
<ins class="diff-chg">function
returns
</ins>
the
<ins class="diff-new">result
of
comparing
these
two
</ins>
starting
instants
<del class="diff-old">of
equivalent
occurrences
of
$arg1
and
$arg2
are
compared
</del>
using
<a href= "#func-dateTime-equal">
<code>
op:dateTime-equal
</code>
</a>.
</p>
<del class="diff-old">This
function
backs
up
the
"eq"
and
"ne"
operators
on
xs:gDay
values.
10.4.19.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
-05:00
</code>.
Assume,
also,
that
the
<code>
xs:dateTime
</code>
template
is
<code>
<del class="diff-old">1976-12-xxT00:00:00
</del>
<ins class="diff-chg">1972-12-xxT00:00:00
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:gDay-equal(xs:gDay("---25-14:00"),
xs:gDay("---25+10:00"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
<em>
<ins class="diff-new">(
</ins>
The
starting
instants
are
<code>
1972-12-25T00:00:00-14:00
</code>
and
<code>
1972-12-25T00:00:00+10:00
</code>,
respectively,
and
normalize
to
<code>
1972-12-25T14:00:00Z
</code>
and
<code>
1972-12-24T14:00:00Z
</code>.
<ins class="diff-new">).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:gDay-equal(xs:gDay("---12"),
xs:gDay("---12Z"))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="component-extraction-dateTime" id= "component-extraction-dateTime">
</a>
<del class="diff-old">10.5
</del>
<ins class="diff-chg">9.5
</ins>
Component
Extraction
Functions
on
<del class="diff-old">Durations,
</del>
Dates
and
Times
</h3>
<p>
The
<del class="diff-old">duration,
</del>
date
and
time
datatypes
may
be
considered
to
be
composite
datatypes
in
that
they
contain
distinct
properties
or
components.
The
extraction
functions
specified
below
extract
a
single
component
from
a
<del class="diff-old">duration,
</del>
date
or
time
value.
<del class="diff-old">For
the
date/time
datatypes
</del>
<ins class="diff-chg">In
all
cases
</ins>
the
local
value
<ins class="diff-new">(that
is,
the
original
value
as
written,
without
any
timezone
adjustment)
</ins>
is
used.
<del class="diff-old">For
</del>
</p>
<div class="note">
<p class="prefix">
<b>
<ins class="diff-chg">Note:
</ins></b></p><p><ins class="diff-chg">
A
time
written
as
</ins>
<code>
<del class="diff-old">xs:duration
</del>
<ins class="diff-chg">24:00:00
</ins>
</code>
<del class="diff-old">and
its
subtypes,
including
the
two
subtypes
</del>
<ins class="diff-chg">is
treated
as
</ins>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">00:00:00
</ins>
</code>
<del class="diff-old">and
xs:dayTimeDuration
,
the
components
are
normalized:
this
means
that
the
seconds
and
minutes
components
will
always
be
less
than
60,
the
hours
component
less
than
24,
and
</del>
<ins class="diff-chg">on
</ins>
the
<del class="diff-old">months
component
less
than
12.
</del>
<ins class="diff-chg">following
day.
</ins>
</p>
</div>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<del class="diff-old">fn:years-from-duration
Returns
the
year
component
of
an
xs:duration
value.
fn:months-from-duration
Returns
the
months
component
of
an
xs:duration
value.
fn:days-from-duration
Returns
the
days
component
of
an
xs:duration
value.
fn:hours-from-duration
Returns
the
hours
component
of
an
xs:duration
value.
fn:minutes-from-duration
Returns
the
minutes
component
of
an
xs:duration
value.
fn:seconds-from-duration
Returns
the
seconds
component
of
an
xs:duration
value.
</del>
<a href= "#func-year-from-dateTime">
<code>
fn:year-from-dateTime
</code>
</a>
</td>
<td>
Returns
the
year
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:dateTime
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-month-from-dateTime">
<code>
fn:month-from-dateTime
</code>
</a>
</td>
<td>
Returns
the
month
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:dateTime
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-day-from-dateTime">
<code>
fn:day-from-dateTime
</code>
</a>
</td>
<td>
Returns
the
day
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:dateTime
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-hours-from-dateTime">
<code>
fn:hours-from-dateTime
</code>
</a>
</td>
<td>
Returns
the
hours
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:dateTime
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-minutes-from-dateTime">
<code>
fn:minutes-from-dateTime
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">minutes
from
</del>
<ins class="diff-chg">minute
component
of
</ins>
an
<code>
xs:dateTime
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-seconds-from-dateTime">
<code>
fn:seconds-from-dateTime
</code>
</a>
</td>
<td>
Returns
the
seconds
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:dateTime
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-timezone-from-dateTime">
<code>
fn:timezone-from-dateTime
</code>
</a>
</td>
<td>
Returns
the
timezone
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:dateTime
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-year-from-date">
<code>
fn:year-from-date
</code>
</a>
</td>
<td>
Returns
the
year
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:date
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-month-from-date">
<code>
fn:month-from-date
</code>
</a>
</td>
<td>
Returns
the
month
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:date
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-day-from-date">
<code>
fn:day-from-date
</code>
</a>
</td>
<td>
Returns
the
day
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:date
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-timezone-from-date">
<code>
fn:timezone-from-date
</code>
</a>
</td>
<td>
Returns
the
timezone
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:date
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-hours-from-time">
<code>
fn:hours-from-time
</code>
</a>
</td>
<td>
Returns
the
hours
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:time
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-minutes-from-time">
<code>
fn:minutes-from-time
</code>
</a>
</td>
<td>
Returns
the
minutes
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:time
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-seconds-from-time">
<code>
fn:seconds-from-time
</code>
</a>
</td>
<td>
Returns
the
seconds
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:time
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-timezone-from-time">
<code>
fn:timezone-from-time
</code>
</a>
</td>
<td>
Returns
the
timezone
<del class="diff-old">from
</del>
<ins class="diff-chg">component
of
</ins>
an
<code>
xs:time
<del class="diff-old">value.
</del>
</code>.
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-year-from-dateTime" id= "func-year-from-dateTime">
</a>
<del class="diff-old">10.5.1
fn:years-from-duration
</del>
<ins class="diff-chg">9.5.1
fn:year-from-dateTime
</ins>
</h4>
<del class="diff-old">fn:years-from-duration
(
$arg
&#160;as&#160;
xs:duration?
)
&#160;as&#160;
xs:integer?
</del>
<dl>
<dt class="label">
<ins class="diff-chg">Summary
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
<del class="diff-old">an
xs:integer
representing
</del>
the
<del class="diff-old">years
</del>
<ins class="diff-chg">year
</ins>
component
<del class="diff-old">in
the
value
</del>
of
<del class="diff-old">$arg
.
The
result
is
obtained
by
casting
$arg
to
</del>
an
<code>
<del class="diff-old">xs:yearMonthDuration
(see
17.1.4
Casting
to
duration
types
)
and
then
computing
the
years
component
as
described
in
10.3.1.3
Canonical
representation
.
The
result
may
be
negative.
If
$arg
is
an
xs:dayTimeDuration
returns
0.
If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.1.1
Examples
fn:years-from-duration(xs:yearMonthDuration("P20Y15M"))
returns
21
.
fn:years-from-duration(xs:yearMonthDuration("-P15M"))
returns
-1
.
fn:years-from-duration(xs:dayTimeDuration("-P2DT15H"))
returns
0
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>.
</p>
<del class="diff-old">10.5.2
fn:months-from-duration
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
<del class="diff-old">fn:months-from-duration
</del>
<ins class="diff-chg">fn:year-from-dateTime
</ins>
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
<del class="diff-old">xs:duration?
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
an
xs:integer
representing
the
months
component
in
the
value
of
$arg
.
The
result
is
obtained
by
casting
$arg
to
an
xs:yearMonthDuration
(see
17.1.4
Casting
to
duration
types
)
and
then
computing
the
months
component
as
described
in
10.3.1.3
Canonical
representation
.
The
result
may
be
negative.
If
$arg
is
an
xs:dayTimeDuration
returns
0.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
<code>
$arg
</code>
is
the
empty
sequence,
<del class="diff-old">returns
the
empty
sequence.
10.5.2.1
Examples
fn:months-from-duration(xs:yearMonthDuration("P20Y15M"))
returns
3
.
fn:months-from-duration(xs:yearMonthDuration("-P20Y18M"))
returns
-6
.
fn:months-from-duration(xs:dayTimeDuration("-P2DT15H0M0S"))
returns
0
.
10.5.3
fn:days-from-duration
fn:days-from-duration
(
$arg
&#160;as&#160;
xs:duration?
)
&#160;as&#160;
xs:integer?
Summary:
Returns
an
xs:integer
representing
the
days
component
in
the
value
of
$arg
.
The
result
is
obtained
by
casting
$arg
to
an
xs:dayTimeDuration
(see
17.1.4
Casting
to
duration
types
)
and
then
computing
</del>
the
<del class="diff-old">days
component
as
described
in
10.3.2.3
Canonical
representation
.
The
result
may
be
negative.
If
$arg
is
an
xs:yearMonthDuration
returns
0.
If
$arg
is
the
empty
sequence,
</del>
<ins class="diff-chg">function
</ins>
returns
the
empty
sequence.
</p>
<del class="diff-old">10.5.3.1
Examples
fn:days-from-duration(xs:dayTimeDuration("P3DT10H"))
returns
3
.
fn:days-from-duration(xs:dayTimeDuration("P3DT55H"))
returns
5
.
</del>
<p>
<del class="diff-old">fn:days-from-duration(xs:yearMonthDuration("P3Y5M"))
</del>
<ins class="diff-chg">Otherwise,
the
function
</ins>
returns
<del class="diff-old">0
.
10.5.4
fn:hours-from-duration
fn:hours-from-duration
(
$arg
&#160;as&#160;
xs:duration?
)
&#160;as&#160;
xs:integer?
Summary:
Returns
</del>
an
<code>
xs:integer
</code>
representing
the
<del class="diff-old">hours
</del>
<ins class="diff-chg">year
</ins>
component
in
the
<ins class="diff-new">local
</ins>
value
of
<code>
$arg
</code>.
The
result
<del class="diff-old">is
obtained
by
casting
$arg
to
an
xs:dayTimeDuration
(see
17.1.4
Casting
to
duration
types
)
and
then
computing
the
hours
component
as
described
in
10.3.2.3
Canonical
representation
.
The
result
</del>
may
be
negative.
</p>
<del class="diff-old">If
$arg
is
an
xs:yearMonthDuration
returns
0.
If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.4.1
</del>
</dd>
<dt class="label">
Examples
<del class="diff-old">fn:hours-from-duration(xs:dayTimeDuration("P3DT10H"))
returns
10
.
fn:hours-from-duration(xs:dayTimeDuration("P3DT12H32M12S"))
returns
12
.
</del>
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:hours-from-duration(xs:dayTimeDuration("PT123H"))
</del>
<ins class="diff-chg">fn:year-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))
</ins>
</code>
returns
<code>
<del class="diff-old">3
</del>
<ins class="diff-chg">1999
</ins>
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:hours-from-duration(xs:dayTimeDuration("-P3DT10H"))
</del>
<ins class="diff-chg">fn:year-from-dateTime(xs:dateTime("1999-05-31T21:30:00-05:00"))
</ins>
</code>
returns
<code>
<del class="diff-old">-10
</del>
<ins class="diff-chg">1999
</ins>
</code>.
</p>
<del class="diff-old">10.5.5
fn:minutes-from-duration
fn:minutes-from-duration
(
$arg
&#160;as&#160;
xs:duration?
)
&#160;as&#160;
xs:integer?
</del>
<p>
<del class="diff-old">Summary:
Returns
an
xs:integer
representing
the
minutes
component
in
the
value
of
$arg
.
</del>
The
<del class="diff-old">result
is
obtained
by
casting
$arg
to
an
xs:dayTimeDuration
(see
17.1.4
Casting
to
duration
types
)
and
then
computing
the
minutes
component
as
described
in
10.3.2.3
Canonical
representation
.
The
result
may
be
negative.
If
$arg
is
an
xs:yearMonthDuration
returns
0.
If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.5.1
Examples
</del>
<ins class="diff-chg">expression
</ins>
<code>
<del class="diff-old">fn:minutes-from-duration(xs:dayTimeDuration("P3DT10H"))
</del>
<ins class="diff-chg">fn:year-from-dateTime(xs:dateTime("1999-12-31T19:20:00"))
</ins>
</code>
returns
<code>
<del class="diff-old">0
</del>
<ins class="diff-chg">1999
</ins>
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:minutes-from-duration(xs:dayTimeDuration("-P5DT12H30M"))
</del>
<ins class="diff-chg">fn:year-from-dateTime(xs:dateTime("1999-12-31T24:00:00"))
</ins>
</code>
returns
<code>
<del class="diff-old">-30
</del>
<ins class="diff-chg">2000
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-month-from-dateTime" id= "func-month-from-dateTime">
</a>
<del class="diff-old">10.5.6
fn:seconds-from-duration
</del>
<ins class="diff-chg">9.5.2
fn:month-from-dateTime
</ins>
</h4>
<del class="diff-old">fn:seconds-from-duration
(
$arg
&#160;as&#160;
xs:duration?
)
&#160;as&#160;
xs:decimal?
</del>
<dl>
<dt class="label">
<ins class="diff-chg">Summary
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
<del class="diff-old">an
xs:decimal
representing
</del>
the
<del class="diff-old">seconds
</del>
<ins class="diff-chg">month
</ins>
component
<del class="diff-old">in
the
value
</del>
of
<del class="diff-old">$arg
.
The
result
is
obtained
by
casting
$arg
to
an
xs:dayTimeDuration
(see
17.1.4
Casting
to
duration
types
)
and
then
computing
the
seconds
component
as
described
in
10.3.2.3
Canonical
representation
.
The
result
may
be
negative.
If
$arg
is
</del>
an
<code>
<del class="diff-old">xs:yearMonthDuration
returns
0.
If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.6.1
Examples
fn:seconds-from-duration(xs:dayTimeDuration("P3DT10H12.5S"))
returns
12.5
.
fn:seconds-from-duration(xs:dayTimeDuration("-P256S"))
returns
-16.0
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>.
</p>
<del class="diff-old">10.5.7
fn:year-from-dateTime
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
<del class="diff-old">fn:year-from-dateTime
</del>
<ins class="diff-chg">fn:month-from-dateTime
</ins>
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
an
xs:integer
representing
the
year
component
in
the
localized
value
of
$arg
.
The
result
may
be
negative.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
<code>
$arg
</code>
is
the
empty
sequence,
<ins class="diff-new">the
function
</ins>
returns
the
empty
sequence.
</p>
<del class="diff-old">10.5.7.1
Examples
fn:year-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))
returns
1999
.
fn:year-from-dateTime(xs:dateTime("1999-05-31T21:30:00-05:00"))
returns
1999
.
fn:year-from-dateTime(xs:dateTime("1999-12-31T19:20:00"))
returns
1999
.
</del>
<p>
<del class="diff-old">fn:year-from-dateTime(xs:dateTime("1999-12-31T24:00:00"))
</del>
<ins class="diff-chg">Otherwise,
the
function
</ins>
returns
<del class="diff-old">2000
.
10.5.8
fn:month-from-dateTime
fn:month-from-dateTime
(
$arg
&#160;as&#160;
xs:dateTime?
)
&#160;as&#160;
xs:integer?
Summary:
Returns
</del>
an
<code>
xs:integer
</code>
between
1
and
12,
both
inclusive,
representing
the
month
component
in
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.8.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:month-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))
</code>
returns
<code>
5
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:month-from-dateTime(xs:dateTime("1999-12-31T19:20:00-05:00"))
</code>
returns
<code>
12
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:month-from-dateTime(fn:adjust-dateTime-to-timezone(xs:dateTime("1999-12-31T19:20:00-05:00"),
xs:dayTimeDuration("PT0S")))
</code>
returns
<code>
1
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-day-from-dateTime" id= "func-day-from-dateTime">
</a>
<del class="diff-old">10.5.9
</del>
<ins class="diff-chg">9.5.3
</ins>
fn:day-from-dateTime
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
day
component
of
an
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:day-from-dateTime
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:integer
</code>
between
1
and
31,
both
inclusive,
representing
the
day
component
in
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.9.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:day-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))
</code>
returns
<code>
31
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:day-from-dateTime(xs:dateTime("1999-12-31T20:00:00-05:00"))
</code>
returns
<code>
31
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:day-from-dateTime(fn:adjust-dateTime-to-timezone(xs:dateTime("1999-12-31T19:20:00-05:00"),
xs:dayTimeDuration("PT0S")))
</code>
returns
<code>
1
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-hours-from-dateTime" id= "func-hours-from-dateTime">
</a>
<del class="diff-old">10.5.10
</del>
<ins class="diff-chg">9.5.4
</ins>
fn:hours-from-dateTime
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
hours
component
of
an
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:hours-from-dateTime
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:integer
</code>
between
0
and
23,
both
inclusive,
representing
the
hours
component
in
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.10.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:hours-from-dateTime(xs:dateTime("1999-05-31T08:20:00-05:00"))
</code>
returns
<code>
8
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:hours-from-dateTime(xs:dateTime("1999-12-31T21:20:00-05:00"))
</code>
returns
<code>
21
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:hours-from-dateTime(fn:adjust-dateTime-to-timezone(xs:dateTime("1999-12-31T21:20:00-05:00"),
xs:dayTimeDuration("PT0S")))
</code>
returns
<code>
2
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:hours-from-dateTime(xs:dateTime("1999-12-31T12:00:00"))
</code>
returns
<code>
12
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:hours-from-dateTime(xs:dateTime("1999-12-31T24:00:00"))
</code>
returns
<code>
0
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-minutes-from-dateTime" id= "func-minutes-from-dateTime">
</a>
<del class="diff-old">10.5.11
</del>
<ins class="diff-chg">9.5.5
</ins>
fn:minutes-from-dateTime
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
minute
component
of
an
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:minutes-from-dateTime
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:integer
</code>
value
between
0
and
59,
both
inclusive,
representing
the
minute
component
in
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.11.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:minutes-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))
</code>
returns
<code>
20
<del class="diff-old">.
</del>
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:minutes-from-dateTime(xs:dateTime("1999-05-31T13:30:00+05:30"))
</code>
returns
<code>
30
<del class="diff-old">.
</del>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-seconds-from-dateTime" id= "func-seconds-from-dateTime">
</a>
<del class="diff-old">10.5.12
</del>
<ins class="diff-chg">9.5.6
</ins>
fn:seconds-from-dateTime
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
seconds
component
of
an
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:seconds-from-dateTime
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:decimal?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:decimal
</code>
value
greater
than
or
equal
to
zero
and
less
than
60,
representing
the
seconds
and
fractional
seconds
in
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.12.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:seconds-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))
</code>
returns
<code>
0
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-timezone-from-dateTime" id= "func-timezone-from-dateTime">
</a>
<del class="diff-old">10.5.13
</del>
<ins class="diff-chg">9.5.7
</ins>
fn:timezone-from-dateTime
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
timezone
component
of
an
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:timezone-from-dateTime
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:dayTimeDuration?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
the
timezone
component
of
<code>
$arg
</code>,
if
any.
If
<code>
$arg
</code>
has
a
timezone
component,
then
the
result
is
an
<code>
xs:dayTimeDuration
</code>
that
indicates
deviation
from
UTC;
its
value
may
range
from
+14:00
to
-14:00
hours,
both
inclusive.
<del class="diff-old">Otherwise,
the
result
is
the
empty
sequence.
</del>
If
<code>
$arg
</code>
<del class="diff-old">is
</del>
<ins class="diff-chg">has
no
timezone
component,
</ins>
the
<del class="diff-old">empty
sequence,
returns
</del>
<ins class="diff-chg">result
is
</ins>
the
empty
sequence.
</p>
<del class="diff-old">10.5.13.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:timezone-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))
</code>
returns
<del class="diff-old">the
xs:dayTimeDuration
whose
value
is
</del>
<code>
<del class="diff-old">-PT5H
</del>
<ins class="diff-chg">xs:dayTimeDuration("-PT5H")
</ins>
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:timezone-from-dateTime(xs:dateTime("2000-06-12T13:20:00Z"))
</code>
returns
<del class="diff-old">the
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
whose
value
is
PT0S
</del>
<ins class="diff-chg">xs:dayTimeDuration("PT0S")
</ins>
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:timezone-from-dateTime(xs:dateTime("2004-08-27T00:00:00"))
</code>
returns
<code>
()
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-year-from-date" id= "func-year-from-date">
</a>
<del class="diff-old">10.5.14
</del>
<ins class="diff-chg">9.5.8
</ins>
fn:year-from-date
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
year
component
of
an
</ins><code><ins class="diff-new">
xs:date
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:year-from-date
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:date?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:integer
</code>
representing
the
year
in
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>.
The
value
may
be
negative.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.14.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:year-from-date(xs:date("1999-05-31"))
</code>
returns
<code>
1999
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:year-from-date(xs:date("2000-01-01+05:00"))
</code>
returns
<code>
2000
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-month-from-date" id= "func-month-from-date">
</a>
<del class="diff-old">10.5.15
</del>
<ins class="diff-chg">9.5.9
</ins>
fn:month-from-date
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
month
component
of
an
</ins><code><ins class="diff-new">
xs:date
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:month-from-date
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:date?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:integer
</code>
between
1
and
12,
both
inclusive,
representing
the
month
component
in
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.15.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:month-from-date(xs:date("1999-05-31-05:00"))
</code>
returns
<code>
5
<del class="diff-old">.
</del>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:month-from-date(xs:date("2000-01-01+05:00"))
</code>
returns
<code>
1
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-day-from-date" id="func-day-from-date">
</a>
<del class="diff-old">10.5.16
</del>
<ins class="diff-chg">9.5.10
</ins>
fn:day-from-date
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
day
component
of
an
</ins><code><ins class="diff-new">
xs:date
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:day-from-date
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:date?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:integer
</code>
between
1
and
31,
both
inclusive,
representing
the
day
component
in
the
localized
value
of
<code>
$arg
</code>.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.16.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:day-from-date(xs:date("1999-05-31-05:00"))
</code>
returns
<code>
31
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:day-from-date(xs:date("2000-01-01+05:00"))
</code>
returns
<code>
1
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-timezone-from-date" id= "func-timezone-from-date">
</a>
<del class="diff-old">10.5.17
</del>
<ins class="diff-chg">9.5.11
</ins>
fn:timezone-from-date
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
timezone
component
of
an
</ins><code><ins class="diff-new">
xs:date
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:timezone-from-date
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:date?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:dayTimeDuration?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
the
timezone
component
of
<code>
$arg
</code>,
if
any.
If
<code>
$arg
</code>
has
a
timezone
component,
then
the
result
is
an
<code>
xs:dayTimeDuration
</code>
that
indicates
deviation
from
UTC;
its
value
may
range
from
+14:00
to
-14:00
hours,
both
inclusive.
<del class="diff-old">Otherwise,
the
result
is
the
empty
sequence.
</del>
If
<code>
$arg
</code>
<del class="diff-old">is
</del>
<ins class="diff-chg">has
no
timezone
component,
</ins>
the
<del class="diff-old">empty
sequence,
returns
</del>
<ins class="diff-chg">result
is
</ins>
the
empty
sequence.
</p>
<del class="diff-old">10.5.17.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:timezone-from-date(xs:date("1999-05-31-05:00"))
</code>
returns
<del class="diff-old">the
xs:dayTimeDuration
whose
value
is
</del>
<code>
<del class="diff-old">-PT5H
</del>
<ins class="diff-chg">xs:dayTimeDuration("-PT5H")
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:timezone-from-date(xs:date("2000-06-12Z"))
</code>
returns
<del class="diff-old">the
xs:dayTimeDuration
with
value
</del>
<code>
<del class="diff-old">PT0S
</del>
<ins class="diff-chg">xs:dayTimeDuration("PT0S")
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-hours-from-time" id= "func-hours-from-time">
</a>
<del class="diff-old">10.5.18
</del>
<ins class="diff-chg">9.5.12
</ins>
fn:hours-from-time
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
hours
component
of
an
</ins><code><ins class="diff-new">
xs:time
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:hours-from-time
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:time?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:integer
</code>
between
0
and
23,
both
inclusive,
representing
the
value
of
the
hours
component
in
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.18.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
-05:00
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:hours-from-time(xs:time("11:23:00"))
</code>
returns
<code>
11
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:hours-from-time(xs:time("21:23:00"))
</code>
returns
<code>
21
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:hours-from-time(xs:time("01:23:00+05:00"))
</code>
returns
<code>
1
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:hours-from-time(fn:adjust-time-to-timezone(xs:time("01:23:00+05:00"),
xs:dayTimeDuration("PT0S")))
</code>
returns
<code>
20
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:hours-from-time(xs:time("24:00:00"))
</code>
returns
<code>
0
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-minutes-from-time" id= "func-minutes-from-time">
</a>
<del class="diff-old">10.5.19
</del>
<ins class="diff-chg">9.5.13
</ins>
fn:minutes-from-time
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
minutes
component
of
an
</ins><code><ins class="diff-new">
xs:time
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:minutes-from-time
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:time?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:integer
</code>
value
between
0
and
59,
both
inclusive,
representing
the
value
of
the
minutes
component
in
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.19.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:minutes-from-time(xs:time("13:00:00Z"))
</code>
returns
<code>
0
<del class="diff-old">.
</del>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-seconds-from-time" id= "func-seconds-from-time">
</a>
<del class="diff-old">10.5.20
</del>
<ins class="diff-chg">9.5.14
</ins>
fn:seconds-from-time
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
seconds
component
of
an
</ins><code><ins class="diff-new">
xs:time
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:seconds-from-time
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:time?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:decimal?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:decimal
</code>
value
greater
than
or
equal
to
zero
and
less
than
60,
representing
the
seconds
and
fractional
seconds
in
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>.
</p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
10.5.20.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:seconds-from-time(xs:time("13:20:10.5"))
</code>
returns
<code>
10.5
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-timezone-from-time" id= "func-timezone-from-time">
</a>
<del class="diff-old">10.5.21
</del>
<ins class="diff-chg">9.5.15
</ins>
fn:timezone-from-time
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
timezone
component
of
an
</ins><code><ins class="diff-new">
xs:time
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:timezone-from-time
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:time?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:dayTimeDuration?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
the
timezone
component
of
<code>
$arg
</code>,
if
any.
If
<code>
$arg
</code>
has
a
timezone
component,
then
the
result
is
an
<code>
xs:dayTimeDuration
</code>
that
indicates
deviation
from
UTC;
its
value
may
range
from
+14:00
to
-14:00
hours,
both
inclusive.
<del class="diff-old">Otherwise,
the
result
is
the
empty
sequence.
</del>
If
<code>
$arg
</code>
<del class="diff-old">is
</del>
<ins class="diff-chg">has
no
timezone
component,
</ins>
the
<del class="diff-old">empty
sequence,
returns
</del>
<ins class="diff-chg">result
is
</ins>
the
empty
sequence.
</p>
<del class="diff-old">10.5.21.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:timezone-from-time(xs:time("13:20:00-05:00"))
</code>
returns
<code>
<del class="diff-old">xs:dayTimeDuration
whose
value
is
-PT5H
</del>
<ins class="diff-chg">xs:dayTimeDuration("-PT5H")
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:timezone-from-time(xs:time("13:20:00"))
</code>
returns
<code>
()
</code>.
</p>
<del class="diff-old">10.6
Arithmetic
Operators
on
Durations
Function
Meaning
op:add-yearMonthDurations
Adds
two
xs:yearMonthDuration
s.
Returns
an
xs:yearMonthDuration
.
op:subtract-yearMonthDurations
Subtracts
one
xs:yearMonthDuration
from
another.
Returns
an
xs:yearMonthDuration
.
op:multiply-yearMonthDuration
Multiplies
a
xs:yearMonthDuration
by
an
xs:double
.
Returns
an
xs:yearMonthDuration
.
op:divide-yearMonthDuration
Divides
an
xs:yearMonthDuration
by
an
xs:double
.
Returns
an
xs:yearMonthDuration
.
op:divide-yearMonthDuration-by-yearMonthDuration
Divides
an
xs:yearMonthDuration
by
an
xs:yearMonthDuration
.
Returns
an
xs:decimal
.
op:add-dayTimeDurations
Adds
two
xs:dayTimeDurations
.
Returns
an
xs:dayTimeDuration
.
op:subtract-dayTimeDurations
Subtracts
one
xs:dayTimeDuration
from
another.
Returns
an
xs:dayTimeDuration
.
op:multiply-dayTimeDuration
Multiplies
an
xs:dayTimeDuration
by
a
xs:double
.
Returns
an
xs:dayTimeDuration
.
op:divide-dayTimeDuration
Divides
an
xs:dayTimeDuration
by
an
xs:double
.
Returns
an
xs:dayTimeDuration
.
op:divide-dayTimeDuration-by-dayTimeDuration
Divides
an
xs:dayTimeDuration
by
an
xs:dayTimeDuration
.
Returns
an
xs:decimal
.
10.6.1
op:add-yearMonthDurations
op:add-yearMonthDurations
(
$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
&#160;as&#160;
xs:yearMonthDuration
)
&#160;as&#160;
xs:yearMonthDuration
Summary:
Returns
the
result
of
adding
the
value
of
$arg1
to
the
value
of
$arg2
.
Backs
up
the
"+"
operator
on
xs:yearMonthDuration
values.
10.6.1.1
Examples
op:add-yearMonthDurations(xs:yearMonthDuration("P2Y11M"),
xs:yearMonthDuration("P3Y3M"))
returns
a
xs:yearMonthDuration
value
corresponding
to
6
years
and
2
months.
10.6.2
op:subtract-yearMonthDurations
op:subtract-yearMonthDurations
(
$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
&#160;as&#160;
xs:yearMonthDuration
)
&#160;as&#160;
xs:yearMonthDuration
Summary:
Returns
the
result
of
subtracting
the
value
of
$arg2
from
the
value
of
$arg1
.
Backs
up
the
"-"
operator
on
xs:yearMonthDuration
values.
10.6.2.1
Examples
op:subtract-yearMonthDurations(xs:yearMonthDuration("P2Y11M"),
xs:yearMonthDuration("P3Y3M"))
returns
a
xs:yearMonthDuration
value
corresponding
to
negative
4
months.
10.6.3
op:multiply-yearMonthDuration
op:multiply-yearMonthDuration
(
$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
&#160;as&#160;
xs:double
)
&#160;as&#160;
xs:yearMonthDuration
Summary:
Returns
the
result
of
multiplying
the
value
of
$arg1
by
$arg2
.
The
result
is
rounded
to
the
nearest
month.
For
a
value
v
,
0
&lt;=
v
&lt;
0.5
rounds
to
0;
0.5
&lt;=
v
&lt;
1.0
rounds
to
1.
If
$arg2
is
positive
or
negative
zero,
the
result
is
a
zero-length
duration.
If
$arg2
is
positive
or
negative
infinity,
the
result
overflows
and
is
handled
as
discussed
in
10.1.1
Limits
and
Precision
.
If
$arg2
is
NaN
an
error
is
raised
[
err:FOCA0005
]
Backs
up
the
"*"
operator
on
xs:yearMonthDuration
values.
10.6.3.1
Examples
op:multiply-yearMonthDuration(xs:yearMonthDuration("P2Y11M"),
2.3)
returns
a
xs:yearMonthDuration
value
corresponding
to
6
years
and
9
months.
10.6.4
op:divide-yearMonthDuration
op:divide-yearMonthDuration
(
$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
&#160;as&#160;
xs:double
)
&#160;as&#160;
xs:yearMonthDuration
Summary:
Returns
the
result
of
dividing
the
value
of
$arg1
by
$arg2
.
The
result
is
rounded
to
the
nearest
month.
For
a
value
v
,
0
&lt;=
v
&lt;
0.5
rounds
to
0;
0.5
&lt;=
v
&lt;
1.0
rounds
to
1.
If
$arg2
is
positive
or
negative
infinity,
the
result
is
a
zero-length
duration.
If
$arg2
is
positive
or
negative
zero,
the
result
overflows
and
is
handled
as
discussed
in
10.1.1
Limits
and
Precision
.
If
$arg2
is
NaN
an
error
is
raised
[
err:FOCA0005
]
Backs
up
the
"div"
operator
on
xs:yearMonthDuration
and
numeric
values.
10.6.4.1
Examples
op:divide-yearMonthDuration(xs:yearMonthDuration("P2Y11M"),
1.5)
returns
a
xs:yearMonthDuration
value
corresponding
to
1
year
and
11
months.
10.6.5
op:divide-yearMonthDuration-by-yearMonthDuration
op:divide-yearMonthDuration-by-yearMonthDuration
(
$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
&#160;as&#160;
xs:yearMonthDuration
)
&#160;as&#160;
xs:decimal
Summary:
Returns
the
result
of
dividing
the
value
of
$arg1
by
$arg2
.
Since
the
values
of
both
operands
are
integers,
the
semantics
of
the
division
is
identical
to
op:numeric-divide
with
xs:integer
operands.
Backs
up
the
"div"
operator
on
xs:yearMonthDuration
values.
10.6.5.1
Examples
op:divide-yearMonthDuration-by-yearMonthDuration(xs:yearMonthDuration("P3Y4M"),
xs:yearMonthDuration("-P1Y4M"))
returns
-2.5
.
10.6.6
op:add-dayTimeDurations
op:add-dayTimeDurations
(
$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
&#160;as&#160;
xs:dayTimeDuration
)
&#160;as&#160;
xs:dayTimeDuration
Summary:
Returns
the
result
of
adding
the
value
of
$arg1
to
the
value
of
$arg2
.
Backs
up
the
"+"
operator
on
xs:dayTimeDuration
values.
10.6.6.1
Examples
op:add-dayTimeDurations(xs:dayTimeDuration("P2DT12H5M"),
xs:dayTimeDuration("P5DT12H"))
returns
a
xs:dayTimeDuration
value
corresponding
to
8
days
and
5
minutes.
10.6.7
op:subtract-dayTimeDurations
op:subtract-dayTimeDurations
(
$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
&#160;as&#160;
xs:dayTimeDuration
)
&#160;as&#160;
xs:dayTimeDuration
Summary:
Returns
the
result
of
subtracting
the
value
of
$arg2
from
the
value
of
$arg1
.
Backs
up
the
"-"
operator
on
xs:dayTimeDuration
values.
10.6.7.1
Examples
op:subtract-dayTimeDurations(xs:dayTimeDuration("P2DT12H"),
xs:dayTimeDuration("P1DT10H30M"))
returns
a
xs:dayTimeDuration
value
corresponding
to
1
day,
1
hour
and
30
minutes.
10.6.8
op:multiply-dayTimeDuration
op:multiply-dayTimeDuration
(
$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
&#160;as&#160;
xs:double
)
&#160;as&#160;
xs:dayTimeDuration
Summary:
Returns
the
result
of
multiplying
the
value
of
$arg1
by
$arg2
.
If
$arg2
is
positive
or
negative
zero,
the
result
is
a
zero-length
duration.
If
$arg2
is
positive
or
negative
infinity,
the
result
overflows
and
is
handled
as
discussed
in
10.1.1
Limits
and
Precision
.
If
$arg2
is
NaN
an
error
is
raised
[
err:FOCA0005
]
Backs
up
the
"*"
operator
on
xs:dayTimeDuration
values.
10.6.8.1
Examples
op:multiply-dayTimeDuration(xs:dayTimeDuration("PT2H10M"),
2.1)
returns
a
xs:dayTimeDuration
value
corresponding
to
4
hours
and
33
minutes.
10.6.9
op:divide-dayTimeDuration
op:divide-dayTimeDuration
(
$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
&#160;as&#160;
xs:double
)
&#160;as&#160;
xs:dayTimeDuration
Summary:
Returns
the
result
of
dividing
the
value
of
$arg1
by
$arg2
.
If
$arg2
is
positive
or
negative
infinity,
the
result
is
a
zero-length
duration.
If
$arg2
is
positive
or
negative
zero,
the
result
overflows
and
is
handled
as
discussed
in
10.1.1
Limits
and
Precision
.
If
$arg2
is
NaN
an
error
is
raised
[
err:FOCA0005
]
Backs
up
the
"div"
operator
on
xs:dayTimeDuration
values.
10.6.9.1
Examples
op:divide-dayTimeDuration(xs:yearMonthDuration("P1DT2H30M10.5S"),
1.5)
returns
a
xs:dayTimeDuration
value
corresponding
to
17
hours,
40
minutes
and
7
seconds.
10.6.10
op:divide-dayTimeDuration-by-dayTimeDuration
op:divide-dayTimeDuration-by-dayTimeDuration
(
$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
&#160;as&#160;
xs:dayTimeDuration
)
&#160;as&#160;
xs:decimal
Summary:
Returns
the
result
of
dividing
the
value
of
$arg1
by
$arg2
.
Since
the
values
of
both
operands
are
decimals,
the
semantics
of
the
division
is
identical
to
op:numeric-divide
with
xs:decimal
operands.
Backs
up
the
"div"
operator
on
xs:dayTimeDuration
values.
10.6.10.1
Examples
op:divide-dayTimeDuration-by-dayTimeDuration(xs:dayTimeDuration("P2DT53M11S"),
xs:dayTimeDuration("P1DT10H))
returns
1.4378349...
</del>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="timezone.functions" id="timezone.functions">
</a>
<del class="diff-old">10.7
</del>
<ins class="diff-chg">9.6
</ins>
Timezone
Adjustment
Functions
on
Dates
and
Time
Values
</h3>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-adjust-dateTime-to-timezone">
<code>
fn:adjust-dateTime-to-timezone
</code>
</a>
</td>
<td>
Adjusts
an
<code>
xs:dateTime
</code>
value
to
a
specific
timezone,
or
to
no
timezone
at
all.
</td>
</tr>
<tr>
<td>
<a href= "#func-adjust-date-to-timezone">
<code>
fn:adjust-date-to-timezone
</code>
</a>
</td>
<td>
Adjusts
an
<code>
xs:date
</code>
value
to
a
specific
timezone,
or
to
no
timezone
at
<del class="diff-old">all.
</del>
<ins class="diff-chg">all;
the
result
is
the
date
in
the
target
timezone
that
contains
the
starting
instant
of
the
supplied
date.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-adjust-time-to-timezone">
<code>
fn:adjust-time-to-timezone
</code>
</a>
</td>
<td>
Adjusts
an
<code>
xs:time
</code>
value
to
a
specific
timezone,
or
to
no
timezone
at
all.
</td>
</tr>
</tbody>
</table>
<p>
These
functions
adjust
the
timezone
component
of
an
<code>
xs:dateTime
</code>,
<code>
xs:date
</code>
or
<code>
xs:time
</code>
value.
The
<code>
$timezone
</code>
argument
to
these
functions
is
defined
as
an
<code>
xs:dayTimeDuration
</code>
but
must
be
a
valid
timezone
value.
</p>
<div class="div3">
<h4>
<a name="func-adjust-dateTime-to-timezone" id= "func-adjust-dateTime-to-timezone">
</a>
<del class="diff-old">10.7.1
</del>
<ins class="diff-chg">9.6.1
</ins>
fn:adjust-dateTime-to-timezone
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Adjusts
an
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
value
to
a
specific
timezone,
or
to
no
timezone
at
all.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:adjust-dateTime-to-timezone
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
fn:adjust-dateTime-to-timezone
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$timezone
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dayTimeDuration?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Adjusts
an
xs:dateTime
value
to
a
specific
timezone,
or
to
no
timezone
at
all.
If
$timezone
is
the
empty
sequence,
returns
an
xs:dateTime
without
a
timezone.
Otherwise,
returns
an
xs:dateTime
with
a
timezone.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
<code>
$timezone
</code>
is
not
specified,
then
<ins class="diff-new">the
effective
value
of
</ins>
<code>
$timezone
</code>
is
the
value
of
the
implicit
timezone
in
the
dynamic
context.
</p>
<p>
If
<code>
$arg
</code>
is
the
empty
sequence,
then
the
<del class="diff-old">result
is
</del>
<ins class="diff-chg">function
returns
</ins>
the
empty
sequence.
</p>
<p>
<del class="diff-old">A
dynamic
error
is
raised
[
err:FODT0003
]
if
$timezone
is
less
than
-PT14H
or
greater
than
PT14H
or
if
does
not
contain
an
integral
number
of
minutes.
</del>
If
<code>
$arg
</code>
does
not
have
a
timezone
component
and
<code>
$timezone
</code>
is
the
empty
sequence,
then
the
result
is
<code>
$arg
</code>.
</p>
<p>
If
<code>
$arg
</code>
does
not
have
a
timezone
component
and
<code>
$timezone
</code>
is
not
the
empty
sequence,
then
the
result
is
<code>
$arg
</code>
with
<code>
$timezone
</code>
as
the
timezone
component.
</p>
<p>
If
<code>
$arg
</code>
has
a
timezone
component
and
<code>
$timezone
</code>
is
the
empty
sequence,
then
the
result
is
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>
without
its
timezone
component.
</p>
<p>
If
<code>
$arg
</code>
has
a
timezone
component
and
<code>
$timezone
</code>
is
not
the
empty
sequence,
then
the
result
is
<del class="diff-old">an
</del>
<ins class="diff-chg">the
</ins>
<code>
xs:dateTime
</code>
value
<del class="diff-old">with
a
timezone
component
of
$timezone
</del>
that
is
equal
to
<code>
$arg
</code>
<ins class="diff-new">and
that
has
a
timezone
component
equal
to
</ins><code><ins class="diff-new">
$timezone
</ins>
</code>.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
A
dynamic
error
is
raised
[
</ins><a href="#ERRFODT0003" title= "err:FODT0003"><ins class="diff-chg">
err:FODT0003
</ins>
</a>
<del class="diff-old">10.7.1.1
</del>
<ins class="diff-chg">]
if
</ins><code><ins class="diff-chg">
$timezone
</ins></code><ins class="diff-chg">
is
less
than
</ins><code><ins class="diff-chg">
-PT14H
</ins></code><ins class="diff-chg">
or
greater
than
</ins><code><ins class="diff-chg">
PT14H
</ins></code><ins class="diff-chg">
or
is
not
an
integral
number
of
minutes.
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
Assume
the
dynamic
context
provides
an
implicit
timezone
of
<code>
-05:00
(-PT5H0M)
</code>.
</p>
<p>
let
<del class="diff-old">$tz
</del>
<code>
<ins class="diff-chg">$tz-10
</ins></code>
:=
<code>
xs:dayTimeDuration("-PT10H")
</code>
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:adjust-dateTime-to-timezone(xs:dateTime("2002-03-07T10:00:00"))
</del>
<ins class="diff-chg">fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00'))
</ins>
</code>
returns
<code>
<del class="diff-old">2002-03-07T10:00:00-05:00
</del>
<ins class="diff-chg">xs:dateTime('2002-03-07T10:00:00-05:00')
</ins></code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:adjust-dateTime-to-timezone(xs:dateTime("2002-03-07T10:00:00-07:00"))
</del>
<ins class="diff-chg">fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00-07:00'))
</ins>
</code>
returns
<code>
<del class="diff-old">2002-03-07T12:00:00-05:00
</del>
<ins class="diff-chg">xs:dateTime('2002-03-07T12:00:00-05:00')
</ins></code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:adjust-dateTime-to-timezone(xs:dateTime("2002-03-07T10:00:00"),
$tz)
</del>
<ins class="diff-chg">fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00'),
$tz-10)
</ins>
</code>
returns
<code>
<del class="diff-old">2002-03-07T10:00:00-10:00
</del>
<ins class="diff-chg">xs:dateTime('2002-03-07T10:00:00-10:00')
</ins></code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:adjust-dateTime-to-timezone(xs:dateTime("2002-03-07T10:00:00-07:00"),
$tz)
</del>
<ins class="diff-chg">fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00-07:00'),
$tz-10)
</ins>
</code>
returns
<code>
<del class="diff-old">2002-03-07T07:00:00-10:00
</del>
<ins class="diff-chg">xs:dateTime('2002-03-07T07:00:00-10:00')
</ins></code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:adjust-dateTime-to-timezone(xs:dateTime("2002-03-07T10:00:00-07:00"),
</del>
<ins class="diff-chg">fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00-07:00'),
</ins>
xs:dayTimeDuration("PT10H"))
</code>
returns
<code>
<del class="diff-old">2002-03-08T03:00:00+10:00
</del>
<ins class="diff-chg">xs:dateTime('2002-03-08T03:00:00+10:00')
</ins></code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:adjust-dateTime-to-timezone(xs:dateTime("2002-03-07T00:00:00+01:00"),
</del>
<ins class="diff-chg">fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T00:00:00+01:00'),
</ins>
xs:dayTimeDuration("-PT8H"))
</code>
returns
<code>
<del class="diff-old">2002-03-06T15:00:00-08:00
</del>
<ins class="diff-chg">xs:dateTime('2002-03-06T15:00:00-08:00')
</ins></code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:adjust-dateTime-to-timezone(xs:dateTime("2002-03-07T10:00:00"),
</del>
<ins class="diff-chg">fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00'),
</ins>
())
</code>
returns
<code>
<del class="diff-old">2002-03-07T10:00:00
</del>
<ins class="diff-chg">xs:dateTime('2002-03-07T10:00:00')
</ins></code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
<del class="diff-old">fn:adjust-dateTime-to-timezone(xs:dateTime("2002-03-07T10:00:00-07:00"),
</del>
<ins class="diff-chg">fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00-07:00'),
</ins>
())
</code>
returns
<code>
<del class="diff-old">2002-03-07T10:00:00
</del>
<ins class="diff-chg">xs:dateTime('2002-03-07T10:00:00')
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-adjust-date-to-timezone" id= "func-adjust-date-to-timezone">
</a>
<del class="diff-old">10.7.2
</del>
<ins class="diff-chg">9.6.2
</ins>
fn:adjust-date-to-timezone
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Adjusts
an
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
value
to
a
specific
timezone,
or
to
no
timezone
at
all;
the
result
is
the
date
in
the
target
timezone
that
contains
the
starting
instant
of
the
supplied
date.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:adjust-date-to-timezone
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:date?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:date?
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
fn:adjust-date-to-timezone
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:date?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$timezone
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dayTimeDuration?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:date?
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Adjusts
an
xs:date
value
to
a
specific
timezone,
or
to
no
timezone
at
all.
If
$timezone
is
the
empty
sequence,
returns
an
xs:date
without
a
timezone.
Otherwise,
returns
an
xs:date
with
a
timezone.
For
purposes
of
timezone
adjustment,
an
xs:date
is
treated
as
an
xs:dateTime
with
time
00:00:00
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
<code>
$timezone
</code>
is
not
specified,
then
<ins class="diff-new">the
effective
value
of
</ins>
<code>
$timezone
</code>
is
the
value
of
the
implicit
timezone
in
the
dynamic
context.
</p>
<p>
If
<code>
$arg
</code>
is
the
empty
sequence,
then
the
<del class="diff-old">result
is
</del>
<ins class="diff-chg">function
returns
</ins>
the
empty
sequence.
</p>
<p>
<del class="diff-old">A
dynamic
error
is
raised
[
err:FODT0003
]
if
$timezone
is
less
than
-PT14H
or
greater
than
PT14H
or
if
does
not
contain
an
integral
number
of
minutes.
</del>
If
<code>
$arg
</code>
does
not
have
a
timezone
component
and
<code>
$timezone
</code>
is
the
empty
sequence,
then
the
result
is
the
value
of
<code>
$arg
</code>.
</p>
<p>
If
<code>
$arg
</code>
does
not
have
a
timezone
component
and
<code>
$timezone
</code>
is
not
the
empty
sequence,
then
the
result
is
<code>
$arg
</code>
with
<code>
$timezone
</code>
as
the
timezone
component.
</p>
<p>
If
<code>
$arg
</code>
has
a
timezone
component
and
<code>
$timezone
</code>
is
the
empty
sequence,
then
the
result
is
the
<del class="diff-old">localized
</del>
<ins class="diff-chg">local
</ins>
value
of
<code>
$arg
</code>
without
its
timezone
component.
</p>
<p>
If
<code>
$arg
</code>
has
a
timezone
component
and
<code>
$timezone
</code>
is
not
the
empty
sequence,
<del class="diff-old">then:
</del>
<ins class="diff-chg">then
the
function
returns
the
value
of
the
expression:
</ins>
</p>
<ul>
<li>
<p>
Let
<code>
<del class="diff-old">$srcdt
</del>
<ins class="diff-chg">$dt
</ins>
</code>
be
<del class="diff-old">an
xs:dateTime
value,
with
00:00:00
for
the
time
component
and
date
and
timezone
components
that
are
</del>
the
<del class="diff-old">same
as
the
date
and
timezone
components
</del>
<ins class="diff-chg">value
</ins>
of
<a href= "#func-dateTime">
<code>
<del class="diff-old">$arg
.
</del>
<ins class="diff-chg">fn:dateTime($arg,
xs:time('00:00:00'))
</ins></code></a>.
</p>
</li>
<li>
<p>
Let
<code>
<del class="diff-old">$r
</del>
<ins class="diff-chg">$adt
</ins>
</code>
be
the
<del class="diff-old">result
</del>
<ins class="diff-chg">value
</ins>
of
<del class="diff-old">evaluating
</del>
<a href= "#func-adjust-dateTime-to-timezone">
<code>
<del class="diff-old">fn:adjust-dateTime-to-timezone($srcdt,
</del>
<ins class="diff-chg">fn:adjust-dateTime-to-timezone($dt,
</ins>
$timezone)
</code>
</a>
</p>
</li>
<li>
<p>
The
<del class="diff-old">result
of
this
</del>
function
<del class="diff-old">will
be
a
date
value
that
has
date
and
timezone
components
that
are
the
same
as
</del>
<ins class="diff-chg">returns
</ins>
the
<del class="diff-old">date
and
timezone
components
</del>
<ins class="diff-chg">value
</ins>
of
<code>
<del class="diff-old">$r
.
</del>
<ins class="diff-chg">xs:date($adt)
</ins></code>
</p>
</li>
</ul>
<table border="1" summary="Editorial note">
<tr>
<td align="left" valign="top" width="50%">
<b>
<ins class="diff-chg">Editorial
note
</ins></b>
</td>
<td align="right" valign="top" width="50%">
<ins class="diff-new">&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
I
suspect
this
procedure
actually
gives
the
right
result
in
all
cases,
so
the
whole
description
can
be
simplified.
</ins></td></tr></table></dd><dt class="label"><ins class="diff-new">
Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
A
dynamic
error
is
raised
[
</ins><a href="#ERRFODT0003" title= "err:FODT0003"><ins class="diff-new">
err:FODT0003
</ins>
</a>
<del class="diff-old">10.7.2.1
</del>
<ins class="diff-chg">]
if
</ins><code><ins class="diff-chg">
$timezone
</ins></code><ins class="diff-chg">
is
less
than
</ins><code><ins class="diff-chg">
-PT14H
</ins></code><ins class="diff-chg">
or
greater
than
</ins><code><ins class="diff-chg">
PT14H
</ins></code><ins class="diff-chg">
or
is
not
an
integral
number
of
minutes.
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
Assume
the
dynamic
context
provides
an
implicit
timezone
of
<code>
-05:00
(-PT5H0M)
</code>.
</p>
<p>
let
<del class="diff-old">$tz
</del>
<code>
<ins class="diff-chg">$tz-10
</ins></code>
:=
<code>
xs:dayTimeDuration("-PT10H")
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-date-to-timezone(xs:date("2002-03-07"))
</code>
returns
<code>
<del class="diff-old">2002-03-07-05:00.
</del>
<ins class="diff-chg">xs:date("2002-03-07-05:00")
</ins></code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:adjust-date-to-timezone(xs:date("2002-03-07-07:00"))
</code>
returns
<code>
<del class="diff-old">2002-03-07-05:00
</del>
<ins class="diff-chg">xs:date("2002-03-07-05:00")
</ins>
</code>.
<em>
<ins class="diff-new">(
</ins>
<code>
$arg
</code>
is
converted
to
<del class="diff-old">the
</del>
<code>
<del class="diff-old">xs:dateTime
"2002-03-07T00:00:00-07:00"
</del>
<ins class="diff-chg">xs:dateTime("2002-03-07T00:00:00-07:00")
</ins>
</code>.
This
is
adjusted
to
the
implicit
timezone,
giving
<code>
<del class="diff-old">"2002-03-07T02:00:00-05:00".
</del>
<ins class="diff-chg">"2002-03-07T02:00:00-05:00"
</ins></code>.<ins class="diff-chg">
).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-date-to-timezone(xs:date("2002-03-07"),
<del class="diff-old">$tz)
</del>
<ins class="diff-chg">$tz-10)
</ins>
</code>
returns
<code>
<del class="diff-old">2002-03-07-10:00
</del>
<ins class="diff-chg">xs:date("2002-03-07-10:00")
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-date-to-timezone(xs:date("2002-03-07-07:00"),
<del class="diff-old">$tz)
</del>
<ins class="diff-chg">$tz-10)
</ins>
</code>
returns
<code>
<del class="diff-old">2002-03-06-10:00
</del>
<ins class="diff-chg">xs:date("2002-03-06-10:00")
</ins>
</code>.
<em>
<ins class="diff-new">(
</ins>
<code>
$arg
</code>
is
converted
to
the
<code>
xs:dateTime
"2002-03-07T00:00:00-07:00"
</code>.
This
is
adjusted
to
the
given
timezone,
giving
<code>
"2002-03-06T21:00:00-10:00"
</code>.
<ins class="diff-new">).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-date-to-timezone(xs:date("2002-03-07"),
())
</code>
returns
<code>
<del class="diff-old">2002-03-07.
</del>
<ins class="diff-chg">xs:date("2002-03-07")
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-date-to-timezone(xs:date("2002-03-07-07:00"),
())
</code>
returns
<code>
<del class="diff-old">2002-03-07.
</del>
<ins class="diff-chg">xs:date("2002-03-07")
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-adjust-time-to-timezone" id= "func-adjust-time-to-timezone">
</a>
<del class="diff-old">10.7.3
</del>
<ins class="diff-chg">9.6.3
</ins>
fn:adjust-time-to-timezone
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Adjusts
an
</ins><code><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
value
to
a
specific
timezone,
or
to
no
timezone
at
all.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:adjust-time-to-timezone
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:time?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:time?
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
fn:adjust-time-to-timezone
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:time?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$timezone
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dayTimeDuration?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:time?
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Adjusts
an
xs:time
value
to
a
specific
timezone,
or
to
no
timezone
at
all.
If
$timezone
is
the
empty
sequence,
returns
an
xs:time
without
a
timezone.
Otherwise,
returns
an
xs:time
with
a
timezone.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
<code>
$timezone
</code>
is
not
specified,
then
<ins class="diff-new">the
effective
value
of
</ins>
<code>
$timezone
</code>
is
the
value
of
the
implicit
timezone
in
the
dynamic
context.
</p>
<p>
If
<code>
$arg
</code>
is
the
empty
sequence,
then
the
<del class="diff-old">result
is
</del>
<ins class="diff-chg">function
returns
</ins>
the
empty
sequence.
</p>
<p>
<del class="diff-old">A
dynamic
error
is
raised
[
err:FODT0003
]
if
$timezone
is
less
than
-PT14H
or
greater
than
PT14H
or
if
does
not
contain
an
integral
number
of
minutes.
</del>
If
<code>
$arg
</code>
does
not
have
a
timezone
component
and
<code>
$timezone
</code>
is
the
empty
sequence,
then
the
result
is
<code>
$arg
</code>.
</p>
<p>
If
<code>
$arg
</code>
does
not
have
a
timezone
component
and
<code>
$timezone
</code>
is
not
the
empty
sequence,
then
the
result
is
<code>
$arg
</code>
with
<code>
$timezone
</code>
as
the
timezone
component.
</p>
<p>
If
<code>
$arg
</code>
has
a
timezone
component
and
<code>
$timezone
</code>
is
the
empty
sequence,
then
the
result
is
the
localized
value
of
<code>
$arg
</code>
without
its
timezone
component.
</p>
<p>
If
<code>
$arg
</code>
has
a
timezone
component
and
<code>
$timezone
</code>
is
not
the
empty
sequence,
then:
</p>
<ul>
<li>
<p>
Let
<code>
<del class="diff-old">$srcdt
</del>
<ins class="diff-chg">$dt
</ins>
</code>
be
<del class="diff-old">an
</del>
<ins class="diff-chg">the
</ins>
<code>
xs:dateTime
</code>
<del class="diff-old">value,
with
an
arbitrary
date
for
the
date
component
and
time
and
timezone
components
that
are
the
same
as
the
time
and
timezone
components
of
</del>
<ins class="diff-chg">value
</ins><a href="#func-dateTime">
<code>
<del class="diff-old">$arg
.
</del>
<ins class="diff-chg">fn:dateTime(xs:date('1972-12-31'),
$arg)
</ins></code></a>.
</p>
</li>
<li>
<p>
Let
<code>
<del class="diff-old">$r
</del>
<ins class="diff-chg">$adt
</ins>
</code>
be
the
<del class="diff-old">result
</del>
<ins class="diff-chg">value
</ins>
of
<del class="diff-old">evaluating
</del>
<a href= "#func-adjust-dateTime-to-timezone">
<code>
<del class="diff-old">fn:adjust-dateTime-to-timezone($srcdt,
</del>
<ins class="diff-chg">fn:adjust-dateTime-to-timezone($dt,
</ins>
$timezone)
</code>
</a>
</p>
</li>
<li>
<p>
The
<del class="diff-old">result
of
this
</del>
function
<del class="diff-old">will
be
a
time
value
that
has
time
and
timezone
components
that
are
the
same
as
</del>
<ins class="diff-chg">returns
</ins>
the
<del class="diff-old">time
and
timezone
components
of
</del>
<code>
<del class="diff-old">$r
</del>
<ins class="diff-chg">xs:time
</ins></code><ins class="diff-chg">
value
</ins><code><ins class="diff-chg">
xs:time($adt)
</ins>
</code>.
</p>
</li>
</ul>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
A
dynamic
error
is
raised
[
</ins><a href="#ERRFODT0003" title= "err:FODT0003"><ins class="diff-chg">
err:FODT0003
</ins>
</a>
<del class="diff-old">10.7.3.1
</del>
<ins class="diff-chg">]
if
</ins><code><ins class="diff-chg">
$timezone
</ins></code><ins class="diff-chg">
is
less
than
</ins><code><ins class="diff-chg">
-PT14H
</ins></code><ins class="diff-chg">
or
greater
than
</ins><code><ins class="diff-chg">
PT14H
</ins></code><ins class="diff-chg">
or
if
does
not
contain
an
integral
number
of
minutes.
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
Assume
the
dynamic
context
provides
an
implicit
timezone
of
<code>
-05:00
(-PT5H0M)
</code>.
</p>
<p>
let
<del class="diff-old">$tz
</del>
<code>
<ins class="diff-chg">$tz-10
</ins></code>
:=
<code>
xs:dayTimeDuration("-PT10H")
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-time-to-timezone(xs:time("10:00:00"))
</code>
returns
<code>
<del class="diff-old">10:00:00-05:00
</del>
<ins class="diff-chg">xs:time("10:00:00-05:00")
</ins></code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:adjust-time-to-timezone(xs:time("10:00:00-07:00"))
</code>
returns
<code>
<del class="diff-old">12:00:00-05:00
</del>
<ins class="diff-chg">xs:time("12:00:00-05:00")
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-time-to-timezone(xs:time("10:00:00"),
<del class="diff-old">$tz)
</del>
<ins class="diff-chg">$tz-10)
</ins>
</code>
returns
<code>
<del class="diff-old">10:00:00-10:00
</del>
<ins class="diff-chg">xs:time("10:00:00-10:00")
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-time-to-timezone(xs:time("10:00:00-07:00"),
<del class="diff-old">$tz)
</del>
<ins class="diff-chg">$tz-10)
</ins>
</code>
returns
<code>
<del class="diff-old">07:00:00-10:00
</del>
<ins class="diff-chg">xs:time("07:00:00-10:00")
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-time-to-timezone(xs:time("10:00:00"),
())
</code>
returns
<code>
<del class="diff-old">10:00:00
</del>
<ins class="diff-chg">xs:time("10:00:00")
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-time-to-timezone(xs:time("10:00:00-07:00"),
())
</code>
returns
<code>
<del class="diff-old">10:00:00
</del>
<ins class="diff-chg">xs:time("10:00:00")
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:adjust-time-to-timezone(xs:time("10:00:00-07:00"),
xs:dayTimeDuration("PT10H"))
</code>
returns
<code>
<del class="diff-old">03:00:00+10:00
</del>
<ins class="diff-chg">xs:time("03:00:00+10:00")
</ins></code>.
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="dateTime-arithmetic" id="dateTime-arithmetic">
</a>
<del class="diff-old">10.8
</del>
<ins class="diff-chg">9.7
</ins>
Arithmetic
Operators
on
Durations,
Dates
and
Times
</h3>
<p>
These
functions
support
adding
or
subtracting
a
duration
value
to
or
from
an
<code>
xs:dateTime
</code>,
an
<code>
xs:date
</code>
or
an
<code>
xs:time
</code>
value.
Appendix
E
of
<a href= "#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
describes
an
algorithm
for
performing
such
operations.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-subtract-dateTimes">
<code>
op:subtract-dateTimes
</code>
</a>
</td>
<td>
Returns
<ins class="diff-new">an
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
representing
</ins>
the
<del class="diff-old">difference
</del>
<ins class="diff-chg">amount
of
elapsed
time
</ins>
between
<del class="diff-old">two
</del>
<ins class="diff-chg">the
instants
</ins>
<code>
<del class="diff-old">xs:dateTimes
</del>
<ins class="diff-chg">arg2
</ins>
</code>
<del class="diff-old">as
an
</del>
<ins class="diff-chg">and
</ins>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">arg1
</ins>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-subtract-dates">
<code>
op:subtract-dates
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">difference
</del>
<code>
<ins class="diff-chg">xs:dayTimeDuration
</ins></code><ins class="diff-chg">
that
corresponds
to
the
elapsed
time
</ins>
between
<del class="diff-old">two
</del>
<ins class="diff-chg">the
starting
instant
of
</ins>
<code>
<del class="diff-old">xs:dateTimes
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<del class="diff-old">as
an
</del>
<ins class="diff-chg">and
the
the
starting
instant
of
</ins>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">$arg2
</ins>
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-subtract-times">
<code>
op:subtract-times
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">difference
</del>
<code>
<ins class="diff-chg">xs:dayTimeDuration
</ins></code><ins class="diff-chg">
that
corresponds
to
the
elapsed
time
</ins>
between
<del class="diff-old">two
</del>
<ins class="diff-chg">the
values
of
</ins>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<del class="diff-old">s
as
an
</del>
<ins class="diff-chg">and
</ins>
<code>
<del class="diff-old">xs:dayTimeDuration
.
</del>
<ins class="diff-chg">$arg1
</ins></code><ins class="diff-chg">
treated
as
times
on
the
same
date.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-add-yearMonthDuration-to-dateTime">
<code>
op:add-yearMonthDuration-to-dateTime
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">end
of
a
time
period
by
adding
an
</del>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
<del class="diff-old">to
the
</del>
<ins class="diff-chg">that
is
a
given
duration
after
a
specified
</ins>
<code>
xs:dateTime
</code>
<del class="diff-old">that
starts
</del>
<ins class="diff-chg">(or
before,
if
</ins>
the
<del class="diff-old">period.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-add-dayTimeDuration-to-dateTime">
<code>
op:add-dayTimeDuration-to-dateTime
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">end
of
a
time
period
by
adding
an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
<del class="diff-old">to
the
</del>
<ins class="diff-chg">that
is
a
given
duration
after
a
specified
</ins>
<code>
xs:dateTime
</code>
<del class="diff-old">that
starts
</del>
<ins class="diff-chg">(or
before,
if
</ins>
the
<del class="diff-old">period.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-subtract-yearMonthDuration-from-dateTime">
<code>
op:subtract-yearMonthDuration-from-dateTime
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">beginning
of
a
time
period
by
subtracting
an
</del>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
<del class="diff-old">from
the
</del>
<ins class="diff-chg">that
is
a
given
duration
before
a
specified
</ins>
<code>
xs:dateTime
</code>
<del class="diff-old">that
ends
</del>
<ins class="diff-chg">(or
after,
if
</ins>
the
<del class="diff-old">period.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-subtract-dayTimeDuration-from-dateTime">
<code>
op:subtract-dayTimeDuration-from-dateTime
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">beginning
of
a
time
period
by
subtracting
an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
<del class="diff-old">from
the
</del>
<ins class="diff-chg">that
is
a
given
duration
before
a
specified
</ins>
<code>
xs:dateTime
</code>
<del class="diff-old">that
ends
</del>
<ins class="diff-chg">(or
after,
if
</ins>
the
<del class="diff-old">period.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-add-yearMonthDuration-to-date">
<code>
op:add-yearMonthDuration-to-date
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">end
of
a
time
period
by
adding
an
</del>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
<del class="diff-old">to
the
</del>
<ins class="diff-chg">that
is
a
given
duration
after
a
specified
</ins>
<code>
xs:date
</code>
<del class="diff-old">that
starts
</del>
<ins class="diff-chg">(or
before,
if
</ins>
the
<del class="diff-old">period.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-add-dayTimeDuration-to-date">
<code>
op:add-dayTimeDuration-to-date
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">end
of
a
time
period
by
adding
an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
<del class="diff-old">to
the
</del>
<ins class="diff-chg">that
is
a
given
duration
after
a
specified
</ins>
<code>
xs:date
</code>
<del class="diff-old">that
starts
</del>
<ins class="diff-chg">(or
before,
if
</ins>
the
<del class="diff-old">period.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-subtract-yearMonthDuration-from-date">
<code>
op:subtract-yearMonthDuration-from-date
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">beginning
of
a
time
period
by
subtracting
an
</del>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
<del class="diff-old">from
the
</del>
<ins class="diff-chg">that
is
a
given
duration
before
a
specified
</ins>
<code>
xs:date
</code>
<del class="diff-old">that
ends
</del>
<ins class="diff-chg">(or
after,
if
</ins>
the
<del class="diff-old">period.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-subtract-dayTimeDuration-from-date">
<code>
op:subtract-dayTimeDuration-from-date
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">beginning
of
a
time
period
by
subtracting
an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
<del class="diff-old">from
the
</del>
<ins class="diff-chg">that
is
a
given
duration
before
a
specified
</ins>
<code>
xs:date
</code>
<del class="diff-old">that
ends
</del>
<ins class="diff-chg">(or
after,
if
</ins>
the
<del class="diff-old">period.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-add-dayTimeDuration-to-time">
<code>
op:add-dayTimeDuration-to-time
</code>
</a>
</td>
<td>
<del class="diff-old">Adds
the
value
of
</del>
<ins class="diff-chg">Returns
</ins>
the
<del class="diff-old">hours,
minutes
and
seconds
components
of
an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:time
</ins>
</code>
<del class="diff-old">to
an
</del>
<ins class="diff-chg">value
that
is
a
given
duration
after
a
specified
</ins>
<code>
xs:time
</code>
<del class="diff-old">value.
</del>
<ins class="diff-chg">(or
before,
if
the
duration
is
negative
or
causes
wrap-around
past
midnight)
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-subtract-dayTimeDuration-from-time">
<code>
op:subtract-dayTimeDuration-from-time
</code>
</a>
</td>
<td>
<del class="diff-old">Subtracts
the
value
of
</del>
<ins class="diff-chg">Returns
</ins>
the
<del class="diff-old">hours,
minutes
and
seconds
components
of
an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:time
</ins>
</code>
<del class="diff-old">to
an
</del>
<ins class="diff-chg">value
that
is
a
given
duration
before
a
specified
</ins>
<code>
xs:time
</code>
<del class="diff-old">value.
</del>
<ins class="diff-chg">(or
after,
if
the
duration
is
negative
or
causes
wrap-around
past
midnight)
</ins>
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-subtract-dateTimes" id= "func-subtract-dateTimes">
</a>
<del class="diff-old">10.8.1
</del>
<ins class="diff-chg">9.7.1
</ins>
op:subtract-dateTimes
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
an
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
representing
the
amount
of
elapsed
time
between
the
instants
</ins><code><ins class="diff-new">
arg2
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
arg1
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"-"
operator
on
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:subtract-dateTimes
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
<del class="diff-old">xs:dayTimeDuration?
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
xs:dayTimeDuration
that
corresponds
to
the
difference
between
the
normalized
value
of
$arg1
and
the
normalized
value
of
$arg2
.
</del>
If
either
<code>
$arg1
</code>
or
<code>
$arg2
</code>
do
not
contain
an
explicit
timezone
then,
for
the
purpose
of
the
operation,
the
implicit
timezone
provided
by
the
dynamic
context
(See
<a href= "http://www.w3.org/TR/xpath20/#id-xp-evaluation-context-components">
Section
C.2
Dynamic
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>.)
is
assumed
to
be
present
as
part
of
the
value.
</p>
<p>
<ins class="diff-new">The
function
returns
the
elapsed
time
between
the
date/time
instant
</ins><code><ins class="diff-new">
arg2
</ins></code><ins class="diff-new">
and
the
date/time
instant
</ins><code><ins class="diff-new">
arg1
</ins></code>,<ins class="diff-new">
computed
according
to
the
algorithm
given
in
Appendix
E
of
</ins><a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a>,<ins class="diff-new">
and
expressed
as
a
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code>.</p><p>
If
the
normalized
value
of
<code>
$arg1
</code>
precedes
in
time
the
normalized
value
of
<code>
$arg2
</code>,
then
the
returned
value
is
a
negative
duration.
</p>
<del class="diff-old">Backs
up
the
subtract,
"-",
operator
on
xs:dateTime
values.
10.8.1.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
-05:00
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:subtract-dateTimes(xs:dateTime("2000-10-30T06:12:00"),
xs:dateTime("1999-11-28T09:00:00Z"))
</code>
returns
<del class="diff-old">an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
value
corresponding
to
337
days,
2
hours
and
12
minutes.
</del>
<ins class="diff-chg">xs:dayTimeDuration("P337DT2H12M")
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-subtract-dates" id= "func-subtract-dates">
</a>
<del class="diff-old">10.8.2
</del>
<ins class="diff-chg">9.7.2
</ins>
op:subtract-dates
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
that
corresponds
to
the
elapsed
time
between
the
starting
instant
of
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
and
the
the
starting
instant
of
</ins><code><ins class="diff-new">
$arg2
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"-"
operator
on
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:subtract-dates
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:date
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:date
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
<del class="diff-old">xs:dayTimeDuration?
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
xs:dayTimeDuration
that
corresponds
to
the
difference
between
the
starting
instant
of
$arg1
and
the
the
starting
instant
of
$arg2
.
</del>
If
either
<code>
$arg1
</code>
or
<code>
$arg2
</code>
do
not
contain
an
explicit
timezone
then,
for
the
purpose
of
the
operation,
the
implicit
timezone
provided
by
the
dynamic
context
(See
<a href= "http://www.w3.org/TR/xpath20/#id-xp-evaluation-context-components">
Section
C.2
Dynamic
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>.)
is
assumed
to
be
present
as
part
of
the
value.
</p>
<p>
The
starting
instant
of
an
<code>
xs:date
</code>
is
the
<code>
xs:dateTime
</code>
at
<code>
00:00:00
</code>
on
that
date.
</p>
<p>
The
<del class="diff-old">result
is
</del>
<ins class="diff-chg">function
returns
</ins>
the
result
of
subtracting
the
two
starting
instants
using
<a href= "#func-subtract-dateTimes">
<code>
op:subtract-dateTimes
</code>
</a>.
</p>
<p>
If
the
starting
instant
of
<code>
$arg1
</code>
precedes
in
time
the
starting
instant
of
<code>
$arg2
</code>,
then
the
returned
value
is
a
negative
duration.
</p>
<del class="diff-old">Backs
up
the
subtract,
"-",
operator
on
xs:date
values.
10.8.2.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
Z
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
op:subtract-dates(xs:date("2000-10-30"),
xs:date("1999-11-28"))
</code>
returns
<del class="diff-old">an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
value
corresponding
to
337
days.
The
</del>
<ins class="diff-chg">xs:dayTimeDuration("P337D")
</ins></code>.<em><ins class="diff-chg">
(The
</ins>
normalized
values
of
the
two
starting
instants
are
<code>
{2000,
10,
30,
0,
0,
0,
PT0S}
</code>
and
<code>
{1999,
11,
28,
0,
0,
0,
PT0S}
<del class="diff-old">.
</del>
</code>.).
</em>
</p>
<p>
<del class="diff-old">If
</del>
<ins class="diff-chg">Now
assume
that
</ins>
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
+05:00
<del class="diff-old">,
</del>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:subtract-dates(xs:date("2000-10-30"),
xs:date("1999-11-28Z"))
</code>
returns
<del class="diff-old">an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
value
corresponding
to
336
days
and
19
hours.
</del>
<ins class="diff-chg">xs:dayTimeDuration("P336DT19H")
</ins></code>.<em><ins class="diff-chg">
(
</ins>
The
normalized
values
of
the
two
starting
instants
are
<code>
{2000,
10,
29,
19,
0,
0,
PT0S}
</code>
and
<code>
{1999,
11,
28,
0,
0,
0,
PT0S}
<del class="diff-old">.
</del>
</code>.).
</em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:subtract-dates(xs:date("2000-10-15-05:00"),
xs:date("2000-10-10+02:00"))
</code>
returns
<del class="diff-old">an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
value
corresponding
to
lexical
form
"
P5DT7H
".
</del>
<ins class="diff-chg">xs:dayTimeDuration("P5DT7H")
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-subtract-times" id= "func-subtract-times">
</a>
<del class="diff-old">10.8.3
</del>
<ins class="diff-chg">9.7.3
</ins>
op:subtract-times
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
that
corresponds
to
the
elapsed
time
between
the
values
of
</ins><code><ins class="diff-new">
$arg2
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
treated
as
times
on
the
same
date.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"-"
operator
on
</ins><code><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:subtract-times
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:time
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:time
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:dayTimeDuration
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
xs:dayTimeDuration
that
corresponds
to
the
difference
between
the
value
of
$arg1
converted
to
an
xs:dateTime
using
the
date
components
from
the
reference
xs:dateTime
and
the
value
of
$arg2
converted
to
an
xs:dateTime
using
the
date
components
from
the
same
reference
xs:dateTime
.
If
either
$arg1
or
$arg2
do
not
contain
an
explicit
timezone
then,
for
the
purpose
of
the
operation,
the
implicit
timezone
provided
by
the
dynamic
context
(See
Section
C.2
Dynamic
Context
Components
XP
.)
is
assumed
to
be
present
as
part
of
the
value.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
<del class="diff-old">result
is
</del>
<ins class="diff-chg">function
returns
</ins>
the
result
of
<del class="diff-old">subtracting
</del>
the
<del class="diff-old">two
xs:dateTime
s
using
op:subtract-dateTimes
.
</del>
<ins class="diff-chg">expression:
</ins>
</p>
<div class="exampleInner">
<pre>
<ins class="diff-new">op-subtract-dateTimes(
        fn:dateTime(xs:date('1972-12-31'), $arg1),
        fn:dateTime(xs:date('1972-12-31'), $arg2))
</ins></pre></div></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd>
<p>
<del class="diff-old">If
the
value
of
$arg1
converted
to
an
xs:dateTime
using
the
date
components
from
the
</del>
<ins class="diff-chg">Any
other
</ins>
reference
<del class="diff-old">xs:dateTime
precedes
in
time
the
value
of
$arg2
converted
to
an
xs:dateTime
using
the
</del>
date
<del class="diff-old">components
from
the
same
reference
xs:dateTime
,
then
the
returned
value
is
a
negative
duration.
Backs
up
the
subtract,
"-",
operator
on
xs:time
values.
</del>
<ins class="diff-chg">would
work
equally
well.
</ins>
</p>
<del class="diff-old">10.8.3.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
dynamic
context
provides
an
implicit
timezone
value
of
<code>
-05:00
</code>.
Assume,
also,
that
the
date
components
of
the
reference
<code>
xs:dateTime
</code>
correspond
to
<code>
"1972-12-31"
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:subtract-times(xs:time("11:12:00Z"),
xs:time("04:00:00"))
</code>
returns
<del class="diff-old">an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
value
corresponding
to
2
hours
and
12
minutes.
This
</del>
<ins class="diff-chg">xs:dayTimeDuration("PT2H12M")
</ins></code>.<em><ins class="diff-chg">
(This
</ins>
is
obtained
by
subtracting
from
the
<code>
xs:dateTime
</code>
value
<code>
{1972,
12,
31,
11,
12,
0,
PT0S}
</code>
the
<code>
xs:dateTime
</code>
value
<code>
{1972,
12,
31,
9,
0,
0,
PT0S}
<del class="diff-old">.
</del>
</code>.).
</em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:subtract-times(xs:time("11:00:00-05:00"),
xs:time("21:30:00+05:30"))
</code>
returns
<del class="diff-old">a
zero
xs:dayTimeDuration
value
corresponding
to
the
lexical
representation
</del>
<code>
<del class="diff-old">"PT0S"
</del>
<ins class="diff-chg">xs:dayTimeDuration("PT0S")
</ins>
</code>.
<del class="diff-old">The
</del>
<em>
<ins class="diff-chg">(The
</ins>
two
<code>
xs:dateTime
</code>
values
are
<code>
{1972,
12,
31,
11,
0,
0,
-PT5H}
</code>
and
<code>
{1972,
12,
31,
21,
30,
0,
PT5H30M}
</code>.
These
normalize
to
<code>
{1972,
12,
31,
16,
0,
0,
PT0S}
</code>
and
<code>
{1972,
12,
31,
16,
0,
0,
PT0S}
</code>.
<ins class="diff-new">).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:subtract-times(xs:time("17:00:00-06:00"),
xs:time("08:00:00+09:00"))
</code>
returns
<del class="diff-old">an
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
value
corresponding
to
one
day
or
24
hours.
The
</del>
<ins class="diff-chg">xs:dayTimeDuration("P1D")
</ins></code>.<em><ins class="diff-chg">
(The
</ins>
two
normalized
<code>
xs:dateTime
</code>
values
are
<code>
{1972,
12,
31,
23,
0,
0,
PT0S}
</code>
and
<code>
{1972,
12,
30,
23,
0,
0,
PT0S}
<del class="diff-old">.
</del>
</code>.).
</em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:subtract-times(xs:time("24:00:00"),
xs:time("23:59:59"))
</code>
returns
<del class="diff-old">an
xs:dayTimeDuration
value
corresponding
to
</del>
<code>
<del class="diff-old">"-PT23H59M59S"
</del>
<ins class="diff-chg">xs:dayTimeDuration("-PT23H59M59S")
</ins>
</code>.
<del class="diff-old">The
</del>
<em>
<ins class="diff-chg">(The
</ins>
two
normalized
<code>
xs:dateTime
</code>
values
are
<code>
{1972,
12,
31,
0,
0,
0,
()}
</code>
and
<code>
{1972,
12,
31,
23,
59,
59.0,
()}
<del class="diff-old">.
</del>
</code>.).
</em>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-add-yearMonthDuration-to-dateTime" id= "func-add-yearMonthDuration-to-dateTime">
</a>
<del class="diff-old">10.8.4
</del>
<ins class="diff-chg">9.7.4
</ins>
op:add-yearMonthDuration-to-dateTime
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
that
is
a
given
duration
after
a
specified
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
(or
before,
if
the
duration
is
negative).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"+"
operator
on
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:add-yearMonthDuration-to-dateTime
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:yearMonthDuration
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:dateTime
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
<del class="diff-old">xs:dateTime
computed
by
</del>
<ins class="diff-chg">result
of
</ins>
adding
<code>
$arg2
</code>
to
the
value
of
<code>
$arg1
</code>
using
the
algorithm
described
in
Appendix
E
of
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>,
disregarding
the
rule
about
leap
seconds.
If
<code>
$arg2
</code>
is
negative,
then
the
result
<code>
xs:dateTime
</code>
precedes
<code>
$arg1
</code>.
</p>
<p>
The
result
has
the
same
timezone
as
<code>
$arg1
</code>.
If
<code>
$arg1
</code>
has
no
timezone,
the
result
has
no
timezone.
</p>
<del class="diff-old">This
functions
backs
up
the
"+"
operator
on
xs:dateTime
and
xs:yearMonthDuration
values.
10.8.4.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
op:add-yearMonthDuration-to-dateTime(xs:dateTime("2000-10-30T11:12:00"),
xs:yearMonthDuration("P1Y2M"))
</code>
returns
<del class="diff-old">an
</del>
<code>
<del class="diff-old">xs:dateTime
value
corresponding
to
the
lexical
representation
"2001-12-30T11:12:00"
</del>
<ins class="diff-chg">xs:dateTime("2001-12-30T11:12:00")
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-add-dayTimeDuration-to-dateTime" id= "func-add-dayTimeDuration-to-dateTime">
</a>
<del class="diff-old">10.8.5
</del>
<ins class="diff-chg">9.7.5
</ins>
op:add-dayTimeDuration-to-dateTime
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
that
is
a
given
duration
after
a
specified
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
(or
before,
if
the
duration
is
negative).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"+"
operator
on
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:add-dayTimeDuration-to-dateTime
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dayTimeDuration
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:dateTime
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
<del class="diff-old">xs:dateTime
computed
by
</del>
<ins class="diff-chg">result
of
</ins>
adding
<code>
$arg2
</code>
to
the
value
of
<code>
$arg1
</code>
using
the
algorithm
described
in
Appendix
E
of
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>,
disregarding
the
rule
about
leap
seconds.
If
<code>
$arg2
</code>
is
negative,
then
the
result
<code>
xs:dateTime
</code>
precedes
<code>
$arg1
</code>.
</p>
<p>
The
result
has
the
same
timezone
as
<code>
$arg1
</code>.
If
<code>
$arg1
</code>
has
no
timezone,
the
result
has
no
timezone.
</p>
<del class="diff-old">This
functions
backs
up
the
"+"
operator
on
xs:dateTime
and
xs:dayTimeDuration
values.
10.8.5.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
op:add-dayTimeDuration-to-dateTime(xs:dateTime("2000-10-30T11:12:00"),
xs:dayTimeDuration("P3DT1H15M"))
</code>
returns
<del class="diff-old">an
</del>
<code>
<del class="diff-old">xs:dateTime
value
corresponding
to
the
lexical
representation
"2000-11-02T12:27:00"
</del>
<ins class="diff-chg">xs:dateTime("2000-11-02T12:27:00")
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-subtract-yearMonthDuration-from-dateTime" id= "func-subtract-yearMonthDuration-from-dateTime">
</a>
<del class="diff-old">10.8.6
</del>
<ins class="diff-chg">9.7.6
</ins>
op:subtract-yearMonthDuration-from-dateTime
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
that
is
a
given
duration
before
a
specified
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
(or
after,
if
the
duration
is
negative).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"-"
operator
on
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:subtract-yearMonthDuration-from-dateTime
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:yearMonthDuration
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:dateTime
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
<code>
xs:dateTime
</code>
computed
by
negating
<code>
$arg2
</code>
and
adding
the
result
to
the
value
of
<code>
$arg1
</code>
using
the
<del class="diff-old">algorithm
described
in
Appendix
E
of
[XML
Schema
Part
2:
Datatypes
Second
Edition]
disregarding
the
rule
about
leap
seconds.
If
</del>
<ins class="diff-chg">function
</ins><a href= "#func-add-yearMonthDuration-to-dateTime">
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">op:add-yearMonthDuration-to-dateTime
</ins>
</code>
<del class="diff-old">is
negative,
then
the
</del>
</a>.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">op:subtract-yearMonthDuration-from-dateTime(xs:dateTime("2000-10-30T11:12:00"),
xs:yearMonthDuration("P1Y2M"))
</ins>
</code>
<del class="diff-old">returned
follows
</del>
<ins class="diff-chg">returns
</ins>
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">xs:dateTime("1999-08-30T11:12:00")
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-subtract-dayTimeDuration-from-dateTime" id= "func-subtract-dayTimeDuration-from-dateTime">
</a>
<ins class="diff-new">9.7.7
op:subtract-dayTimeDuration-from-dateTime
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd>
<p>
<del class="diff-old">The
result
has
</del>
<ins class="diff-chg">Returns
</ins>
the
<del class="diff-old">same
timezone
as
</del>
<code>
<del class="diff-old">$arg1
.
If
</del>
<ins class="diff-chg">xs:dateTime
</ins></code><ins class="diff-chg">
that
is
a
given
duration
before
a
specified
</ins>
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
<del class="diff-old">has
no
timezone,
</del>
<ins class="diff-chg">(or
after,
if
</ins>
the
<del class="diff-old">result
has
no
timezone.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Operator
Mapping
</ins></dt><dd>
<p>
<del class="diff-old">This
functions
backs
up
</del>
<ins class="diff-chg">Defines
the
semantics
of
</ins>
the
"-"
operator
on
<code>
xs:dateTime
</code>
and
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
values.
</p>
<del class="diff-old">10.8.6.1
Examples
op:subtract-yearMonthDuration-from-dateTime(xs:dateTime("2000-10-30T11:12:00"),
xs:yearMonthDuration("P1Y2M"))
returns
an
xs:dateTime
value
corresponding
to
the
lexical
representation
"1999-08-30T11:12:00"
.
10.8.7
op:subtract-dayTimeDuration-from-dateTime
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:subtract-dayTimeDuration-from-dateTime
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dateTime
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dayTimeDuration
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:dateTime
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
<code>
xs:dateTime
</code>
computed
by
negating
<code>
$arg2
</code>
and
adding
the
result
to
the
value
of
<code>
$arg1
</code>
using
the
<del class="diff-old">algorithm
described
in
Appendix
E
of
[XML
Schema
Part
2:
Datatypes
Second
Edition]
disregarding
the
rule
about
leap
seconds.
If
</del>
<ins class="diff-chg">function
</ins><a href= "#func-add-dayTimeDuration-to-dateTime">
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">op:add-dayTimeDuration-to-dateTime
</ins>
</code>
<del class="diff-old">is
negative,
then
the
</del>
</a>.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">op:subtract-dayTimeDuration-from-dateTime(xs:dateTime("2000-10-30T11:12:00"),
xs:dayTimeDuration("P3DT1H15M"))
</ins>
</code>
<del class="diff-old">returned
follows
</del>
<ins class="diff-chg">returns
</ins>
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">xs:dateTime("2000-10-27T09:57:00")
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-add-yearMonthDuration-to-date" id= "func-add-yearMonthDuration-to-date">
</a>
<ins class="diff-new">9.7.8
op:add-yearMonthDuration-to-date
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd>
<p>
<del class="diff-old">The
result
has
</del>
<ins class="diff-chg">Returns
</ins>
the
<del class="diff-old">same
timezone
as
</del>
<code>
<del class="diff-old">$arg1
.
If
</del>
<ins class="diff-chg">xs:date
</ins></code><ins class="diff-chg">
that
is
a
given
duration
after
a
specified
</ins>
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
<del class="diff-old">has
no
timezone,
</del>
<ins class="diff-chg">(or
before,
if
</ins>
the
<del class="diff-old">result
has
no
timezone.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Operator
Mapping
</ins></dt><dd>
<p>
<del class="diff-old">This
functions
backs
up
</del>
<ins class="diff-chg">Defines
</ins>
the
<del class="diff-old">"-"
</del>
<ins class="diff-chg">semantics
of
the
"+"
</ins>
operator
on
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
and
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>
values.
</p>
<del class="diff-old">10.8.7.1
Examples
op:subtract-dayTimeDuration-from-dateTime(xs:dateTime("2000-10-30T11:12:00"),
xs:dayTimeDuration("P3DT1H15M"))
returns
an
xs:dateTime
value
corresponding
to
the
lexical
representation
"2000-10-27T09:57:00"
.
10.8.8
op:add-yearMonthDuration-to-date
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:add-yearMonthDuration-to-date
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:date
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:yearMonthDuration
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:date
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
xs:date
computed
by
adding
$arg2
to
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
<del class="diff-old">starting
instant
</del>
<ins class="diff-chg">result
</ins>
of
<ins class="diff-new">casting
</ins>
<code>
$arg1
</code>
<del class="diff-old">using
the
algorithm
described
in
Appendix
E
of
[XML
Schema
Part
2:
Datatypes
Second
Edition]
and
discarding
the
time
components
from
the
resulting
</del>
<ins class="diff-chg">to
an
</ins>
<code>
xs:dateTime
<del class="diff-old">.
If
</del>
</code>,
<ins class="diff-chg">adding
</ins>
<code>
$arg2
</code>
<del class="diff-old">is
negative,
then
</del>
<ins class="diff-chg">using
</ins>
the
<ins class="diff-new">function
</ins><a href= "#func-add-yearMonthDuration-to-dateTime">
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">op:add-yearMonthDuration-to-dateTime
</ins>
</code>
<del class="diff-old">returned
precedes
</del>
</a>,
<ins class="diff-chg">and
casting
the
result
back
to
an
</ins>
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">xs:date
</ins>
</code>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Examples
</ins></dt><dd>
<p>
The
<del class="diff-old">starting
instant
of
an
xs:date
is
the
</del>
<ins class="diff-chg">expression
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">op:add-yearMonthDuration-to-date(xs:date("2000-10-30"),
xs:yearMonthDuration("P1Y2M"))
</ins>
</code>
<del class="diff-old">at
time
</del>
<ins class="diff-chg">returns
</ins>
<code>
<del class="diff-old">00:00:00
on
that
date.
</del>
<ins class="diff-chg">xs:date("2001-12-30")
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-add-dayTimeDuration-to-date" id= "func-add-dayTimeDuration-to-date">
</a>
<ins class="diff-new">9.7.9
op:add-dayTimeDuration-to-date
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd>
<p>
<del class="diff-old">The
result
has
</del>
<ins class="diff-chg">Returns
</ins>
the
<del class="diff-old">same
timezone
as
</del>
<code>
<del class="diff-old">$arg1
.
If
</del>
<ins class="diff-chg">xs:date
</ins></code><ins class="diff-chg">
that
is
a
given
duration
after
a
specified
</ins>
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
<del class="diff-old">has
no
timezone,
</del>
<ins class="diff-chg">(or
before,
if
</ins>
the
<del class="diff-old">result
has
no
timezone.
</del>
<ins class="diff-chg">duration
is
negative).
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Operator
Mapping
</ins></dt><dd>
<p>
<del class="diff-old">This
functions
backs
up
</del>
<ins class="diff-chg">Defines
the
semantics
of
</ins>
the
"+"
operator
on
<code>
xs:date
</code>
and
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
values.
</p>
<del class="diff-old">10.8.8.1
Examples
op:add-yearMonthDuration-to-date(xs:date("2000-10-30"),
xs:yearMonthDuration("P1Y2M"))
returns
the
xs:date
corresponding
to
December
30,
2001.
10.8.9
op:add-dayTimeDuration-to-date
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:add-dayTimeDuration-to-date
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:date
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dayTimeDuration
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:date
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
xs:date
computed
by
adding
$arg2
to
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
<del class="diff-old">starting
instant
</del>
<ins class="diff-chg">result
</ins>
of
<ins class="diff-new">casting
</ins>
<code>
$arg1
</code>
<del class="diff-old">using
the
algorithm
described
in
Appendix
E
of
[XML
Schema
Part
2:
Datatypes
Second
Edition]
and
discarding
the
time
components
from
the
resulting
xs:dateTime
.
If
$arg2
is
negative,
then
the
xs:date
returned
precedes
$arg1
.
The
starting
instant
of
</del>
<ins class="diff-chg">to
</ins>
an
<code>
<del class="diff-old">xs:date
is
the
</del>
xs:dateTime
<del class="diff-old">at
time
</del>
</code>,
<ins class="diff-chg">adding
</ins>
<code>
<del class="diff-old">00:00:00
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<del class="diff-old">on
that
date.
The
result
has
</del>
<ins class="diff-chg">using
</ins>
the
<del class="diff-old">same
timezone
as
$arg1
.
If
</del>
<ins class="diff-chg">function
</ins><a href= "#func-add-dayTimeDuration-to-dateTime">
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">op:add-dayTimeDuration-to-dateTime
</ins>
</code>
<del class="diff-old">has
no
timezone,
</del>
</a>,
<ins class="diff-chg">and
casting
</ins>
the
result
<del class="diff-old">has
no
timezone.
This
functions
backs
up
the
"+"
operator
on
</del>
<ins class="diff-chg">back
to
an
</ins>
<code>
xs:date
<del class="diff-old">and
xs:dayTimeDuration
values.
</del>
</code>.
</p>
<del class="diff-old">10.8.9.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:add-dayTimeDuration-to-date(xs:date("2004-10-30Z"),
xs:dayTimeDuration("P2DT2H30M0S"))
</code>
returns
<del class="diff-old">the
</del>
<code>
<del class="diff-old">xs:date
November
1,
2004.
</del>
<ins class="diff-chg">xs:date("2004-11-01Z")
</ins></code>.<em><ins class="diff-chg">
(
</ins>
The
starting
instant
of
the
first
argument
is
the
<code>
xs:dateTime
</code>
value
<code>
{2004,
10,
30,
0,
0,
0,
PT0S}
</code>.
Adding
the
second
argument
to
<del class="diff-old">this,
</del>
<ins class="diff-chg">this
</ins>
gives
the
<code>
xs:dateTime
</code>
value
<code>
{2004,
11,
1,
2,
30,
0,
PT0S}
</code>.
The
time
components
are
then
discarded.
<ins class="diff-new">).
</ins></em>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-subtract-yearMonthDuration-from-date" id= "func-subtract-yearMonthDuration-from-date">
</a>
<del class="diff-old">10.8.10
</del>
<ins class="diff-chg">9.7.10
</ins>
op:subtract-yearMonthDuration-from-date
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
that
is
a
given
duration
before
a
specified
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
(or
after,
if
the
duration
is
negative).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"-"
operator
on
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:subtract-yearMonthDuration-from-date
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:date
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:yearMonthDuration
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:date
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
the
<code>
xs:date
</code>
computed
by
negating
<code>
$arg2
</code>
and
adding
the
result
to
<del class="diff-old">the
starting
instant
of
</del>
<code>
$arg1
</code>
using
the
<del class="diff-old">algorithm
described
in
Appendix
E
of
[XML
Schema
Part
2:
Datatypes
Second
Edition]
and
discarding
the
time
components
from
the
resulting
xs:dateTime
.
If
$arg2
is
positive,
then
the
xs:date
returned
precedes
$arg1
.
The
starting
instant
of
an
xs:date
is
the
xs:dateTime
at
00:00:00
on
that
date.
The
result
has
the
same
timezone
as
$arg1
.
If
$arg1
has
no
timezone,
the
result
has
no
timezone.
This
functions
backs
up
the
"-"
operator
on
xs:date
and
</del>
<ins class="diff-chg">function
</ins><a href= "#func-add-yearMonthDuration-to-date">
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">op:add-yearMonthDuration-to-date
</ins>
</code>
<del class="diff-old">values.
</del>
<del class="diff-old">10.8.10.1
</del>
</a>.
</p>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
op:subtract-yearMonthDuration-from-date(xs:date("2000-10-30"),
xs:yearMonthDuration("P1Y2M"))
</code>
returns
<del class="diff-old">the
</del>
<code>
<del class="diff-old">xs:date
August
30,
1999.
</del>
<ins class="diff-chg">xs:date("1999-08-30")
</ins></code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
op:subtract-yearMonthDuration-from-date(xs:date("2000-02-29Z"),
xs:yearMonthDuration("P1Y"))
</code>
returns
<del class="diff-old">the
xs:date
February
28,
1999
in
timezone
</del>
<code>
<del class="diff-old">Z
</del>
<ins class="diff-chg">xs:date("1999-02-28Z")
</ins>
</code>.
</p>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
op:subtract-yearMonthDuration-from-date(xs:date("2000-10-31-05:00"),
xs:yearMonthDuration("P1Y1M"))
</code>
returns
<del class="diff-old">the
xs:date
September
30,
1999
in
timezone
</del>
<code>
<del class="diff-old">-05:00
</del>
<ins class="diff-chg">xs:date("1999-09-30-05:00")
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-subtract-dayTimeDuration-from-date" id= "func-subtract-dayTimeDuration-from-date">
</a>
<del class="diff-old">10.8.11
</del>
<ins class="diff-chg">9.7.11
</ins>
op:subtract-dayTimeDuration-from-date
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
that
is
a
given
duration
before
a
specified
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
(or
after,
if
the
duration
is
negative).
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"-"
operator
on
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:subtract-dayTimeDuration-from-date
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:date
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dayTimeDuration
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:date
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
the
<code>
xs:date
</code>
computed
by
negating
<code>
$arg2
</code>
and
adding
the
result
to
<del class="diff-old">the
starting
instant
of
</del>
<code>
$arg1
</code>
using
the
<del class="diff-old">algorithm
described
in
Appendix
E
of
[XML
Schema
Part
2:
Datatypes
Second
Edition]
and
discarding
the
time
components
from
the
resulting
xs:dateTime
.
If
$arg2
is
positive,
then
the
</del>
<ins class="diff-chg">function
</ins><a href= "#func-add-dayTimeDuration-to-date">
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">op:add-dayTimeDuration-to-date
</ins>
</code>
<del class="diff-old">returned
precedes
$arg1
.
</del>
</a>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Examples
</ins></dt><dd>
<p>
The
<del class="diff-old">starting
instant
of
an
xs:date
is
the
</del>
<ins class="diff-chg">expression
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">op:subtract-dayTimeDuration-from-date(xs:date("2000-10-30"),
xs:dayTimeDuration("P3DT1H15M"))
</ins>
</code>
<del class="diff-old">at
</del>
<ins class="diff-chg">returns
</ins>
<code>
<del class="diff-old">00:00:00
on
that
date.
</del>
<ins class="diff-chg">xs:date("2000-10-26")
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-add-dayTimeDuration-to-time" id= "func-add-dayTimeDuration-to-time">
</a>
<ins class="diff-new">9.7.12
op:add-dayTimeDuration-to-time
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd>
<p>
<del class="diff-old">The
result
has
</del>
<ins class="diff-chg">Returns
</ins>
the
<del class="diff-old">same
timezone
as
</del>
<code>
<del class="diff-old">$arg1
.
If
</del>
<ins class="diff-chg">xs:time
</ins></code><ins class="diff-chg">
value
that
is
a
given
duration
after
a
specified
</ins>
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">xs:time
</ins>
</code>
<del class="diff-old">has
no
timezone,
</del>
<ins class="diff-chg">(or
before,
if
</ins>
the
<del class="diff-old">result
has
no
timezone.
</del>
<ins class="diff-chg">duration
is
negative
or
causes
wrap-around
past
midnight)
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Operator
Mapping
</ins></dt><dd>
<p>
<del class="diff-old">This
functions
backs
up
</del>
<ins class="diff-chg">Defines
</ins>
the
<del class="diff-old">"-"
</del>
<ins class="diff-chg">semantics
of
the
"+"
</ins>
operator
on
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">xs:time
</ins>
</code>
and
<code>
xs:dayTimeDuration
</code>
values.
</p>
<del class="diff-old">10.8.11.1
Examples
op:subtract-dayTimeDuration-from-date(xs:date("2000-10-30"),
xs:dayTimeDuration("P3DT1H15M"))
returns
the
xs:date
October
26,
2000.
10.8.12
op:add-dayTimeDuration-to-time
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:add-dayTimeDuration-to-time
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:time
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:dayTimeDuration
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:time
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
First,
the
days
component
in
the
canonical
lexical
representation
of
<code>
$arg2
</code>
is
set
to
zero
(0)
and
the
value
of
the
resulting
<code>
xs:dayTimeDuration
</code>
is
calculated.
Alternatively,
the
value
of
<code>
$arg2
</code>
modulus
86,400
is
used
as
the
second
argument.
This
value
is
added
to
the
value
of
<code>
$arg1
</code>
converted
to
an
<code>
xs:dateTime
</code>
using
a
reference
date
such
as
<code>
1972-12-31
</code>,
and
the
time
<del class="diff-old">components
</del>
<ins class="diff-chg">component
</ins>
of
the
result
<ins class="diff-new">is
</ins>
returned.
Note
that
the
<code>
xs:time
</code>
returned
may
occur
in
a
following
or
preceding
day
and
may
be
less
than
<code>
$arg1
</code>.
</p>
<p>
The
result
has
the
same
timezone
as
<code>
$arg1
</code>.
If
<code>
$arg1
</code>
has
no
timezone,
the
result
has
no
timezone.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Examples
</ins></dt><dd>
<p>
<del class="diff-old">This
functions
backs
up
</del>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
op:add-dayTimeDuration-to-time(xs:time("11:12:00"),
xs:dayTimeDuration("P3DT1H15M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:time("12:27:00")
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:add-dayTimeDuration-to-time(xs:time("23:12:00+03:00"),
xs:dayTimeDuration("P1DT3H15M"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:time("02:27:00+03:00")
</ins></code>.<em><ins class="diff-chg">
(That
is,
</ins><code><ins class="diff-chg">
{0,
0,
0,
2,
27,
0,
PT3H}
</ins></code><ins class="diff-chg">
).
</ins></em></p></dd></dl></div><div class="div3"><h4><a name="func-subtract-dayTimeDuration-from-time" id= "func-subtract-dayTimeDuration-from-time"></a><ins class="diff-chg">
9.7.13
op:subtract-dayTimeDuration-from-time
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
</ins>
the
<del class="diff-old">"+"
</del>
<code>
<ins class="diff-chg">xs:time
</ins></code><ins class="diff-chg">
value
that
is
a
given
duration
before
a
specified
</ins><code><ins class="diff-chg">
xs:time
</ins></code><ins class="diff-chg">
(or
after,
if
the
duration
is
negative
or
causes
wrap-around
past
midnight)
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"-"
</ins>
operator
on
<code>
xs:time
</code>
and
<code>
xs:dayTimeDuration
</code>
values.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2">
<code class= "function">
<ins class="diff-chg">op:subtract-dayTimeDuration-from-time
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline">
<del class="diff-old">10.8.12.1
Examples
</del>
<code class="arg">
<ins class="diff-chg">$arg1
</ins></code>
<del class="diff-old">op:add-dayTimeDuration-to-time(xs:time("11:12:00"),
xs:dayTimeDuration("P3DT1H15M"))
</del>
</td>
<td valign="baseline">
<code class= "as">
<ins class="diff-chg">&#160;as&#160;
</ins></code><code class="type"><ins class="diff-chg">
xs:time
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg2
</ins>
</code>
</td>
<td valign="baseline">
<code class= "as">
<ins class="diff-new">&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:time
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
The
function
</ins>
returns
the
<ins class="diff-new">result
of
negating
</ins>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<del class="diff-old">value
corresponding
</del>
<ins class="diff-chg">and
adding
the
result
</ins>
to
<code>
<ins class="diff-new">$arg1
</ins></code><ins class="diff-new">
using
</ins>
the
<del class="diff-old">lexical
representation
"
</del>
<ins class="diff-chg">function
</ins>
<code>
<del class="diff-old">12:27:00
</del>
<ins class="diff-chg">add-dayTimeDuration-to-time
</ins></code>.</p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:subtract-dayTimeDuration-from-time(xs:time("11:12:00"),
xs:dayTimeDuration("P3DT1H15M"))
</ins>
</code>
<del class="diff-old">".
</del>
<ins class="diff-chg">returns
</ins><code><ins class="diff-chg">
xs:time("09:57:00")
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">op:add-dayTimeDuration-to-time(xs:time("23:12:00+03:00"),
xs:dayTimeDuration("P1DT3H15M"))
</del>
<ins class="diff-chg">op:subtract-dayTimeDuration-from-time(xs:time("08:20:00-05:00"),
xs:dayTimeDuration("P23DT10H10M"))
</ins>
</code>
returns
<code>
<ins class="diff-new">xs:time("22:10:00-05:00")
</ins></code>.</p></dd></dl></div></div><div class="div2"><h3><a name="formatting-dates-and-times" id= "formatting-dates-and-times"></a><ins class="diff-new">
9.8
Formatting
Dates
and
Times
</ins></h3><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-new">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-new">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
This
section
has
been
created
by
</ins>
the
<ins class="diff-new">editor
in
response
to
a
WG
decision
in
principle;
the
detailed
text
needs
to
be
reviewed
and
approved.
</ins></td></tr></table><table summary="Function/operator summary" border="1"><thead><tr><th><ins class="diff-new">
Function
</ins></th><th><ins class="diff-new">
Meaning
</ins></th></tr></thead><tbody><tr><td><a href= "#func-format-dateTime"><code><ins class="diff-new">
fn:format-dateTime
</ins></code></a></td><td><ins class="diff-new">
Returns
a
string
containing
an
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
value
formatted
for
display.
</ins></td></tr><tr><td><a href= "#func-format-date"><code><ins class="diff-new">
fn:format-date
</ins></code></a></td><td><ins class="diff-new">
Returns
a
string
containing
an
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
value
formatted
for
display.
</ins></td></tr><tr><td><a href= "#func-format-time"><code><ins class="diff-new">
fn:format-time
</ins></code></a></td><td><ins class="diff-new">
Returns
a
string
containing
an
</ins>
<code>
xs:time
</code>
value
<del class="diff-old">corresponding
</del>
<ins class="diff-chg">formatted
for
display.
</ins></td></tr></tbody></table><p><ins class="diff-chg">
Three
functions
are
provided
</ins>
to
<ins class="diff-new">represent
dates
and
times
as
a
string,
using
</ins>
the
<del class="diff-old">lexical
representation
"
</del>
<ins class="diff-chg">conventions
of
a
selected
calendar,
language,
and
country.
The
signatures
are
presented
first,
followed
by
the
rules
which
apply
to
each
of
the
functions.
</ins></p><div class="div3"><h4><a name="func-format-dateTime" id= "func-format-dateTime"></a><ins class="diff-chg">
9.8.1
fn:format-dateTime
</ins></h4><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
a
string
containing
an
</ins>
<code>
<del class="diff-old">02:27:00+03:00
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
<del class="diff-old">",
i.e.
{0,
0,
0,
2,
27,
0,
PT3H}
.
</del>
<ins class="diff-chg">value
formatted
for
display.
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="5"><code class= "function"><ins class="diff-chg">
fn:format-dateTime
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$value
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:dateTime?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$picture
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-chg">
xs:string
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$language
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:string?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$calendar
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:string?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$country
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:string?
</ins></code></td></tr></table></div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
<ins class="diff-new">fn:format-dateTime
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$value
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:dateTime?
</ins></code>,<code class="arg"><ins class="diff-new">
$picture
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string?
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
See
</ins><a href="#rules-for-datetime-formatting"><b><ins class="diff-new">
9.8.4
The
date/time
formatting
functions
</ins></b></a>.</p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-format-date" id="func-format-date">
</a>
<del class="diff-old">10.8.13
op:subtract-dayTimeDuration-from-time
</del>
<ins class="diff-chg">9.8.2
fn:format-date
</ins>
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
string
containing
an
</ins><code><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
value
formatted
for
display.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="5">
<code class= "function">
<del class="diff-old">op:subtract-dayTimeDuration-from-time
</del>
<ins class="diff-chg">fn:format-date
</ins>
</code>
(
</td>
<td valign="baseline">
<code class="arg">
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">$value
</ins>
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:date?
</ins>
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">$picture
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-chg">
xs:string
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$language
</ins>
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:string?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$calendar
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:string?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$country
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:string?
</ins>
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
<ins class="diff-new">xs:string?
</ins></code></td></tr></table></div></div><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:format-date
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$value
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:date?
</ins></code>,<code class="arg"><ins class="diff-new">
$picture
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string?
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
See
</ins><a href="#rules-for-datetime-formatting"><b><ins class="diff-new">
9.8.4
The
date/time
formatting
functions
</ins></b></a>.</p></dd></dl></div><div class="div3"><h4><a name="func-format-time" id="func-format-time"></a><ins class="diff-new">
9.8.3
fn:format-time
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
string
containing
an
</ins><code>
xs:time
</code>
<ins class="diff-new">value
formatted
for
display.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="5"><code class= "function"><ins class="diff-new">
fn:format-time
</ins></code><ins class="diff-new">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-new">
$value
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:time?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$picture
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:string
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$language
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$calendar
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string?
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$country
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string?
</ins></code>
</td>
</tr>
</table>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
<ins class="diff-new">fn:format-time
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$value
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:time?
</ins></code>,<code class="arg"><ins class="diff-new">
$picture
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string?
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
<ins class="diff-chg">See
</ins><a href="#rules-for-datetime-formatting"><b><ins class="diff-chg">
9.8.4
The
date/time
formatting
functions
</ins></b></a>.</p></dd></dl></div><div class="div3"><h4><a name="rules-for-datetime-formatting" id= "rules-for-datetime-formatting"></a><ins class="diff-chg">
9.8.4
The
date/time
formatting
functions
</ins></h4><p><ins class="diff-chg">
The
</ins><a href= "#func-format-dateTime"><code><ins class="diff-chg">
fn:format-dateTime
</ins></code></a>,<a href="#func-format-date"><code><ins class="diff-chg">
fn:format-date
</ins></code></a>,<ins class="diff-chg">
and
</ins><a href="#func-format-time"><code><ins class="diff-chg">
fn:format-time
</ins></code></a><ins class="diff-chg">
functions
format
</ins><code><ins class="diff-chg">
$value
</ins></code><ins class="diff-chg">
as
a
string
using
the
picture
string
specified
by
the
</ins><code><ins class="diff-chg">
$picture
</ins></code><ins class="diff-chg">
argument,
the
calendar
specified
by
the
</ins><code><ins class="diff-chg">
$calendar
</ins></code><ins class="diff-chg">
argument,
the
language
specified
by
the
</ins><code><ins class="diff-chg">
$language
</ins></code><ins class="diff-chg">
argument,
and
the
country
specified
by
the
</ins><code><ins class="diff-chg">
$country
</ins></code><ins class="diff-chg">
argument.
</ins>
The
result
<ins class="diff-new">of
the
function
</ins>
is
<del class="diff-old">calculated
</del>
<ins class="diff-chg">the
formatted
string
representation
of
the
supplied
</ins><code><ins class="diff-chg">
xs:dateTime
</ins></code>,<code><ins class="diff-chg">
xs:date
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
xs:time
</ins></code><ins class="diff-chg">
value.
</ins></p><p><span class="termdef"><a name="dt-date-formatting-function" id= "dt-date-formatting-function"></a><ins class="diff-chg">
[Definition]
The
three
functions
</ins><a href= "#func-format-dateTime"><code><ins class="diff-chg">
fn:format-dateTime
</ins></code></a>,<a href="#func-format-date"><code><ins class="diff-chg">
fn:format-date
</ins></code></a>,<ins class="diff-chg">
and
</ins><a href="#func-format-time"><code><ins class="diff-chg">
fn:format-time
</ins></code></a><ins class="diff-chg">
are
referred
to
collectively
as
the
</ins><b><ins class="diff-chg">
date
formatting
functions
</ins></b>.</span></p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$value
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Calling
the
two-argument
form
of
each
of
the
three
functions
is
equivalent
to
calling
the
five-argument
form
with
each
of
the
last
three
arguments
set
to
an
empty
sequence.
</ins></p><p><ins class="diff-chg">
For
details
of
the
</ins><code><ins class="diff-chg">
language
</ins></code>,<code><ins class="diff-chg">
calendar
</ins></code>,<ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
country
</ins></code><ins class="diff-chg">
arguments,
see
</ins><a href= "#lang-cal-country"><b><ins class="diff-chg">
9.8.4.2
The
Language,
Calendar,
and
Country
Arguments
</ins></b></a>.</p><p><ins class="diff-chg">
In
general,
the
use
of
an
invalid
</ins><code><ins class="diff-chg">
picture
</ins></code>,<code><ins class="diff-chg">
language
</ins></code>,<code><ins class="diff-chg">
calendar
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
country
</ins></code><ins class="diff-chg">
argument
results
in
a
dynamic
error.
By
contrast,
use
of
an
option
in
any
of
these
arguments
that
is
valid
but
not
supported
</ins>
by
<del class="diff-old">first
setting
</del>
the
<del class="diff-old">day
</del>
<ins class="diff-chg">implementation
is
not
an
error,
and
in
these
cases
the
implementation
is
required
to
output
the
value
in
a
fallback
representation.
</ins></p><div class="div4"><h5><a name="date-picture-string" id= "date-picture-string"></a><ins class="diff-chg">
9.8.4.1
The
Picture
String
</ins></h5><p><ins class="diff-chg">
The
picture
consists
of
a
sequence
of
variable
markers
and
literal
substrings.
A
substring
enclosed
in
square
brackets
is
interpreted
as
a
variable
marker;
substrings
not
enclosed
in
square
brackets
are
taken
as
literal
substrings.
The
literal
substrings
are
optional
and
if
present
are
rendered
unchanged,
including
any
whitespace.
If
an
opening
or
closing
square
bracket
is
required
within
a
literal
substring,
it
</ins><strong><ins class="diff-chg">
must
</ins></strong><ins class="diff-chg">
be
doubled.
The
variable
markers
are
replaced
in
the
result
by
strings
representing
aspects
of
the
date
and/or
time
to
be
formatted.
These
are
described
in
detail
below.
</ins></p><p><ins class="diff-chg">
A
variable
marker
consists
of
a
component
specifier
followed
optionally
by
one
or
two
presentation
modifiers
and/or
optionally
by
a
width
modifier.
Whitespace
within
a
variable
marker
is
ignored.
</ins></p><p><ins class="diff-chg">
The
</ins><em>
component
<ins class="diff-new">specifier
</ins></em><ins class="diff-new">
indicates
the
component
of
the
date
or
time
that
is
required,
and
takes
the
following
values:
</ins></p><table summary="A table [this is bad style]" border="1" cellpadding="5"><thead><tr><th align="left"><ins class="diff-new">
Specifier
</ins></th><th align="left"><ins class="diff-new">
Meaning
</ins></th><th align="left"><ins class="diff-new">
Default
Presentation
Modifier
</ins></th></tr></thead><tbody><tr><td valign="top"><ins class="diff-new">
Y
</ins></td><td><ins class="diff-new">
year
(absolute
value)
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
M
</ins></td><td><ins class="diff-new">
month
in
year
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
D
</ins></td><td><ins class="diff-new">
day
in
month
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
d
</ins></td><td><ins class="diff-new">
day
in
year
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
F
</ins></td><td><ins class="diff-new">
day
of
week
</ins></td><td valign="top"><ins class="diff-new">
n
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
W
</ins></td><td><ins class="diff-new">
week
in
year
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
w
</ins></td><td><ins class="diff-new">
week
in
month
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
H
</ins></td><td><ins class="diff-new">
hour
in
day
(24
hours)
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
h
</ins></td><td><ins class="diff-new">
hour
</ins>
in
<ins class="diff-new">half-day
(12
hours)
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
P
</ins></td><td><ins class="diff-new">
am/pm
marker
</ins></td><td valign="top"><ins class="diff-new">
n
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
m
</ins></td><td><ins class="diff-new">
minute
in
hour
</ins></td><td valign="top"><ins class="diff-new">
01
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
s
</ins></td><td><ins class="diff-new">
second
in
minute
</ins></td><td valign="top"><ins class="diff-new">
01
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
f
</ins></td><td><ins class="diff-new">
fractional
seconds
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
Z
</ins></td><td><ins class="diff-new">
timezone
as
a
time
offset
from
UTC,
or
if
an
alphabetic
modifier
is
present
the
conventional
name
of
a
timezone
(such
as
PST)
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
z
</ins></td><td><ins class="diff-new">
timezone
as
a
time
offset
using
GMT,
for
example
GMT+1
or
GMT-05:00.
For
this
component
there
is
a
fixed
prefix
of
</ins><code><ins class="diff-new">
GMT
</ins></code>,<ins class="diff-new">
or
a
localized
variation
thereof
for
the
chosen
language,
and
the
presentation
modifier
controls
</ins>
the
<del class="diff-old">canonical
lexical
</del>
representation
of
<ins class="diff-new">the
signed
time
offset
that
follows.
</ins></td><td valign="top"><ins class="diff-new">
1
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
C
</ins></td><td><ins class="diff-new">
calendar:
the
name
or
abbreviation
of
a
calendar
name
</ins></td><td valign="top"><ins class="diff-new">
n
</ins></td></tr><tr><td valign="top"><ins class="diff-new">
E
</ins></td><td><ins class="diff-new">
era:
the
name
of
a
baseline
for
the
numbering
of
years,
for
example
the
reign
of
a
monarch
</ins></td><td valign="top"><ins class="diff-new">
n
</ins></td></tr></tbody></table><p><ins class="diff-new">
An
error
is
reported
[
</ins><a href="#ERRFOFD1340" title= "err:FOFD1340"><ins class="diff-new">
err:FOFD1340
</ins></a><ins class="diff-new">
]
if
the
syntax
of
the
picture
is
incorrect.
</ins></p><p><ins class="diff-new">
An
error
is
reported
[
</ins><a href="#ERRFOFD1350" title= "err:FOFD1350"><ins class="diff-new">
err:FOFD1350
</ins></a><ins class="diff-new">
]
if
a
component
specifier
within
the
picture
refers
to
components
that
are
not
available
in
the
given
type
of
</ins>
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">$value
</ins></code>,<ins class="diff-chg">
for
example
if
the
picture
supplied
to
the
</ins><code><ins class="diff-chg">
format-time
</ins>
</code>
<ins class="diff-new">refers
</ins>
to
<del class="diff-old">zero
(0)
and
calculating
</del>
the
<ins class="diff-new">year,
month,
or
day
component.
</ins></p><p><ins class="diff-new">
It
is
not
an
error
to
include
a
timezone
component
when
the
supplied
</ins>
value
<ins class="diff-new">has
no
timezone.
In
these
circumstances
the
timezone
component
will
be
ignored.
</ins></p><p><ins class="diff-new">
The
first
</ins><em><ins class="diff-new">
presentation
modifier
</ins></em><ins class="diff-new">
indicates
the
style
in
which
the
value
of
a
component
is
to
be
represented.
Its
value
may
be
either:
</ins></p><ul><li><p><ins class="diff-new">
any
format
token
permitted
as
a
primary
format
token
in
the
second
argument
</ins>
of
the
<del class="diff-old">resulting
</del>
<code>
<del class="diff-old">xs:dayTimeDuration
.
Alternatively,
</del>
<ins class="diff-chg">format-integer
</ins></code><ins class="diff-chg">
function,
indicating
that
</ins>
the
value
of
<ins class="diff-new">the
component
is
to
be
output
numerically
using
the
specified
number
format
(for
example,
</ins>
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">1
</ins></code>,<code><ins class="diff-chg">
01
</ins></code>,<code><ins class="diff-chg">
i
</ins></code>,<code><ins class="diff-chg">
I
</ins></code>,<code><ins class="diff-chg">
w
</ins></code>,<code><ins class="diff-chg">
W
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
Ww
</ins>
</code>
<del class="diff-old">modulus
86,400
</del>
<ins class="diff-chg">)
or
</ins></p></li><li><p><ins class="diff-chg">
the
format
token
</ins><code><ins class="diff-chg">
n
</ins></code>,<code><ins class="diff-chg">
N
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
Nn
</ins></code>,<ins class="diff-chg">
indicating
that
the
value
of
the
component
is
to
be
output
by
name,
in
lower-case,
upper-case,
or
title-case
respectively.
Components
that
can
be
output
by
name
include
(but
are
not
limited
to)
months,
days
of
the
week,
timezones,
and
eras.
If
the
processor
cannot
output
these
components
by
name
for
the
chosen
calendar
and
language
then
it
must
use
an
implementation-defined
fallback
representation.
</ins></p></li></ul><p><ins class="diff-chg">
If
a
comma
</ins>
is
<ins class="diff-new">to
be
</ins>
used
as
<ins class="diff-new">a
grouping
separator
within
the
format
token,
then
there
must
be
a
width
specifier.
More
specifically:
if
a
variable
marker
contains
one
or
more
commas,
then
the
last
comma
is
treated
as
introducing
the
width
modifier,
and
all
others
are
treated
as
grouping
separators.
So
</ins><code><ins class="diff-new">
[Y9,999,*]
</ins></code><ins class="diff-new">
will
output
the
year
as
</ins><code><ins class="diff-new">
2,008
</ins></code>.</p><p><ins class="diff-new">
If
the
implementation
does
not
support
the
use
of
</ins>
the
<ins class="diff-new">requested
format
token,
it
</ins><strong><ins class="diff-new">
must
</ins></strong><ins class="diff-new">
use
the
default
presentation
modifier
for
that
component.
</ins></p><p><ins class="diff-new">
If
the
first
presentation
modifier
is
present,
then
it
may
optionally
be
followed
by
a
</ins>
second
<del class="diff-old">argument.
</del>
<ins class="diff-chg">presentation
modifier
as
follows:
</ins></p><table summary="A table [this is bad style]" border="1" cellpadding="5"><thead><tr><th align="left"><ins class="diff-chg">
Modifier
</ins></th><th align="left"><ins class="diff-chg">
Meaning
</ins></th></tr></thead><tbody><tr><td valign="top"><ins class="diff-chg">
t
</ins></td><td valign="top"><ins class="diff-chg">
traditional
numbering.
</ins>
This
<del class="diff-old">value
</del>
<ins class="diff-chg">has
the
same
meaning
as
in
the
second
argument
of
</ins><code><ins class="diff-chg">
fn:format-integer
</ins></code>.</td></tr><tr><td valign="top"><ins class="diff-chg">
o
</ins></td><td valign="top"><ins class="diff-chg">
ordinal
form
of
a
number,
for
example
</ins><code><ins class="diff-chg">
8th
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
8º
</ins></code>.<ins class="diff-chg">
This
has
the
same
meaning
as
in
the
second
argument
of
</ins><code><ins class="diff-chg">
fn:format-integer
</ins></code>.<ins class="diff-chg">
The
actual
representation
of
the
ordinal
form
of
a
number
may
depend
not
only
on
the
language,
but
also
on
the
grammatical
context
(for
example,
in
some
languages
it
must
agree
in
gender).
</ins></td></tr></tbody></table><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b></p><p><ins class="diff-chg">
Although
the
formatting
rules
are
expressed
in
terms
of
the
rules
for
format
tokens
in
</ins><code><ins class="diff-chg">
fn:format-integer
</ins></code>,<ins class="diff-chg">
the
formats
actually
used
may
be
specialized
to
the
numbering
of
date
components
where
appropriate.
For
example,
in
Italian,
it
</ins>
is
<del class="diff-old">subtracted
from
</del>
<ins class="diff-chg">conventional
to
use
an
ordinal
number
(
</ins><code><ins class="diff-chg">
primo
</ins></code><ins class="diff-chg">
)
for
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">first
day
</ins>
of
<ins class="diff-new">the
month,
and
cardinal
numbers
(
</ins>
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">due,
tre,
quattro
...
</ins>
</code>
<del class="diff-old">converted
</del>
<ins class="diff-chg">)
for
the
remaining
days.
A
processor
may
therefore
use
this
convention
to
number
days
of
the
month,
ignoring
the
presence
or
absence
of
the
ordinal
presentation
modifier.
</ins></p></div><p><ins class="diff-chg">
Whether
or
not
a
presentation
modifier
is
included,
a
width
modifier
may
be
supplied.
This
indicates
the
number
of
characters
or
digits
to
be
included
in
the
representation
of
the
value.
</ins></p><p><ins class="diff-chg">
The
width
modifier,
if
present,
is
introduced
by
a
comma
or
semicolon.
It
takes
the
form:
</ins></p><p><code><ins class="diff-chg">
&#160;&#160;&#160;","&#160;&#160;min-width
("-"
max-width)?
</ins></code></p><p><ins class="diff-chg">
where
</ins><code><ins class="diff-chg">
min-width
</ins></code><ins class="diff-chg">
is
either
an
unsigned
integer
indicating
the
minimum
number
of
characters
</ins>
to
<ins class="diff-new">be
output,
or
</ins><code><ins class="diff-new">
*
</ins></code><ins class="diff-new">
indicating
that
there
is
no
explicit
minimum,
and
</ins><code><ins class="diff-new">
max-width
</ins></code><ins class="diff-new">
is
either
</ins>
an
<ins class="diff-new">unsigned
integer
indicating
the
maximum
number
of
characters
to
be
output,
or
</ins>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">*
</ins>
</code>
<del class="diff-old">using
</del>
<ins class="diff-chg">indicating
that
there
is
no
explicit
maximum;
if
</ins><code><ins class="diff-chg">
max-width
</ins></code><ins class="diff-chg">
is
omitted
then
</ins><code><ins class="diff-chg">
*
</ins></code><ins class="diff-chg">
is
assumed.
Both
integers,
if
present,
</ins><strong><ins class="diff-chg">
must
</ins></strong><ins class="diff-chg">
be
greater
than
zero.
</ins></p><p><ins class="diff-chg">
A
format
token
containing
more
than
one
digit,
such
as
</ins><code><ins class="diff-chg">
001
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
9999
</ins></code>,<ins class="diff-chg">
sets
the
minimum
and
maximum
width
to
the
number
of
digits
appearing
in
the
format
token;
if
</ins>
a
<del class="diff-old">reference
date
</del>
<ins class="diff-chg">width
modifier
is
also
present,
then
the
width
modifier
takes
precedence.
</ins></p><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b></p><p><ins class="diff-chg">
A
format
token
consisting
of
a
single
digit,
</ins>
such
as
<code>
<del class="diff-old">1972-12-31
</del>
<ins class="diff-chg">1
</ins></code>,<ins class="diff-chg">
does
not
constrain
the
number
of
digits
in
the
output.
In
the
case
of
fractional
seconds
in
particular,
</ins><code><ins class="diff-chg">
[f001]
</ins></code><ins class="diff-chg">
requests
three
decimal
digits,
</ins><code><ins class="diff-chg">
[f01]
</ins>
</code>
<ins class="diff-new">requests
two
digits,
but
</ins><code><ins class="diff-new">
[f1]
</ins></code><ins class="diff-new">
will
produce
an
implementation-defined
number
of
digits.
If
exactly
one
digit
is
required,
this
can
be
achieved
using
the
component
specifier
</ins><code><ins class="diff-new">
[f1,1-1]
</ins></code>.</p></div><p><ins class="diff-new">
If
the
minimum
</ins>
and
<ins class="diff-new">maximum
width
are
unspecified,
then
</ins>
the
<del class="diff-old">time
components
</del>
<ins class="diff-chg">output
uses
as
many
characters
as
are
required
to
represent
the
value
</ins>
of
the
<del class="diff-old">result
</del>
<ins class="diff-chg">component
without
truncation
and
without
padding:
this
is
referred
to
below
as
the
</ins><em><ins class="diff-chg">
full
representation
</ins></em><ins class="diff-chg">
of
the
value.
For
a
timezone
offset
(component
specifier
</ins><code><ins class="diff-chg">
z
</ins></code><ins class="diff-chg">
),
the
full
representation
consists
of
a
sign
for
the
offset,
the
number
of
hours
of
the
offset,
and
if
the
offset
is
not
an
integral
number
of
hours,
a
colon
(
</ins><code>:</code><ins class="diff-chg">
)
followed
by
the
two
digits
of
the
minutes
of
the
offset..
</ins></p><p><ins class="diff-chg">
If
the
full
representation
of
the
value
exceeds
the
specified
maximum
width,
then
the
processor
</ins><strong><ins class="diff-chg">
should
</ins></strong><ins class="diff-chg">
attempt
to
use
an
alternative
shorter
representation
that
fits
within
the
maximum
width.
Where
the
presentation
modifier
is
</ins><code><ins class="diff-chg">
N
</ins></code>,<code><ins class="diff-chg">
n
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
Nn
</ins></code>,<ins class="diff-chg">
this
is
done
by
abbreviating
the
name,
using
either
conventional
abbreviations
if
available,
or
crude
right-truncation
if
not.
For
example,
setting
</ins><code><ins class="diff-chg">
max-width
</ins></code><ins class="diff-chg">
to
</ins><code><ins class="diff-chg">
4
</ins></code><ins class="diff-chg">
indicates
that
four-letter
abbreviations
</ins><strong><ins class="diff-chg">
should
</ins></strong><ins class="diff-chg">
be
used,
though
it
would
be
acceptable
to
use
a
three-letter
abbreviation
if
this
is
in
conventional
use.
(For
example,
"Tuesday"
might
be
abbreviated
to
"Tues",
and
"Friday"
to
"Fri".)
In
the
case
of
the
year
component,
setting
</ins><code><ins class="diff-chg">
max-width
</ins></code><ins class="diff-chg">
requests
omission
of
high-order
digits
from
the
year,
for
example,
if
</ins><code><ins class="diff-chg">
max-width
</ins></code><ins class="diff-chg">
is
set
to
</ins><code><ins class="diff-chg">
2
</ins></code><ins class="diff-chg">
then
the
year
2003
will
be
output
as
</ins><code><ins class="diff-chg">
03
</ins></code>.<ins class="diff-chg">
In
the
case
of
the
fractional
seconds
component,
the
value
is
rounded
to
the
specified
size
as
if
by
applying
the
function
</ins><code><ins class="diff-chg">
round-half-to-even(fractional-seconds,
max-width)
</ins></code>.<ins class="diff-chg">
If
no
mechanism
is
available
for
fitting
the
value
within
the
specified
maximum
width
(for
example,
when
roman
numerals
</ins>
are
<del class="diff-old">returned.
Note
</del>
<ins class="diff-chg">used),
then
the
value
</ins><strong><ins class="diff-chg">
should
</ins></strong><ins class="diff-chg">
be
output
in
its
full
representation.
</ins></p><p><ins class="diff-chg">
If
the
full
representation
of
the
value
is
shorter
than
the
specified
minimum
width,
then
the
processor
</ins><strong><ins class="diff-chg">
should
</ins></strong><ins class="diff-chg">
pad
the
value
to
the
specified
width.
</ins></p><ul><li><p><ins class="diff-chg">
For
decimal
representations
of
numbers,
this
</ins><strong><ins class="diff-chg">
should
</ins></strong><ins class="diff-chg">
be
done
by
prepending
zero
digits
from
the
appropriate
set
of
digit
characters,
or
appending
zero
digits
in
the
case
of
the
fractional
seconds
component.
</ins></p></li><li><p><ins class="diff-chg">
For
timezone
offsets
this
should
be
done
by
first
appending
a
colon
(
</ins><code>:</code><ins class="diff-chg">
)
followed
by
two
zero
digits
from
the
appropriate
set
of
digit
characters
if
the
full
representation
does
not
already
include
a
minutes
component
and
if
the
specified
minimum
width
permits
adding
three
characters,
and
then
if
necessary
prepending
zero
digits
from
the
appropriate
set
of
digit
characters
to
the
hour
component.
</ins></p></li><li><p><ins class="diff-chg">
In
other
cases,
it
</ins><strong><ins class="diff-chg">
should
</ins></strong><ins class="diff-chg">
be
done
by
appending
spaces.
</ins></p></li></ul></div><div class="div4"><h5><a name="lang-cal-country" id="lang-cal-country"></a><ins class="diff-chg">
9.8.4.2
The
Language,
Calendar,
and
Country
Arguments
</ins></h5><p><ins class="diff-chg">
The
set
of
languages,
calendars,
and
countries
that
are
supported
in
the
</ins><a title="date formatting function" class= "termref" href="#dt-date-formatting-function"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
date
formatting
functions
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
is
</ins><a title="implementation-defined" class= "termref" href="#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.<ins class="diff-chg">
When
any
of
these
arguments
is
omitted
or
is
an
empty
sequence,
an
</ins><a title="implementation-defined" class= "termref" href="#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
default
value
is
used.
</ins></p><p><ins class="diff-chg">
If
the
fallback
representation
uses
a
different
calendar
from
that
requested,
the
output
string
</ins><strong><ins class="diff-chg">
must
</ins></strong><ins class="diff-chg">
identify
the
calendar
actually
used,
for
example
by
prefixing
the
string
with
</ins><code><ins class="diff-chg">
[Calendar:
X]
</ins></code><ins class="diff-chg">
(where
X
is
the
calendar
actually
used),
localized
as
appropriate
to
the
requested
language.
If
the
fallback
representation
uses
a
different
language
from
</ins>
that
<ins class="diff-new">requested,
the
output
string
</ins><strong><ins class="diff-new">
must
</ins></strong><ins class="diff-new">
identify
</ins>
the
<ins class="diff-new">language
actually
used,
for
example
by
prefixing
the
string
with
</ins>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">[Language:
Y]
</ins>
</code>
<del class="diff-old">returned
may
occur
</del>
<ins class="diff-chg">(where
Y
is
the
language
actually
used)
localized
</ins>
in
<ins class="diff-new">an
implementation-dependent
way.
If
</ins>
a
<del class="diff-old">preceding
</del>
<ins class="diff-chg">particular
component
of
the
value
cannot
be
output
in
the
requested
format,
it
</ins><strong><ins class="diff-chg">
should
</ins></strong><ins class="diff-chg">
be
output
in
the
default
format
for
that
component.
</ins></p><p><ins class="diff-chg">
The
</ins><code><ins class="diff-chg">
language
</ins></code><ins class="diff-chg">
argument
specifies
the
language
to
be
used
for
the
result
string
of
the
function.
The
value
of
the
argument
</ins><strong><ins class="diff-chg">
must
</ins></strong><ins class="diff-chg">
be
either
the
empty
sequence
</ins>
or
<del class="diff-old">following
day
</del>
<ins class="diff-chg">a
value
that
would
be
valid
for
the
</ins><code><ins class="diff-chg">
xml:lang
</ins></code><ins class="diff-chg">
attribute
(see
[XML]).
Note
that
this
permits
the
identification
of
sublanguages
based
on
country
codes
(from
</ins><a href="#ISO3166"><ins class="diff-chg">
[ISO
3166-1]
</ins></a><ins class="diff-chg">
)
as
well
as
identification
of
dialects
</ins>
and
<ins class="diff-new">of
regions
within
a
country.
</ins></p><p><ins class="diff-new">
If
the
</ins><code><ins class="diff-new">
language
</ins></code><ins class="diff-new">
argument
is
omitted
or
is
set
to
an
empty
sequence,
or
if
it
is
set
to
an
invalid
value
or
a
value
that
the
implementation
does
not
recognize,
then
the
processor
uses
an
</ins><a title="implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation-defined
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
language.
</ins></p><p><ins class="diff-new">
The
language
is
used
to
select
the
appropriate
language-dependent
forms
of:
</ins></p><blockquote><p><ins class="diff-new">
names
(for
example,
of
months)
</ins><br /><ins class="diff-new">
numbers
expressed
as
words
or
as
ordinals
(
</ins><code><ins class="diff-new">
twenty,
20th,
twentieth
</ins></code><ins class="diff-new">
)
</ins><br /><ins class="diff-new">
hour
convention
(0-23
vs
1-24,
0-11
vs
1-12)
</ins><br /><ins class="diff-new">
first
day
of
week,
first
week
of
year
</ins></p></blockquote><p><ins class="diff-new">
Where
appropriate
this
choice
</ins>
may
<ins class="diff-new">also
take
into
account
the
value
of
the
</ins><code><ins class="diff-new">
country
</ins></code><ins class="diff-new">
argument,
though
this
</ins><strong><ins class="diff-new">
should
</ins></strong><ins class="diff-new">
not
</ins>
be
<del class="diff-old">greater
than
</del>
<ins class="diff-chg">used
to
override
the
language
or
any
sublanguage
that
is
specified
as
part
of
the
</ins>
<code>
<del class="diff-old">$arg1
.
</del>
<ins class="diff-chg">language
</ins></code><ins class="diff-chg">
argument.
</ins>
</p>
<p>
The
<del class="diff-old">result
has
</del>
<ins class="diff-chg">choice
of
</ins>
the
<del class="diff-old">same
timezone
</del>
<ins class="diff-chg">names
and
abbreviations
used
in
any
given
language
is
</ins><a title="implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.<ins class="diff-chg">
For
example,
one
implementation
might
abbreviate
July
</ins>
as
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">Jul
</ins></code><ins class="diff-chg">
while
another
uses
</ins><code><ins class="diff-chg">
Jly
</ins>
</code>.
<del class="diff-old">If
</del>
<ins class="diff-chg">In
German,
one
implementation
might
represent
Saturday
as
</ins>
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">Samstag
</ins>
</code>
<del class="diff-old">has
no
timezone,
</del>
<ins class="diff-chg">while
another
uses
</ins><code><ins class="diff-chg">
Sonnabend
</ins></code>.<ins class="diff-chg">
Implementations
</ins><strong><ins class="diff-chg">
may
</ins></strong><ins class="diff-chg">
provide
mechanisms
allowing
users
to
control
such
choices.
</ins></p><p><ins class="diff-chg">
Where
ordinal
numbers
are
used,
</ins>
the
<del class="diff-old">result
</del>
<ins class="diff-chg">selection
of
the
correct
representation
of
the
ordinal
(for
example,
the
linguistic
gender)
</ins><strong><ins class="diff-chg">
may
</ins></strong><ins class="diff-chg">
depend
on
the
component
being
formatted
and
on
its
textual
context
in
the
picture
string.
</ins></p><p><ins class="diff-chg">
The
</ins><code><ins class="diff-chg">
calendar
</ins></code><ins class="diff-chg">
attribute
specifies
that
the
</ins><code><ins class="diff-chg">
dateTime
</ins></code>,<code><ins class="diff-chg">
date
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
time
</ins></code><ins class="diff-chg">
supplied
in
the
</ins><code><ins class="diff-chg">
$value
</ins></code><ins class="diff-chg">
argument
</ins><strong><ins class="diff-chg">
must
</ins></strong><ins class="diff-chg">
be
converted
to
a
value
in
the
specified
calendar
and
then
converted
to
a
string
using
the
conventions
of
that
calendar.
</ins></p><p><ins class="diff-chg">
A
calendar
value
</ins><strong><ins class="diff-chg">
must
</ins></strong><ins class="diff-chg">
be
a
valid
lexical
QName.
If
the
QName
does
not
have
a
prefix,
then
it
identifies
a
calendar
with
the
designator
specified
below.
If
the
QName
</ins>
has
<del class="diff-old">no
timezone.
</del>
<ins class="diff-chg">a
prefix,
then
the
QName
is
expanded
into
an
expanded-QName
using
the
in-scope
namespaces
from
the
static
context;
the
expanded-QName
identifies
the
calendar;
the
behavior
in
this
case
is
</ins><a title= "implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.</p><p><ins class="diff-chg">
If
the
calendar
attribute
is
omitted
an
</ins><a title= "implementation-defined" class="termref" href= "#implementation-defined"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a><ins class="diff-chg">
value
is
used.
</ins></p><div class="note"><p class="prefix"><b><ins class="diff-chg">
Note:
</ins></b></p><p><ins class="diff-chg">
The
calendars
listed
below
were
known
to
be
in
use
during
the
last
hundred
years.
Many
other
calendars
have
been
used
in
the
past.
</ins>
</p>
<p>
This
<del class="diff-old">functions
backs
up
</del>
<ins class="diff-chg">specification
does
not
define
any
of
these
calendars,
nor
the
way
that
they
map
to
the
value
space
of
</ins>
the
<del class="diff-old">"-"
operator
on
</del>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
<ins class="diff-new">data
type
in
</ins><a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a>.<ins class="diff-new">
There
may
be
ambiguities
when
dates
are
recorded
using
different
calendars.
For
example,
the
start
of
a
new
day
is
not
simultaneous
in
different
calendars,
and
may
also
vary
geographically
(for
example,
based
on
the
time
of
sunrise
or
sunset).
Translation
of
dates
is
therefore
more
reliable
when
the
time
of
day
is
also
known,
and
when
the
geographic
location
is
known.
When
translating
dates
between
one
calendar
</ins>
and
<ins class="diff-new">another,
the
processor
may
take
account
of
the
values
of
the
</ins>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">country
</ins>
</code>
<del class="diff-old">values.
</del>
<ins class="diff-chg">and/or
</ins><code><ins class="diff-chg">
language
</ins></code><ins class="diff-chg">
arguments,
with
the
</ins><code><ins class="diff-chg">
country
</ins></code><ins class="diff-chg">
argument
taking
precedence.
</ins>
</p>
<p>
<ins class="diff-chg">Information
about
some
of
these
calendars,
and
algorithms
for
converting
between
them,
may
be
found
in
</ins><a href= "#CALCALC"><ins class="diff-chg">
[Calendrical
Calculations]
</ins></a>.</p></div><table summary="A table [this is bad style]" border="1" cellpadding="5"><thead><tr><th valign="top" align="left"><ins class="diff-chg">
Designator
</ins></th><th valign="top" align="left"><ins class="diff-chg">
Calendar
</ins></th></tr></thead><tbody><tr><td><ins class="diff-chg">
AD
</ins></td><td><ins class="diff-chg">
Anno
Domini
(Christian
Era)
</ins></td></tr><tr><td><ins class="diff-chg">
AH
</ins></td><td><ins class="diff-chg">
Anno
Hegirae
(Muhammedan
Era)
</ins></td></tr><tr><td><ins class="diff-chg">
AME
</ins></td><td><ins class="diff-chg">
Mauludi
Era
(solar
years
since
Mohammed's
birth)
</ins></td></tr><tr><td><ins class="diff-chg">
AM
</ins></td><td><ins class="diff-chg">
Anno
Mundi
(Jewish
Calendar)
</ins></td></tr><tr><td><ins class="diff-chg">
AP
</ins></td><td><ins class="diff-chg">
Anno
Persici
</ins></td></tr><tr><td><ins class="diff-chg">
AS
</ins></td><td><ins class="diff-chg">
Aji
Saka
Era
(Java)
</ins></td></tr><tr><td><ins class="diff-chg">
BE
</ins></td><td><ins class="diff-chg">
Buddhist
Era
</ins></td></tr><tr><td><ins class="diff-chg">
CB
</ins></td><td><ins class="diff-chg">
Cooch
Behar
Era
</ins></td></tr><tr><td><ins class="diff-chg">
CE
</ins></td><td><ins class="diff-chg">
Common
Era
</ins></td></tr><tr><td><ins class="diff-chg">
CL
</ins></td><td><ins class="diff-chg">
Chinese
Lunar
Era
</ins></td></tr><tr><td><ins class="diff-chg">
CS
</ins></td><td><ins class="diff-chg">
Chula
Sakarat
Era
</ins></td></tr><tr><td><ins class="diff-chg">
EE
</ins></td><td><ins class="diff-chg">
Ethiopian
Era
</ins></td></tr><tr><td><ins class="diff-chg">
FE
</ins></td><td><ins class="diff-chg">
Fasli
Era
</ins></td></tr><tr><td><ins class="diff-chg">
ISO
</ins></td><td><ins class="diff-chg">
ISO
8601
calendar
</ins></td></tr><tr><td><ins class="diff-chg">
JE
</ins></td><td><ins class="diff-chg">
Japanese
Calendar
</ins></td></tr><tr><td><ins class="diff-chg">
KE
</ins></td><td><ins class="diff-chg">
Khalsa
Era
(Sikh
calendar)
</ins></td></tr><tr><td><ins class="diff-chg">
KY
</ins></td><td><ins class="diff-chg">
Kali
Yuga
</ins></td></tr><tr><td><ins class="diff-chg">
ME
</ins></td><td><ins class="diff-chg">
Malabar
Era
</ins></td></tr><tr><td><ins class="diff-chg">
MS
</ins></td><td><ins class="diff-chg">
Monarchic
Solar
Era
</ins></td></tr><tr><td><ins class="diff-chg">
NS
</ins></td><td><ins class="diff-chg">
Nepal
Samwat
Era
</ins></td></tr><tr><td><ins class="diff-chg">
OS
</ins></td><td><ins class="diff-chg">
Old
Style
(Julian
Calendar)
</ins></td></tr><tr><td><ins class="diff-chg">
RS
</ins></td><td><ins class="diff-chg">
Rattanakosin
(Bangkok)
Era
</ins></td></tr><tr><td><ins class="diff-chg">
SE
</ins></td><td><ins class="diff-chg">
Saka
Era
</ins></td></tr><tr><td><ins class="diff-chg">
SH
</ins></td><td><ins class="diff-chg">
Mohammedan
Solar
Era
(Iran)
</ins></td></tr><tr><td><ins class="diff-chg">
SS
</ins></td><td><ins class="diff-chg">
Saka
Samvat
</ins></td></tr><tr><td><ins class="diff-chg">
TE
</ins></td><td><ins class="diff-chg">
Tripurabda
Era
</ins></td></tr><tr><td><ins class="diff-chg">
VE
</ins></td><td><ins class="diff-chg">
Vikrama
Era
</ins></td></tr><tr><td><ins class="diff-chg">
VS
</ins></td><td><ins class="diff-chg">
Vikrama
Samvat
Era
</ins></td></tr></tbody></table><p><ins class="diff-chg">
At
least
one
of
the
above
calendars
</ins><strong><ins class="diff-chg">
must
</ins></strong><ins class="diff-chg">
be
supported.
It
is
</ins><a title="implementation-defined" class="termref" href="#implementation-defined">
<span class= "arrow">
<ins class="diff-chg">·
</ins></span><ins class="diff-chg">
implementation-defined
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span>
</a>
<del class="diff-old">10.8.13.1
Examples
</del>
<ins class="diff-chg">which
calendars
are
supported.
</ins></p>
<p>
<ins class="diff-new">The
ISO
8601
calendar
(
</ins><a href="#ISO8601"><ins class="diff-new">
[ISO
8601]
</ins></a><ins class="diff-new">
),
which
is
included
in
the
above
list
and
designated
</ins><code><ins class="diff-new">
ISO
</ins></code>,<ins class="diff-new">
is
very
similar
to
the
Gregorian
calendar
designated
</ins><code><ins class="diff-new">
AD
</ins></code>,<ins class="diff-new">
but
it
differs
in
several
ways.
The
ISO
calendar
is
intended
to
ensure
that
date
and
time
formats
can
be
read
easily
by
other
software,
as
well
as
being
legible
for
human
users.
The
ISO
calendar
prescribes
the
use
of
particular
numbering
conventions
as
defined
in
ISO
8601,
rather
than
allowing
these
to
be
localized
on
a
per-language
basis.
In
particular
it
provides
a
numeric
'week
date'
format
which
identifies
dates
by
year,
week
of
the
year,
and
day
in
the
week;
in
the
ISO
calendar
the
days
of
the
week
are
numbered
from
1
(Monday)
to
7
(Sunday),
and
week
1
in
any
calendar
year
is
the
week
(from
Monday
to
Sunday)
that
includes
the
first
Thursday
of
that
year.
The
numeric
values
of
the
components
year,
month,
day,
hour,
minute,
and
second
are
the
same
in
the
ISO
calendar
as
the
values
used
in
the
lexical
representation
of
the
date
and
time
as
defined
in
</ins><a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a>.<ins class="diff-new">
The
era
("E"
component)
with
this
calendar
is
either
a
minus
sign
(for
negative
years)
or
a
zero-length
string
(for
positive
years).
For
dates
before
1
January,
AD
1,
year
numbers
in
the
ISO
and
AD
calendars
are
off
by
one
from
each
other:
ISO
year
0000
is
1
BC,
-0001
is
2
BC,
etc.
</ins></p><div class="note"><p class="prefix"><b><ins class="diff-new">
Note:
</ins></b></p><p><ins class="diff-new">
The
value
space
of
the
date
and
time
data
types,
as
defined
in
XML
Schema,
is
based
on
absolute
points
in
time.
The
lexical
space
of
these
data
types
defines
a
representation
of
these
absolute
points
in
time
using
the
proleptic
Gregorian
calendar,
that
is,
the
modern
Western
calendar
extrapolated
into
the
past
and
the
future;
but
the
value
space
is
calendar-neutral.
The
</ins><a title= "date formatting function" class="termref" href= "#dt-date-formatting-function"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
date
formatting
functions
</ins><span class="arrow"><ins class="diff-new">
·
</ins></span>
</a>
<ins class="diff-new">produce
a
representation
of
this
absolute
point
in
time,
but
denoted
in
a
possibly
different
calendar.
So,
for
example,
the
date
whose
lexical
representation
in
XML
Schema
is
</ins>
<code>
<del class="diff-old">op:subtract-dayTimeDuration-from-time(xs:time("11:12:00"),
xs:dayTimeDuration("P3DT1H15M"))
</del>
<ins class="diff-chg">1502-01-11
</ins>
</code>
<del class="diff-old">returns
</del>
<ins class="diff-chg">(the
day
on
which
Pope
Gregory
XIII
was
born)
might
be
formatted
using
the
Old
Style
(Julian)
calendar
as
</ins><code><ins class="diff-chg">
1
January
1502
</ins></code>.<ins class="diff-chg">
This
reflects
the
fact
that
there
was
at
that
time
a
ten-day
difference
between
the
two
calendars.
It
would
be
incorrect,
and
would
produce
incorrect
results,
to
represent
this
date
in
</ins>
an
<ins class="diff-new">element
or
attribute
of
type
</ins>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
<ins class="diff-new">as
</ins><code><ins class="diff-new">
1502-01-01
</ins></code>,<ins class="diff-new">
even
though
this
might
reflect
the
way
the
date
was
recorded
in
contemporary
documents.
</ins></p><p><ins class="diff-new">
When
referring
to
years
occurring
in
antiquity,
modern
historians
generally
use
a
numbering
system
in
which
there
is
no
year
zero
(the
year
before
1
CE
is
thus
1
BCE).
This
is
the
convention
that
</ins><strong><ins class="diff-new">
should
</ins></strong><ins class="diff-new">
be
used
when
the
requested
calendar
is
OS
(Julian)
or
AD
(Gregorian).
When
the
requested
calendar
is
ISO,
however,
the
conventions
of
ISO
8601
</ins><strong><ins class="diff-new">
should
</ins></strong><ins class="diff-new">
be
followed:
here
the
year
before
+0001
is
numbered
zero.
In
</ins><a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a><ins class="diff-new">
(version
1.0),
the
</ins>
value
<del class="diff-old">corresponding
</del>
<ins class="diff-chg">space
for
</ins><code><ins class="diff-chg">
xs:date
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
xs:dateTime
</ins></code><ins class="diff-chg">
does
not
include
a
year
zero:
however,
a
future
edition
is
expected
</ins>
to
<ins class="diff-new">endorse
the
ISO
8601
convention.
This
means
that
the
date
on
which
Julius
Caesar
was
assassinated
has
</ins>
the
<ins class="diff-new">ISO
8601
</ins>
lexical
representation
<del class="diff-old">"09:57:00"
.
</del>
<ins class="diff-chg">-0043-03-13,
but
will
be
formatted
as
15
March
44
BCE
in
the
Julian
calendar
or
13
March
44
BCE
in
the
Gregorian
calendar
(dependant
on
the
chosen
localization
of
the
names
of
months
and
eras).
</ins>
</p>
</div>
<p>
<ins class="diff-new">The
intended
use
of
the
</ins>
<code>
<del class="diff-old">op:subtract-dayTimeDuration-from-time(xs:time("08:20:00-05:00"),
xs:dayTimeDuration("P23DT10H10M"))
</del>
<ins class="diff-chg">country
</ins>
</code>
<del class="diff-old">returns
</del>
<ins class="diff-chg">argument
is
to
identify
the
place
where
an
event
represented
by
</ins>
the
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">dateTime
</ins></code>,<code><ins class="diff-chg">
date
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
time
</ins>
</code>
<ins class="diff-new">supplied
in
the
</ins><code><ins class="diff-new">
$value
</ins></code><ins class="diff-new">
argument
took
place
or
will
take
place.
If
the
</ins>
value
<del class="diff-old">corresponding
</del>
<ins class="diff-chg">is
supplied,
and
is
not
the
empty
sequence,
then
it
</ins><strong><ins class="diff-chg">
should
</ins></strong><ins class="diff-chg">
be
a
country
code
defined
in
</ins><a href="#ISO3166"><ins class="diff-chg">
[ISO
3166-1]
</ins></a>.<ins class="diff-chg">
Implementations
</ins><strong><ins class="diff-chg">
may
</ins></strong><ins class="diff-chg">
also
allow
the
use
of
codes
representing
subdivisions
of
a
country
from
ISO
3166-2,
or
codes
representing
formerly
used
names
of
countries
from
ISO
3166-3.
This
argument
is
not
intended
</ins>
to
<ins class="diff-new">identify
the
location
of
the
user
for
whom
the
date
or
time
is
being
formatted;
that
should
be
done
by
means
of
</ins>
the
<del class="diff-old">lexical
representation
</del>
<code>
<del class="diff-old">"22:10:00-05:00"
</del>
<ins class="diff-chg">language
</ins>
</code>
<del class="diff-old">i.e.
</del>
<ins class="diff-chg">attribute.
This
information
</ins><strong><ins class="diff-chg">
may
</ins></strong><ins class="diff-chg">
be
used
to
provide
additional
information
when
converting
dates
between
calendars
or
when
deciding
how
individual
components
of
the
date
and
time
are
to
be
formatted.
For
example,
different
countries
using
the
Old
Style
(Julian)
calendar
started
the
new
year
on
different
days,
and
some
countries
used
variants
of
the
calendar
that
were
out
of
synchronization
as
a
result
of
differences
in
calculating
leap
years.
The
geographical
area
identified
by
a
country
code
is
defined
by
the
boundaries
as
they
existed
at
the
time
of
the
date
to
be
formatted,
or
the
present-day
boundaries
for
dates
in
the
future.
</ins></p></div></div><div class="div3"><h4><a name="date-time-examples" id="date-time-examples"></a><ins class="diff-chg">
9.8.5
Examples
of
Date
and
Time
Formatting
</ins></h4><div class="exampleOuter"><div class="exampleHeader"><a name="d6e20496" id= "d6e20496"></a><ins class="diff-chg">
Example:
Gregorian
Calendar
</ins></div><p><ins class="diff-chg">
The
following
examples
show
a
selection
of
dates
and
times
and
the
way
they
might
be
formatted.
These
examples
assume
the
use
of
the
Gregorian
calendar
as
the
default
calendar.
</ins></p><table summary="A table [this is bad style]" border="1" cellpadding="5"><thead><tr><th align="left"><ins class="diff-chg">
Required
Output
</ins></th><th align="left"><ins class="diff-chg">
Expression
</ins></th></tr></thead><tbody><tr><td>
<code>
<del class="diff-old">{0,
0,
0,
22,
10,
0,
-PT5H}
</del>
<ins class="diff-chg">2002-12-31
</ins></code></td><td><code><ins class="diff-chg">
format-date($d,
"[Y0001]-[M01]-[D01]")
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
12-31-2002
</ins></code></td><td><code><ins class="diff-chg">
format-date($d,
"[M]-[D]-[Y]")
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
31-12-2002
</ins></code></td><td><code><ins class="diff-chg">
format-date($d,
"[D]-[M]-[Y]")
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
31
XII
2002
</ins></code></td><td><code><ins class="diff-chg">
format-date($d,
"[D1]
[MI]
[Y]")
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
31st
December,
2002
</ins></code></td><td><code><ins class="diff-chg">
format-date($d,
"[D1o]
[MNn],
[Y]",
"en",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
31
DEC
2002
</ins></code></td><td><code><ins class="diff-chg">
format-date($d,
"[D01]
[MN,*-3]
[Y0001]",
"en",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-chg">
December
31,
2002
</ins>
</code>
</td>
<td>
<code>
<ins class="diff-new">format-date($d,
"[MNn]
[D],
[Y]",
"en",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
31
Dezember,
2002
</ins></code></td><td><code><ins class="diff-new">
format-date($d,
"[D]
[MNn],
[Y]",
"de",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
Tisdag
31
December
2002
</ins></code></td><td><code><ins class="diff-new">
format-date($d,
"[FNn]
[D]
[MNn]
[Y]",
"sv",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
[2002-12-31]
</ins></code></td><td><code><ins class="diff-new">
format-date($d,
"[[[Y0001]-[M01]-[D01]]]")
</ins></code></td></tr><tr><td><code><ins class="diff-new">
Two
Thousand
and
Three
</ins></code></td><td><code><ins class="diff-new">
format-date($d,
"[YWw]",
"en",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
einunddreißigste
Dezember
</ins></code></td><td><code><ins class="diff-new">
format-date($d,
"[Dwo]
[MNn]",
"de",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
3:58
PM
</ins></code></td><td><code><ins class="diff-new">
format-time($t,
"[h]:[m01]
[PN]",
"en",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
3:58:45
pm
</ins></code></td><td><code><ins class="diff-new">
format-time($t,
"[h]:[m01]:[s01]
[Pn]",
"en",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
3:58:45
PM
PDT
</ins></code></td><td><code><ins class="diff-new">
format-time($t,
"[h]:[m01]:[s01]
[PN]
[ZN,*-3]",
"en",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
3:58:45
o'clock
PM
PDT
</ins></code></td><td><code><ins class="diff-new">
format-time($t,
"[h]:[m01]:[s01]
o'clock
[PN]
[ZN,*-3]",
"en",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
15:58
</ins></code></td><td><code><ins class="diff-new">
format-time($t,"[H01]:[m01]")
</ins></code></td></tr><tr><td><code><ins class="diff-new">
15:58:45.762
</ins></code></td><td><code><ins class="diff-new">
format-time($t,"[H01]:[m01]:[s01].[f001]")
</ins></code></td></tr><tr><td><code><ins class="diff-new">
15:58:45
GMT+02:00
</ins></code></td><td><code><ins class="diff-new">
format-time($t,"[H01]:[m01]:[s01]
[z,6-6]",
"en",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
15.58
Uhr
GMT+2
</ins></code></td><td><code><ins class="diff-new">
format-time($t,"[H01]:[m01]
Uhr
[z]",
"de",
(),
())
</ins></code></td></tr><tr><td><code><ins class="diff-new">
3.58pm
on
Tuesday,
31st
December
</ins></code></td><td><code><ins class="diff-new">
format-dateTime($dt,
"[h].[m01][Pn]
on
[FNn],
[D1o]
[MNn]")
</ins></code></td></tr><tr><td><code><ins class="diff-new">
12/31/2002
at
15:58:45
</ins></code></td><td><code><ins class="diff-new">
format-dateTime($dt,
"[M01]/[D01]/[Y0001]
at
[H01]:[m01]:[s01]")
</ins></code></td></tr></tbody></table></div><div class="exampleOuter"><div class="exampleHeader"><a name="d6e20752" id= "d6e20752"></a><ins class="diff-new">
Example:
Non-Gregorian
Calendars
</ins></div><p><ins class="diff-new">
The
following
examples
use
calendars
other
than
the
Gregorian
calendar.
</ins>
</p>
<p>
<ins class="diff-chg">These
examples
use
non-Latin
characters
which
might
not
display
correctly
in
all
browsers,
depending
on
the
system
configuration.
</ins></p><table summary="A table [this is bad style]" border="1" cellpadding="5"><thead><tr><th align="left"><ins class="diff-chg">
Description
</ins></th><th align="left"><ins class="diff-chg">
Request
</ins></th><th align="left"><ins class="diff-chg">
Result
</ins></th></tr></thead><tbody><tr><td valign="top"><ins class="diff-chg">
Islamic
</ins></td><td valign="top"><code><ins class="diff-chg">
format-date($d,
"[D&amp;#x0661;]
[Mn]
[Y&amp;#x0661;]",
"ar",
"AH",
())
</ins></code></td><td valign="top"><ins class="diff-chg">
٢٦
ﺸﻭّﺍﻝ
١٤٢٣
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
Jewish
(with
Western
numbering)
</ins></td><td valign="top"><code><ins class="diff-chg">
format-date($d,
"[D]
[Mn]
[Y]",
"he",
"AM",
())
</ins></code></td><td valign="top"><ins class="diff-chg">
‏26
טבת
5763
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
Jewish
(with
traditional
numbering)
</ins></td><td valign="top"><code><ins class="diff-chg">
format-date($d,
"[D&amp;#x05D0;t]
[Mn]
[Y&amp;#x05D0;t]",
"he",
"AM",
())
</ins></code></td><td valign="top"><ins class="diff-chg">
כ״ו
טבת
תשס״ג
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
Julian
(Old
Style)
</ins></td><td valign="top"><code><ins class="diff-chg">
format-date($d,
"[D]
[MNn]
[Y]",
"en",
"OS",
())
</ins></code></td><td valign="top"><ins class="diff-chg">
18
December
2002
</ins></td></tr><tr><td valign="top"><ins class="diff-chg">
Thai
</ins></td><td valign="top"><code><ins class="diff-chg">
format-date($d,
"[D&amp;#x0E51;]
[Mn]
[Y&amp;#x0E51;]",
"th",
"BE",
())
</ins></code></td><td valign="top"><ins class="diff-chg">
๓๑
ธันวาคม
๒๕๔๕
</ins></td></tr></tbody></table>
</div>
</div>
</div>
</div>
<div class="div1">
<h2>
<a name="QName-funcs" id="QName-funcs">
</a>
<del class="diff-old">11
</del>
<ins class="diff-chg">10
</ins>
Functions
Related
to
QNames
</h2>
<div class="div2">
<h3>
<a name="QName-constructors" id="QName-constructors">
</a>
<del class="diff-old">11.1
Additional
Constructor
</del>
<ins class="diff-chg">10.1
</ins>
Functions
<del class="diff-old">for
</del>
<ins class="diff-chg">to
create
a
</ins>
QNames
</h3>
<p>
<ins class="diff-new">In
addition
to
the
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
constructor
function,
QName
values
can
be
constructed
by
combining
a
namespace
URI,
prefix,
and
local
name,
or
by
resolving
a
lexical
QName
against
the
in-scope
namespaces
of
an
element
node.
</ins>
This
section
defines
<del class="diff-old">additional
constructor
functions
for
QName
as
defined
in
[XML
Schema
Part
2:
Datatypes
Second
Edition]
.
</del>
<ins class="diff-chg">these
functions.
</ins>
Leading
and
trailing
whitespace,
if
present,
is
stripped
from
string
arguments
before
the
result
is
constructed.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-resolve-QName">
<code>
fn:resolve-QName
</code>
</a>
</td>
<td>
Returns
an
<code>
xs:QName
</code>
<del class="diff-old">with
</del>
<ins class="diff-chg">value
(that
is,
an
expanded-QName)
by
taking
an
</ins><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
that
has
</ins>
the
lexical
form
<del class="diff-old">given
</del>
<ins class="diff-chg">of
an
</ins><code><ins class="diff-chg">
xs:QName
</ins></code><ins class="diff-chg">
(a
string
</ins>
in
the
<del class="diff-old">first
argument.
The
prefix
is
resolved
</del>
<ins class="diff-chg">form
"prefix:local-name"
or
"local-name")
and
resolving
it
</ins>
using
the
in-scope
namespaces
for
a
given
element.
</td>
</tr>
<tr>
<td>
<a href="#func-QName">
<code>
fn:QName
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
</del>
<ins class="diff-chg">Constructs
</ins>
an
<code>
xs:QName
</code>
<del class="diff-old">with
the
</del>
<ins class="diff-chg">value
given
a
</ins>
namespace
URI
<del class="diff-old">given
in
the
first
argument
</del>
and
<del class="diff-old">the
local
name
and
prefix
in
the
second
argument.
</del>
<ins class="diff-chg">a
lexical
QName.
</ins>
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-resolve-QName" id="func-resolve-QName">
</a>
<del class="diff-old">11.1.1
</del>
<ins class="diff-chg">10.1.1
</ins>
fn:resolve-QName
</h4>
<del class="diff-old">fn:resolve-QName
(
$qname
&#160;as&#160;
xs:string?
,
$element
&#160;as&#160;
element()
)
&#160;as&#160;
xs:QName?
</del>
<dl>
<dt class="label">
<ins class="diff-chg">Summary
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
an
<code>
xs:QName
</code>
value
(that
is,
an
expanded-QName)
by
taking
an
<code>
xs:string
</code>
that
has
the
lexical
form
of
an
<code>
xs:QName
</code>
(a
string
in
the
form
"prefix:local-name"
or
"local-name")
and
resolving
it
using
the
in-scope
namespaces
for
a
given
element.
</p>
<del class="diff-old">If
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
fn:resolve-QName
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg">
$qname
</code>
<del class="diff-old">does
not
have
the
correct
lexical
form
for
xs:QName
</del>
<code class= "as">
<ins class="diff-chg">&#160;as&#160;
</ins>
</code>
<del class="diff-old">an
error
is
raised
[
err:FOCA0002
].
</del>
<code class="type">
<ins class="diff-chg">xs:string?
</ins></code>,<code class="arg"><ins class="diff-chg">
$element
</ins></code><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
element()
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
xs:QName?
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd>
<p>
If
<code>
$qname
</code>
is
the
empty
sequence,
returns
the
empty
sequence.
</p>
<p>
More
specifically,
the
function
searches
the
namespace
bindings
of
<code>
$element
</code>
for
a
binding
whose
name
matches
the
prefix
of
<code>
$qname
</code>,
or
the
zero-length
string
if
it
has
no
prefix,
and
constructs
an
expanded-QName
whose
local
name
is
taken
from
the
supplied
<code>
$qname
</code>,
and
whose
namespace
URI
is
taken
from
the
string
value
of
the
namespace
binding.
</p>
<p>
If
the
<code>
$qname
</code>
has
a
prefix
and
if
there
is
no
namespace
binding
for
<code>
$element
</code>
that
matches
this
prefix,
then
an
error
is
raised
[
<a href="#ERRFONS0004" title= "err:FONS0004">
err:FONS0004
</a>
].
</p>
<p>
If
the
<code>
$qname
</code>
has
no
prefix,
and
there
is
no
namespace
binding
for
<code>
$element
</code>
corresponding
to
the
default
(unnamed)
namespace,
then
the
resulting
expanded-QName
has
no
namespace
part.
</p>
<p>
The
prefix
(or
absence
of
a
prefix)
in
the
supplied
<code>
$qname
</code>
argument
is
retained
in
the
returned
expanded-QName,
as
discussed
in
<a href= "http://www.w3.org/TR/xpath-datamodel/#terminology">
Section
2.1
Terminology
</a>
<sup>
<small>
DM
</small>
</sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$qname
</ins></code><ins class="diff-chg">
does
not
have
the
correct
lexical
form
for
</ins><code><ins class="diff-chg">
xs:QName
</ins></code><ins class="diff-chg">
an
error
is
raised
[
</ins><a href= "#ERRFOCA0002" title="err:FOCA0002"><ins class="diff-chg">
err:FOCA0002
</ins>
</a>
<del class="diff-old">11.1.1.1
Usage
Note
</del>
<ins class="diff-chg">].
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd>
<p>
Sometimes
the
requirement
is
to
construct
an
<code>
xs:QName
</code>
without
using
the
default
namespace.
This
can
be
achieved
by
writing:
</p>
<div class="exampleInner">
<pre>
 if (contains($qname, ":")) then fn:resolve-QName($qname, $element) else
<del class="diff-old">                            fn:QName("", $qname)
</del>
<ins class="diff-chg">            fn:QName("", $qname)
</ins>
</pre>
</div>
<p>
If
the
requirement
is
to
construct
an
<code>
xs:QName
</code>
using
the
namespaces
in
the
static
context,
then
the
<code>
xs:QName
</code>
constructor
should
be
used.
</p>
<del class="diff-old">11.1.1.2
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
Assume
that
the
element
bound
to
<code>
$element
</code>
has
a
single
namespace
binding
bound
to
the
prefix
<code>
eg
</code>.
</p>
<p>
<code>
fn:resolve-QName("hello",
$element)
</code>
returns
a
QName
with
local
name
"hello"
that
is
in
no
namespace.
</p>
<p>
<code>
fn:resolve-QName("eg:myFunc",
$element)
</code>
returns
an
<code>
xs:QName
</code>
whose
namespace
URI
is
specified
by
the
namespace
binding
corresponding
to
the
prefix
"eg"
and
whose
local
name
is
"myFunc".
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-QName" id="func-QName">
</a>
<del class="diff-old">11.1.2
</del>
<ins class="diff-chg">10.1.2
</ins>
fn:QName
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Constructs
an
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
value
given
a
namespace
URI
and
a
lexical
QName.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:QName
</code>
(
<code class= "arg">
$paramURI
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$paramQName
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:QName
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
an
xs:QName
with
the
</del>
<ins class="diff-chg">The
</ins>
namespace
URI
<del class="diff-old">given
</del>
in
<ins class="diff-new">the
returned
QName
is
taken
from
</ins>
<code>
$paramURI
</code>.
If
<code>
$paramURI
</code>
is
the
zero-length
string
or
the
empty
sequence,
it
represents
"no
<del class="diff-old">namespace";
in
this
case,
if
the
value
of
$paramQName
contains
a
colon
(
:
),
an
error
is
raised
[
err:FOCA0002
].
</del>
<ins class="diff-chg">namespace".
</ins></p><p>
The
prefix
(or
absence
of
a
prefix)
in
<code>
$paramQName
</code>
is
retained
in
the
returned
<code>
xs:QName
</code>
value.
</p>
<p>
The
local
name
in
the
result
is
taken
from
the
local
part
of
<code>
$paramQName
</code>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd>
<p>
If
<code>
$paramQName
</code>
does
not
have
the
correct
lexical
form
for
<ins class="diff-new">an
</ins>
<code>
xs:QName
</code>
an
error
is
raised
[
<a href= "#ERRFOCA0002" title="err:FOCA0002">
err:FOCA0002
</a>
].
</p>
<p>
<ins class="diff-new">If
</ins><code><ins class="diff-new">
$paramURI
</ins></code><ins class="diff-new">
is
the
zero-length
string
or
the
empty
sequence,
and
the
value
of
</ins><code><ins class="diff-new">
$paramQName
</ins></code><ins class="diff-new">
contains
a
colon
(
</ins><code>:</code><ins class="diff-new">
),
an
error
is
raised
[
</ins><a href="#ERRFOCA0002" title="err:FOCA0002"><ins class="diff-new">
err:FOCA0002
</ins></a><ins class="diff-new">
].
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p>
Note
that
unlike
<ins class="diff-new">the
</ins>
<code>
xs:QName
</code>
<ins class="diff-new">constructor,
</ins>
this
function
does
not
require
a
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">string
</ins>
literal
as
the
argument.
</p>
<del class="diff-old">11.1.2.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<code>
fn:QName("http://www.example.com/example",
"person")
</code>
returns
an
<code>
xs:QName
</code>
with
namespace
URI
=
"http://www.example.com/example",
local
name
=
"person"
and
prefix
=
"".
</p>
<p>
<code>
fn:QName("http://www.example.com/example",
"ht:person")
</code>
returns
an
<code>
xs:QName
</code>
with
namespace
URI
=
"http://www.example.com/example",
local
name
=
"person"
and
prefix
=
"ht".
</p>
</dd>
</dl>
</div>
</div>
<div class="div2">
<h3>
<a name="QName-functions" id="QName-functions">
</a>
<del class="diff-old">11.2
</del>
<ins class="diff-chg">10.2
</ins>
Functions
and
Operators
Related
to
QNames
</h3>
<p>
This
section
<del class="diff-old">discusses
</del>
<ins class="diff-chg">specifies
</ins>
functions
on
QNames
as
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-QName-equal">
<code>
op:QName-equal
</code>
</a>
</td>
<td>
Returns
<code>
true
</code>
if
<ins class="diff-new">two
supplied
QNames
have
</ins>
the
<del class="diff-old">local
names
and
</del>
<ins class="diff-chg">same
</ins>
namespace
<del class="diff-old">URIs
of
</del>
<ins class="diff-chg">URI
and
</ins>
the
<del class="diff-old">two
arguments
are
equal.
</del>
<ins class="diff-chg">same
local
part.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-prefix-from-QName">
<code>
fn:prefix-from-QName
</code>
</a>
</td>
<td>
Returns
<del class="diff-old">an
xs:NCName
representing
</del>
the
prefix
<ins class="diff-new">component
</ins>
of
the
<del class="diff-old">xs:QName
argument.
</del>
<ins class="diff-chg">supplied
QName.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-local-name-from-QName">
<code>
fn:local-name-from-QName
</code>
</a>
</td>
<td>
Returns
<del class="diff-old">an
xs:NCName
representing
</del>
the
local
<del class="diff-old">name
</del>
<ins class="diff-chg">part
</ins>
of
the
<del class="diff-old">xs:QName
argument.
</del>
<ins class="diff-chg">supplied
QName.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-namespace-uri-from-QName">
<code>
fn:namespace-uri-from-QName
</code>
</a>
</td>
<td>
Returns
the
namespace
URI
<del class="diff-old">for
the
xs:QName
argument.
If
the
xs:QName
is
in
no
namespace,
</del>
<ins class="diff-chg">part
of
</ins>
the
<del class="diff-old">zero-length
string
is
returned.
</del>
<ins class="diff-chg">supplied
QName.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-namespace-uri-for-prefix">
<code>
fn:namespace-uri-for-prefix
</code>
</a>
</td>
<td>
Returns
the
namespace
URI
of
one
of
the
in-scope
namespaces
for
<del class="diff-old">the
given
element,
</del>
<code>
<ins class="diff-chg">$element
</ins></code>,
identified
by
its
namespace
prefix.
</td>
</tr>
<tr>
<td>
<a href= "#func-in-scope-prefixes">
<code>
fn:in-scope-prefixes
</code>
</a>
</td>
<td>
Returns
the
prefixes
of
the
in-scope
namespaces
for
<del class="diff-old">the
given
element.
</del>
<ins class="diff-chg">an
element
node.
</ins>
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-QName-equal" id="func-QName-equal">
</a>
<del class="diff-old">11.2.1
</del>
<ins class="diff-chg">10.2.1
</ins>
op:QName-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
if
two
supplied
QNames
have
the
same
namespace
URI
and
the
same
local
part.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
and
"ne"
operators
on
values
of
type
</ins><code><ins class="diff-new">
xs:QName
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:QName-equal
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:QName
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:QName
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
<code>
true
</code>
if
the
namespace
URIs
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
are
equal
and
the
local
names
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
are
<del class="diff-old">identical
based
on
the
Unicode
code
point
collation
(
http://www.w3.org/2005/xpath-functions/collation/codepoint
).
</del>
<ins class="diff-chg">equal.
</ins></p><p>
Otherwise,
<ins class="diff-new">the
function
</ins>
returns
<code>
false
</code>.
<del class="diff-old">Two
</del>
</p>
<p>
<ins class="diff-chg">The
</ins>
namespace
<del class="diff-old">URIs
</del>
<ins class="diff-chg">URI
parts
</ins>
are
considered
equal
if
they
are
<del class="diff-old">either
</del>
both
<del class="diff-old">absent
</del>
<ins class="diff-chg">absent,
</ins>
or
<ins class="diff-new">if
they
are
</ins>
both
present
and
<del class="diff-old">identical
based
on
</del>
<ins class="diff-chg">equal
under
</ins>
the
<del class="diff-old">Unicode
code
point
collation.
</del>
<ins class="diff-chg">rules
of
the
</ins><a href= "#func-codepoint-equal"><code><ins class="diff-chg">
fn:codepoint-equal
</ins></code></a><ins class="diff-chg">
function.
</ins></p><p><ins class="diff-chg">
The
local
parts
are
also
compared
under
the
rules
of
the
</ins><a href="#func-codepoint-equal"><code><ins class="diff-chg">
fn:codepoint-equal
</ins></code></a><ins class="diff-chg">
function.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p>
The
prefix
parts
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>,
if
any,
are
ignored.
</p>
<del class="diff-old">Backs
up
the
"eq"
and
"ne"
operators
on
values
of
type
xs:QName
.
</del>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-prefix-from-QName" id= "func-prefix-from-QName">
</a>
<del class="diff-old">11.2.2
</del>
<ins class="diff-chg">10.2.2
</ins>
fn:prefix-from-QName
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
prefix
component
of
the
supplied
QName.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:prefix-from-QName
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:QName?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:NCName?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
an
</del>
<ins class="diff-chg">If
</ins>
<code>
<del class="diff-old">xs:NCName
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<del class="diff-old">representing
</del>
<ins class="diff-chg">is
</ins>
the
<del class="diff-old">prefix
of
$arg
.
The
</del>
empty
sequence
<del class="diff-old">is
returned
if
</del>
<ins class="diff-chg">the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
If
</ins>
<code>
$arg
</code>
<del class="diff-old">is
</del>
<ins class="diff-chg">has
no
prefix
component
the
function
returns
</ins>
the
empty
<del class="diff-old">sequence
or
if
</del>
<ins class="diff-chg">sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">function
returns
an
</ins><code><ins class="diff-chg">
xs:NCName
</ins></code><ins class="diff-chg">
representing
the
prefix
component
</ins>
of
<code>
$arg
<del class="diff-old">contains
no
prefix.
</del>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-local-name-from-QName" id= "func-local-name-from-QName">
</a>
<del class="diff-old">11.2.3
</del>
<ins class="diff-chg">10.2.3
</ins>
fn:local-name-from-QName
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
local
part
of
the
supplied
QName.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:local-name-from-QName
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:QName?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:NCName?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
</ins>
an
<code>
xs:NCName
</code>
representing
the
local
part
of
<code>
$arg
</code>.
<del class="diff-old">If
$arg
is
the
empty
sequence,
returns
the
empty
sequence.
</del>
</p>
<del class="diff-old">11.2.3.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:local-name-from-QName(fn:QName("http://www.example.com/example",
"person"))
</code>
returns
<code>
"person"
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-namespace-uri-from-QName" id= "func-namespace-uri-from-QName">
</a>
<del class="diff-old">11.2.4
</del>
<ins class="diff-chg">10.2.4
</ins>
fn:namespace-uri-from-QName
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
namespace
URI
part
of
the
supplied
QName.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:namespace-uri-from-QName
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:QName?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyURI?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
the
namespace
URI
for
$arg
as
an
xs:string
.
</del>
If
<code>
$arg
</code>
is
the
empty
<del class="diff-old">sequence,
</del>
<ins class="diff-chg">sequence
the
function
returns
</ins>
the
empty
<del class="diff-old">sequence
is
returned.
</del>
<ins class="diff-chg">sequence.
</ins></p><p><ins class="diff-chg">
Otherwise,
the
function
returns
an
</ins><code><ins class="diff-chg">
xs:anyURI
</ins></code><ins class="diff-chg">
representing
the
namespace
URI
part
of
</ins><code><ins class="diff-chg">
$arg
</ins></code>.</p><p>
If
<code>
$arg
</code>
is
in
no
namespace,
the
<ins class="diff-new">function
returns
the
</ins>
zero-length
<del class="diff-old">string
is
returned.
</del>
<code>
<ins class="diff-chg">xs:anyURI
</ins></code>.
</p>
<del class="diff-old">11.2.4.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-new">The
expression
</ins>
<code>
fn:namespace-uri-from-QName(fn:QName("http://www.example.com/example",
"person"))
</code>
returns
<del class="diff-old">the
namespace
URI
corresponding
to
</del>
<code>
<del class="diff-old">"http://www.example.com/example"
</del>
<ins class="diff-chg">xs:anyURI("http://www.example.com/example")
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-namespace-uri-for-prefix" id= "func-namespace-uri-for-prefix">
</a>
<del class="diff-old">11.2.5
</del>
<ins class="diff-chg">10.2.5
</ins>
fn:namespace-uri-for-prefix
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
namespace
URI
of
one
of
the
in-scope
namespaces
for
</ins><code><ins class="diff-new">
$element
</ins></code>,<ins class="diff-new">
identified
by
its
namespace
prefix.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
fn:namespace-uri-for-prefix
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$prefix
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$element
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
element()
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyURI?
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
namespace
URI
of
one
of
the
in-scope
namespaces
for
$element
,
identified
by
its
namespace
prefix.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
<code>
$element
</code>
has
an
in-scope
namespace
whose
namespace
prefix
is
equal
to
<code>
$prefix
</code>,
it
returns
the
namespace
URI
of
that
namespace.
If
<code>
$prefix
</code>
is
the
zero-length
string
or
the
empty
sequence,
it
returns
the
namespace
URI
of
the
default
(unnamed)
namespace.
Otherwise,
it
returns
the
empty
sequence.
</p>
<p>
Prefixes
are
equal
only
if
their
Unicode
<del class="diff-old">code
points
</del>
<ins class="diff-chg">codepoints
</ins>
match
exactly.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-in-scope-prefixes" id= "func-in-scope-prefixes">
</a>
<del class="diff-old">11.2.6
</del>
<ins class="diff-chg">10.2.6
</ins>
fn:in-scope-prefixes
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
prefixes
of
the
in-scope
namespaces
for
an
element
node.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:in-scope-prefixes
</code>
(
<code class= "arg">
$element
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
element()
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
a
sequence
of
strings
representing
</ins>
the
prefixes
of
the
in-scope
namespaces
for
<code>
$element
</code>.
</p>
<p>
For
<del class="diff-old">namespaces
</del>
<ins class="diff-chg">namespace
bindings
</ins>
that
have
a
prefix,
<del class="diff-old">it
</del>
<ins class="diff-chg">the
function
</ins>
returns
the
prefix
as
an
<code>
xs:NCName
</code>.
For
the
default
namespace,
which
has
no
prefix,
it
returns
the
zero-length
string.
</p>
<p>
<ins class="diff-new">The
result
sequence
contains
no
duplicates.
</ins></p><p><ins class="diff-new">
The
ordering
of
the
result
sequence
is
</ins><a title= "implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation-dependent
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a>.</p></dd></dl>
</div>
</div>
</div>
<div class="div1">
<h2>
<a name="binary-functions" id="binary-functions">
</a>
<del class="diff-old">12
</del>
<ins class="diff-chg">11
</ins>
Operators
on
base64Binary
and
hexBinary
</h2>
<div class="div2">
<h3>
<a name="binary-value-comparisons" id= "binary-value-comparisons">
</a>
<del class="diff-old">12.1
</del>
<ins class="diff-chg">11.1
</ins>
Comparisons
of
base64Binary
and
hexBinary
Values
</h3>
<p>
The
following
comparison
operators
on
<code>
xs:base64Binary
</code>
and
<code>
xs:hexBinary
</code>
values
are
defined.
Comparisons
take
two
operands
of
the
same
type;
that
is,
both
operands
must
be
<code>
xs:base64Binary
</code>
or
both
operands
may
be
<code>
xs:hexBinary
</code>.
Each
returns
a
boolean
value.
</p>
<p>
A
value
of
type
<code>
xs:hexBinary
</code>
can
be
compared
with
a
value
of
type
<code>
xs:base64Binary
</code>
by
casting
one
value
to
the
other
type.
See
<a href="#casting-to-binary">
<b>
<del class="diff-old">17.1.7
</del>
<ins class="diff-chg">18.1.7
</ins>
Casting
to
xs:base64Binary
and
xs:hexBinary
</b>
</a>.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-hexBinary-equal">
<code>
op:hexBinary-equal
</code>
</a>
</td>
<td>
Returns
true
if
<del class="diff-old">the
</del>
two
<del class="diff-old">arguments
are
equal.
</del>
<code>
<ins class="diff-chg">xs:hexBinary
</ins></code><ins class="diff-chg">
values
contain
the
same
octet
sequence.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-base64Binary-equal">
<code>
op:base64Binary-equal
</code>
</a>
</td>
<td>
Returns
true
if
<del class="diff-old">the
</del>
two
<del class="diff-old">arguments
are
equal.
</del>
<code>
<ins class="diff-chg">xs:base64Binary
</ins></code><ins class="diff-chg">
values
contain
the
same
octet
sequence.
</ins>
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-hexBinary-equal" id= "func-hexBinary-equal">
</a>
<del class="diff-old">12.1.1
</del>
<ins class="diff-chg">11.1.1
</ins>
op:hexBinary-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
two
</ins><code><ins class="diff-new">
xs:hexBinary
</ins></code><ins class="diff-new">
values
contain
the
same
octet
sequence.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"eq"
and
"ne"
operators
on
</ins><code><ins class="diff-new">
xs:hexBinary
</ins></code><ins class="diff-new">
values.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:hexBinary-equal
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$value1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:hexBinary
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$value2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:hexBinary
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
<code>
true
</code>
if
<code>
$value1
</code>
and
<code>
$value2
</code>
are
of
the
same
length,
measured
in
binary
octets,
and
contain
the
same
octets
in
the
same
order.
Otherwise,
<ins class="diff-new">it
</ins>
returns
<code>
false
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-base64Binary-equal" id= "func-base64Binary-equal">
</a>
<ins class="diff-new">11.1.2
op:base64Binary-equal
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd>
<p>
<del class="diff-old">This
function
backs
up
</del>
<ins class="diff-chg">Returns
true
if
two
</ins><code><ins class="diff-chg">
xs:base64Binary
</ins></code><ins class="diff-chg">
values
contain
the
same
octet
sequence.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
</ins>
the
"eq"
and
"ne"
operators
on
<code>
<del class="diff-old">xs:hexBinary
</del>
<ins class="diff-chg">xs:base64Binary
</ins>
</code>
values.
</p>
<del class="diff-old">12.1.2
op:base64Binary-equal
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
op:base64Binary-equal
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$value1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:base64Binary
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$value2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:base64Binary
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
<code>
true
</code>
if
<code>
$value1
</code>
and
<code>
$value2
</code>
are
of
the
same
length,
measured
in
binary
octets,
and
contain
the
same
octets
in
the
same
order.
Otherwise,
<ins class="diff-new">it
</ins>
returns
<code>
false
</code>.
</p>
<del class="diff-old">This
function
backs
up
the
"eq"
and
"ne"
operators
on
xs:base64Binary
values.
</del>
</dd>
</dl>
</div>
</div>
</div>
<div class="div1">
<h2>
<a name="NOTATION-functions" id="NOTATION-functions">
</a>
<del class="diff-old">13
</del>
<ins class="diff-chg">12
</ins>
Operators
on
NOTATION
</h2>
<del class="diff-old">13.1
Operators
on
NOTATION
</del>
<p>
This
section
<del class="diff-old">discusses
functions
</del>
<ins class="diff-chg">specifies
operators
</ins>
that
take
<del class="diff-old">NOTATION
</del>
<code>
<ins class="diff-chg">xs:NOTATION
</ins></code><ins class="diff-chg">
values
</ins>
as
arguments.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-NOTATION-equal">
<code>
op:NOTATION-equal
</code>
</a>
</td>
<td>
Returns
<code>
true
</code>
if
the
two
<del class="diff-old">arguments
are
</del>
<code>
<del class="diff-old">op:QName-equal
</del>
<ins class="diff-chg">xs:NOTATION
</ins>
</code>
<del class="diff-old">.
</del>
<ins class="diff-chg">values
have
the
same
namespace
URI
and
the
same
local
part.
</ins>
</td>
</tr>
</tbody>
</table>
<div class="div2">
<h3>
<a name="func-NOTATION-equal" id="func-NOTATION-equal">
</a>
<del class="diff-old">13.1.1
</del>
<ins class="diff-chg">12.1
</ins>
op:NOTATION-equal
</h3>
<dl>
<dt class="label">
<ins class="diff-chg">Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
if
the
two
</ins><code><ins class="diff-chg">
xs:NOTATION
</ins></code><ins class="diff-chg">
values
have
the
same
namespace
URI
and
the
same
local
part.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-chg">
Defines
the
semantics
of
the
"eq"
and
"ne"
operators
on
values
of
type
</ins><code><ins class="diff-chg">
xs:NOTATION
</ins></code>.</p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:NOTATION-equal
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:NOTATION
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:NOTATION
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
<code>
true
</code>
if
the
namespace
URIs
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
are
equal
and
the
local
names
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>
are
<del class="diff-old">identical
based
on
</del>
<ins class="diff-chg">equal.
</ins></p><p><ins class="diff-chg">
Otherwise,
</ins>
the
<del class="diff-old">Unicode
code
point
collation:
</del>
<ins class="diff-chg">function
returns
</ins>
<code>
<del class="diff-old">http://www.w3.org/2005/xpath-functions/collation/codepoint
</del>
<ins class="diff-chg">false
</ins>
</code>.
<del class="diff-old">Otherwise,
returns
false.
Two
</del>
</p>
<p>
<ins class="diff-chg">The
</ins>
namespace
<del class="diff-old">URIs
</del>
<ins class="diff-chg">URI
parts
</ins>
are
considered
equal
if
they
are
<del class="diff-old">either
</del>
both
<del class="diff-old">absent
</del>
<ins class="diff-chg">absent,
</ins>
or
<ins class="diff-new">if
they
are
</ins>
both
present
and
<del class="diff-old">identical
based
on
</del>
<ins class="diff-chg">equal
under
</ins>
the
<del class="diff-old">Unicode
code
point
collation.
</del>
<ins class="diff-chg">rules
of
the
</ins><a href= "#func-codepoint-equal"><code><ins class="diff-chg">
fn:codepoint-equal
</ins></code></a><ins class="diff-chg">
function.
</ins></p><p><ins class="diff-chg">
The
local
parts
are
also
compared
under
the
rules
of
the
</ins><a href="#func-codepoint-equal"><code><ins class="diff-chg">
fn:codepoint-equal
</ins></code></a><ins class="diff-chg">
function.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p>
The
prefix
parts
of
<code>
$arg1
</code>
and
<code>
$arg2
</code>,
if
any,
are
ignored.
</p>
<del class="diff-old">Backs
up
the
"eq"
and
"ne"
operators
on
values
of
type
xs:NOTATION
.
</del>
</dd>
</dl>
</div>
</div>
<div class="div1">
<h2>
<a name="node-functions" id="node-functions">
</a>
<del class="diff-old">14
</del>
<ins class="diff-chg">13
</ins>
Functions
and
Operators
on
Nodes
</h2>
<p>
This
section
<del class="diff-old">discusses
</del>
<ins class="diff-chg">specifies
</ins>
functions
and
operators
on
nodes.
Nodes
are
formally
defined
in
<a href= "http://www.w3.org/TR/xpath-datamodel/#Node">
Section
6
Nodes
</a>
<sup>
<small>
DM
</small>
</sup>.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-name">
<code>
fn:name
</code>
</a>
</td>
<td>
Returns
the
name
of
<ins class="diff-new">a
node,
as
an
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
that
is
either
</ins>
the
<del class="diff-old">context
node
</del>
<ins class="diff-chg">zero-length
string,
</ins>
or
<ins class="diff-new">has
</ins>
the
<del class="diff-old">specified
node
as
</del>
<ins class="diff-chg">lexical
form
of
</ins>
an
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">xs:QName
</ins>
</code>.
</td>
</tr>
<tr>
<td>
<a href="#func-local-name">
<code>
fn:local-name
</code>
</a>
</td>
<td>
Returns
the
local
<ins class="diff-new">part
of
the
</ins>
name
of
<code>
<ins class="diff-new">$arg
</ins></code><ins class="diff-new">
as
an
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
that
is
either
</ins>
the
<del class="diff-old">context
node
</del>
<ins class="diff-chg">zero-length
string,
</ins>
or
<ins class="diff-new">has
</ins>
the
<del class="diff-old">specified
node
as
</del>
<ins class="diff-chg">lexical
form
of
</ins>
an
<code>
xs:NCName
</code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-namespace-uri">
<code>
fn:namespace-uri
</code>
</a>
</td>
<td>
Returns
the
namespace
URI
<ins class="diff-new">part
of
the
name
of
</ins><code><ins class="diff-new">
$arg
</ins></code>,
as
an
<code>
xs:anyURI
</code>
<del class="diff-old">for
the
xs:QName
of
the
argument
node
or
the
context
node
if
the
argument
is
omitted.
This
may
be
the
URI
corresponding
to
the
zero-length
string
if
the
xs:QName
is
in
no
namespace.
</del>
<ins class="diff-chg">value.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-number">
<code>
fn:number
</code>
</a>
</td>
<td>
Returns
the
value
<del class="diff-old">of
</del>
<ins class="diff-chg">indicated
by
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
or,
if
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
not
specified,
</ins>
the
context
item
after
<del class="diff-old">atomization
or
the
specified
argument
</del>
<ins class="diff-chg">atomization,
</ins>
converted
to
an
<code>
xs:double
</code>.
</td>
</tr>
<tr>
<td>
<a href="#func-lang">
<code>
fn:lang
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
true
or
false
,
depending
on
</del>
<ins class="diff-chg">This
function
tests
</ins>
whether
the
language
of
<del class="diff-old">the
given
node
</del>
<code>
<ins class="diff-chg">$node
</ins></code>,
or
the
context
<del class="diff-old">node,
as
defined
using
</del>
<ins class="diff-chg">item
if
</ins>
the
<ins class="diff-new">second
argument
is
omitted,
as
specified
by
</ins><code>
xml:lang
<del class="diff-old">attribute,
</del>
</code>
<ins class="diff-chg">attributes
</ins>
is
the
same
as,
or
<ins class="diff-new">is
</ins>
a
sublanguage
of,
the
language
specified
by
<del class="diff-old">the
argument.
</del>
<code>
<ins class="diff-chg">$testlang
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-is-same-node">
<code>
op:is-same-node
</code>
</a>
</td>
<td>
Returns
true
if
the
two
arguments
<del class="diff-old">have
</del>
<ins class="diff-chg">refer
to
</ins>
the
same
<del class="diff-old">identity.
</del>
<ins class="diff-chg">node.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-node-before">
<code>
op:node-before
</code>
</a>
</td>
<td>
<del class="diff-old">Indicates
whether
one
</del>
<ins class="diff-chg">Returns
true
if
the
</ins>
node
<del class="diff-old">appears
before
another
</del>
<ins class="diff-chg">identified
by
the
first
argument
precedes
the
</ins>
node
<ins class="diff-new">identified
by
the
second
argument
</ins>
in
document
order.
</td>
</tr>
<tr>
<td>
<a href="#func-node-after">
<code>
op:node-after
</code>
</a>
</td>
<td>
<del class="diff-old">Indicates
whether
one
</del>
<ins class="diff-chg">Returns
true
if
the
</ins>
node
<del class="diff-old">appears
after
another
</del>
<ins class="diff-chg">identified
by
the
first
argument
follows
the
</ins>
node
<ins class="diff-new">identified
by
the
second
argument
</ins>
in
document
order.
</td>
</tr>
<tr>
<td>
<a href="#func-root">
<code>
fn:root
</code>
</a>
</td>
<td>
Returns
the
root
of
the
tree
to
which
<del class="diff-old">the
node
argument
</del>
<code>
<ins class="diff-chg">$arg
</ins></code>
belongs.
<ins class="diff-new">This
will
usually,
but
not
necessarily,
be
a
document
node.
</ins>
</td>
</tr>
</tbody>
</table>
<p>
For
the
illustrative
examples
below
assume
an
XQuery
or
transformation
operating
on
a
PurchaseOrder
document
containing
a
number
of
line-item
elements.
Each
line-item
has
child
elements
called
description,
price,
quantity,
etc.
whose
content
is
different
for
each
line-item.
Quantity
has
simple
content
of
type
<code>
xs:decimal
</code>.
Further
assume
that
variables
<code>
$item1
</code>,
<code>
$item2
</code>,
etc.
are
each
bound
to
single
line-item
element
nodes
in
the
document
in
sequence
and
that
the
value
of
the
quantity
child
of
the
first
line-item
is
<code>
5.0
</code>.
</p>
<div class="global-variable-binding">
<p class="global-variable-binding">
<ins class="diff-new">let
</ins><code><ins class="diff-new">
$po
</ins></code><ins class="diff-new">
:=
</ins></p>
<div class="exampleInner">
<pre>
&lt;PurchaseOrder&gt;
  &lt;line-item&gt;
<del class="diff-old">    &lt;description&gt; ... &lt;/description&gt;
    &lt;price&gt; ... &lt;/price&gt;
</del>
<ins class="diff-chg">    &lt;description&gt;Large widget&lt;/description&gt;
    &lt;price&gt;8.95&lt;/price&gt;
</ins>
    &lt;quantity&gt;5.0&lt;/quantity&gt;
<del class="diff-old">      ...
</del>
  &lt;/line-item&gt;
  &lt;line-item&gt;
<del class="diff-old">      ...
</del>
<ins class="diff-chg">    &lt;description&gt;Small widget&lt;/description&gt;
    &lt;price&gt;3.99&lt;/price&gt;
    &lt;quantity&gt;2.0&lt;/quantity&gt;
  &lt;/line-item&gt;
  &lt;line-item&gt;
    &lt;description&gt;Tiny widget&lt;/description&gt;
    &lt;price&gt;1.49&lt;/price&gt;
    &lt;quantity&gt;805&lt;/quantity&gt;
</ins>
  &lt;/line-item&gt;
<del class="diff-old">      ...
</del>
&lt;/PurchaseOrder&gt;
</pre>
</div>
</div>
<div class="global-variable-binding">
<p class="global-variable-binding">
<ins class="diff-new">let
</ins><code><ins class="diff-new">
$item1
</ins></code><ins class="diff-new">
:=
</ins><code><ins class="diff-new">
$po/line-item[1]
</ins></code></p></div><div class="global-variable-binding"><p class="global-variable-binding"><ins class="diff-new">
let
</ins><code><ins class="diff-new">
$item2
</ins></code><ins class="diff-new">
:=
</ins><code><ins class="diff-new">
$po/line-item[2]
</ins></code></p></div><div class="global-variable-binding"><p class="global-variable-binding"><ins class="diff-new">
let
</ins><code><ins class="diff-new">
$item3
</ins></code><ins class="diff-new">
:=
</ins><code><ins class="diff-new">
$po/line-item[3]
</ins></code></p></div>
<div class="div2">
<h3>
<a name="func-name" id="func-name">
</a>
<del class="diff-old">14.1
</del>
<ins class="diff-chg">13.1
</ins>
fn:name
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
name
of
a
node,
as
an
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
that
is
either
the
zero-length
string,
or
has
the
lexical
form
of
an
</ins><code><ins class="diff-new">
xs:QName
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:name
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:name
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
name
of
a
node,
as
an
xs:string
that
is
either
the
zero-length
string,
or
has
the
lexical
form
of
an
xs:QName
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
the
argument
is
omitted,
it
defaults
to
the
context
item
(
<code>.
</code>
).
The
behavior
of
the
function
if
the
argument
is
omitted
is
exactly
the
same
as
if
the
context
item
had
been
passed
as
the
argument.
</p>
<p>
<del class="diff-old">The
following
errors
may
be
raised:
if
the
context
item
is
undefined
[
err:XPDY0002
]
XP
;
if
the
context
item
is
not
a
node
[
err:XPTY0004
]
XP
.
</del>
If
the
argument
is
supplied
and
is
the
empty
sequence,
the
function
returns
the
zero-length
string.
</p>
<p>
If
the
<del class="diff-old">target
</del>
node
<ins class="diff-new">identified
by
</ins><code><ins class="diff-new">
$arg
</ins></code>
has
no
name
(that
is,
if
it
is
a
document
node,
a
comment,
a
text
node,
or
a
namespace
<del class="diff-old">binding
</del>
<ins class="diff-chg">node
</ins>
having
no
name),
the
function
returns
the
zero-length
string.
</p>
<p>
Otherwise,
the
<ins class="diff-new">function
returns
the
</ins>
value
<del class="diff-old">returned
is
</del>
<ins class="diff-chg">of
the
expression
</ins>
<a href= "#func-string">
<code>
fn:string(fn:node-name($arg))
</code>
</a>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
The
following
errors
may
be
raised
when
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
omitted:
if
the
context
item
is
undefined
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002"><ins class="diff-new">
err:XPDY0002
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup><ins class="diff-new">
;
if
the
context
item
is
not
a
node
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004"><ins class="diff-new">
err:XPTY0004
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup>.</p></dd></dl>
</div>
<div class="div2">
<h3>
<a name="func-local-name" id="func-local-name">
</a>
<del class="diff-old">14.2
</del>
<ins class="diff-chg">13.2
</ins>
fn:local-name
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
local
part
of
the
name
of
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
as
an
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
that
is
either
the
zero-length
string,
or
has
the
lexical
form
of
an
</ins><code><ins class="diff-new">
xs:NCName
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:local-name
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:local-name
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
node()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
local
part
of
the
name
of
$arg
as
an
xs:string
that
will
either
be
the
zero-length
string
or
will
have
the
lexical
form
of
an
xs:NCName
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
the
argument
is
omitted,
it
defaults
to
the
context
item
(
<code>.
</code>
).
The
behavior
of
the
function
if
the
argument
is
omitted
is
exactly
the
same
as
if
the
context
item
had
been
passed
as
the
argument.
</p>
<p>
<del class="diff-old">The
following
errors
may
be
raised:
if
the
context
item
is
undefined
[
err:XPDY0002
]
XP
;
if
the
context
item
is
not
a
node
[
err:XPTY0004
]
XP
.
</del>
If
the
argument
is
supplied
and
is
the
empty
sequence,
the
function
returns
the
zero-length
string.
</p>
<p>
If
the
<del class="diff-old">target
</del>
node
<ins class="diff-new">identified
by
</ins><code><ins class="diff-new">
$arg
</ins></code>
has
no
name
(that
is,
if
it
is
a
document
node,
a
comment,
<del class="diff-old">or
</del>
a
text
<del class="diff-old">node),
</del>
<ins class="diff-chg">node,
or
a
namespace
node
having
no
name),
</ins>
the
function
returns
the
zero-length
string.
</p>
<p>
Otherwise,
the
<del class="diff-old">value
returned
will
be
</del>
<ins class="diff-chg">function
returns
</ins>
the
local
part
of
the
expanded-QName
of
the
<del class="diff-old">target
</del>
node
<del class="diff-old">(as
</del>
<ins class="diff-chg">identified
by
</ins><code><ins class="diff-chg">
$arg
</ins></code>,<ins class="diff-chg">
as
</ins>
determined
by
the
<code>
dm:node-name
</code>
accessor
<ins class="diff-new">defined
</ins>
in
<a href= "http://www.w3.org/TR/xpath-datamodel/#dm-node-name">
Section
5.11
node-name
Accessor
</a>
<sup>
<small>
DM
</small>
<del class="diff-old">.
</del>
</sup>
<ins class="diff-chg">).
</ins>
This
will
be
an
<code>
xs:string
</code>
whose
lexical
form
is
an
<code>
xs:NCName
</code>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
The
following
errors
may
be
raised
when
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
omitted:
if
the
context
item
is
undefined
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002"><ins class="diff-new">
err:XPDY0002
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup><ins class="diff-new">
;
if
the
context
item
is
not
a
node
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004"><ins class="diff-new">
err:XPTY0004
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup>.</p></dd></dl>
</div>
<div class="div2">
<h3>
<a name="func-namespace-uri" id="func-namespace-uri">
</a>
<del class="diff-old">14.3
</del>
<ins class="diff-chg">13.3
</ins>
fn:namespace-uri
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
namespace
URI
part
of
the
name
of
</ins><code><ins class="diff-new">
$arg
</ins></code>,<ins class="diff-new">
as
an
</ins><code><ins class="diff-new">
xs:anyURI
</ins></code><ins class="diff-new">
value.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:namespace-uri
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyURI
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:namespace-uri
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
node()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyURI
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
namespace
URI
of
the
xs:QName
of
$arg
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
the
argument
is
omitted,
it
defaults
to
the
context
node
(
<code>.
</code>
).
The
behavior
of
the
function
if
the
argument
is
omitted
is
exactly
the
same
as
if
the
context
item
had
been
passed
as
the
argument.
</p>
<p>
<del class="diff-old">The
following
errors
may
be
raised:
if
the
context
item
is
undefined
[
err:XPDY0002
]
XP
;
if
</del>
<ins class="diff-chg">If
</ins>
the
<del class="diff-old">context
item
is
not
a
</del>
node
<del class="diff-old">[
err:XPTY0004
]
XP
.
If
</del>
<ins class="diff-chg">identified
by
</ins>
<code>
$arg
</code>
is
neither
an
element
nor
an
attribute
node,
or
if
it
is
an
element
or
attribute
node
whose
expanded-QName
(as
determined
by
the
<code>
dm:node-name
</code>
accessor
in
the
<a href= "http://www.w3.org/TR/xpath-datamodel/#dm-node-name">
Section
5.11
node-name
Accessor
</a>
<sup>
<small>
DM
</small>
</sup>
)
is
in
no
namespace,
then
the
function
returns
the
<ins class="diff-new">zero-length
</ins>
<code>
xs:anyURI
</code>
<del class="diff-old">corresponding
to
</del>
<ins class="diff-chg">value.
</ins></p><p><ins class="diff-chg">
Otherwise,
</ins>
the
<del class="diff-old">zero-length
string.
</del>
<ins class="diff-chg">result
will
be
the
namespace
URI
part
of
the
expanded-QName
of
the
node
identified
by
</ins><code><ins class="diff-chg">
$arg
</ins></code>,<ins class="diff-chg">
as
determined
by
the
</ins><code><ins class="diff-chg">
dm:node-name
</ins></code><ins class="diff-chg">
accessor
defined
in
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#dm-node-name"><ins class="diff-chg">
Section
5.11
node-name
Accessor
</ins></a><sup><small><ins class="diff-chg">
DM
</ins></small></sup><ins class="diff-chg">
),
returned
as
an
</ins><code><ins class="diff-chg">
xs:anyURI
</ins></code><ins class="diff-chg">
value.
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
The
following
errors
may
be
raised
when
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
omitted:
if
the
context
item
is
undefined
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002"><ins class="diff-new">
err:XPDY0002
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup><ins class="diff-new">
;
if
the
context
item
is
not
a
node
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004"><ins class="diff-new">
err:XPTY0004
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup>.</p></dd></dl>
</div>
<div class="div2">
<h3>
<a name="func-number" id="func-number">
</a>
<del class="diff-old">14.4
</del>
<ins class="diff-chg">13.4
</ins>
fn:number
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
value
indicated
by
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
or,
if
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
not
specified,
the
context
item
after
atomization,
converted
to
an
</ins><code><ins class="diff-new">
xs:double
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:number
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:double
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:number
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:double
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
value
indicated
by
$arg
or,
if
$arg
is
not
specified,
the
context
item
after
atomization,
converted
to
an
xs:double
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
Calling
the
zero-argument
version
of
the
function
is
defined
to
give
the
same
result
as
calling
the
single-argument
version
with
the
context
item
(
<code>.
</code>
).
That
is,
<code>
fn:number()
</code>
is
equivalent
to
<code>
fn:number(.)
</code>.
</p>
<p>
If
<code>
$arg
</code>
is
the
empty
sequence
or
if
<code>
$arg
</code>
or
the
context
item
cannot
be
converted
to
an
<code>
xs:double
</code>,
the
<code>
xs:double
</code>
value
<code>
NaN
</code>
is
returned.
<del class="diff-old">If
the
context
item
is
undefined
an
error
is
raised:
[
err:XPDY0002
]
XP
.
</del>
</p>
<p>
<del class="diff-old">If
$arg
is
the
empty
sequence,
NaN
is
returned.
</del>
Otherwise,
<code>
$arg
</code>,
or
the
context
item
after
atomization,
is
converted
to
an
<code>
xs:double
</code>
following
the
rules
of
<a href="#casting-to-double">
<b>
<del class="diff-old">17.1.3.2
</del>
<ins class="diff-chg">18.1.3.2
</ins>
Casting
to
xs:double
</b>
</a>.
If
the
conversion
to
<code>
xs:double
</code>
fails,
the
<code>
xs:double
</code>
value
<code>
NaN
</code>
is
returned.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
omitted
and
the
context
item
is
undefined
an
error
is
raised:
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002"><ins class="diff-chg">
err:XPDY0002
</ins></a><ins class="diff-chg">
]
</ins><sup>
<small>
<ins class="diff-chg">XP
</ins></small>
<del class="diff-old">14.4.1
</del>
</sup>.
</p>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:number($item1/quantity)
</code>
returns
<code>
<del class="diff-old">5.0
</del>
<ins class="diff-chg">5.0e0
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:number($item2)
</del>
<ins class="diff-chg">fn:number($item2/description)
</ins>
</code>
returns
<code>
<del class="diff-old">NaN
</del>
<ins class="diff-chg">xs:double('NaN')
</ins>
</code>.
</p>
<p>
Assume
that
the
context
item
is
the
<code>
xs:string
</code>
<ins class="diff-new">value
</ins>
"
<code>
15
</code>
".
<ins class="diff-new">Then
</ins>
<code>
fn:number()
</code>
returns
<code>
<del class="diff-old">1.5E1
</del>
<ins class="diff-chg">1.5e1
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-lang" id="func-lang">
</a>
<del class="diff-old">14.5
</del>
<ins class="diff-chg">13.5
</ins>
fn:lang
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
This
function
tests
whether
the
language
of
</ins><code><ins class="diff-new">
$node
</ins></code>,<ins class="diff-new">
or
the
context
item
if
the
second
argument
is
omitted,
as
specified
by
</ins><code><ins class="diff-new">
xml:lang
</ins></code><ins class="diff-new">
attributes
is
the
same
as,
or
is
a
sublanguage
of,
the
language
specified
by
</ins><code><ins class="diff-new">
$testlang
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:lang
</code>
(
<code class= "arg">
$testlang
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:lang
</code>
(
<code class= "arg">
$testlang
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$node
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
This
function
tests
whether
the
language
of
$node
,
or
the
context
item
if
the
second
argument
is
omitted,
as
specified
by
xml:lang
attributes
is
the
same
as,
or
is
a
sublanguage
of,
the
language
specified
by
$testlang
.
</del>
The
behavior
of
the
function
if
the
second
argument
is
omitted
is
exactly
the
same
as
if
the
context
item
(
<code>.
</code>
)
had
been
passed
as
the
second
argument.
</p>
<p>
The
language
of
the
argument
<del class="diff-old">node,
</del>
<code>
<ins class="diff-chg">$node
</ins></code>,
or
the
context
item
if
the
second
argument
is
omitted,
is
determined
by
the
value
of
the
<code>
xml:lang
</code>
attribute
on
the
node,
or,
if
the
node
has
no
such
attribute,
by
the
value
of
the
<code>
xml:lang
</code>
attribute
on
the
nearest
ancestor
of
the
node
that
has
an
<code>
xml:lang
</code>
attribute.
If
there
is
no
such
ancestor,
then
the
function
returns
<code>
false
<del class="diff-old">The
following
errors
may
be
raised:
if
the
context
item
is
undefined
[
err:XPDY0002
]
XP
;
if
the
context
item
is
not
a
node
[
err:XPTY0004
]
XP
.
</del>
</code>.
</p>
<p>
If
<code>
$testlang
</code>
is
the
empty
sequence
it
is
interpreted
as
the
zero-length
string.
</p>
<p>
The
relevant
<code>
xml:lang
</code>
attribute
is
determined
by
the
value
of
the
XPath
expression:
</p>
<div class="exampleInner">
<pre>
(ancestor-or-self::*/@xml:lang)[last()]
</pre>
</div>
<p>
If
this
expression
returns
an
empty
sequence,
the
function
returns
<code>
false
</code>.
</p>
<p>
Otherwise,
the
function
returns
<code>
true
</code>
if
and
only
if,
based
on
a
caseless
default
match
as
specified
in
section
3.13
of
<a href="#Unicode4">
[The
Unicode
Standard]
</a>,
either:
</p>
<ol class="enumar">
<li>
<p>
<del class="diff-old">(1)
</del>
<code>
$testlang
</code>
is
equal
to
the
string-value
of
the
relevant
<code>
xml:lang
</code>
attribute,
or
</p>
</li>
<li>
<p>
<del class="diff-old">(2)
</del>
<code>
$testlang
</code>
is
equal
to
some
substring
of
the
string-value
of
the
relevant
<code>
xml:lang
</code>
attribute
that
starts
at
the
start
of
the
string-value
and
ends
immediately
before
a
hyphen,
"-"
<del class="diff-old">(The
</del>
<ins class="diff-chg">(the
</ins>
character
"-"
is
HYPHEN-MINUS,
#x002D).
</p>
</li>
</ol>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
When
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
omitted
the
following
errors
may
be
raised:
if
the
context
item
is
undefined
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002"><ins class="diff-chg">
err:XPDY0002
</ins></a><ins class="diff-chg">
]
</ins><sup>
<small>
<ins class="diff-chg">XP
</ins></small>
</sup>
<ins class="diff-new">;
if
the
context
item
is
not
a
node
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004"><ins class="diff-new">
err:XPTY0004
</ins>
</a>
<del class="diff-old">14.5.1
</del>
<ins class="diff-chg">]
</ins><sup><small><ins class="diff-chg">
XP
</ins></small></sup>.</p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
The
expression
<code>
fn:lang("en")
</code>
would
return
<code>
true
</code>
if
the
context
node
were
any
of
the
following
four
elements:
</p>
<ul>
<li>
<p>
<code>
&lt;para
xml:lang="en"/&gt;
</code>
</p>
</li>
<li>
<p>
<code>
&lt;div
xml:lang="en"&gt;&lt;para&gt;And
now,
and
forever!&lt;/para&gt;&lt;/div&gt;
</code>
</p>
</li>
<li>
<p>
<code>
&lt;para
xml:lang="EN"/&gt;
</code>
</p>
</li>
<li>
<p>
<code>
&lt;para
xml:lang="en-us"/&gt;
</code>
</p>
</li>
</ul>
<p>
The
expression
<code>
fn:lang("fr")
</code>
would
return
<code>
false
</code>
if
the
context
node
were
<code>
&lt;para
xml:lang="EN"/&gt;
</code>
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-is-same-node" id="func-is-same-node">
</a>
<del class="diff-old">14.6
</del>
<ins class="diff-chg">13.6
</ins>
op:is-same-node
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
two
arguments
refer
to
the
same
node.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"is"
operator
on
nodes.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:is-same-node
</code>
(
<code class= "arg">
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
node()
</code>,
<code class="arg">
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
If
the
node
identified
by
the
value
of
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
is
the
same
node
as
the
node
identified
by
the
value
of
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
(that
is,
the
two
nodes
have
the
same
identity),
then
the
function
returns
<code>
true
</code>
;
otherwise,
the
function
returns
<code>
false
</code>.
<del class="diff-old">This
function
backs
up
the
"is"
operator
on
nodes.
</del>
</p>
<del class="diff-old">14.6.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:is-same-node($item1,
$item1)
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:is-same-node($item1,
$item2)
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-node-before" id="func-node-before">
</a>
<del class="diff-old">14.7
</del>
<ins class="diff-chg">13.7
</ins>
op:node-before
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
node
identified
by
the
first
argument
precedes
the
node
identified
by
the
second
argument
in
document
order.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"&lt;&lt;"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:node-before
</code>
(
<code class= "arg">
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
node()
</code>,
<code class="arg">
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
If
the
node
identified
by
the
value
of
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
occurs
in
document
order
before
the
node
identified
by
the
value
of
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>,
<del class="diff-old">this
</del>
<ins class="diff-chg">then
the
</ins>
function
returns
<code>
true
</code>
;
otherwise,
it
returns
<code>
false
</code>.
</p>
<p>
The
rules
determining
the
order
of
nodes
within
a
single
document
and
in
different
documents
can
be
found
in
<a href= "http://www.w3.org/TR/xpath-datamodel/#document-order">
Section
2.4
Document
Order
</a>
<sup>
<small>
DM
</small>
</sup>.
<del class="diff-old">This
function
backs
up
the
"&lt;&lt;"
operator.
</del>
</p>
<del class="diff-old">14.7.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:node-before($item1,
$item2)
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:node-before($item1,
$item1)
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-node-after" id="func-node-after">
</a>
<del class="diff-old">14.8
</del>
<ins class="diff-chg">13.8
</ins>
op:node-after
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
node
identified
by
the
first
argument
follows
the
node
identified
by
the
second
argument
in
document
order.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"&gt;&gt;"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:node-after
</code>
(
<code class= "arg">
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
node()
</code>,
<code class="arg">
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
If
the
node
identified
by
the
value
of
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
occurs
in
document
order
after
the
node
identified
by
the
value
of
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>,
<del class="diff-old">this
</del>
<ins class="diff-chg">the
</ins>
function
returns
<code>
true
</code>
;
otherwise,
it
returns
<code>
false
</code>.
</p>
<p>
The
rules
determining
the
order
of
nodes
within
a
single
document
and
in
different
documents
can
be
found
in
<a href= "http://www.w3.org/TR/xpath-datamodel/#document-order">
Section
2.4
Document
Order
</a>
<sup>
<small>
DM
</small>
</sup>.
<del class="diff-old">This
function
backs
up
the
"&gt;&gt;"
operator.
</del>
</p>
<del class="diff-old">14.8.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:node-after($item1,
$item2)
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:node-after($item1,
$item1)
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:node-after($item2,
$item1)
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-root" id="func-root">
</a>
<del class="diff-old">14.9
</del>
<ins class="diff-chg">13.9
</ins>
fn:root
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
root
of
the
tree
to
which
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
belongs.
This
will
usually,
but
not
necessarily,
be
a
document
node.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:root
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
node()
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:root
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
node()?
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
root
of
the
tree
to
which
$arg
belongs.
This
will
usually,
but
not
necessarily,
be
a
document
node.
If
$arg
is
the
empty
sequence,
the
empty
sequence
is
returned.
If
$arg
is
a
document
node,
$arg
is
returned.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
If
the
function
is
called
without
an
argument,
the
context
item
(
<code>.
</code>
)
is
used
as
the
default
argument.
The
behavior
of
the
function
if
the
argument
is
omitted
is
exactly
the
same
as
if
the
context
item
had
been
passed
as
the
argument.
</p>
<p>
The
<ins class="diff-new">function
returns
the
value
of
the
expression
</ins><code><ins class="diff-new">
($arg/ancestor-or-self::node())[1]
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
When
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
omitted
the
</ins>
following
errors
may
be
<del class="diff-old">raised:
</del>
<ins class="diff-chg">raised
:
</ins>
if
the
context
item
is
undefined
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002">
err:XPDY0002
</a>
]
<sup>
<small>
XP
</small>
</sup>
;
if
the
context
item
is
not
a
node
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004">
err:XPTY0004
</a>
]
<sup>
<small>
XP
</small>
</sup>.
</p>
<del class="diff-old">14.9.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
These
examples
use
some
variables
which
could
be
defined
in
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
as:
</p>
<div class="exampleInner">
<pre>
let $i := &lt;tool&gt;wrench&lt;/tool&gt;
let $o := &lt;order&gt; {$i} &lt;quantity&gt;5&lt;/quantity&gt; &lt;/order&gt;
let $odoc := document {$o}
let $newi := $o/tool
</pre>
</div>
<p>
Or
they
could
be
defined
in
<a href="#xslt20">
[XSL
Transformations
(XSLT)
Version
2.0]
</a>
as:
</p>
<div class="exampleInner">
<pre>
&lt;xsl:variable name="i" as="element()"&gt;
  &lt;tool&gt;wrench&lt;/tool&gt;
&lt;/xsl:variable&gt;
&lt;xsl:variable name="o" as="element()"&gt;
  &lt;order&gt;
    &lt;xsl:copy-of select="$i"/&gt;
    &lt;quantity&gt;5&lt;/quantity&gt;
  &lt;/order&gt;
&lt;/xsl:variable&gt;
&lt;xsl:variable name="odoc"&gt;
  &lt;xsl:copy-of select="$o"/&gt;
&lt;/xsl:variable&gt;
&lt;xsl:variable name="newi" select="$o/tool"/&gt;
</pre>
</div>
<p>
<code>
fn:root($i)
</code>
returns
<ins class="diff-new">the
element
node
</ins>
<code>
$i
</code>
</p>
<p>
<code>
fn:root($o/quantity)
</code>
returns
<ins class="diff-new">the
element
node
</ins>
<code>
$o
</code>
</p>
<p>
<code>
fn:root($odoc//quantity)
</code>
returns
<ins class="diff-new">the
document
node
</ins>
<code>
$odoc
</code>
</p>
<p>
<code>
fn:root($newi)
</code>
returns
<ins class="diff-new">the
element
node
</ins>
<code>
$o
</code>
</p>
<del class="diff-old">Note:
</del>
<p>
The
final
three
examples
could
be
made
type-safe
by
wrapping
their
operands
with
<del class="diff-old">fn:exactly-one().
</del>
<a href= "#func-exactly-one">
<code>
<ins class="diff-chg">fn:exactly-one()
</ins></code></a>.
</p>
</dd>
</dl>
</div>
</div>
<div class="div1">
<h2>
<a name="sequence-functions" id="sequence-functions">
</a>
<del class="diff-old">15
</del>
<ins class="diff-chg">14
</ins>
Functions
and
Operators
on
Sequences
</h2>
<p>
A
<code>
sequence
</code>
is
an
ordered
collection
of
zero
or
more
<code>
items
</code>.
An
<code>
item
</code>
is
either
a
node
or
an
atomic
value.
The
terms
<code>
sequence
</code>
and
<code>
item
</code>
are
defined
formally
in
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
and
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>.
</p>
<div class="div2">
<h3>
<a name="general-seq-funcs" id="general-seq-funcs">
</a>
<del class="diff-old">15.1
</del>
<ins class="diff-chg">14.1
</ins>
General
Functions
and
Operators
on
Sequences
</h3>
<p>
The
following
functions
are
defined
on
sequences.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<del class="diff-old">fn:boolean
Computes
the
effective
boolean
value
of
the
argument
sequence.
</del>
<a href= "#func-concatenate">
<code>
op:concatenate
</code>
</a>
</td>
<td>
<del class="diff-old">Concatenates
</del>
<ins class="diff-chg">Returns
the
concatenation
of
</ins>
two
sequences.
</td>
</tr>
<tr>
<td>
<a href= "#func-distinct-values">
<code>
<del class="diff-old">fn:index-of
</del>
<ins class="diff-chg">fn:distinct-values
</ins>
</code>
</a>
</td>
<td>
Returns
<del class="diff-old">a
sequence
of
xs:integer
s,
each
of
which
is
the
index
of
a
member
of
the
sequence
specified
as
</del>
the
<del class="diff-old">first
argument
</del>
<ins class="diff-chg">values
</ins>
that
<del class="diff-old">is
equal
to
the
value
of
the
second
argument.
If
no
members
of
the
specified
sequence
are
equal
to
the
value
of
the
second
argument,
the
empty
sequence
is
returned.
</del>
<ins class="diff-chg">appear
in
a
sequence,
with
duplicates
eliminated.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-empty">
<code>
fn:empty
</code>
</a>
</td>
<td>
<del class="diff-old">Indicates
whether
or
not
</del>
<ins class="diff-chg">Returns
true
if
</ins>
the
<del class="diff-old">provided
sequence
</del>
<ins class="diff-chg">argument
</ins>
is
<del class="diff-old">empty.
</del>
<ins class="diff-chg">the
empty
sequence.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-exists">
<code>
fn:exists
</code>
</a>
</td>
<td>
<del class="diff-old">Indicates
whether
or
not
</del>
<ins class="diff-chg">Returns
true
if
</ins>
the
<del class="diff-old">provided
sequence
</del>
<ins class="diff-chg">argument
</ins>
is
<del class="diff-old">not
empty.
</del>
<ins class="diff-chg">a
non-empty
sequence.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-index-of">
<code>
<del class="diff-old">fn:distinct-values
</del>
<ins class="diff-chg">fn:index-of
</ins>
</code>
</a>
</td>
<td>
Returns
a
sequence
<del class="diff-old">in
which
all
but
one
</del>
of
<del class="diff-old">a
set
of
duplicate
values,
based
on
value
equality,
have
been
deleted.
The
order
in
which
</del>
<ins class="diff-chg">positive
integers
giving
</ins>
the
<del class="diff-old">distinct
values
</del>
<ins class="diff-chg">positions
within
the
sequence
</ins><code><ins class="diff-chg">
$seqArg
</ins></code><ins class="diff-chg">
of
items
that
</ins>
are
<del class="diff-old">returned
is
·
implementation
dependent
·
.
</del>
<ins class="diff-chg">equal
to
</ins><code><ins class="diff-chg">
$searchArg
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-insert-before">
<code>
fn:insert-before
</code>
</a>
</td>
<td>
<del class="diff-old">Inserts
</del>
<ins class="diff-chg">Returns
a
sequence
constructed
by
inserting
</ins>
an
item
or
<ins class="diff-new">a
</ins>
sequence
of
items
at
a
<del class="diff-old">specified
</del>
<ins class="diff-chg">given
</ins>
position
<del class="diff-old">in
a
</del>
<ins class="diff-chg">within
an
existing
</ins>
sequence.
</td>
</tr>
<tr>
<td>
<a href="#func-remove">
<code>
fn:remove
</code>
</a>
</td>
<td>
<del class="diff-old">Removes
an
item
from
</del>
<ins class="diff-chg">Returns
</ins>
a
<del class="diff-old">specified
</del>
<ins class="diff-chg">new
sequence
containing
all
the
items
of
</ins><code><ins class="diff-chg">
$target
</ins></code><ins class="diff-chg">
except
the
item
at
</ins>
position
<del class="diff-old">in
a
sequence.
</del>
<code>
<ins class="diff-chg">$position
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href="#func-reverse">
<code>
fn:reverse
</code>
</a>
</td>
<td>
Reverses
the
order
of
items
in
a
sequence.
</td>
</tr>
<tr>
<td>
<a href= "#func-subsequence">
<code>
fn:subsequence
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">subsequence
</del>
<ins class="diff-chg">contiguous
sequence
</ins>
of
<del class="diff-old">a
given
sequence,
identified
</del>
<ins class="diff-chg">items
in
the
value
of
</ins><code><ins class="diff-chg">
$sourceSeq
</ins></code><ins class="diff-chg">
beginning
at
the
position
indicated
</ins>
by
<del class="diff-old">location.
</del>
<ins class="diff-chg">the
value
of
</ins><code><ins class="diff-chg">
$startingLoc
</ins></code><ins class="diff-chg">
and
continuing
for
the
number
of
items
indicated
by
the
value
of
</ins><code><ins class="diff-chg">
$length
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href="#func-unordered">
<code>
fn:unordered
</code>
</a>
</td>
<td>
Returns
the
items
<ins class="diff-new">of
</ins><code><ins class="diff-new">
$sourceSeq
</ins></code>
in
<del class="diff-old">the
given
sequence
in
a
non-deterministic
</del>
<ins class="diff-chg">an
</ins><a title= "implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation
dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>
order.
</td>
</tr>
</tbody>
</table>
<p>
As
in
the
previous
section,
for
the
illustrative
examples
below,
assume
an
XQuery
or
transformation
operating
on
a
non-empty
Purchase
Order
document
containing
a
number
of
line-item
elements.
The
variable
<code>
$seq
</code>
is
bound
to
the
sequence
of
line-item
nodes
in
document
order.
The
variables
<code>
$item1
</code>,
<code>
$item2
</code>,
etc.
are
bound
to
separate,
individual
line-item
nodes
in
the
sequence.
</p>
<div class="div3">
<h4>
<a name="func-concatenate" id="func-concatenate">
</a>
<del class="diff-old">15.1.1
fn:boolean
</del>
<ins class="diff-chg">14.1.1
op:concatenate
</ins>
</h4>
<del class="diff-old">fn:boolean
(
$arg
&#160;as&#160;
item()*
)
&#160;as&#160;
xs:boolean
Summary:
Computes
the
effective
boolean
value
of
the
sequence
$arg
.
See
Section
2.4.3
Effective
Boolean
Value
XP
</del>
<dl>
<dt class="label">
<ins class="diff-chg">Summary
</ins></dt><dd>
<p>
<del class="diff-old">If
$arg
is
</del>
<ins class="diff-chg">Returns
</ins>
the
<del class="diff-old">empty
sequence,
fn:boolean
returns
false
.
If
$arg
is
a
sequence
whose
first
item
is
a
node,
fn:boolean
returns
true
.
If
$arg
is
a
singleton
value
of
type
xs:boolean
or
a
derived
from
xs:boolean
,
fn:boolean
returns
$arg
.
If
$arg
is
a
singleton
value
</del>
<ins class="diff-chg">concatenation
</ins>
of
<del class="diff-old">type
xs:string
or
a
type
derived
from
xs:string
,
xs:anyURI
or
a
type
derived
from
xs:anyURI
or
xs:untypedAtomic
,
fn:boolean
returns
false
if
the
operand
value
has
zero
length;
otherwise
it
returns
true
.
</del>
<ins class="diff-chg">two
sequences.
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Operator
Mapping
</ins></dt><dd>
<p>
<del class="diff-old">If
$arg
is
a
singleton
value
of
any
numeric
type
or
a
type
derived
from
a
numeric
type,
fn:boolean
returns
false
if
</del>
<ins class="diff-chg">Defines
</ins>
the
<del class="diff-old">operand
value
is
NaN
or
is
numerically
equal
to
zero;
otherwise
it
returns
true
.
In
all
other
cases,
fn:boolean
raises
a
type
error
[
err:FORG0006
].
The
static
</del>
semantics
of
<del class="diff-old">this
function
are
described
in
Section
7.2.4
The
fn:boolean
function
FS
.
Note:
The
result
of
this
function
is
not
necessarily
</del>
the
<del class="diff-old">same
as
"
$arg
cast
as
xs:boolean
".
For
example,
fn:boolean("false")
returns
the
value
"true"
whereas
"
false
"
cast
as
xs:boolean
returns
false
.
15.1.1.1
Examples
let
$x
:=
("a",
"b",
"c")
fn:boolean($x)
raises
a
type
error
[
err:FORG0006
].
fn:boolean($x[1])
returns
true
.
fn:boolean($x[0])
returns
false
.
</del>
<ins class="diff-chg">infix
operator
",".
</ins>
</p>
<del class="diff-old">15.1.2
op:concatenate
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:concatenate
</code>
(
<code class= "arg">
$seq1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
item()*
</code>,
<code class="arg">
$seq2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
a
sequence
consisting
of
<ins class="diff-new">all
</ins>
the
items
in
<code>
$seq1
</code>
followed
by
<ins class="diff-new">all
</ins>
the
items
in
<code>
$seq2
</code>.
<del class="diff-old">This
function
backs
up
the
infix
operator
",".
If
either
sequence
is
the
empty
sequence,
the
other
operand
is
returned.
</del>
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_constructing_sequences">
Section
4.3.1
Constructing
Sequences
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
<del class="diff-old">15.1.2.1
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd><p><ins class="diff-chg">
If
either
sequence
is
the
empty
sequence,
the
other
operand
is
returned.
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:concatenate((1,
2,
3),
(4,
5))
</code>
returns
<code>
(1,
2,
3,
4,
5)
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:concatenate((1,
2,
3),
())
</code>
returns
<code>
(1,
2,
3)
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:concatenate((),
())
</code>
returns
<code>
()
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-distinct-values" id= "func-distinct-values">
</a>
<del class="diff-old">15.1.3
fn:index-of
</del>
<ins class="diff-chg">14.1.2
fn:distinct-values
</ins>
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
values
that
appear
in
a
sequence,
with
duplicates
eliminated.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
<del class="diff-old">fn:index-of
</del>
<ins class="diff-chg">fn:distinct-values
</ins>
</code>
(
<del class="diff-old">$seqParam
</del>
<code class= "arg">
<ins class="diff-chg">$arg
</ins>
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
<del class="diff-old">,
$srchParam
&#160;as&#160;
xs:anyAtomicType
</del>
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
<del class="diff-old">xs:integer*
</del>
<ins class="diff-chg">xs:anyAtomicType*
</ins>
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
<del class="diff-old">fn:index-of
</del>
<ins class="diff-chg">fn:distinct-values
</ins>
</code>
(
</td>
<td valign="baseline">
<code class="arg">
<del class="diff-old">$seqParam
</del>
<ins class="diff-chg">$arg
</ins>
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
<del class="diff-old">$srchParam
&#160;as&#160;
xs:anyAtomicType
,
</del>
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
<del class="diff-old">xs:integer*
</del>
<ins class="diff-chg">xs:anyAtomicType*
</ins>
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
a
sequence
of
positive
integers
giving
the
positions
within
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
sequence
<ins class="diff-new">that
results
from
removing
from
</ins>
<code>
<del class="diff-old">$seqParam
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<ins class="diff-new">all
but
one
</ins>
of
<del class="diff-old">items
</del>
<ins class="diff-chg">a
set
of
values
</ins>
that
are
equal
to
<del class="diff-old">$srchParam
.
The
collation
used
by
the
invocation
of
this
function
is
determined
according
to
the
rules
in
7.3.1
Collations
.
The
collation
is
used
when
string
comparison
is
required.
The
items
in
the
sequence
$seqParam
</del>
<ins class="diff-chg">one
another.
Values
</ins>
are
compared
<del class="diff-old">with
$srchParam
under
the
rules
for
</del>
<ins class="diff-chg">using
</ins>
the
<code>
eq
</code>
<del class="diff-old">operator.
</del>
<ins class="diff-chg">operator,
subject
to
the
caveats
defined
below.
</ins></p><p>
Values
of
type
<code>
xs:untypedAtomic
</code>
are
compared
as
if
they
were
of
type
<code>
xs:string
</code>.
</p>
<p>
Values
that
cannot
be
compared,
<del class="diff-old">i.e.
</del>
<ins class="diff-chg">because
</ins>
the
<code>
eq
</code>
operator
is
not
defined
for
their
types,
are
considered
to
be
distinct.
<del class="diff-old">If
an
item
compares
equal,
then
</del>
</p>
<p>
<ins class="diff-chg">The
collation
used
by
this
function
is
determined
according
to
</ins>
the
<del class="diff-old">position
of
that
item
</del>
<ins class="diff-chg">rules
</ins>
in
<del class="diff-old">the
sequence
</del>
<a href="#choosing-a-collation">
<b>
<ins class="diff-chg">5.3.3
Choosing
a
Collation
</ins></b></a>.<ins class="diff-chg">
This
collation
is
used
when
string
comparison
is
required.
</ins></p><p><ins class="diff-chg">
For
</ins>
<code>
<del class="diff-old">$seqParam
</del>
<ins class="diff-chg">xs:float
</ins>
</code>
<ins class="diff-new">and
</ins><code><ins class="diff-new">
xs:double
</ins></code><ins class="diff-new">
values,
positive
zero
</ins>
is
<del class="diff-old">included
in
the
result.
</del>
<ins class="diff-chg">equal
to
negative
zero
and,
although
</ins><code><ins class="diff-chg">
NaN
</ins></code><ins class="diff-chg">
does
not
equal
itself,
if
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
contains
multiple
</ins><code><ins class="diff-chg">
NaN
</ins></code><ins class="diff-chg">
values
a
single
</ins><code><ins class="diff-chg">
NaN
</ins></code><ins class="diff-chg">
is
returned.
</ins>
</p>
<p>
If
<del class="diff-old">the
value
of
</del>
<code>
<del class="diff-old">$seqParam
</del>
<ins class="diff-chg">xs:dateTime
</ins></code>,<code><ins class="diff-chg">
xs:date
</ins>
</code>
<del class="diff-old">is
the
empty
sequence,
</del>
or
<del class="diff-old">if
no
item
in
</del>
<code>
<del class="diff-old">$seqParam
</del>
<ins class="diff-chg">xs:time
</ins>
</code>
<del class="diff-old">matches
</del>
<ins class="diff-chg">values
do
not
have
a
timezone,
they
are
considered
to
have
the
implicit
timezone
provided
by
the
dynamic
context
for
the
purpose
of
comparison.
Note
that
</ins>
<code>
<del class="diff-old">$srchParam
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>,
<del class="diff-old">then
</del>
<code>
<ins class="diff-chg">xs:date
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
xs:time
</ins></code><ins class="diff-chg">
values
can
compare
equal
even
if
their
timezones
are
different.
</ins></p><p><ins class="diff-chg">
The
order
in
which
</ins>
the
<del class="diff-old">empty
</del>
sequence
<ins class="diff-new">of
values
</ins>
is
<del class="diff-old">returned.
</del>
<ins class="diff-chg">returned
is
</ins><a title="implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation
dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.
</p>
<p>
<del class="diff-old">The
first
item
in
</del>
<ins class="diff-chg">Which
value
of
</ins>
a
<del class="diff-old">sequence
</del>
<ins class="diff-chg">set
of
values
that
compare
equal
</ins>
is
<del class="diff-old">at
position
1,
not
position
0.
</del>
<ins class="diff-chg">returned
is
</ins><a title="implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation
dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.
</p>
<p>
The
<ins class="diff-new">static
type
of
the
</ins>
result
<del class="diff-old">sequence
</del>
is
<ins class="diff-new">a
sequence
of
prime
types
as
defined
</ins>
in
<del class="diff-old">ascending
numeric
order.
</del>
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_distinct_node_vals">
<ins class="diff-chg">Section
7.2.7
The
fn:distinct-values
function
</ins>
</a>
<del class="diff-old">15.1.3.1
Examples
</del>
<del class="diff-old">fn:index-of
((10,
20,
30,
40),
35)
returns
().
</del>
<sup>
<small>
<ins class="diff-new">FS
</ins></small></sup>.
</p>
<p>
<ins class="diff-chg">If
the
input
sequence
contains
values
of
different
numeric
types
that
differ
from
each
other
by
small
amounts,
then
the
eq
operator
is
not
transitive,
because
of
rounding
effects
occurring
during
type
promotion.
In
the
situation
where
the
input
contains
three
values
</ins>
<code>
<del class="diff-old">fn:index-of
((10,
20,
30,
30,
20,
10),
20)
returns
</del>
<ins class="diff-chg">A
</ins></code>,
<code>
<del class="diff-old">(2,
5).
</del>
<ins class="diff-chg">B
</ins></code>,<ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
C
</ins>
</code>
<ins class="diff-chg">such
that
</ins><code><ins class="diff-chg">
A
eq
B
</ins></code>,<code><ins class="diff-chg">
B
eq
C
</ins></code>,<ins class="diff-chg">
but
</ins><code><ins class="diff-chg">
A
ne
C
</ins></code>,<ins class="diff-chg">
then
the
number
of
items
in
the
result
of
the
function
(as
well
as
the
choice
of
which
items
are
returned)
is
implementation-dependent,
subject
only
to
the
constraints
that
(a)
no
two
items
in
the
result
sequence
compare
equal
to
each
other,
and
(b)
every
input
item
that
does
not
appear
in
the
result
sequence
compares
equal
to
some
item
that
does
appear
in
the
result
sequence.
</ins>
</p>
<p>
<ins class="diff-new">For
example,
this
arises
when
computing:
</ins></p><div class="exampleInner"><pre><ins class="diff-new">
    distinct-values(
            (xs:float('1.0'),
            xs:decimal('1.0000000000100000000001',
            xs:double( '1.00000000001'))
</ins></pre>
</div>
<p>
<ins class="diff-new">because
the
values
of
type
</ins>
<code>
<del class="diff-old">fn:index-of
(("a",
"sport",
"and",
"a",
"pastime"),
"a")
</del>
<ins class="diff-chg">xs:float
</ins>
</code>
<del class="diff-old">returns
</del>
<ins class="diff-chg">and
</ins>
<code>
<del class="diff-old">(1,
4).
</del>
<ins class="diff-chg">xs:double
</ins>
</code>
<del class="diff-old">If
@a
is
an
attribute
</del>
<ins class="diff-chg">both
compare
equal
to
the
value
</ins>
of
type
<code>
<del class="diff-old">xs:NMTOKENS
</del>
<ins class="diff-chg">xs:decimal
</ins>
</code>
<del class="diff-old">whose
typed
value
is
"
</del>
<ins class="diff-chg">but
not
equal
to
each
other.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
If
</ins>
<code>
<del class="diff-old">red
green
blue
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<del class="diff-old">",
then:
</del>
<ins class="diff-chg">is
the
empty
sequence,
the
function
returns
the
empty
sequence.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins>
<code>
<del class="diff-old">fn:index-of
(@a,
"blue")
</del>
<ins class="diff-chg">fn:distinct-values((1,
2.0,
3,
2))
</ins>
</code>
returns
<ins class="diff-new">some
permutation
of
</ins>
<code>
<del class="diff-old">3
</del>
<ins class="diff-chg">(1,
3,
2.0)
</ins>
</code>.
</p>
<p>
<del class="diff-old">This
is
because
the
function
calling
mechanism
atomizes
the
attribute
node
to
produce
a
sequence
of
three
</del>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">xs:NMTOKEN
</del>
<ins class="diff-chg">fn:distinct-values((xs:untypedAtomic("cherry"),
xs:untypedAtomic("plum"),
xs:untypedAtomic("plum")))
</ins>
</code>
<del class="diff-old">s.
</del>
<ins class="diff-chg">returns
some
permutation
of
</ins><code><ins class="diff-chg">
(xs:untypedAtomic("cherry"),
xs:untypedAtomic("plum"))
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-empty" id="func-empty">
</a>
<del class="diff-old">15.1.4
</del>
<ins class="diff-chg">14.1.3
</ins>
fn:empty
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
argument
is
the
empty
sequence.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:empty
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
If
the
value
of
<code>
$arg
</code>
is
the
empty
sequence,
the
function
returns
<code>
true
</code>
;
otherwise,
the
function
returns
<code>
false
</code>.
</p>
<del class="diff-old">15.1.4.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
fn:empty((1,2,3)[10])
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
true()
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins>
<code>
fn:empty(fn:remove(("hello",
"world"),
1))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-exists" id="func-exists">
</a>
<del class="diff-old">15.1.5
</del>
<ins class="diff-chg">14.1.4
</ins>
fn:exists
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
true
if
the
argument
is
a
non-empty
sequence.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:exists
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
If
the
value
of
<code>
$arg
</code>
is
<del class="diff-old">not
the
empty
</del>
<ins class="diff-chg">a
non-empty
</ins>
sequence,
the
function
returns
<code>
true
</code>
;
otherwise,
the
function
returns
<code>
false
</code>.
</p>
<del class="diff-old">15.1.5.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:exists(fn:remove(("hello"),
1))
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
fn:exists(fn:remove(("hello",
"world"),
1))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
true()
</ins></code>.</p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-index-of" id="func-index-of">
</a>
<del class="diff-old">15.1.6
fn:distinct-values
</del>
<ins class="diff-chg">14.1.5
fn:index-of
</ins>
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
sequence
of
positive
integers
giving
the
positions
within
the
sequence
</ins><code><ins class="diff-new">
$seqArg
</ins></code><ins class="diff-new">
of
items
that
are
equal
to
</ins><code><ins class="diff-new">
$searchArg
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
<del class="diff-old">fn:distinct-values
</del>
<ins class="diff-chg">fn:index-of
</ins>
</code>
(
<del class="diff-old">$arg
</del>
</td>
<td valign="baseline">
<code class="arg">
<ins class="diff-chg">$seqArg
</ins>
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
<ins class="diff-new">$searchArg
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType
</ins>
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<del class="diff-old">xs:anyAtomicType*
</del>
<code class= "return-type">
<ins class="diff-chg">xs:integer*
</ins>
</code>
</td>
</tr>
</table>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
<del class="diff-old">fn:distinct-values
</del>
<ins class="diff-chg">fn:index-of
</ins>
</code>
(
</td>
<td valign="baseline">
<code class="arg">
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$seqArg
</ins>
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
<ins class="diff-new">$searchArg
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<del class="diff-old">xs:anyAtomicType*
</del>
<code class= "return-type">
<ins class="diff-chg">xs:integer*
</ins>
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
a
sequence
of
positive
integers
giving
the
positions
within
</ins>
the
sequence
<del class="diff-old">that
results
from
removing
from
</del>
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$seqArg
</ins>
</code>
<del class="diff-old">all
but
one
</del>
of
<del class="diff-old">a
set
of
values
</del>
<ins class="diff-chg">items
</ins>
that
are
<ins class="diff-new">equal
to
</ins><code><ins class="diff-new">
$searchArg
</ins></code>.</p><p><ins class="diff-new">
The
collation
used
by
this
function
is
determined
according
to
the
rules
in
</ins><a href="#choosing-a-collation"><b><ins class="diff-new">
5.3.3
Choosing
a
Collation
</ins></b></a>.<ins class="diff-new">
This
collation
is
used
when
string
comparison
is
required.
</ins></p><p><ins class="diff-new">
The
items
in
the
sequence
</ins><code><ins class="diff-new">
$seqArg
</ins></code><ins class="diff-new">
are
compared
with
</ins><code><ins class="diff-new">
$searchArg
</ins></code><ins class="diff-new">
under
the
rules
for
the
</ins>
<code>
eq
</code>
<del class="diff-old">to
one
other.
</del>
<ins class="diff-chg">operator.
</ins>
Values
of
type
<code>
xs:untypedAtomic
</code>
are
compared
as
if
they
were
of
type
<code>
xs:string
</code>.
Values
that
cannot
be
compared,
<del class="diff-old">i.e.
</del>
<ins class="diff-chg">because
</ins>
the
<code>
eq
</code>
operator
is
not
defined
for
their
types,
are
considered
to
be
distinct.
<del class="diff-old">The
order
</del>
<ins class="diff-chg">If
an
item
compares
equal,
then
the
position
of
that
item
</ins>
in
<del class="diff-old">which
</del>
the
sequence
<del class="diff-old">of
values
is
returned
</del>
<code>
<ins class="diff-chg">$seqArg
</ins></code>
is
<del class="diff-old">·
implementation
dependent
·
.
</del>
<ins class="diff-chg">included
in
the
result.
</ins>
</p>
<p>
The
<del class="diff-old">static
type
of
the
result
is
</del>
<ins class="diff-chg">first
item
in
</ins>
a
sequence
<del class="diff-old">of
prime
types
as
defined
in
Section
7.2.7
The
fn:distinct-values
function
FS
.
</del>
<ins class="diff-chg">is
at
position
1,
not
position
0.
</ins>
</p>
<p>
The
<del class="diff-old">collation
used
by
the
invocation
of
this
function
</del>
<ins class="diff-chg">result
sequence
</ins>
is
<del class="diff-old">determined
according
to
the
rules
</del>
in
<del class="diff-old">7.3.1
Collations
.
The
collation
is
used
when
string
comparison
is
required.
</del>
<ins class="diff-chg">ascending
numeric
order.
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
If
<ins class="diff-new">the
value
of
</ins>
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$seqArg
</ins>
</code>
is
the
empty
sequence,
<ins class="diff-new">or
if
no
item
in
</ins><code><ins class="diff-new">
$seqArg
</ins></code><ins class="diff-new">
matches
</ins><code><ins class="diff-new">
$searchArg
</ins></code>,<ins class="diff-new">
then
the
function
returns
</ins>
the
empty
<del class="diff-old">sequence
is
returned.
</del>
<ins class="diff-chg">sequence.
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Examples
</ins></dt><dd>
<p>
<del class="diff-old">For
</del>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">xs:float
</del>
<ins class="diff-chg">fn:index-of((10,
20,
30,
40),
35)
</ins>
</code>
<del class="diff-old">and
</del>
<ins class="diff-chg">returns
</ins>
<code>
<del class="diff-old">xs:double
values,
positive
zero
is
equal
to
negative
zero
and,
although
</del>
<ins class="diff-chg">()
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins>
<code>
<del class="diff-old">NaN
</del>
<ins class="diff-chg">fn:index-of((10,
20,
30,
30,
20,
10),
20)
</ins>
</code>
<del class="diff-old">does
not
equal
itself,
if
</del>
<ins class="diff-chg">returns
</ins>
<code>
<del class="diff-old">$arg
contains
multiple
</del>
<ins class="diff-chg">(2,
5)
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins>
<code>
<del class="diff-old">NaN
</del>
<ins class="diff-chg">fn:index-of(("a",
"sport",
"and",
"a",
"pastime"),
"a")
</ins>
</code>
<del class="diff-old">values
a
single
</del>
<ins class="diff-chg">returns
</ins>
<code>
<del class="diff-old">NaN
is
returned.
</del>
<ins class="diff-chg">(1,
4)
</ins></code>.
</p>
<p>
If
<code>
<del class="diff-old">xs:dateTime
,
xs:date
or
xs:time
</del>
<ins class="diff-chg">@a
</ins>
</code>
<del class="diff-old">values
do
not
have
a
timezone,
they
are
considered
to
have
the
implicit
timezone
provided
by
the
dynamic
context
for
the
purpose
</del>
<ins class="diff-chg">is
an
attribute
</ins>
of
<del class="diff-old">comparison.
Note
that
xs:dateTime
,
xs:date
or
</del>
<ins class="diff-chg">type
</ins>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:NMTOKENS
</ins>
</code>
<del class="diff-old">values
can
compare
equal
even
if
their
timezones
are
different.
Which
</del>
<ins class="diff-chg">whose
string
</ins>
value
<del class="diff-old">of
a
set
of
values
that
compare
equal
</del>
is
<del class="diff-old">returned
</del>
<code>
<ins class="diff-chg">"red
green
blue"
</ins></code>,<ins class="diff-chg">
and
whose
typed
value
</ins>
is
<del class="diff-old">·
implementation
dependent
·
.
15.1.6.1
Examples
</del>
<ins class="diff-chg">therefore
</ins>
<code>
<del class="diff-old">fn:distinct-values((1,
2.0,
3,
2))
</del>
<ins class="diff-chg">("red",
"green",
"blue")
</ins>
</code>
<del class="diff-old">might
return
</del>
<ins class="diff-chg">then
</ins>
<code>
<del class="diff-old">(1,
3,
2.0)
.
The
following
query:
let $x as xs:untypedAtomic*
    := (xs:untypedAtomic("cherry"),
        xs:untypedAtomic("bar"),
        xs:untypedAtomic("bar"))
return fn:distinct-values ($x)
                                    
</del>
<ins class="diff-chg">fn:index-of(@a,
"blue")
</ins></code>
returns
<code>
<ins class="diff-new">3
</ins></code>.<ins class="diff-new">
This
is
because
the
function
calling
mechanism
atomizes
the
attribute
node
to
produce
</ins>
a
sequence
<del class="diff-old">containing
two
items
</del>
of
<del class="diff-old">type
</del>
<ins class="diff-chg">three
</ins>
<code>
<del class="diff-old">xs:untypedAtomic
.
</del>
<ins class="diff-chg">xs:NMTOKEN
</ins></code><ins class="diff-chg">
values.
</ins></p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-insert-before" id="func-insert-before">
</a>
<del class="diff-old">15.1.7
</del>
<ins class="diff-chg">14.1.6
</ins>
fn:insert-before
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
sequence
constructed
by
inserting
an
item
or
a
sequence
of
items
at
a
given
position
within
an
existing
sequence.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:insert-before
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$target
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
item()*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$position
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:integer
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$inserts
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()*
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Returns
a
new
sequence
constructed
from
the
value
of
$target
with
the
value
of
$inserts
inserted
at
the
position
specified
by
the
value
of
$position
.
(The
value
of
$target
is
not
affected
by
the
sequence
construction.)
If
$target
is
the
empty
sequence,
$inserts
is
returned.
If
$inserts
is
the
empty
sequence,
$target
is
returned.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
value
returned
by
the
function
consists
of
all
items
of
<code>
$target
</code>
whose
index
is
less
than
<code>
$position
</code>,
followed
by
all
items
of
<code>
$inserts
</code>,
followed
by
the
remaining
elements
of
<code>
$target
</code>,
in
that
<del class="diff-old">sequence.
</del>
<ins class="diff-chg">order.
</ins></p><p><ins class="diff-chg">
For
detailed
type
semantics
see
</ins><a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_insert_before"><ins class="diff-chg">
Section
7.2.15
The
fn:insert-before
function
</ins></a><sup><small><ins class="diff-chg">
FS
</ins></small></sup>.</p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$target
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
</ins><code><ins class="diff-chg">
$inserts
</ins></code><ins class="diff-chg">
is
returned.
If
</ins><code><ins class="diff-chg">
$inserts
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
</ins><code><ins class="diff-chg">
$target
</ins></code><ins class="diff-chg">
is
returned.
</ins>
</p>
<p>
If
<code>
$position
</code>
is
less
than
one
(1),
the
first
position,
the
effective
value
of
<code>
$position
</code>
is
one
(1).
If
<code>
$position
</code>
is
greater
than
the
number
of
items
in
<code>
$target
</code>,
then
the
effective
value
of
<code>
$position
</code>
is
equal
to
the
number
of
items
in
<code>
$target
</code>
plus
1.
</p>
<p>
<del class="diff-old">For
detailed
semantics
see,
Section
7.2.15
</del>
The
<del class="diff-old">fn:insert-before
function
FS
.
</del>
<ins class="diff-chg">value
of
</ins><code><ins class="diff-chg">
$target
</ins></code><ins class="diff-chg">
is
not
affected
by
the
sequence
construction.
</ins>
</p>
<del class="diff-old">15.1.7.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
let
<code>
<del class="diff-old">$x
</del>
<ins class="diff-chg">$abc
</ins>
</code>
:=
<code>
("a",
"b",
"c")
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:insert-before($x,
</del>
<ins class="diff-chg">fn:insert-before($abc,
</ins>
0,
"z")
</code>
returns
<code>
("z",
"a",
"b",
"c")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:insert-before($x,
</del>
<ins class="diff-chg">fn:insert-before($abc,
</ins>
1,
"z")
</code>
returns
<code>
("z",
"a",
"b",
"c")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:insert-before($x,
</del>
<ins class="diff-chg">fn:insert-before($abc,
</ins>
2,
"z")
</code>
returns
<code>
("a",
"z",
"b",
"c")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:insert-before($x,
</del>
<ins class="diff-chg">fn:insert-before($abc,
</ins>
3,
"z")
</code>
returns
<code>
("a",
"b",
"z",
"c")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:insert-before($x,
</del>
<ins class="diff-chg">fn:insert-before($abc,
</ins>
4,
"z")
</code>
returns
<code>
("a",
"b",
"c",
"z")
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-remove" id="func-remove">
</a>
<del class="diff-old">15.1.8
</del>
<ins class="diff-chg">14.1.7
</ins>
fn:remove
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
new
sequence
containing
all
the
items
of
</ins><code><ins class="diff-new">
$target
</ins></code><ins class="diff-new">
except
the
item
at
position
</ins><code><ins class="diff-new">
$position
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:remove
</code>
(
<code class= "arg">
$target
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
item()*
</code>,
<code class="arg">
$position
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:integer
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
a
<del class="diff-old">new
</del>
sequence
<del class="diff-old">constructed
from
the
value
of
$target
with
the
item
at
the
position
specified
by
the
value
of
$position
removed.
If
$position
is
less
than
1
or
greater
than
the
number
of
items
in
$target
,
$target
is
returned.
Otherwise,
the
value
returned
by
the
function
consists
</del>
<ins class="diff-chg">consisting
</ins>
of
all
items
of
<code>
$target
</code>
whose
index
is
less
than
<code>
$position
</code>,
followed
by
all
items
of
<code>
$target
</code>
whose
index
is
greater
than
<code>
$position
</code>.
<del class="diff-old">If
$target
is
the
empty
sequence,
the
empty
sequence
is
returned.
</del>
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_remove">
Section
7.2.11
The
fn:remove
function
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
<del class="diff-old">15.1.8.1
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$position
</ins></code><ins class="diff-chg">
is
less
than
1
or
greater
than
the
number
of
items
in
</ins><code><ins class="diff-chg">
$target
</ins></code>,<code><ins class="diff-chg">
$target
</ins></code><ins class="diff-chg">
is
returned.
</ins></p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$target
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
empty
sequence
is
returned.
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
let
<code>
<del class="diff-old">$x
</del>
<ins class="diff-chg">$abc
</ins>
</code>
:=
<code>
("a",
"b",
"c")
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:remove($x,
</del>
<ins class="diff-chg">fn:remove($abc,
</ins>
0)
</code>
returns
<code>
("a",
"b",
"c")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:remove($x,
</del>
<ins class="diff-chg">fn:remove($abc,
</ins>
1)
</code>
returns
<code>
("b",
"c")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:remove($x,
</del>
<ins class="diff-chg">fn:remove($abc,
</ins>
6)
</code>
returns
<code>
("a",
"b",
"c")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:remove((),
3)
</code>
returns
<code>
()
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-reverse" id="func-reverse">
</a>
<del class="diff-old">15.1.9
</del>
<ins class="diff-chg">14.1.8
</ins>
fn:reverse
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Reverses
the
order
of
items
in
a
sequence.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:reverse
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Reverses
</del>
<ins class="diff-chg">The
function
returns
a
sequence
containing
</ins>
the
<del class="diff-old">order
of
</del>
items
in
<del class="diff-old">a
sequence.
If
</del>
<code>
$arg
</code>
<del class="diff-old">is
the
empty
sequence,
the
empty
sequence
is
returned.
</del>
<ins class="diff-chg">in
reverse
order.
</ins>
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_reverse">
Section
7.2.12
The
fn:reverse
function
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
<del class="diff-old">15.1.9.1
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
the
empty
sequence
is
returned.
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
let
<code>
<del class="diff-old">$x
</del>
<ins class="diff-chg">$abc
</ins>
</code>
:=
<code>
("a",
"b",
"c")
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:reverse($x)
</del>
<ins class="diff-chg">fn:reverse($abc)
</ins>
</code>
returns
<code>
("c",
"b",
"a")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:reverse(("hello"))
</code>
returns
<code>
("hello")
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:reverse(())
</code>
returns
<code>
()
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-subsequence" id="func-subsequence">
</a>
<del class="diff-old">15.1.10
</del>
<ins class="diff-chg">14.1.9
</ins>
fn:subsequence
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
contiguous
sequence
of
items
in
the
value
of
</ins><code><ins class="diff-new">
$sourceSeq
</ins></code><ins class="diff-new">
beginning
at
the
position
indicated
by
the
value
of
</ins><code><ins class="diff-new">
$startingLoc
</ins></code><ins class="diff-new">
and
continuing
for
the
number
of
items
indicated
by
the
value
of
</ins><code><ins class="diff-new">
$length
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:subsequence
</code>
(
<code class= "arg">
$sourceSeq
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
item()*
</code>,
<code class="arg">
$startingLoc
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:double
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()*
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:subsequence
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$sourceSeq
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
item()*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$startingLoc
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:double
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$length
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:double
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()*
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
contiguous
sequence
of
items
in
the
value
of
$sourceSeq
beginning
at
the
position
indicated
by
the
value
of
$startingLoc
and
continuing
for
the
number
of
items
indicated
by
the
value
of
$length
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
In
the
two-argument
case,
returns:
</p>
<div class="exampleInner">
<pre>
<del class="diff-old">$sourceSeq[fn:round($startingLoc) le $p]
</del>
<ins class="diff-chg">$sourceSeq[fn:round($startingLoc) le position()]
</ins>
</pre>
</div>
<p>
In
the
three-argument
case,
returns:
</p>
<div class="exampleInner">
<pre>
<del class="diff-old">$sourceSeq[fn:round($startingLoc) le $p 
     and $p lt fn:round($startingLoc) + fn:round($length)]
</del>
<ins class="diff-chg">$sourceSeq[fn:round($startingLoc) le position() 
         and position() lt fn:round($startingLoc) + fn:round($length)]
</ins>
</pre>
</div>
<p>
<ins class="diff-chg">For
detailed
type
semantics,
see
</ins><a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_subsequence"><ins class="diff-chg">
Section
7.2.13
The
fn:subsequence
function
</ins></a>
<del class="diff-old">Notes:
</del>
<sup>
<small>
<ins class="diff-new">FS
</ins></small></sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
If
<code>
$sourceSeq
</code>
is
the
empty
sequence,
the
empty
sequence
is
returned.
</p>
<p>
If
<code>
$startingLoc
</code>
is
zero
or
negative,
the
subsequence
includes
items
from
the
beginning
of
the
<code>
$sourceSeq
</code>.
</p>
<p>
If
<code>
$length
</code>
is
not
specified,
the
subsequence
includes
items
to
the
end
of
<code>
$sourceSeq
</code>.
</p>
<p>
If
<code>
$length
</code>
is
greater
than
the
number
of
items
in
the
value
of
<code>
$sourceSeq
</code>
following
<code>
$startingLoc
</code>,
the
subsequence
includes
items
to
the
end
of
<code>
$sourceSeq
</code>.
</p>
<p>
The
first
item
of
a
sequence
is
located
at
position
1,
not
position
0.
</p>
<p>
<del class="diff-old">For
detailed
type
semantics,
see
Section
7.2.13
The
fn:subsequence
function
FS
.
</del>
The
reason
the
function
accepts
arguments
of
type
<code>
xs:double
</code>
is
that
many
computations
on
untyped
data
return
an
<code>
xs:double
</code>
result;
and
the
reason
for
the
rounding
rules
is
to
compensate
for
any
imprecision
in
these
floating-point
computations.
</p>
<del class="diff-old">15.1.10.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">Assume
</del>
<ins class="diff-chg">let
</ins>
<code>
$seq
<del class="diff-old">=
($item1,
$item2,
$item3,
$item4,
...)
</del>
</code>
<ins class="diff-chg">:=
</ins><code><ins class="diff-chg">
("item1",
"item2",
"item3",
"item4",
"item5")
</ins>
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:subsequence($seq,
4)
</code>
returns
<code>
<del class="diff-old">($item4,
...)
</del>
<ins class="diff-chg">("item4",
"item5")
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:subsequence($seq,
3,
2)
</code>
returns
<code>
<del class="diff-old">($item3,
$item4)
</del>
<ins class="diff-chg">("item3",
"item4")
</ins></code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-unordered" id="func-unordered">
</a>
<del class="diff-old">15.1.11
</del>
<ins class="diff-chg">14.1.10
</ins>
fn:unordered
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
items
of
</ins><code><ins class="diff-new">
$sourceSeq
</ins></code><ins class="diff-new">
in
an
</ins><a title= "implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation
dependent
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
order.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:unordered
</code>
(
<code class= "arg">
$sourceSeq
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
items
of
<code>
$sourceSeq
</code>
in
an
<a title="implementation dependent" class="termref" href= "#implementation-dependent">
<span class= "arrow">
·
</span>
implementation
dependent
<span class= "arrow">
·
</span>
</a>
order.
</p>
<del class="diff-old">Note:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd>
<p>
Query
optimizers
may
be
able
to
do
a
better
job
if
the
order
of
the
output
sequence
is
not
specified.
For
example,
when
retrieving
prices
from
a
purchase
order,
if
an
index
exists
on
prices,
it
may
be
more
efficient
to
return
the
prices
in
index
order
rather
than
in
document
order.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:unordered((1,
2,
3,
4,
5))
</ins></code><ins class="diff-chg">
returns
some
permutation
of
</ins><code><ins class="diff-chg">
(1,
2,
3,
4,
5)
</ins></code>.</p></dd></dl>
</div>
</div>
<div class="div2">
<h3>
<a name="cardinality-functions" id= "cardinality-functions">
</a>
<del class="diff-old">15.2
</del>
<ins class="diff-chg">14.2
</ins>
Functions
That
Test
the
Cardinality
of
Sequences
</h3>
<p>
The
following
functions
test
the
cardinality
of
their
sequence
arguments.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href= "#func-zero-or-one">
<code>
fn:zero-or-one
</code>
</a>
</td>
<td>
Returns
<del class="diff-old">the
input
sequence
</del>
<code>
<ins class="diff-chg">$arg
</ins></code>
if
it
contains
zero
or
one
items.
<del class="diff-old">Raises
</del>
<ins class="diff-chg">Otherwise,
raises
</ins>
an
<del class="diff-old">error
otherwise.
</del>
<ins class="diff-chg">error.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-one-or-more">
<code>
fn:one-or-more
</code>
</a>
</td>
<td>
Returns
<del class="diff-old">the
input
sequence
</del>
<code>
<ins class="diff-chg">$arg
</ins></code>
if
it
contains
one
or
more
items.
<del class="diff-old">Raises
</del>
<ins class="diff-chg">Otherwise,
raises
</ins>
an
<del class="diff-old">error
otherwise.
</del>
<ins class="diff-chg">error.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-exactly-one">
<code>
fn:exactly-one
</code>
</a>
</td>
<td>
Returns
<del class="diff-old">the
input
sequence
</del>
<code>
<ins class="diff-chg">$arg
</ins></code>
if
it
contains
exactly
one
item.
<del class="diff-old">Raises
</del>
<ins class="diff-chg">Otherwise,
raises
</ins>
an
<del class="diff-old">error
otherwise.
</del>
<ins class="diff-chg">error.
</ins>
</td>
</tr>
</tbody>
</table>
<p>
The
functions
<a href= "#func-zero-or-one">
<code>
fn:zero-or-one
</code>
</a>,
<a href= "#func-one-or-more">
<code>
fn:one-or-more
</code>
</a>,
and
<a href= "#func-exactly-one">
<code>
fn:exactly-one
</code>
</a>
defined
in
this
section,
check
that
the
cardinality
of
a
sequence
is
in
the
expected
range.
They
are
particularly
useful
with
regard
to
static
typing.
For
example,
the
<del class="diff-old">XML
Schema
[XML
Schema
Part
1:
Structures
Second
Edition]
</del>
<ins class="diff-chg">function
call
</ins><a href= "#func-remove"><code><ins class="diff-chg">
fn:remove($seq,
index-of($seq2,
'abc'))
</ins></code>
</a>
<del class="diff-old">describing
</del>
<ins class="diff-chg">requires
</ins>
the
<del class="diff-old">output
</del>
<ins class="diff-chg">result
</ins>
of
<ins class="diff-new">the
call
on
</ins><a href= "#func-index-of"><code><ins class="diff-new">
fn:index-of
</ins></code></a><ins class="diff-new">
to
be
</ins>
a
<del class="diff-old">query
may
require
a
sequence
of
length
one-or-more
in
some
position,
</del>
<ins class="diff-chg">singleton
integer,
</ins>
but
the
static
type
system
<del class="diff-old">may
not
be
able
to
</del>
<ins class="diff-chg">cannot
</ins>
infer
this;
<del class="diff-old">inserting
a
call
to
</del>
<ins class="diff-chg">writing
the
expression
as
</ins><a href="#func-remove">
<code>
<del class="diff-old">fn:one-or-more
</del>
<ins class="diff-chg">fn:remove($seq,
fn:exactly-one(fn:index-of($seq2,
'abc')))
</ins>
</code>
</a>
<del class="diff-old">at
the
appropriate
place
</del>
will
provide
a
suitable
static
type
at
query
analysis
time,
and
<del class="diff-old">confirm
</del>
<ins class="diff-chg">ensures
</ins>
that
the
length
<ins class="diff-new">of
the
sequence
</ins>
is
correct
with
a
dynamic
check
at
query
execution
time.
</p>
<p>
<ins class="diff-new">The
type
signatures
for
these
functions
deliberately
declare
the
argument
type
as
</ins><code><ins class="diff-new">
item()*
</ins></code>,<ins class="diff-new">
permitting
a
sequence
of
any
length.
A
more
restrictive
signature
would
defeat
the
purpose
of
the
function,
which
is
to
defer
cardinality
checking
until
query
execution
time.
</ins></p>
<div class="div3">
<h4>
<a name="func-zero-or-one" id="func-zero-or-one">
</a>
<del class="diff-old">15.2.1
</del>
<ins class="diff-chg">14.2.1
</ins>
fn:zero-or-one
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
if
it
contains
zero
or
one
items.
Otherwise,
raises
an
error.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:zero-or-one
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">Except
in
error
cases,
the
function
returns
</ins>
<code>
$arg
</code>
<del class="diff-old">if
it
contains
zero
or
one
items.
Otherwise,
raises
an
error
[
err:FORG0003
].
</del>
<ins class="diff-chg">unchanged.
</ins>
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_cardinality_funcs">
Section
7.2.16
The
fn:zero-or-one,
fn:one-or-more,
and
fn:exactly-one
functions
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
An
error
is
raised
[
</ins><a href="#ERRFORG0003" title= "err:FORG0003"><ins class="diff-new">
err:FORG0003
</ins></a><ins class="diff-new">
]
if
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
contains
more
than
one
item.
</ins></p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-one-or-more" id="func-one-or-more">
</a>
<del class="diff-old">15.2.2
</del>
<ins class="diff-chg">14.2.2
</ins>
fn:one-or-more
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
if
it
contains
one
or
more
items.
Otherwise,
raises
an
error.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:one-or-more
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()+
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">Except
in
error
cases,
the
function
returns
</ins>
<code>
$arg
</code>
<del class="diff-old">if
it
contains
one
or
more
items.
Otherwise,
raises
an
error
[
err:FORG0004
].
</del>
<ins class="diff-chg">unchanged.
</ins>
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_cardinality_funcs">
Section
7.2.16
The
fn:zero-or-one,
fn:one-or-more,
and
fn:exactly-one
functions
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
An
error
is
raised
[
</ins><a href="#ERRFORG0004" title= "err:FORG0004"><ins class="diff-new">
err:FORG0004
</ins></a><ins class="diff-new">
]
if
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
an
empty
sequence.
</ins></p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-exactly-one" id="func-exactly-one">
</a>
<del class="diff-old">15.2.3
</del>
<ins class="diff-chg">14.2.3
</ins>
fn:exactly-one
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
if
it
contains
exactly
one
item.
Otherwise,
raises
an
error.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:exactly-one
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
item()
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">Except
in
error
cases,
the
function
returns
</ins>
<code>
$arg
</code>
<del class="diff-old">if
it
contains
exactly
one
item.
Otherwise,
raises
an
error
[
err:FORG0005
].
</del>
<ins class="diff-chg">unchanged.
</ins>
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_cardinality_funcs">
Section
7.2.16
The
fn:zero-or-one,
fn:one-or-more,
and
fn:exactly-one
functions
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
An
error
is
raised
[
</ins><a href="#ERRFORG0005" title= "err:FORG0005"><ins class="diff-new">
err:FORG0005
</ins></a><ins class="diff-new">
]
if
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
an
empty
sequence
or
a
sequence
containing
more
than
one
item.
</ins></p></dd></dl>
</div>
</div>
<div class="div2">
<h3>
<a name="union-intersection-except" id= "union-intersection-except">
</a>
<del class="diff-old">15.3
</del>
<ins class="diff-chg">14.3
</ins>
Equals,
Union,
Intersection
and
Except
</h3>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-deep-equal">
<code>
fn:deep-equal
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
true
if
the
</del>
<ins class="diff-chg">This
function
assesses
whether
two
sequences
are
deep-equal
to
each
other.
To
be
deep-equal,
they
must
contain
items
that
are
pairwise
deep-equal;
and
for
</ins>
two
<del class="diff-old">arguments
have
</del>
items
<ins class="diff-new">to
be
deep-equal,
they
must
either
be
atomic
values
</ins>
that
compare
<del class="diff-old">equal
in
corresponding
positions.
</del>
<ins class="diff-chg">equal,
or
nodes
of
the
same
kind,
with
the
same
name,
whose
children
are
deep-equal.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-union">
<code>
op:union
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
</del>
<ins class="diff-chg">Constructs
a
sequence
containing
every
node
that
occurs
in
</ins>
the
<del class="diff-old">union
</del>
<ins class="diff-chg">values
</ins>
of
<del class="diff-old">the
two
sequence
arguments,
</del>
<ins class="diff-chg">either
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
$arg2
</ins></code>,
eliminating
<del class="diff-old">duplicates.
</del>
<ins class="diff-chg">duplicates
and
sorting
the
result
in
document
order.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-intersect">
<code>
op:intersect
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
</del>
<ins class="diff-chg">Constructs
a
sequence
containing
every
node
that
occurs
in
</ins>
the
<del class="diff-old">intersection
</del>
<ins class="diff-chg">values
</ins>
of
<del class="diff-old">the
two
sequence
arguments,
</del>
<ins class="diff-chg">both
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
$arg2
</ins></code>,
eliminating
<del class="diff-old">duplicates.
</del>
<ins class="diff-chg">duplicates
and
sorting
the
result
in
document
order.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-except">
<code>
op:except
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
</del>
<ins class="diff-chg">Constructs
a
sequence
containing
every
node
that
occurs
in
</ins>
the
<del class="diff-old">difference
</del>
<ins class="diff-chg">value
</ins>
of
<code>
<ins class="diff-new">$arg1
</ins></code><ins class="diff-new">
but
not
in
</ins>
the
<del class="diff-old">two
sequence
arguments,
</del>
<ins class="diff-chg">value
of
</ins><code><ins class="diff-chg">
$arg2
</ins></code>,
eliminating
<del class="diff-old">duplicates.
</del>
<ins class="diff-chg">duplicates
and
sorting
the
result
in
document
order.
</ins>
</td>
</tr>
</tbody>
</table>
<p>
As
in
the
previous
sections,
for
the
illustrative
examples
below,
assume
an
XQuery
or
transformation
operating
on
a
Purchase
Order
document
containing
a
number
of
line-item
elements.
The
variables
<code>
$item1
</code>,
<code>
$item2
</code>,
etc.
are
bound
to
individual
line-item
nodes
in
the
sequence.
We
use
sequences
of
these
nodes
in
some
of
the
examples
below.
</p>
<div class="div3">
<h4>
<a name="func-deep-equal" id="func-deep-equal">
</a>
<del class="diff-old">15.3.1
</del>
<ins class="diff-chg">14.3.1
</ins>
fn:deep-equal
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
This
function
assesses
whether
two
sequences
are
deep-equal
to
each
other.
To
be
deep-equal,
they
must
contain
items
that
are
pairwise
deep-equal;
and
for
two
items
to
be
deep-equal,
they
must
either
be
atomic
values
that
compare
equal,
or
nodes
of
the
same
kind,
with
the
same
name,
whose
children
are
deep-equal.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:deep-equal
</code>
(
<code class= "arg">
$parameter1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
item()*
</code>,
<code class="arg">
$parameter2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:deep-equal
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$parameter1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
item()*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$parameter2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
item()*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
<del class="diff-old">string
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
This
function
assesses
whether
two
sequences
are
deep-equal
to
each
other.
To
be
deep-equal,
they
must
contain
items
that
are
pairwise
deep-equal;
and
for
two
items
to
be
deep-equal,
they
must
either
be
atomic
values
that
compare
equal,
or
nodes
of
the
same
kind,
with
the
same
name,
whose
children
are
deep-equal.
This
is
defined
in
more
detail
below.
</del>
The
<code>
$collation
</code>
argument
identifies
a
collation
which
is
used
at
all
levels
of
recursion
when
strings
are
compared
(but
not
when
names
are
compared),
according
to
the
rules
in
<a href="#choosing-a-collation">
<b>
<del class="diff-old">7.3.1
Collations
</del>
<ins class="diff-chg">5.3.3
Choosing
a
Collation
</ins>
</b>
</a>.
</p>
<p>
If
the
two
sequences
are
both
empty,
the
function
returns
<code>
true
</code>.
</p>
<p>
If
the
two
sequences
are
of
different
lengths,
the
function
returns
<code>
false
</code>.
</p>
<p>
If
the
two
sequences
are
of
the
same
length,
the
function
returns
<code>
true
</code>
if
and
only
if
every
item
in
the
sequence
<code>
$parameter1
</code>
is
deep-equal
to
the
item
at
the
same
position
in
the
sequence
<code>
$parameter2
</code>.
The
rules
for
deciding
whether
two
items
are
deep-equal
follow.
</p>
<p>
Call
the
two
items
<code>
$i1
</code>
and
<code>
$i2
</code>
respectively.
</p>
<p>
If
<code>
$i1
</code>
and
<code>
$i2
</code>
are
both
atomic
values,
they
are
deep-equal
if
and
only
if
<code>
($i1
eq
$i2)
</code>
is
<code>
true
</code>,
or
if
both
values
are
<code>
NaN
</code>.
If
the
<code>
eq
</code>
operator
is
not
defined
for
<code>
$i1
</code>
and
<code>
$i2
</code>,
the
function
returns
<code>
false
</code>.
</p>
<p>
If
one
of
the
pair
<code>
$i1
</code>
or
<code>
$i2
</code>
is
an
atomic
value
and
the
other
is
a
node,
the
function
returns
<code>
false
</code>.
</p>
<p>
If
<code>
$i1
</code>
and
<code>
$i2
</code>
are
both
nodes,
they
are
compared
as
described
below:
</p>
<ol class="enumar">
<li>
<p>
If
the
two
nodes
are
of
different
kinds,
the
result
is
<code>
false
</code>.
</p>
</li>
<li>
<p>
If
the
two
nodes
are
both
document
nodes
then
they
are
deep-equal
if
and
only
if
the
sequence
<code>
$i1/(*|text())
</code>
is
deep-equal
to
the
sequence
<code>
$i2/(*|text())
</code>.
</p>
</li>
<li>
<p>
If
the
two
nodes
are
both
element
nodes
then
they
are
deep-equal
if
and
only
if
all
of
the
following
conditions
are
satisfied:
</p>
<ol class="enumla">
<li>
<p>
<del class="diff-old">the
</del>
<ins class="diff-chg">The
</ins>
two
nodes
have
the
same
name,
that
is
<code>
(node-name($i1)
eq
node-name($i2))
</code>.
</p>
</li>
<li>
<p>
<del class="diff-old">the
</del>
<ins class="diff-chg">The
</ins>
two
nodes
are
both
annotated
as
having
simple
content
or
both
nodes
are
annotated
as
having
complex
content.
</p>
</li>
<li>
<p>
<del class="diff-old">the
</del>
<ins class="diff-chg">The
</ins>
two
nodes
have
the
same
number
of
attributes,
and
for
every
attribute
<code>
$a1
</code>
in
<code>
$i1/@*
</code>
there
exists
an
attribute
<code>
$a2
</code>
in
<code>
$i2/@*
</code>
such
that
<code>
$a1
</code>
and
<code>
$a2
</code>
are
deep-equal.
</p>
</li>
<li>
<p>
One
of
the
following
conditions
holds:
</p>
<ul>
<li>
<p>
Both
element
nodes
have
a
type
annotation
that
is
simple
content,
and
the
typed
value
of
<code>
$i1
</code>
is
deep-equal
to
the
typed
value
of
<code>
$i2
</code>.
</p>
</li>
<li>
<p>
Both
element
nodes
have
a
type
annotation
that
is
complex
content
with
elementOnly
content,
and
each
child
element
of
<code>
$i1
</code>
is
deep-equal
to
the
corresponding
child
element
of
<code>
$i2
</code>.
</p>
</li>
<li>
<p>
Both
element
nodes
have
a
type
annotation
that
is
complex
content
with
mixed
content,
and
the
sequence
<code>
$i1/(*|text())
</code>
is
deep-equal
to
the
sequence
<code>
$i2/(*|text())
</code>.
</p>
</li>
<li>
<p>
Both
element
nodes
have
a
type
annotation
that
is
complex
content
with
empty
content.
</p>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p>
If
the
two
nodes
are
both
attribute
nodes
then
they
are
deep-equal
if
and
only
if
both
the
following
conditions
are
satisfied:
</p>
<ol class="enumla">
<li>
<p>
<del class="diff-old">the
</del>
<ins class="diff-chg">The
</ins>
two
nodes
have
the
same
name,
that
is
<code>
(node-name($i1)
eq
node-name($i2))
</code>.
</p>
</li>
<li>
<p>
<del class="diff-old">the
</del>
<ins class="diff-chg">The
</ins>
typed
value
of
<code>
$i1
</code>
is
deep-equal
to
the
typed
value
of
<code>
$i2
</code>.
</p>
</li>
</ol>
</li>
<li>
<p>
If
the
two
nodes
are
both
processing
instruction
nodes
<del class="diff-old">or
namespace
bindings,
</del>
<ins class="diff-chg">,
</ins>
then
they
are
deep-equal
if
and
only
if
both
the
following
conditions
are
satisfied:
</p>
<ol class="enumla">
<li>
<p>
<del class="diff-old">the
</del>
<ins class="diff-chg">The
</ins>
two
nodes
have
the
same
name,
that
is
<code>
(node-name($i1)
eq
node-name($i2))
</code>.
</p>
</li>
<li>
<p>
<del class="diff-old">the
</del>
<ins class="diff-chg">The
</ins>
string
value
of
<code>
$i1
</code>
is
equal
to
the
string
value
of
<code>
$i2
</code>.
</p>
</li>
</ol>
</li>
<li>
<p>
<ins class="diff-new">If
the
two
nodes
are
both
namespace
nodes,
then
they
are
deep-equal
if
and
only
if
both
the
following
conditions
are
satisfied:
</ins></p><ol class="enumla"><li><p><ins class="diff-new">
The
two
nodes
either
have
the
same
name
or
are
both
nameless,
that
is
</ins><code><ins class="diff-new">
fn:deep-equal(node-name($i1),
node-name($i2))
</ins></code>.</p></li><li><p><ins class="diff-new">
The
string
value
of
</ins><code><ins class="diff-new">
$i1
</ins></code><ins class="diff-new">
is
equal
to
the
string
value
of
</ins><code><ins class="diff-new">
$i2
</ins></code><ins class="diff-new">
when
compared
using
the
Unicode
codepoint
collation.
</ins></p></li></ol></li><li>
<p>
If
the
two
nodes
are
both
text
nodes
or
comment
nodes,
then
they
are
deep-equal
if
and
only
if
their
string-values
are
equal.
</p>
<del class="diff-old">Notes:
</del>
</li>
</ol>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
either
input
sequence
contains
a
function
item,
the
function
raises
an
error
[
</ins><a href="#ERRFOTY0015" title= "err:FOTY0015"><ins class="diff-chg">
err:FOTY0015
</ins></a><ins class="diff-chg">
]
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
The
two
nodes
are
not
required
to
have
the
same
type
annotation,
and
they
are
not
required
to
have
the
same
in-scope
namespaces.
They
may
also
differ
in
their
parent,
their
base
URI,
and
the
values
returned
by
the
<code>
is-id
</code>
and
<code>
is-idrefs
</code>
accessors
(see
<a href= "http://www.w3.org/TR/xpath-datamodel/#dm-is-id">
Section
5.5
is-id
Accessor
</a>
<sup>
<small>
DM
</small>
</sup>
and
<a href= "http://www.w3.org/TR/xpath-datamodel/#dm-is-idrefs">
Section
5.6
is-idrefs
Accessor
</a>
<sup>
<small>
DM
</small>
</sup>
).
The
order
of
children
is
significant,
but
the
order
of
attributes
is
insignificant.
</p>
<p>
The
contents
of
comments
and
processing
instructions
are
significant
only
if
these
nodes
appear
directly
as
items
in
the
two
sequences
being
compared.
The
content
of
a
comment
or
processing
instruction
that
appears
as
a
descendant
of
an
item
in
one
of
the
sequences
being
compared
does
not
affect
the
result.
However,
the
presence
of
a
comment
or
processing
instruction,
if
it
causes
a
text
node
to
be
split
into
two
text
nodes,
may
affect
the
result.
</p>
<p>
The
result
of
<code>
fn:deep-equal(1,
current-dateTime())
</code>
is
<code>
false
</code>
;
it
does
not
raise
an
error.
</p>
<del class="diff-old">15.3.1.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">let
</ins><code><ins class="diff-chg">
$at
</ins></code><ins class="diff-chg">
:=
</ins></p>
<div class="exampleInner">
<pre>
<del class="diff-old">let $at := &lt;attendees&gt; &lt;name last='Parker'
                                first='Peter'/&gt; &lt;name last='Barker' first='Bob'/&gt;
                                &lt;name last='Parker' first='Peter'/&gt; &lt;/attendees&gt;
</del>
<ins class="diff-chg">&lt;attendees&gt; 
  &lt;name last='Parker' first='Peter'/&gt; 
  &lt;name last='Barker' first='Bob'/&gt; 
  &lt;name last='Parker' first='Peter'/&gt; 
&lt;/attendees&gt;
</ins>
</pre>
</div>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:deep-equal($at,
$at/*)
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:deep-equal($at/name[1],
$at/name[2])
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:deep-equal($at/name[1],
$at/name[3])
</code>
returns
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">true()
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:deep-equal($at/name[1],
'Peter
Parker')
</code>
returns
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">false()
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-union" id="func-union">
</a>
<del class="diff-old">15.3.2
</del>
<ins class="diff-chg">14.3.2
</ins>
op:union
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Constructs
a
sequence
containing
every
node
that
occurs
in
the
values
of
either
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
$arg2
</ins></code>,<ins class="diff-new">
eliminating
duplicates
and
sorting
the
result
in
document
order.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"union"
or
"|"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:union
</code>
(
<code class= "arg">
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
node()*
</code>,
<code class="arg">
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
node()*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Constructs
</del>
<ins class="diff-chg">The
function
returns
</ins>
a
sequence
containing
every
node
that
occurs
in
the
values
of
either
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
or
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>,
eliminating
duplicate
nodes.
Nodes
are
returned
in
document
order.
</p>
<p>
Two
nodes
<code>
<ins class="diff-new">$n1
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
$n2
</ins></code>
are
duplicates
if
they
<del class="diff-old">are
</del>
<ins class="diff-chg">satisfy
</ins>
<a href= "#func-is-same-node">
<code>
<del class="diff-old">op:is-same-node()
</del>
<ins class="diff-chg">op:is-same-node($n1,
$n2)
</ins>
</code>
</a>.
</p>
<p>
<del class="diff-old">If
either
operand
is
the
empty
sequence,
a
sequence
is
returned
containing
the
nodes
in
the
other
operand
in
document
order
after
eliminating
duplicates.
</del>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_op_union_intersect_except">
Section
7.2.14
The
op:union,
op:intersect,
and
op:except
operators
</a>
<sup>
<small>
FS
</small>
</sup>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
<del class="diff-old">This
function
backs
up
</del>
<ins class="diff-chg">If
either
operand
is
</ins>
the
<del class="diff-old">"union"
or
"|"
operator.
</del>
<ins class="diff-chg">empty
sequence,
the
result
is
a
sequence
containing
the
nodes
in
the
other
operand
in
document
order
after
eliminating
duplicates.
</ins>
</p>
<del class="diff-old">15.3.2.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">Assume
</del>
<ins class="diff-chg">let
</ins>
<code>
$seq1
<del class="diff-old">=
($item1,
$item2),
$seq2
=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
($item1,
$item2)
</code>
<del class="diff-old">and
</del>
</p>
<p>
<ins class="diff-chg">let
</ins><code><ins class="diff-chg">
$seq2
</ins></code><ins class="diff-chg">
:=
</ins><code><ins class="diff-chg">
($item2,
$item2,
$item1)
</ins></code></p><p><ins class="diff-chg">
let
</ins>
<code>
$seq3
<del class="diff-old">=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
($item2,
$item3)
<del class="diff-old">.
</del>
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:union($seq1,
$seq1)
</code>
returns
<del class="diff-old">the
sequence
</del>
<code>
($item1,
$item2)
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:union($seq2,
$seq3)
</code>
returns
<del class="diff-old">the
sequence
consisting
of
</del>
<code>
($item1,
$item2,
$item3)
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
op:union($seq2,
())
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
($item1,
$item2)
</ins></code>.</p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-intersect" id="func-intersect">
</a>
<del class="diff-old">15.3.3
</del>
<ins class="diff-chg">14.3.3
</ins>
op:intersect
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Constructs
a
sequence
containing
every
node
that
occurs
in
the
values
of
both
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
$arg2
</ins></code>,<ins class="diff-new">
eliminating
duplicates
and
sorting
the
result
in
document
order.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"intersect"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:intersect
</code>
(
<code class= "arg">
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
node()*
</code>,
<code class="arg">
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
node()*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Constructs
</del>
<ins class="diff-chg">The
function
returns
</ins>
a
sequence
containing
every
node
that
occurs
in
the
values
of
both
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
and
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>,
eliminating
duplicate
nodes.
Nodes
are
returned
in
document
order.
</p>
<p>
<del class="diff-old">If
either
operand
is
the
empty
sequence,
the
empty
sequence
is
returned.
</del>
Two
nodes
<code>
<ins class="diff-new">$n1
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
$n2
</ins></code>
are
duplicates
if
they
<del class="diff-old">are
</del>
<ins class="diff-chg">satisfy
</ins>
<a href= "#func-is-same-node">
<code>
<del class="diff-old">op:is-same-node()
</del>
<ins class="diff-chg">op:is-same-node($n1,
$n2)
</ins>
</code>
</a>.
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_op_union_intersect_except">
Section
7.2.14
The
op:union,
op:intersect,
and
op:except
operators
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
<del class="diff-old">This
</del>
<ins class="diff-chg">If
either
operand
is
the
empty
sequence,
the
</ins>
function
<del class="diff-old">backs
up
</del>
<ins class="diff-chg">returns
</ins>
the
<del class="diff-old">"intersect"
operator.
</del>
<ins class="diff-chg">empty
sequence.
</ins>
</p>
<del class="diff-old">15.3.3.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">Assume
</del>
<ins class="diff-chg">let
</ins>
<code>
$seq1
<del class="diff-old">=
($item1,
$item2),
$seq2
=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
($item1,
$item2)
</code>
<del class="diff-old">and
</del>
</p>
<p>
<ins class="diff-chg">let
</ins><code><ins class="diff-chg">
$seq2
</ins></code><ins class="diff-chg">
:=
</ins><code><ins class="diff-chg">
($item2,
$item2,
$item1)
</ins></code></p><p><ins class="diff-chg">
let
</ins>
<code>
$seq3
<del class="diff-old">=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
($item2,
$item3)
<del class="diff-old">.
</del>
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:intersect($seq1,
$seq1)
</code>
returns
<del class="diff-old">the
sequence
</del>
<code>
($item1,
$item2)
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:intersect($seq2,
$seq3)
</code>
returns
<del class="diff-old">the
sequence
</del>
<code>
($item2)
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
op:intersect($seq2,
())
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
()
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:intersect($item1,
$item3)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
()
</ins></code>.</p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-except" id="func-except">
</a>
<del class="diff-old">15.3.4
</del>
<ins class="diff-chg">14.3.4
</ins>
op:except
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Constructs
a
sequence
containing
every
node
that
occurs
in
the
value
of
</ins><code><ins class="diff-new">
$arg1
</ins></code><ins class="diff-new">
but
not
in
the
value
of
</ins><code><ins class="diff-new">
$arg2
</ins></code>,<ins class="diff-new">
eliminating
duplicates
and
sorting
the
result
in
document
order.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"except"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
op:except
</code>
(
<code class= "arg">
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
node()*
</code>,
<code class="arg">
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
node()*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Constructs
</del>
<ins class="diff-chg">The
function
returns
</ins>
a
sequence
containing
every
node
that
occurs
in
the
value
of
<code>
<del class="diff-old">$parameter1
,
but
</del>
<ins class="diff-chg">$arg1
</ins></code><ins class="diff-chg">
provided
that
it
does
</ins>
not
<ins class="diff-new">occur
</ins>
in
the
value
of
<code>
<del class="diff-old">$parameter2
,
eliminating
duplicate
nodes.
Nodes
</del>
<ins class="diff-chg">$arg2
</ins></code>.<ins class="diff-chg">
Duplicate
nodes
are
eliminated,
and
nodes
</ins>
are
returned
in
document
order.
</p>
<p>
<del class="diff-old">If
$parameter1
is
the
empty
sequence,
the
empty
sequence
is
returned.
If
</del>
<ins class="diff-chg">Two
nodes
</ins>
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$n1
</ins>
</code>
<del class="diff-old">is
the
empty
sequence,
a
sequence
is
returned
containing
the
nodes
in
</del>
<ins class="diff-chg">and
</ins>
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$n2
</ins>
</code>
<del class="diff-old">in
document
order
after
eliminating
duplicates.
Two
nodes
</del>
are
duplicates
if
they
<del class="diff-old">are
</del>
<ins class="diff-chg">satisfy
</ins>
<a href= "#func-is-same-node">
<code>
<del class="diff-old">op:is-same-node()
</del>
<ins class="diff-chg">op:is-same-node($n1,
$n2)
</ins>
</code>
</a>.
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_op_union_intersect_except">
Section
7.2.14
The
op:union,
op:intersect,
and
op:except
operators
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
<del class="diff-old">This
function
backs
up
</del>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
is
</ins>
the
<del class="diff-old">"except"
operator.
</del>
<ins class="diff-chg">empty
sequence,
the
empty
sequence
is
returned.
</ins>
</p>
<del class="diff-old">15.3.4.1
</del>
<p>
<ins class="diff-chg">If
</ins><code><ins class="diff-chg">
$arg2
</ins></code><ins class="diff-chg">
is
the
empty
sequence,
a
sequence
is
returned
containing
the
nodes
in
</ins><code><ins class="diff-chg">
$arg1
</ins></code><ins class="diff-chg">
in
document
order
after
eliminating
duplicates.
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">Assume
</del>
<ins class="diff-chg">let
</ins>
<code>
$seq1
<del class="diff-old">=
($item1,
$item2),
$seq2
=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
($item1,
$item2)
</code>
<del class="diff-old">and
</del>
</p>
<p>
<ins class="diff-chg">let
</ins><code><ins class="diff-chg">
$seq2
</ins></code><ins class="diff-chg">
:=
</ins><code><ins class="diff-chg">
($item2,
$item2,
$item1)
</ins></code></p><p><ins class="diff-chg">
let
</ins>
<code>
$seq3
<del class="diff-old">=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
($item2,
$item3)
<del class="diff-old">.
</del>
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
op:except($seq1,
<del class="diff-old">$seq2)
</del>
<ins class="diff-chg">$seq1)
</ins>
</code>
returns
<del class="diff-old">the
empty
sequence.
</del>
<code>
<ins class="diff-chg">()
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
op:except($seq2,
$seq1)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
()
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins>
<code>
op:except($seq2,
$seq3)
</code>
returns
<del class="diff-old">the
sequence
</del>
<code>
($item1)
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
op:except($seq2,
())
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
($item1,
$item2)
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
op:except($seq3,
$seq2)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
($item3)
</ins></code>.</p></dd></dl>
</div>
</div>
<div class="div2">
<h3>
<a name="aggregate-functions" id="aggregate-functions">
</a>
<del class="diff-old">15.4
</del>
<ins class="diff-chg">14.4
</ins>
Aggregate
Functions
</h3>
<p>
Aggregate
functions
take
a
sequence
as
argument
and
return
a
single
value
computed
from
values
in
the
sequence.
Except
for
<a href="#func-count">
<code>
fn:count
</code>
</a>,
the
sequence
must
consist
of
values
of
a
single
type
or
one
if
its
subtypes,
or
they
must
be
numeric.
<code>
xs:untypedAtomic
</code>
values
are
permitted
in
the
input
sequence
and
handled
by
special
conversion
rules.
The
type
of
the
items
in
the
sequence
must
also
support
certain
operations.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-count">
<code>
fn:count
</code>
</a>
</td>
<td>
Returns
the
number
of
items
in
a
sequence.
</td>
</tr>
<tr>
<td>
<a href="#func-avg">
<code>
fn:avg
</code>
</a>
</td>
<td>
Returns
the
average
of
<del class="diff-old">a
</del>
<ins class="diff-chg">the
values
in
the
input
</ins>
sequence
<code>
<ins class="diff-new">$arg
</ins></code>,<ins class="diff-new">
that
is,
the
sum
of
the
values
divided
by
the
number
</ins>
of
values.
</td>
</tr>
<tr>
<td>
<a href="#func-max">
<code>
fn:max
</code>
</a>
</td>
<td>
Returns
<ins class="diff-new">a
value
that
is
equal
to
</ins>
the
<del class="diff-old">maximum
</del>
<ins class="diff-chg">highest
</ins>
value
<del class="diff-old">from
a
sequence
of
comparable
values.
</del>
<ins class="diff-chg">appearing
in
the
input
sequence.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-min">
<code>
fn:min
</code>
</a>
</td>
<td>
Returns
<ins class="diff-new">a
value
that
is
equal
to
</ins>
the
<del class="diff-old">minimum
</del>
<ins class="diff-chg">lowest
</ins>
value
<del class="diff-old">from
a
sequence
of
comparable
values.
</del>
<ins class="diff-chg">appearing
in
the
input
sequence.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-sum">
<code>
fn:sum
</code>
</a>
</td>
<td>
Returns
<del class="diff-old">the
sum
of
</del>
a
<del class="diff-old">sequence
of
values.
</del>
<ins class="diff-chg">value
obtained
by
adding
together
the
values
in
</ins><code><ins class="diff-chg">
$arg
</ins></code>.
</td>
</tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-count" id="func-count">
</a>
<del class="diff-old">15.4.1
</del>
<ins class="diff-chg">14.4.1
</ins>
fn:count
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
number
of
items
in
a
sequence.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:count
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
number
of
items
in
the
value
of
<code>
$arg
</code>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
Returns
0
if
<code>
$arg
</code>
is
the
empty
sequence.
</p>
<del class="diff-old">15.4.1.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">Assume
</del>
<ins class="diff-chg">let
</ins>
<code>
$seq1
<del class="diff-old">=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
($item1,
$item2)
</code>
<del class="diff-old">and
</del>
</p>
<p>
<ins class="diff-chg">let
</ins><code><ins class="diff-chg">
$seq2
</ins></code><ins class="diff-chg">
:=
</ins><code><ins class="diff-chg">
(98.5,
98.3,
98.9)
</ins></code></p><p><ins class="diff-chg">
let
</ins>
<code>
$seq3
<del class="diff-old">=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
()
<del class="diff-old">,
the
empty
sequence.
</del>
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:count($seq1)
</code>
returns
<code>
2
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:count($seq3)
</code>
returns
<code>
0
</code>.
</p>
<del class="diff-old">Assume
$seq2
=
(98.5,
98.3,
98.9)
.
</del>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:count($seq2)
</code>
returns
<code>
3
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:count($seq2[.
&gt;
100])
</code>
returns
<code>
0
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-avg" id="func-avg">
</a>
<del class="diff-old">15.4.2
</del>
<ins class="diff-chg">14.4.2
</ins>
fn:avg
</h4>
<del class="diff-old">fn:avg
(
$arg
&#160;as&#160;
xs:anyAtomicType*
)
&#160;as&#160;
xs:anyAtomicType?
</del>
<dl>
<dt class="label">
<ins class="diff-chg">Summary
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
the
average
of
the
values
in
the
input
sequence
<code>
$arg
</code>,
that
is,
the
sum
of
the
values
divided
by
the
number
of
values.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:avg
</ins></code><ins class="diff-new">
(
</ins><code class="arg"><ins class="diff-new">
$arg
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType*
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd>
<p>
If
<code>
$arg
</code>
is
the
empty
sequence,
the
empty
sequence
is
returned.
</p>
<p>
If
<code>
$arg
</code>
contains
values
of
type
<code>
xs:untypedAtomic
</code>
they
are
cast
to
<code>
xs:double
</code>.
</p>
<p>
Duration
values
must
either
all
be
<code>
xs:yearMonthDuration
</code>
values
or
must
all
be
<code>
xs:dayTimeDuration
</code>
values.
For
numeric
values,
the
numeric
promotion
rules
defined
in
<a href="#op.numeric">
<b>
<del class="diff-old">6.2
</del>
<ins class="diff-chg">4.2
Arithmetic
</ins>
Operators
on
Numeric
Values
</b>
</a>
are
used
to
promote
all
values
to
a
single
common
type.
After
these
operations,
<code>
$arg
</code>
must
contain
items
of
a
single
type,
which
must
be
one
of
the
four
numeric
types,
<code>
xs:yearMonthDuration
</code>
or
<code>
xs:dayTimeDuration
</code>
or
one
if
its
subtypes.
</p>
<p>
<del class="diff-old">If
the
above
conditions
are
not
met,
then
a
type
error
is
raised
[
err:FORG0006
].
Otherwise,
</del>
<ins class="diff-chg">The
function
</ins>
returns
the
average
of
the
values
as
<code>
sum($arg)
div
count($arg)
</code>
;
but
the
implementation
may
use
an
otherwise
equivalent
algorithm
that
avoids
arithmetic
overflow.
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_aggregates">
Section
7.2.10
The
fn:min,
fn:max,
fn:avg,
and
fn:sum
functions
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
the
input
sequence
contains
items
of
incompatible
types,
as
described
above,
then
a
type
error
is
raised
[
</ins><a href= "#ERRFORG0006" title="err:FORG0006"><ins class="diff-chg">
err:FORG0006
</ins>
</a>
<del class="diff-old">15.4.2.1
</del>
<ins class="diff-chg">].
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">Assume
</del>
<ins class="diff-chg">let
</ins>
<code>
$d1
<del class="diff-old">=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
xs:yearMonthDuration("P20Y")
</code>
<del class="diff-old">and
</del>
</p>
<p>
<ins class="diff-chg">let
</ins>
<code>
$d2
<del class="diff-old">=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
xs:yearMonthDuration("P10M")
</code>
<del class="diff-old">and
</del>
</p>
<p>
<ins class="diff-chg">let
</ins>
<code>
$seq3
<del class="diff-old">=
</del>
</code>
<ins class="diff-chg">:=
</ins><code>
(3,
4,
5)
<del class="diff-old">.
</del>
</code>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:avg($seq3)
</code>
returns
<code>
4.0
</code>.
<em>
<ins class="diff-new">(The
result
is
of
type
</ins><code><ins class="diff-new">
xs:decimal
</ins></code>.).</em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:avg(($d1,
$d2))
</code>
returns
<del class="diff-old">a
yearMonthDuration
with
value
</del>
<code>
<del class="diff-old">125
months.
</del>
<ins class="diff-chg">xs:yearMonthDuration("P10Y5M")
</ins></code>.
</p>
<p>
<code>
fn:avg(($d1,
$seq3))
</code>
raises
a
type
error
[
<a href= "#ERRFORG0006" title="err:FORG0006">
err:FORG0006
</a>
].
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:avg(())
</code>
returns
<code>
()
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:avg((xs:float('INF'),
xs:float('-INF')))
</code>
returns
<code>
<del class="diff-old">NaN
</del>
<ins class="diff-chg">xs:float('NaN')
</ins>
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:avg(($seq3,
xs:float('NaN')))
</code>
returns
<code>
<del class="diff-old">NaN
</del>
<ins class="diff-chg">xs:float('NaN')
</ins>
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-max" id="func-max">
</a>
<del class="diff-old">15.4.3
</del>
<ins class="diff-chg">14.4.3
</ins>
fn:max
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
value
that
is
equal
to
the
highest
value
appearing
in
the
input
sequence.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:max
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType?
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:max
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>,
<code class= "arg">
$collation
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
<del class="diff-old">string
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType?
</code>
</div>
</div>
<del class="diff-old">Summary:
Selects
an
item
from
the
input
sequence
$arg
whose
value
is
greater
than
or
equal
to
the
value
of
every
other
item
in
the
input
sequence.
If
there
are
two
or
more
such
items,
then
the
specific
item
whose
value
is
returned
is
·
implementation
dependent
·
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
following
rules
are
applied
to
the
input
<del class="diff-old">sequence:
</del>
<ins class="diff-chg">sequence
</ins><code><ins class="diff-chg">
$arg
</ins></code>:
</p>
<ul>
<li>
<p>
Values
of
type
<code>
xs:untypedAtomic
</code>
in
<code>
$arg
</code>
are
cast
to
<code>
xs:double
</code>.
</p>
</li>
<li>
<p>
Numeric
and
<code>
xs:anyURI
</code>
values
are
converted
to
the
least
common
type
<del class="diff-old">that
supports
the
ge
operator
</del>
<ins class="diff-chg">reachable
</ins>
by
a
combination
of
type
promotion
and
subtype
substitution.
See
<a href= "http://www.w3.org/TR/xpath20/#promotion">
Section
B.1
Type
Promotion
</a>
<sup>
<small>
XP
</small>
</sup>
and
<a href= "http://www.w3.org/TR/xpath20/#mapping">
Section
B.2
Operator
Mapping
</a>
<sup>
<small>
XP
</small>
</sup>.
</p>
</li>
</ul>
<p>
The
items
in
the
resulting
sequence
may
be
reordered
in
an
arbitrary
order.
The
resulting
sequence
is
referred
to
below
as
the
converted
sequence.
<del class="diff-old">This
</del>
<ins class="diff-chg">The
</ins>
function
returns
an
item
from
the
converted
sequence
rather
than
the
input
sequence.
</p>
<p>
If
the
converted
sequence
is
empty,
the
<ins class="diff-new">function
returns
the
</ins>
empty
<del class="diff-old">sequence
is
returned.
</del>
<ins class="diff-chg">sequence.
</ins>
</p>
<p>
All
items
in
<del class="diff-old">$arg
</del>
<ins class="diff-chg">the
</ins><span><ins class="diff-chg">
converted
sequence
</ins>
must
be
<del class="diff-old">numeric
or
</del>
derived
</span>
from
a
single
base
type
for
which
the
<code>
<del class="diff-old">ge
</del>
<ins class="diff-chg">le
</ins>
</code>
operator
is
defined.
In
addition,
the
values
in
the
sequence
must
have
a
total
order.
If
date/time
values
do
not
have
a
timezone,
they
are
considered
to
have
the
implicit
timezone
provided
by
the
dynamic
context
for
<del class="diff-old">purposes
</del>
<ins class="diff-chg">the
purpose
</ins>
of
comparison.
Duration
values
must
either
all
be
<code>
xs:yearMonthDuration
</code>
values
or
must
all
be
<code>
xs:dayTimeDuration
</code>
values.
</p>
<p>
If
<del class="diff-old">any
of
these
conditions
is
not
met,
then
a
type
error
is
raised
[
err:FORG0006
].
If
</del>
the
converted
sequence
contains
the
value
<code>
NaN
</code>,
the
value
<code>
NaN
</code>
is
returned.
</p>
<p>
If
the
items
in
the
<del class="diff-old">value
of
$arg
</del>
<span>
<ins class="diff-chg">converted
sequence
</ins></span>
are
of
type
<code>
xs:string
</code>
or
types
derived
by
restriction
from
<code>
xs:string
</code>,
then
the
determination
of
the
item
with
the
<del class="diff-old">largest
</del>
<ins class="diff-chg">smallest
</ins>
value
is
made
according
to
the
collation
that
is
used.
If
the
type
of
the
items
in
<del class="diff-old">$arg
</del>
<ins class="diff-chg">the
</ins><span><ins class="diff-chg">
converted
sequence
</ins></span>
is
not
<code>
xs:string
</code>
and
<code>
$collation
</code>
is
specified,
the
collation
is
ignored.
</p>
<p>
The
collation
used
by
<del class="diff-old">the
invocation
of
</del>
this
function
is
determined
according
to
the
rules
in
<a href="#choosing-a-collation">
<b>
<del class="diff-old">7.3.1
Collations
</del>
<ins class="diff-chg">5.3.3
Choosing
a
Collation
</ins>
</b>
</a>.
</p>
<p>
<del class="diff-old">Otherwise,
the
result
of
the
</del>
<ins class="diff-chg">The
</ins>
function
<del class="diff-old">is
</del>
<ins class="diff-chg">returns
</ins>
the
result
of
the
expression:
</p>
<div class="exampleInner">
<pre>
   if (every $v in $c satisfies $c[1] ge $v)
   then $c[1] 
   else fn:max(fn:subsequence($c, 2))
</pre>
</div>
<p>
evaluated
with
<code>
$collation
</code>
as
the
default
collation
if
specified,
and
with
<code>
$c
</code>
as
the
converted
sequence.
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_aggregates">
Section
7.2.10
The
fn:min,
fn:max,
fn:avg,
and
fn:sum
functions
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
the
input
sequence
contains
items
of
incompatible
types,
as
described
above,
then
a
type
error
is
raised
[
</ins><a href= "#ERRFORG0006" title="err:FORG0006"><ins class="diff-chg">
err:FORG0006
</ins></a><ins class="diff-chg">
].
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Because
the
rules
allow
the
sequence
to
be
reordered,
if
there
are
two
or
items
that
are
"equal
highest",
the
specific
item
whose
value
is
returned
is
</ins><a title="implementation dependent" class= "termref" href="#implementation-dependent">
<del class="diff-old">Notes:
</del>
<span class= "arrow">
<ins class="diff-chg">·
</ins></span><ins class="diff-chg">
implementation
dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span>
</a>.
<ins class="diff-new">This
can
arise
for
example
if
two
different
strings
compare
equal
under
the
selected
collation,
or
if
two
different
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
values
compare
equal
despite
being
in
different
timezones.
</ins>
</p>
<p>
If
the
converted
sequence
contains
exactly
one
value
then
that
value
is
returned.
</p>
<p>
The
default
type
when
the
<code>
fn:max
</code>
function
is
applied
to
<code>
xs:untypedAtomic
</code>
values
is
<code>
xs:double
</code>.
This
differs
from
the
default
type
for
operators
such
as
<code>
gt
</code>,
and
for
sorting
in
XQuery
and
XSLT,
which
is
<code>
xs:string
</code>.
</p>
<del class="diff-old">15.4.3.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:max((3,4,5))
</code>
returns
<code>
5
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:max((5,
5.0e0))
</del>
<ins class="diff-chg">fn:max((xs:integer(5),
xs:float(5.0),
xs:double(0)))
</ins>
</code>
returns
<code>
<del class="diff-old">5.0e0
</del>
<ins class="diff-chg">xs:double(5.0e0)
</ins>
</code>.
</p>
<p>
<code>
fn:max((3,4,"Zero"))
</code>
raises
a
type
error
[
<a href= "#ERRFORG0006" title="err:FORG0006">
err:FORG0006
</a>
].
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:max((fn:current-date(),
<del class="diff-old">xs:date("2001-01-01")))
</del>
<ins class="diff-chg">xs:date("2100-01-01")))
</ins>
</code>
<del class="diff-old">typically
</del>
returns
<code>
<ins class="diff-new">xs:date("2100-01-01")
</ins></code>.<em><ins class="diff-new">
(Assuming
that
</ins>
the
current
<del class="diff-old">date.
</del>
<ins class="diff-chg">date
is
during
the
21st
century.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:max(("a",
"b",
"c"))
</code>
returns
<code>
"c"
<del class="diff-old">under
</del>
</code>.
<em>
<ins class="diff-chg">(Assuming
</ins>
a
typical
default
<del class="diff-old">collation.
</del>
<ins class="diff-chg">collation.).
</ins></em>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-min" id="func-min">
</a>
<del class="diff-old">15.4.4
</del>
<ins class="diff-chg">14.4.4
</ins>
fn:min
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
value
that
is
equal
to
the
lowest
value
appearing
in
the
input
sequence.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:min
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType?
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:min
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>,
<code class= "arg">
$collation
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
<del class="diff-old">string
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType?
</code>
</div>
</div>
<del class="diff-old">Summary:
selects
an
item
from
the
input
sequence
$arg
whose
value
is
less
than
or
equal
to
the
value
of
every
other
item
in
the
input
sequence.
If
there
are
two
or
more
such
items,
then
the
specific
item
whose
value
is
returned
is
·
implementation
dependent
·
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
following
rules
are
applied
to
the
input
sequence:
</p>
<ul>
<li>
<p>
Values
of
type
<code>
xs:untypedAtomic
</code>
in
<code>
$arg
</code>
are
cast
to
<code>
xs:double
</code>.
</p>
</li>
<li>
<p>
Numeric
and
<code>
xs:anyURI
</code>
values
are
converted
to
the
least
common
type
<del class="diff-old">that
supports
the
le
operator
</del>
<ins class="diff-chg">reachable
</ins>
by
a
combination
of
type
promotion
and
subtype
substitution.
See
<a href= "http://www.w3.org/TR/xpath20/#promotion">
Section
B.1
Type
Promotion
</a>
<sup>
<small>
XP
</small>
</sup>
and
<a href= "http://www.w3.org/TR/xpath20/#mapping">
Section
B.2
Operator
Mapping
</a>
<sup>
<small>
XP
</small>
</sup>.
</p>
</li>
</ul>
<p>
The
items
in
the
resulting
sequence
may
be
reordered
in
an
arbitrary
order.
The
resulting
sequence
is
referred
to
below
as
the
converted
sequence.
<del class="diff-old">This
</del>
<ins class="diff-chg">The
</ins>
function
returns
an
item
from
the
converted
sequence
rather
than
the
input
sequence.
</p>
<p>
If
the
converted
sequence
is
empty,
the
empty
sequence
is
returned.
</p>
<p>
All
items
in
<del class="diff-old">$arg
</del>
<ins class="diff-chg">the
</ins><span><ins class="diff-chg">
converted
sequence
</ins>
must
be
<del class="diff-old">numeric
or
</del>
derived
</span>
from
a
single
base
type
for
which
the
<code>
le
</code>
operator
is
defined.
In
addition,
the
values
in
the
sequence
must
have
a
total
order.
If
date/time
values
do
not
have
a
timezone,
they
are
considered
to
have
the
implicit
timezone
provided
by
the
dynamic
context
for
the
purpose
of
comparison.
Duration
values
must
either
all
be
<code>
xs:yearMonthDuration
</code>
values
or
must
all
be
<code>
xs:dayTimeDuration
</code>
values.
</p>
<p>
If
<del class="diff-old">any
of
these
conditions
is
not
met,
a
type
error
is
raised
[
err:FORG0006
].
If
</del>
the
converted
sequence
contains
the
value
<code>
NaN
</code>,
the
value
<code>
NaN
</code>
is
returned.
</p>
<p>
If
the
items
in
the
<del class="diff-old">value
of
$arg
</del>
<span>
<ins class="diff-chg">converted
sequence
</ins></span>
are
of
type
<code>
xs:string
</code>
or
types
derived
by
restriction
from
<code>
xs:string
</code>,
then
the
determination
of
the
item
with
the
smallest
value
is
made
according
to
the
collation
that
is
used.
If
the
type
of
the
items
in
<del class="diff-old">$arg
</del>
<ins class="diff-chg">the
</ins><span><ins class="diff-chg">
converted
sequence
</ins></span>
is
not
<code>
xs:string
</code>
and
<code>
$collation
</code>
is
specified,
the
collation
is
ignored.
</p>
<p>
The
collation
used
by
<del class="diff-old">the
invocation
of
</del>
this
function
is
determined
according
to
the
rules
in
<a href="#choosing-a-collation">
<b>
<del class="diff-old">7.3.1
Collations
</del>
<ins class="diff-chg">5.3.3
Choosing
a
Collation
</ins>
</b>
</a>.
</p>
<p>
<del class="diff-old">Otherwise,
the
result
of
the
</del>
<ins class="diff-chg">The
</ins>
function
<del class="diff-old">is
</del>
<ins class="diff-chg">returns
</ins>
the
result
of
the
expression:
</p>
<div class="exampleInner">
<pre>
   if (every $v in $c satisfies $c[1] le $v) 
   then $c[1] 
   else fn:min(fn:subsequence($c, 2))
</pre>
</div>
<p>
evaluated
with
<code>
$collation
</code>
as
the
default
collation
if
specified,
and
with
<code>
$c
</code>
as
the
converted
sequence.
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_aggregates">
Section
7.2.10
The
fn:min,
fn:max,
fn:avg,
and
fn:sum
functions
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
the
input
sequence
contains
items
of
incompatible
types,
as
described
above,
then
a
type
error
is
raised
[
</ins><a href= "#ERRFORG0006" title="err:FORG0006"><ins class="diff-chg">
err:FORG0006
</ins></a><ins class="diff-chg">
].
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
Because
the
rules
allow
the
sequence
to
be
reordered,
if
there
are
two
or
items
that
are
"equal
lowest",
the
specific
item
whose
value
is
returned
is
</ins><a title="implementation dependent" class= "termref" href="#implementation-dependent">
<del class="diff-old">Notes:
</del>
<span class= "arrow">
<ins class="diff-chg">·
</ins></span><ins class="diff-chg">
implementation
dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span>
</a>.
<ins class="diff-new">This
can
arise
for
example
if
two
different
strings
compare
equal
under
the
selected
collation,
or
if
two
different
</ins><code><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
values
compare
equal
despite
being
in
different
timezones.
</ins>
</p>
<p>
If
the
converted
sequence
contains
exactly
one
value
then
that
value
is
returned.
</p>
<p>
The
default
type
when
the
<code>
fn:min
</code>
function
is
applied
to
<code>
xs:untypedAtomic
</code>
values
is
<code>
xs:double
</code>.
This
differs
from
the
default
type
for
operators
such
as
<code>
lt
</code>,
and
for
sorting
in
XQuery
and
XSLT,
which
is
<code>
xs:string
</code>.
</p>
<del class="diff-old">15.4.4.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:min((3,4,5))
</code>
returns
<code>
3
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">fn:min((5,
5.0e0))
</del>
<ins class="diff-chg">fn:min((xs:integer(5),
xs:float(5),
xs:double(10)))
</ins>
</code>
returns
<code>
<del class="diff-old">5.0e0
</del>
<ins class="diff-chg">xs:double(5.0e0)
</ins>
</code>.
</p>
<p>
<code>
fn:min((3,4,"Zero"))
</code>
raises
a
type
error
[
<a href= "#ERRFORG0006" title="err:FORG0006">
err:FORG0006
</a>
].
</p>
<p>
<code>
fn:min((xs:float(0.0E0),
xs:float(-0.0E0)))
</code>
can
return
either
positive
or
negative
zero.
<a href= "#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
does
not
distinguish
between
the
values
positive
zero
and
negative
zero.
The
result
is
<a title="implementation dependent" class= "termref" href="#implementation-dependent">
<span class= "arrow">
·
</span>
implementation
dependent
<span class= "arrow">
·
</span>
</a>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:min((fn:current-date(),
<del class="diff-old">xs:date("2001-01-01")))
</del>
<ins class="diff-chg">xs:date("1900-01-01")))
</ins>
</code>
<del class="diff-old">typically
</del>
returns
<code>
<del class="diff-old">xs:date("2001-01-01")
</del>
<ins class="diff-chg">xs:date("1900-01-01")
</ins>
</code>.
<em>
<ins class="diff-new">(Assuming
that
the
current
date
is
set
to
a
reasonable
value.).
</ins></em>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:min(("a",
"b",
"c"))
</code>
returns
<code>
"a"
<del class="diff-old">under
</del>
</code>.
<em>
<ins class="diff-chg">(Assuming
</ins>
a
typical
default
<del class="diff-old">collation.
</del>
<ins class="diff-chg">collation.).
</ins></em>
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-sum" id="func-sum">
</a>
<del class="diff-old">15.4.5
</del>
<ins class="diff-chg">14.4.5
</ins>
fn:sum
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
value
obtained
by
adding
together
the
values
in
</ins><code><ins class="diff-new">
$arg
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:sum
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
fn:sum
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$zero
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType?
</code>
</td>
</tr>
</table>
</div>
</div>
<del class="diff-old">Summary:
Returns
a
value
obtained
by
adding
together
the
values
in
$arg
.
If
$zero
is
not
specified,
then
the
value
returned
for
an
empty
sequence
is
the
xs:integer
value
0.
If
$zero
is
specified,
then
the
value
returned
for
an
empty
sequence
is
$zero
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
Any
values
of
type
<code>
xs:untypedAtomic
</code>
in
<code>
$arg
</code>
are
cast
to
<code>
xs:double
</code>.
The
items
in
the
resulting
sequence
may
be
reordered
in
an
arbitrary
order.
The
resulting
sequence
is
referred
to
below
as
the
converted
sequence.
</p>
<p>
If
the
converted
sequence
is
empty,
then
the
single-argument
form
of
the
function
returns
the
<code>
xs:integer
</code>
value
<code>
0
</code>
;
the
two-argument
form
returns
the
value
of
the
argument
<code>
$zero
</code>.
</p>
<p>
If
the
converted
sequence
contains
the
value
<code>
NaN
</code>,
<code>
NaN
</code>
is
returned.
</p>
<p>
All
items
in
<code>
$arg
</code>
must
be
numeric
or
derived
from
a
single
base
type.
In
addition,
the
type
must
support
addition.
Duration
values
must
either
all
be
<code>
xs:yearMonthDuration
</code>
values
or
must
all
be
<code>
xs:dayTimeDuration
</code>
values.
For
numeric
values,
the
numeric
promotion
rules
defined
in
<a href="#op.numeric">
<b>
<del class="diff-old">6.2
</del>
<ins class="diff-chg">4.2
Arithmetic
</ins>
Operators
on
Numeric
Values
</b>
</a>
are
used
to
promote
all
values
to
a
single
common
type.
The
sum
of
a
sequence
of
integers
will
therefore
be
an
integer,
while
the
sum
of
a
numeric
sequence
that
includes
at
least
one
<code>
xs:double
</code>
will
be
an
<del class="diff-old">xs:double.
If
the
above
conditions
are
not
met,
a
type
error
is
raised
[
err:FORG0006
].
</del>
<code>
<ins class="diff-chg">xs:double
</ins></code>.
</p>
<p>
<del class="diff-old">Otherwise,
the
</del>
<ins class="diff-chg">The
</ins>
result
of
the
function,
using
the
second
signature,
is
the
result
of
the
expression:
</p>
<div class="exampleInner">
<pre>
if (fn:count($c) eq 0) then
    $zero
else if (fn:count($c) eq 1) then
    $c[1]
else
    $c[1] + fn:sum(subsequence($c, 2))
</pre>
</div>
<p>
where
<code>
$c
</code>
is
the
converted
sequence.
</p>
<p>
The
result
of
the
function,
using
the
first
signature,
is
the
result
of
the
expression:
<code>
fn:sum($arg,
0)
</code>.
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_aggregates">
Section
7.2.10
The
fn:min,
fn:max,
fn:avg,
and
fn:sum
functions
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
<del class="diff-old">Notes:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
the
input
sequence
contains
items
of
incompatible
types,
as
described
above,
then
a
type
error
is
raised
[
</ins><a href= "#ERRFORG0006" title="err:FORG0006"><ins class="diff-chg">
err:FORG0006
</ins></a><ins class="diff-chg">
].
</ins>
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
The
second
argument
allows
an
appropriate
value
to
be
defined
to
represent
the
sum
of
an
empty
sequence.
For
example,
when
summing
a
sequence
of
durations
it
would
be
appropriate
to
return
a
zero-length
duration
of
the
appropriate
type.
This
argument
is
necessary
because
a
system
that
does
dynamic
typing
cannot
distinguish
"an
empty
sequence
of
integers",
for
example,
from
"an
empty
sequence
of
durations".
</p>
<p>
If
the
converted
sequence
contains
exactly
one
value
then
that
value
is
returned.
</p>
<del class="diff-old">15.4.5.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<del class="diff-old">Assume:
</del>
<ins class="diff-chg">let
</ins><code><ins class="diff-chg">
$d1
</ins></code><ins class="diff-chg">
:=
</ins><code><ins class="diff-chg">
xs:yearMonthDuration("P20Y")
</ins></code>
</p>
<del class="diff-old">$d1 = xs:yearMonthDuration("P20Y")
$d2 = xs:yearMonthDuration("P10M")
$seq1 = ($d1, $d2)
$seq3 = (3, 4, 5)
</del>
<p>
<ins class="diff-chg">let
</ins><code><ins class="diff-chg">
$d2
</ins></code><ins class="diff-chg">
:=
</ins><code><ins class="diff-chg">
xs:yearMonthDuration("P10M")
</ins></code>
</p>
<p>
<ins class="diff-new">let
</ins><code><ins class="diff-new">
$seq1
</ins></code><ins class="diff-new">
:=
</ins><code><ins class="diff-new">
($d1,
$d2)
</ins></code>
</p>
<p>
<ins class="diff-new">let
</ins>
<code>
<del class="diff-old">fn:sum(($d1,
$d2))
</del>
<ins class="diff-chg">$seq3
</ins>
</code>
<del class="diff-old">returns
an
</del>
<ins class="diff-chg">:=
</ins>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">(3,
4,
5)
</ins>
</code>
<del class="diff-old">with
a
value
of
</del>
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
<del class="diff-old">250
</del>
<ins class="diff-chg">fn:sum(($d1,
$d2))
</ins>
</code>
<del class="diff-old">months.
</del>
<ins class="diff-chg">returns
</ins><code><ins class="diff-chg">
xs:yearMonthDuration("P20Y10M")
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:sum($seq1[.
<del class="diff-old">&lt;
</del>
<ins class="diff-chg">lt
</ins>
xs:yearMonthDuration('P3M')],
xs:yearMonthDuration('P0M'))
</code>
returns
<del class="diff-old">an
xs:yearMonthDuration
with
a
value
of
</del>
<code>
<del class="diff-old">0
months.
</del>
<ins class="diff-chg">xs:yearMonthDuration("P0M")
</ins></code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:sum($seq3)
</code>
returns
<code>
12
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:sum(())
</code>
returns
<code>
0
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:sum((),())
</code>
returns
<code>
()
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
fn:sum((1
to
<del class="diff-old">100)[.&lt;0],
</del>
<ins class="diff-chg">100)[.
lt
0],
</ins>
0)
</code>
returns
<code>
0
</code>.
</p>
<p>
<code>
fn:sum(($d1,
9E1))
</code>
raises
an
error
[
<a href= "#ERRFORG0006" title="err:FORG0006">
err:FORG0006
</a>
].
</p>
<p>
<ins class="diff-chg">The
expression
</ins><code><ins class="diff-chg">
fn:sum(($d1,
$d2),
"ein
Augenblick")
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
xs:yearMonthDuration("P20Y10M")
</ins></code>.<em><ins class="diff-chg">
(There
is
no
requirement
that
the
</ins><code><ins class="diff-chg">
$zero
</ins></code><ins class="diff-chg">
value
should
be
the
same
type
as
the
items
in
</ins><code><ins class="diff-chg">
$arg
</ins></code>,<ins class="diff-chg">
or
even
that
it
should
belong
to
a
type
that
supports
addition.).
</ins></em></p></dd></dl>
</div>
</div>
<div class="div2">
<h3>
<a name="fns-that-generate-sequences" id= "fns-that-generate-sequences">
</a>
<del class="diff-old">15.5
</del>
<ins class="diff-chg">14.5
</ins>
Functions
and
Operators
that
Generate
Sequences
</h3>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-to">
<code>
op:to
</code>
</a>
</td>
<td>
Returns
<ins class="diff-new">a
sequence
of
consecutive
integers
in
a
given
range.
</ins></td></tr><tr><td><a href="#func-id"><code><ins class="diff-new">
fn:id
</ins></code></a></td><td><ins class="diff-new">
Returns
</ins>
the
sequence
<del class="diff-old">containing
every
</del>
<ins class="diff-chg">of
element
nodes
that
have
an
</ins>
<code>
<del class="diff-old">xs:integer
</del>
<ins class="diff-chg">ID
</ins>
</code>
<del class="diff-old">between
</del>
<ins class="diff-chg">value
matching
</ins>
the
<del class="diff-old">values
</del>
<ins class="diff-chg">value
of
one
or
more
</ins>
of
the
<del class="diff-old">operands.
</del>
<code>
<ins class="diff-chg">IDREF
</ins></code><ins class="diff-chg">
values
supplied
in
</ins><code><ins class="diff-chg">
$arg
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href= "#func-element-with-id">
<code>
<del class="diff-old">fn:id
</del>
<ins class="diff-chg">fn:element-with-id
</ins>
</code>
</a>
</td>
<td>
Returns
the
sequence
of
element
nodes
<del class="diff-old">having
</del>
<ins class="diff-chg">that
have
</ins>
an
<code>
ID
</code>
value
matching
the
<ins class="diff-new">value
of
</ins>
one
or
more
of
the
<del class="diff-old">supplied
</del>
<code>
IDREF
<del class="diff-old">values.
</del>
</code>
<ins class="diff-chg">values
supplied
in
</ins><code><ins class="diff-chg">
$arg
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href="#func-idref">
<code>
fn:idref
</code>
</a>
</td>
<td>
Returns
the
sequence
of
element
or
attribute
nodes
with
an
<code>
IDREF
</code>
value
matching
<ins class="diff-new">the
value
of
</ins>
one
or
more
of
the
<del class="diff-old">supplied
</del>
<code>
ID
<del class="diff-old">values.
</del>
</code>
<ins class="diff-chg">values
supplied
in
</ins><code><ins class="diff-chg">
$arg
</ins></code>.
</td>
</tr>
<tr>
<td>
<a href="#func-doc">
<code>
fn:doc
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
</del>
<ins class="diff-chg">Retrieves
</ins>
a
document
<del class="diff-old">node
retrieved
</del>
using
<ins class="diff-new">a
URI
supplied
as
an
</ins><code><ins class="diff-new">
xs:string
</ins></code>,<ins class="diff-new">
and
returns
</ins>
the
<del class="diff-old">specified
URI.
</del>
<ins class="diff-chg">corresponding
document
node.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-doc-available">
<code>
fn:doc-available
</code>
</a>
</td>
<td>
<del class="diff-old">Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
true
if
<ins class="diff-new">and
only
if
the
function
call
</ins><a href="#func-doc"><code><ins class="diff-new">
fn:doc($uri)
</ins></code></a><ins class="diff-new">
would
return
</ins>
a
document
<del class="diff-old">node
can
be
retrieved
using
the
specified
URI.
</del>
<ins class="diff-chg">node.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-collection">
<code>
fn:collection
</code>
</a>
</td>
<td>
Returns
a
sequence
of
nodes
<del class="diff-old">retrieved
using
the
specified
URI
</del>
<ins class="diff-chg">representing
a
collection
of
documents
indentified
by
a
collection
URI;
</ins>
or
<ins class="diff-new">a
default
collection
if
no
URI
is
supplied.
</ins></td></tr><tr><td><a href= "#func-uri-collection"><code><ins class="diff-new">
fn:uri-collection
</ins></code></a></td><td><ins class="diff-new">
Returns
a
sequence
of
</ins><code><ins class="diff-new">
xs:anyURI
</ins></code><ins class="diff-new">
values
representing
</ins>
the
<del class="diff-old">nodes
in
</del>
<ins class="diff-chg">document
URIs
of
</ins>
the
<del class="diff-old">default
</del>
<ins class="diff-chg">documents
in
a
</ins>
collection.
</td>
</tr>
<tr>
<td>
<a href= "#func-generate-id">
<code>
<ins class="diff-new">fn:generate-id
</ins></code></a></td><td><ins class="diff-new">
This
function
returns
a
string
that
uniquely
identifies
a
given
node.
</ins></td></tr><tr><td><a href="#func-parse"><code><ins class="diff-new">
fn:parse
</ins></code></a></td><td><ins class="diff-new">
This
function
takes
as
input
an
XML
document
represented
as
a
string,
and
returns
the
document
node
at
the
root
of
an
XDM
tree
representing
the
parsed
document.
</ins></td></tr><tr><td><a href="#func-serialize"><code><ins class="diff-new">
fn:serialize
</ins></code></a></td><td><ins class="diff-new">
This
function
serializes
the
supplied
node
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
as
described
in
</ins><a href="#"><ins class="diff-new">
[serialization]
</ins></a>,<ins class="diff-new">
returning
the
serialized
node
as
a
string.
</ins></td></tr>
</tbody>
</table>
<div class="div3">
<h4>
<a name="func-to" id="func-to">
</a>
<del class="diff-old">15.5.1
</del>
<ins class="diff-chg">14.5.1
</ins>
op:to
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
sequence
of
consecutive
integers
in
a
given
range.
</ins></p></dd><dt class="label"><ins class="diff-new">
Operator
Mapping
</ins></dt><dd><p><ins class="diff-new">
Defines
the
semantics
of
the
"to"
operator.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class="function">
op:to
</code>
(
<code class= "arg">
$firstval
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:integer
</code>,
<code class="arg">
$lastval
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:integer
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
sequence
containing
every
<code>
xs:integer
</code>
whose
value
is
between
the
value
of
<code>
$firstval
</code>
(inclusive)
and
the
value
of
<code>
$lastval
</code>
(inclusive),
in
monotonic
<ins class="diff-new">increasing
</ins>
order.
</p>
<p>
If
the
value
of
the
first
operand
is
greater
than
the
value
of
the
second,
the
<ins class="diff-new">function
returns
the
</ins>
empty
<del class="diff-old">sequence
is
returned.
</del>
<ins class="diff-chg">sequence.
</ins></p><p>
If
the
values
of
the
two
operands
are
equal,
<ins class="diff-new">the
function
returns
</ins>
a
sequence
containing
a
single
<code>
xs:integer
</code>
equal
to
<del class="diff-old">the
value
is
returned.
This
function
backs
up
the
"to"
operator.
</del>
<ins class="diff-chg">that
value.
</ins>
</p>
<del class="diff-old">15.5.1.1
</del>
</dd>
<dt class="label">
Examples
</dt>
<dd>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
1
to
3
</code>
returns
<code>
(1,
2,
3)
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
3
to
1
</code>
returns
<code>
()
</code>.
</p>
<p>
<ins class="diff-chg">The
expression
</ins>
<code>
5
to
5
</code>
returns
<code>
5
</code>.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-id" id="func-id">
</a>
<del class="diff-old">15.5.2
</del>
<ins class="diff-chg">14.5.2
</ins>
fn:id
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
sequence
of
element
nodes
that
have
an
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
value
matching
the
value
of
one
or
more
of
the
</ins><code><ins class="diff-new">
IDREF
</ins></code><ins class="diff-new">
values
supplied
in
</ins><code><ins class="diff-new">
$arg
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class="function">
fn:id
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
element()*
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class="function">
fn:id
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string*
</code>,
<code class= "arg">
$node
</code>
<code class="as">
&#160;as&#160;
</code>
<code class="type">
node()
</code>
)
<code class="as">
&#160;as&#160;
</code>
<code class="return-type">
element()*
</code>
</div>
</div>
<del class="diff-old">Summary:
Returns
the
sequence
of
element
nodes
that
have
an
ID
value
matching
the
value
of
one
or
more
of
the
IDREF
values
supplied
in
$arg
.
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Rules
</ins></dt><dd>
<p>
The
function
returns
a
sequence,
in
document
order
with
duplicates
eliminated,
containing
every
element
node
<code>
E
</code>
that
satisfies
all
the
following
conditions:
</p>
<ol class="enumar">
<li>
<p>
<code>
E
</code>
is
in
the
target
document.
The
target
document
is
the
document
containing
<code>
$node
</code>,
or
the
document
containing
the
context
item
(
<code>.
</code>
)
if
the
second
argument
is
omitted.
The
behavior
of
the
function
if
<code>
$node
</code>
is
omitted
is
exactly
the
same
as
if
the
context
item
had
been
passed
as
<code>
$node
</code>.
<del class="diff-old">If
$node
,
or
the
context
item
if
the
second
argument
is
omitted,
is
a
node
in
a
tree
whose
root
is
not
a
document
node
[
err:FODC0001
]
is
raised.
If
the
second
argument
is
the
context
item,
or
is
omitted,
the
following
errors
may
be
raised:
if
there
is
no
context
item,
[
err:XPDY0002
]
XP
;
if
the
context
item
is
not
a
node
[
err:XPTY0004
]
XP
.
</del>
</p>
</li>
<li>
<p>
<code>
E
</code>
has
an
<code>
ID
</code>
value
equal
to
one
of
the
candidate
<code>
IDREF
</code>
values,
where:
</p>
<ul>
<li>
<p>
An
element
has
an
<code>
ID
</code>
value
equal
to
<code>
V
</code>
if
either
or
both
of
the
following
conditions
are
true:
</p>
<ul>
<li>
<p>
The
<code>
is-id
</code>
property
(See
<a href= "http://www.w3.org/TR/xpath-datamodel/#dm-is-id">
Section
5.5
is-id
Accessor
</a>
<sup>
<small>
DM
</small>
</sup>.)
of
the
element
node
is
true,
and
the
typed
value
of
the
element
node
is
equal
to
V
under
the
rules
of
the
<code>
eq
</code>
operator
using
the
Unicode
<del class="diff-old">code
point
</del>
<ins class="diff-chg">codepoint
</ins>
collation
(
<code>
http://www.w3.org/2005/xpath-functions/collation/codepoint
</code>
).
</p>
</li>
<li>
<p>
The
element
has
an
attribute
node
whose
<code>
is-id
</code>
property
(See
<a href= "http://www.w3.org/TR/xpath-datamodel/#dm-is-id">
Section
5.5
is-id
Accessor
</a>
<sup>
<small>
DM
</small>
</sup>.)
is
true
and
whose
typed
value
is
equal
to
<code>
V
</code>
under
the
rules
of
the
<code>
eq
</code>
operator
using
the
Unicode
code
point
collation
(
<code>
http://www.w3.org/2005/xpath-functions/collation/codepoint
</code>
).
</p>
</li>
</ul>
</li>
<li>
<p>
Each
<code>
xs:string
</code>
in
<code>
$arg
</code>
is
parsed
as
if
it
were
of
type
<code>
IDREFS
</code>,
that
is,
each
<code>
xs:string
</code>
in
<code>
$arg
</code>
is
treated
as
a
whitespace-separated
sequence
of
tokens,
each
acting
as
an
<code>
IDREF
</code>.
These
tokens
are
then
included
in
the
list
of
candidate
<code>
IDREF
</code>
s.
If
any
of
the
tokens
is
not
a
lexically
valid
<code>
IDREF
</code>
(that
is,
if
it
is
not
lexically
an
<code>
xs:NCName
</code>
),
it
is
ignored.
Formally,
the
candidate
<code>
IDREF
</code>
values
are
the
strings
in
the
sequence
given
by
the
expression:
</p>
<div class="exampleInner">
<pre>
<del class="diff-old">for $s in $arg return fn:tokenize(fn:normalize-space($s), ' ')
                 [. castable as xs:IDREF]
</del>
<ins class="diff-chg">for $s in $arg return 
    fn:tokenize(fn:normalize-space($s), ' ')[. castable as xs:IDREF]
</ins>
</pre>
</div>
</li>
</ul>
</li>
<li>
<p>
If
several
elements
have
the
same
<code>
ID
</code>
value,
then
<code>
E
</code>
is
the
one
that
is
first
in
document
order.
</p>
</li>
</ol>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$node
</ins></code>,<ins class="diff-chg">
or
the
context
item
if
the
second
argument
is
omitted,
is
a
node
in
a
tree
whose
root
is
not
a
document
node
[
</ins><a href="#ERRFODC0001" title= "err:FODC0001"><ins class="diff-chg">
err:FODC0001
</ins></a><ins class="diff-chg">
]
is
raised.
</ins></p><p><ins class="diff-chg">
If
the
second
argument
is
the
context
item,
or
is
omitted,
the
following
errors
may
be
raised:
if
there
is
no
context
item,
[
</ins><a href="http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002"><ins class="diff-chg">
err:XPDY0002
</ins></a><ins class="diff-chg">
]
</ins><sup>
<del class="diff-old">Notes:
</del>
<small>
<ins class="diff-chg">XP
</ins></small></sup><ins class="diff-chg">
;
if
the
context
item
is
not
a
node
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004"><ins class="diff-chg">
err:XPTY0004
</ins></a><ins class="diff-chg">
]
</ins><sup>
<small>
<ins class="diff-new">XP
</ins></small></sup>.</p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
The
effect
of
this
function
is
anomalous
in
respect
of
element
nodes
with
the
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property.
For
legacy
reasons,
this
function
returns
the
element
that
has
the
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property,
whereas
it
would
be
more
appropriate
to
return
its
parent,
that
being
the
element
that
is
uniquely
identified
by
the
ID.
A
new
function
</ins><code><ins class="diff-new">
element-with-id
</ins></code><ins class="diff-new">
is
being
introduced
with
the
desired
behavior.
</ins>
</p>
<p>
If
the
data
model
is
constructed
from
an
Infoset,
an
attribute
will
have
the
<code>
is-id
</code>
property
if
the
corresponding
attribute
in
the
Infoset
had
an
attribute
type
of
<code>
ID
</code>:
typically
this
means
the
attribute
was
declared
as
an
<code>
ID
</code>
in
a
DTD.
</p>
<p>
If
the
data
model
is
constructed
from
a
PSVI,
an
element
or
attribute
will
have
the
<code>
is-id
</code>
property
if
its
<del class="diff-old">schema-defined
type
</del>
<ins class="diff-chg">typed
value
</ins>
is
<ins class="diff-new">a
single
atomic
value
of
type
</ins>
<code>
xs:ID
</code>
or
a
type
derived
by
restriction
from
<code>
xs:ID
</code>.
</p>
<p>
No
error
is
raised
in
respect
of
a
candidate
<code>
IDREF
</code>
value
that
does
not
match
the
<code>
ID
</code>
of
any
element
in
the
document.
If
no
candidate
<code>
IDREF
</code>
value
matches
the
<code>
ID
</code>
value
of
any
element,
the
function
returns
the
empty
sequence.
</p>
<p>
It
is
not
necessary
that
the
supplied
argument
should
have
type
<code>
xs:IDREF
</code>
or
<code>
xs:IDREFS
</code>,
or
that
it
should
be
derived
from
a
node
with
the
<code>
is-idrefs
</code>
property.
</p>
<p>
An
element
may
have
more
than
one
<code>
ID
</code>
value.
This
can
occur
with
synthetic
data
models
or
with
data
models
constructed
from
a
PSVI
where
the
element
and
one
of
its
attributes
are
both
typed
as
<code>
xs:ID
</code>.
</p>
<p>
If
the
source
document
is
well-formed
but
not
valid,
it
is
possible
for
two
or
more
elements
to
have
the
same
<code>
ID
</code>
value.
In
this
situation,
the
function
will
select
the
first
such
element.
</p>
<p>
It
is
also
possible
in
a
well-formed
but
invalid
document
to
have
an
element
or
attribute
that
has
the
<code>
is-id
</code>
property
but
whose
value
does
not
conform
to
the
lexical
rules
for
the
<code>
xs:ID
</code>
type.
Such
a
node
will
never
be
selected
by
this
function.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Examples
</ins></dt><dd><p><ins class="diff-new">
let
</ins><code><ins class="diff-new">
$emp
</ins></code><ins class="diff-new">
:=
</ins></p><div class="exampleInner"><pre><ins class="diff-new">
            &lt;employee xml:id="ID21256"&gt;
               &lt;empnr&gt;E21256&lt;/empnr&gt;
               &lt;first&gt;John&lt;/first&gt;
               &lt;last&gt;Brown&lt;/last&gt;
            &lt;/employee&gt;
         
</ins></pre>
</div>
<p>
<ins class="diff-new">The
expression
</ins><code><ins class="diff-new">
id('ID21256')/name()
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
employee
</ins></code>.<em><ins class="diff-new">
(The
</ins><code><ins class="diff-new">
xml:id
</ins></code><ins class="diff-new">
attribute
has
the
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property,
so
the
employee
element
is
selected.).
</ins></em></p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
id('E21256')/name()
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
empnr
</ins></code>.<em><ins class="diff-new">
(Assuming
the
</ins><code><ins class="diff-new">
empnr
</ins></code><ins class="diff-new">
element
is
given
the
type
</ins><code><ins class="diff-new">
xs:ID
</ins></code><ins class="diff-new">
as
a
result
of
schema
validation,
the
element
will
have
the
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property
and
is
therefore
selected.
Note
the
difference
from
the
behavior
of
</ins><a href= "#func-element-with-id"><code><ins class="diff-new">
fn:element-with-id
</ins></code></a>.).</em></p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-element-with-id" id= "func-element-with-id">
</a>
<del class="diff-old">15.5.3
fn:idref
</del>
<ins class="diff-chg">14.5.3
fn:element-with-id
</ins>
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
sequence
of
element
nodes
that
have
an
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
value
matching
the
value
of
one
or
more
of
the
</ins><code><ins class="diff-new">
IDREF
</ins></code><ins class="diff-new">
values
supplied
in
</ins><code><ins class="diff-new">
$arg
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
<del class="diff-old">fn:idref
</del>
<ins class="diff-chg">fn:element-with-id
</ins>
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
<del class="diff-old">node()*
</del>
<ins class="diff-chg">element()*
</ins>
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
<del class="diff-old">fn:idref
</del>
<ins class="diff-chg">fn:element-with-id
</ins>
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string*
</code>,
<code class= "arg">
$node
</code>
<code class="as">
&#160;as&#160;
</code>
<code class="type">
node()
</code>
)
<code class="as">
&#160;as&#160;
</code>
<del class="diff-old">node()*
</del>
<code class="return-type">
<ins class="diff-chg">element()*
</ins>
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-new">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-new">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
See
bug
6028.
Text
here
is
proposed
by
the
editor
in
response
to
decisions
made
at
the
joint
telcon
on
2008-11-11.
Requires
review
of
detailed
text.
Also
needs
issuing
as
a
1.0/2.0
erratum
</ins></td></tr></table><div class="note"><p class="prefix"><b><ins class="diff-new">
Note:
</ins></b></p>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
effect
of
this
function
is
identical
to
</ins><code><ins class="diff-chg">
fn:id
</ins></code><ins class="diff-chg">
in
respect
of
elements
that
have
an
attribute
with
</ins>
the
<del class="diff-old">sequence
</del>
<code>
<ins class="diff-chg">is-id
</ins></code><ins class="diff-chg">
property.
However,
it
behaves
differently
in
respect
</ins>
of
element
<del class="diff-old">or
attribute
</del>
nodes
with
<del class="diff-old">an
</del>
<ins class="diff-chg">the
</ins>
<code>
<del class="diff-old">IDREF
</del>
<ins class="diff-chg">is-id
</ins>
</code>
<del class="diff-old">value
matching
</del>
<ins class="diff-chg">property.
Whereas
</ins>
the
<del class="diff-old">value
of
one
or
more
of
</del>
<a href="#func-id">
<code>
<ins class="diff-chg">fn:id
</ins></code></a>,<ins class="diff-chg">
for
legacy
reasons,
returns
the
element
that
has
</ins>
the
<code>
<del class="diff-old">ID
</del>
<ins class="diff-chg">is-id
</ins>
</code>
<del class="diff-old">values
supplied
in
</del>
<ins class="diff-chg">property,
this
parent
returns
the
element
identified
by
the
ID,
which
is
the
parent
of
the
element
having
the
</ins>
<code>
<del class="diff-old">$arg
.
</del>
<ins class="diff-chg">is-id
</ins></code><ins class="diff-chg">
property.
</ins>
</p>
</div>
<p>
The
function
returns
a
sequence,
in
document
order
with
duplicates
eliminated,
containing
every
element
<del class="diff-old">or
attribute
</del>
node
<code>
<del class="diff-old">$N
</del>
<ins class="diff-chg">E
</ins>
</code>
that
satisfies
all
the
following
conditions:
</p>
<ol class="enumar">
<li>
<p>
<code>
<del class="diff-old">$N
</del>
<ins class="diff-chg">E
</ins>
</code>
is
in
the
target
document.
The
target
document
is
the
document
containing
<code>
$node
</code>,
or
the
document
containing
the
context
item
(
<code>.
</code>
)
if
the
second
argument
is
omitted.
The
behavior
of
the
function
if
<code>
$node
</code>
is
omitted
is
exactly
the
same
as
if
the
context
item
had
been
passed
as
<code>
$node
</code>.
</p>
</li>
<li>
<p>
<code>
<ins class="diff-new">E
</ins></code><ins class="diff-new">
has
an
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
value
equal
to
one
of
the
candidate
</ins><code><ins class="diff-new">
IDREF
</ins></code><ins class="diff-new">
values,
where:
</ins></p><ul><li><p><ins class="diff-new">
An
element
has
an
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
value
equal
to
</ins><code><ins class="diff-new">
V
</ins></code><ins class="diff-new">
if
either
or
both
of
the
following
conditions
are
true:
</ins></p><ul><li><p><ins class="diff-new">
The
element
has
an
child
element
node
whose
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property
(See
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#dm-is-id"><ins class="diff-new">
Section
5.5
is-id
Accessor
</ins></a><sup><small><ins class="diff-new">
DM
</ins></small></sup>.)<ins class="diff-new">
is
true
and
whose
typed
value
is
equal
to
</ins><code><ins class="diff-new">
V
</ins></code><ins class="diff-new">
under
the
rules
of
the
</ins><code><ins class="diff-new">
eq
</ins></code><ins class="diff-new">
operator
using
the
Unicode
code
point
collation
(
</ins><code><ins class="diff-new">
http://www.w3.org/2005/xpath-functions/collation/codepoint
</ins></code><ins class="diff-new">
).
</ins></p></li><li><p><ins class="diff-new">
The
element
has
an
attribute
node
whose
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property
(See
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#dm-is-id"><ins class="diff-new">
Section
5.5
is-id
Accessor
</ins></a><sup><small><ins class="diff-new">
DM
</ins></small></sup>.)<ins class="diff-new">
is
true
and
whose
typed
value
is
equal
to
</ins><code><ins class="diff-new">
V
</ins></code><ins class="diff-new">
under
the
rules
of
the
</ins><code><ins class="diff-new">
eq
</ins></code><ins class="diff-new">
operator
using
the
Unicode
code
point
collation
(
</ins><code><ins class="diff-new">
http://www.w3.org/2005/xpath-functions/collation/codepoint
</ins></code><ins class="diff-new">
).
</ins></p></li></ul></li><li><p><ins class="diff-new">
Each
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
in
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
parsed
as
if
it
were
of
type
</ins><code><ins class="diff-new">
IDREFS
</ins></code>,<ins class="diff-new">
that
is,
each
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
in
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
treated
as
a
whitespace-separated
sequence
of
tokens,
each
acting
as
an
</ins><code><ins class="diff-new">
IDREF
</ins></code>.<ins class="diff-new">
These
tokens
are
then
included
in
the
list
of
candidate
</ins><code><ins class="diff-new">
IDREF
</ins></code><ins class="diff-new">
s.
If
any
of
the
tokens
is
not
a
lexically
valid
</ins><code><ins class="diff-new">
IDREF
</ins></code><ins class="diff-new">
(that
is,
if
it
is
not
lexically
an
</ins><code><ins class="diff-new">
xs:NCName
</ins></code><ins class="diff-new">
),
it
is
ignored.
Formally,
the
candidate
</ins><code><ins class="diff-new">
IDREF
</ins></code><ins class="diff-new">
values
are
the
strings
in
the
sequence
given
by
the
expression:
</ins></p><div class="exampleInner"><pre><ins class="diff-new">
for $s in $arg return 
   fn:tokenize(fn:normalize-space($s), ' ')[. castable as xs:IDREF]
</ins></pre></div></li></ul></li><li><p><ins class="diff-new">
If
several
elements
have
the
same
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
value,
then
</ins><code><ins class="diff-new">
E
</ins></code><ins class="diff-new">
is
the
one
that
is
first
in
document
order.
</ins></p></li></ol></dd><dt class="label"><ins class="diff-new">
Error
Conditions
</ins></dt><dd><p>
If
<code>
$node
</code>,
or
the
context
item
if
the
second
argument
is
omitted,
is
a
node
in
a
tree
whose
root
is
not
a
document
node
[
<a href="#ERRFODC0001" title= "err:FODC0001">
err:FODC0001
</a>
]
is
raised.
</p>
<p>
If
the
second
argument
is
the
context
item,
or
is
omitted,
the
following
errors
may
be
raised:
if
there
is
no
context
<del class="diff-old">item
</del>
<ins class="diff-chg">item,
</ins>
[
<a href="http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002">
err:XPDY0002
</a>
]
<sup>
<small>
XP
</small>
</sup>
;
if
the
context
item
is
not
a
node
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004">
err:XPTY0004
</a>
]
<sup>
<small>
XP
</small>
</sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd><p><ins class="diff-new">
This
function
is
equivalent
to
the
</ins><a href= "#func-id"><code><ins class="diff-new">
fn:id
</ins></code></a><ins class="diff-new">
function
except
when
dealing
with
ID-valued
element
nodes.
Whereas
the
</ins><a href= "#func-id"><code><ins class="diff-new">
fn:id
</ins></code></a><ins class="diff-new">
function
selects
the
element
containing
the
identifier,
this
function
selects
its
parent.
</ins></p><p><ins class="diff-new">
If
the
data
model
is
constructed
from
an
Infoset,
an
attribute
will
have
the
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property
if
the
corresponding
attribute
in
the
Infoset
had
an
attribute
type
of
</ins><code><ins class="diff-new">
ID
</ins></code>:<ins class="diff-new">
typically
this
means
the
attribute
was
declared
as
an
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
in
a
DTD.
</ins></p><p><ins class="diff-new">
If
the
data
model
is
constructed
from
a
PSVI,
an
element
or
attribute
will
have
the
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property
if
its
typed
value
is
a
single
atomic
value
of
type
</ins><code><ins class="diff-new">
xs:ID
</ins></code><ins class="diff-new">
or
a
type
derived
by
restriction
from
</ins><code><ins class="diff-new">
xs:ID
</ins></code>.</p><p><ins class="diff-new">
No
error
is
raised
in
respect
of
a
candidate
</ins><code><ins class="diff-new">
IDREF
</ins></code><ins class="diff-new">
value
that
does
not
match
the
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
of
any
element
in
the
document.
If
no
candidate
</ins><code><ins class="diff-new">
IDREF
</ins></code><ins class="diff-new">
value
matches
the
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
value
of
any
element,
the
function
returns
the
empty
sequence.
</ins></p><p><ins class="diff-new">
It
is
not
necessary
that
the
supplied
argument
should
have
type
</ins><code><ins class="diff-new">
xs:IDREF
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
xs:IDREFS
</ins></code>,<ins class="diff-new">
or
that
it
should
be
derived
from
a
node
with
the
</ins><code><ins class="diff-new">
is-idrefs
</ins></code><ins class="diff-new">
property.
</ins></p><p><ins class="diff-new">
An
element
may
have
more
than
one
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
value.
This
can
occur
with
synthetic
data
models
or
with
data
models
constructed
from
a
PSVI
where
the
element
and
one
of
its
attributes
are
both
typed
as
</ins><code><ins class="diff-new">
xs:ID
</ins></code>.</p><p><ins class="diff-new">
If
the
source
document
is
well-formed
but
not
valid,
it
is
possible
for
two
or
more
elements
to
have
the
same
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
value.
In
this
situation,
the
function
will
select
the
first
such
element.
</ins></p><p><ins class="diff-new">
It
is
also
possible
in
a
well-formed
but
invalid
document
to
have
an
element
or
attribute
that
has
the
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property
but
whose
value
does
not
conform
to
the
lexical
rules
for
the
</ins><code><ins class="diff-new">
xs:ID
</ins></code><ins class="diff-new">
type.
Such
a
node
will
never
be
selected
by
this
function.
</ins></p></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><p><ins class="diff-new">
let
</ins><code><ins class="diff-new">
$emp
</ins></code><ins class="diff-new">
:=
</ins></p><div class="exampleInner"><pre><ins class="diff-new">
            &lt;employee xml:id="ID21256"&gt;
               &lt;empnr&gt;E21256&lt;/empnr&gt;
               &lt;first&gt;John&lt;/first&gt;
               &lt;last&gt;Brown&lt;/last&gt;
            &lt;/employee&gt;
         
</ins></pre></div><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
id('ID21256')/name()
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
"employee"
</ins></code>.<em><ins class="diff-new">
(The
</ins><code><ins class="diff-new">
xml:id
</ins></code><ins class="diff-new">
attribute
has
the
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property,
so
the
employee
element
is
selected.).
</ins></em></p><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
id('E21256')/name()
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
"employee"
</ins></code>.<em><ins class="diff-new">
(Assuming
the
</ins><code><ins class="diff-new">
empnr
</ins></code><ins class="diff-new">
element
is
given
the
type
</ins><code><ins class="diff-new">
xs:ID
</ins></code><ins class="diff-new">
as
a
result
of
schema
validation,
the
element
will
have
the
</ins><code><ins class="diff-new">
is-id
</ins></code><ins class="diff-new">
property
and
is
therefore
its
parent
is
selected.
Note
the
difference
from
the
behavior
of
</ins><a href= "#func-id"><code><ins class="diff-new">
fn:id
</ins></code></a>.).</em></p></dd></dl></div><div class="div3"><h4><a name="func-idref" id="func-idref"></a><ins class="diff-new">
14.5.4
fn:idref
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
sequence
of
element
or
attribute
nodes
with
an
</ins><code><ins class="diff-new">
IDREF
</ins></code><ins class="diff-new">
value
matching
the
value
of
one
or
more
of
the
</ins><code><ins class="diff-new">
ID
</ins></code><ins class="diff-new">
values
supplied
in
</ins><code><ins class="diff-new">
$arg
</ins></code>.</p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:idref
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string*
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
node()*
</ins></code></div></div><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:idref
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string*
</ins></code>,<code class= "arg"><ins class="diff-new">
$node
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
node()
</ins></code><ins class="diff-new">
)
</ins><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="return-type"><ins class="diff-new">
node()*
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
The
function
returns
a
sequence,
in
document
order
with
duplicates
eliminated,
containing
every
element
or
attribute
node
</ins><code><ins class="diff-new">
$N
</ins></code><ins class="diff-new">
that
satisfies
all
the
following
conditions:
</ins></p><ol class="enumar"><li><p><code><ins class="diff-new">
$N
</ins></code><ins class="diff-new">
is
in
the
target
document.
The
target
document
is
the
document
containing
</ins><code><ins class="diff-new">
$node
</ins></code><ins class="diff-new">
or
the
document
containing
the
context
item
(
</ins><code>.</code><ins class="diff-new">
)
if
the
second
argument
is
omitted.
The
behavior
of
the
function
if
</ins><code><ins class="diff-new">
$node
</ins></code><ins class="diff-new">
is
omitted
is
exactly
the
same
as
if
the
context
item
had
been
passed
as
</ins><code><ins class="diff-new">
$node
</ins></code>.</p>
</li>
<li>
<p>
<code>
$N
</code>
has
an
<code>
IDREF
</code>
value
equal
to
one
of
the
candidate
<code>
ID
</code>
values,
where:
</p>
<ul>
<li>
<p>
A
node
<code>
$N
</code>
has
an
<code>
IDREF
</code>
value
equal
to
<code>
V
</code>
if
both
of
the
following
conditions
are
true:
</p>
<ul>
<li>
<p>
The
<code>
is-idrefs
</code>
property
<del class="diff-old">(See
</del>
<ins class="diff-chg">(see
</ins>
<a href= "http://www.w3.org/TR/xpath-datamodel/#dm-is-idrefs">
Section
5.6
is-idrefs
Accessor
</a>
<sup>
<small>
DM
</small>
<del class="diff-old">.)of
</del>
</sup>
<ins class="diff-chg">)
of
</ins>
<code>
$N
</code>
is
<code>
true
</code>.
</p>
</li>
<li>
<p>
The
sequence
</p>
<div class="exampleInner">
<pre>
<del class="diff-old">fn:tokenize(fn:normalize-space($N),
                                                  ' ')
</del>
<ins class="diff-chg">fn:tokenize(fn:normalize-space(fn:string($N)), ' ')
</ins>
</pre>
</div>
contains
a
string
that
is
equal
to
<code>
V
</code>
under
the
rules
of
the
<code>
eq
</code>
operator
using
the
Unicode
code
point
collation
(
<code>
http://www.w3.org/2005/xpath-functions/collation/codepoint
</code>
).
</li>
</ul>
</li>
<li>
<p>
Each
<code>
xs:string
</code>
in
<code>
$arg
</code>
is
parsed
as
if
it
were
of
lexically
of
type
<code>
xs:ID
</code>.
These
<code>
xs:string
</code>
s
are
then
included
in
the
list
of
candidate
<code>
xs:ID
</code>
s.
If
any
of
the
strings
in
<code>
$arg
</code>
is
not
a
lexically
valid
<code>
xs:ID
</code>
(that
is,
if
it
is
not
lexically
an
<code>
xs:NCName
</code>
),
it
is
ignored.
More
formally,
the
candidate
<code>
ID
</code>
values
are
the
strings
in
the
<del class="diff-old">sequence
</del>
<ins class="diff-chg">sequence:
</ins>
</p>
<div class="exampleInner">
<pre>
$arg[. castable as xs:NCName]
</pre>
</div>
</li>
</ul>
</li>
</ol>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$node
</ins></code>,<ins class="diff-chg">
or
the
context
item
if
the
second
argument
is
omitted,
is
a
node
in
a
tree
whose
root
is
not
a
document
node
[
</ins><a href="#ERRFODC0001" title= "err:FODC0001"><ins class="diff-chg">
err:FODC0001
</ins></a><ins class="diff-chg">
]
is
raised.
</ins></p><p><ins class="diff-chg">
If
the
second
argument
is
the
context
item,
or
is
omitted,
the
following
errors
may
be
raised:
if
there
is
no
context
item
[
</ins><a href="http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002"><ins class="diff-chg">
err:XPDY0002
</ins></a><ins class="diff-chg">
]
</ins><sup>
<del class="diff-old">Notes:
</del>
<small>
<ins class="diff-chg">XP
</ins></small></sup><ins class="diff-chg">
;
if
the
context
item
is
not
a
node
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004"><ins class="diff-chg">
err:XPTY0004
</ins></a><ins class="diff-chg">
]
</ins><sup>
<small>
<ins class="diff-new">XP
</ins></small></sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Notes
</ins></dt><dd>
<p>
An
element
or
attribute
typically
acquires
the
<code>
is-idrefs
</code>
property
by
being
validated
against
the
schema
type
<code>
xs:IDREF
</code>
or
<code>
xs:IDREFS
</code>,
or
(for
attributes
only)
by
being
described
as
of
type
<code>
IDREF
</code>
or
<code>
IDREFS
</code>
in
a
DTD.
</p>
<p>
No
error
is
raised
in
respect
of
a
candidate
<code>
ID
</code>
value
that
does
not
match
the
<code>
IDREF
</code>
value
of
any
element
or
attribute
in
the
document.
If
no
candidate
<code>
ID
</code>
value
matches
the
<code>
IDREF
</code>
value
of
any
element
or
attribute,
the
function
returns
the
empty
sequence.
</p>
<p>
It
is
possible
for
two
or
more
nodes
to
have
an
<code>
IDREF
</code>
value
that
matches
a
given
candidate
<code>
ID
</code>
value.
In
this
situation,
the
function
will
return
all
such
nodes.
However,
each
matching
node
will
be
returned
at
most
once,
regardless
how
many
candidate
<code>
ID
</code>
values
it
matches.
</p>
<p>
It
is
possible
in
a
well-formed
but
invalid
document
to
have
a
node
whose
<code>
is-idrefs
</code>
property
is
true
but
that
does
not
conform
to
the
lexical
rules
for
the
<code>
xs:IDREF
</code>
type.
The
effect
of
the
above
rules
is
that
ill-formed
candidate
<code>
ID
</code>
values
and
ill-formed
<code>
IDREF
</code>
values
are
ignored.
</p>
<p>
<ins class="diff-chg">If
the
data
model
is
constructed
from
a
PSVI,
the
typed
value
of
a
node
that
has
the
</ins><code><ins class="diff-chg">
is-idrefs
</ins></code><ins class="diff-chg">
property
will
contain
at
least
one
atomic
value
of
type
</ins><code><ins class="diff-chg">
xs:IDREF
</ins></code><ins class="diff-chg">
(or
a
type
derived
by
restriction
from
</ins><code><ins class="diff-chg">
xs:IDREF
</ins></code><ins class="diff-chg">
).
It
may
also
contain
atomic
values
of
other
types.
These
atomic
values
are
treated
as
candidate
</ins><code><ins class="diff-chg">
ID
</ins></code><ins class="diff-chg">
values
if
their
lexical
form
is
valid
as
an
</ins><code><ins class="diff-chg">
xs:NCName
</ins></code>,<ins class="diff-chg">
and
they
are
ignored
otherwise.
</ins></p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-doc" id="func-doc">
</a>
<del class="diff-old">15.5.4
</del>
<ins class="diff-chg">14.5.5
</ins>
fn:doc
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Retrieves
a
document
using
a
URI
supplied
as
an
</ins><code><ins class="diff-new">
xs:string
</ins></code>,<ins class="diff-new">
and
returns
the
corresponding
document
node.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:doc
</code>
(
<code class="arg">
$uri
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
document-node()?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Retrieves
a
document
using
an
xs:anyURI
,
which
may
include
a
fragment
identifier,
supplied
as
an
xs:string
.
</del>
If
<code>
$uri
</code>
is
<del class="diff-old">not
a
valid
xs:anyURI
,
an
error
</del>
<ins class="diff-chg">the
empty
sequence,
the
result
</ins>
is
<del class="diff-old">raised
[
err:FODC0005
].
</del>
<ins class="diff-chg">an
empty
sequence.
</ins></p><p>
If
<del class="diff-old">it
</del>
<code>
<ins class="diff-chg">$uri
</ins></code>
is
a
relative
URI
<del class="diff-old">Reference,
</del>
<ins class="diff-chg">reference,
</ins>
it
is
resolved
relative
to
the
value
of
the
base
URI
property
from
the
static
context.
The
resulting
absolute
URI
<del class="diff-old">Reference
</del>
is
promoted
to
an
<code>
xs:string
</code>.
</p>
<p>
If
the
<b>
Available
documents
</b>
<del class="diff-old">discussed
</del>
<ins class="diff-chg">described
</ins>
in
<a href= "http://www.w3.org/TR/xpath20/#eval_context">
Section
2.1.2
Dynamic
Context
</a>
<sup>
<small>
XP
</small>
</sup>
provides
a
mapping
from
this
string
to
a
document
node,
the
function
returns
that
document
node.
<del class="diff-old">If
the
Available
documents
provides
no
mapping
for
the
string,
an
error
is
raised
[
err:FODC0005
].
</del>
</p>
<p>
<del class="diff-old">If
$uri
is
the
empty
sequence,
the
result
is
an
empty
sequence.
</del>
<ins class="diff-chg">The
URI
may
include
a
fragment
identifier.
</ins>
</p>
<p>
By
default,
this
function
is
<a title="stable" class="termref" href="#stable">
<span class="arrow">
·
</span>
stable
<span class= "arrow">
·
</span>
</a>.
Two
calls
on
this
function
return
the
same
document
node
if
the
same
URI
Reference
(after
resolution
to
an
absolute
URI
Reference)
is
supplied
to
both
calls.
Thus,
the
following
expression
(if
it
does
not
raise
an
error)
will
always
be
true:
</p>
<div class="exampleInner">
<pre>
doc("foo.xml") is doc("foo.xml")
</pre>
</div>
<p>
However,
for
performance
reasons,
implementations
may
provide
a
user
option
to
evaluate
the
function
without
a
guarantee
of
stability.
The
manner
in
which
any
such
option
is
provided
is
implementation-defined.
If
the
user
has
not
selected
such
an
option,
a
call
of
the
function
must
either
return
a
stable
result
or
must
raise
an
error:
[
<a href="#ERRFODC0003" title= "err:FODC0003">
err:FODC0003
</a>
].
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_doc_collection">
Section
7.2.5
The
fn:collection
and
fn:doc
functions
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
If
<code>
$uri
</code>
is
read
from
a
source
document,
it
is
generally
appropriate
to
resolve
it
relative
to
the
base
URI
property
of
the
relevant
node
in
the
source
document.
This
can
be
achieved
by
calling
the
<a href= "#func-resolve-uri">
<code>
fn:resolve-uri
</code>
</a>
function,
and
passing
the
resulting
absolute
URI
as
an
argument
to
the
<code>
fn:doc
</code>
function.
</p>
</div>
<p>
If
two
calls
to
this
function
supply
different
absolute
URI
References
as
arguments,
the
same
document
node
may
be
returned
if
the
implementation
can
determine
that
the
two
arguments
refer
to
the
same
resource.
</p>
<p>
By
defining
the
semantics
of
this
function
in
terms
of
a
string-to-document-node
mapping
in
the
dynamic
context,
the
specification
is
acknowledging
that
the
results
of
this
function
are
outside
the
purview
of
the
language
specification
itself,
and
depend
entirely
on
the
run-time
environment
in
which
the
expression
is
evaluated.
This
run-time
environment
includes
not
only
an
unpredictable
collection
of
resources
("the
web"),
but
configurable
machinery
for
locating
resources
and
turning
their
contents
into
document
nodes
within
the
XPath
data
model.
Both
the
set
of
resources
that
are
reachable,
and
the
mechanisms
by
which
those
resources
are
parsed
and
validated,
are
<a title= "implementation dependent" class="termref" href= "#implementation-dependent">
<span class= "arrow">
·
</span>
implementation
dependent
<span class= "arrow">
·
</span>
</a>.
</p>
<p>
One
possible
processing
model
for
this
function
is
as
follows.
The
resource
identified
by
the
URI
Reference
is
retrieved.
If
the
resource
cannot
be
retrieved,
an
error
is
raised
[
<a href= "#ERRFODC0002" title="err:FODC0002">
err:FODC0002
</a>
].
The
data
resulting
from
the
retrieval
action
is
then
parsed
as
an
XML
document
and
a
tree
is
constructed
in
accordance
with
the
<del class="diff-old">[XQuery
1.0
and
XPath
2.0
Data
Model]
</del>
<a href= "#">
<ins class="diff-chg">[xpath-datamodel]
</ins>
</a>.
If
the
top-level
media
type
is
known
and
is
"text",
the
content
is
parsed
in
the
same
way
as
if
the
media
type
were
text/xml;
otherwise,
it
is
parsed
in
the
same
way
as
if
the
media
type
were
application/xml.
If
the
contents
cannot
be
parsed
successfully,
an
error
is
raised
[
<a href="#ERRFODC0002" title="err:FODC0002">
err:FODC0002
</a>
].
Otherwise,
the
result
of
the
function
is
the
document
node
at
the
root
of
the
resulting
tree.
This
tree
is
then
optionally
validated
against
a
schema.
</p>
<p>
Various
aspects
of
this
processing
are
<a title= "implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>.
Implementations
may
provide
external
configuration
options
that
allow
any
aspect
of
the
processing
to
be
controlled
by
the
user.
In
particular:
</p>
<ul>
<li>
<p>
The
set
of
URI
schemes
that
the
implementation
recognizes
is
implementation-defined.
Implementations
may
allow
the
mapping
of
URIs
to
resources
to
be
configured
by
the
user,
using
mechanisms
such
as
catalogs
or
user-written
URI
handlers.
</p>
</li>
<li>
<p>
The
handling
of
non-XML
media
types
is
implementation-defined.
Implementations
may
allow
instances
of
the
data
model
to
be
constructed
from
non-XML
resources,
under
user
control.
</p>
</li>
<li>
<p>
It
is
<a title="implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
whether
DTD
validation
and/or
schema
validation
is
applied
to
the
source
document.
</p>
</li>
<li>
<p>
Implementations
may
provide
user-defined
error
handling
options
that
allow
processing
to
continue
following
an
error
in
retrieving
a
resource,
or
in
parsing
and
validating
its
content.
When
errors
have
been
handled
in
this
way,
the
function
may
return
either
an
empty
sequence,
or
a
fallback
document
provided
by
the
error
handler.
</p>
</li>
<li>
<p>
Implementations
may
provide
user
options
that
relax
the
requirement
for
the
function
to
return
stable
results.
</p>
</li>
</ul>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$uri
</ins></code><ins class="diff-new">
is
not
a
valid
URI,
an
error
</ins><strong><ins class="diff-new">
may
</ins></strong><ins class="diff-new">
be
raised
[
</ins><a href="#ERRFODC0005" title= "err:FODC0005"><ins class="diff-new">
err:FODC0005
</ins></a><ins class="diff-new">
].
</ins></p><p><ins class="diff-new">
If
the
</ins><b><ins class="diff-new">
Available
documents
</ins></b><ins class="diff-new">
provides
no
mapping
for
the
absolutized
URI,
an
error
is
raised
[
</ins><a href="#ERRFODC0005" title= "err:FODC0005"><ins class="diff-new">
err:FODC0005
</ins></a><ins class="diff-new">
].
</ins></p><p><ins class="diff-new">
If
the
resource
cannot
be
retrieved
or
cannot
be
parsed
successfully
as
XML,
an
error
is
raised
[
</ins><a href="#ERRFODC0002" title="err:FODC0002"><ins class="diff-new">
err:FODC0002
</ins></a><ins class="diff-new">
]
</ins></p><p><ins class="diff-new">
If
the
implementation
is
not
able
to
guarantee
that
the
result
of
the
function
will
be
stable,
and
the
user
has
not
indicated
that
an
unstable
result
is
acceptable,
an
error
is
raised
[
</ins><a href= "#ERRFODC0003" title="err:FODC0003"><ins class="diff-new">
err:FODC0003
</ins></a><ins class="diff-new">
].
</ins></p></dd></dl>
</div>
<div class="div3">
<h4>
<a name="func-doc-available" id="func-doc-available">
</a>
<del class="diff-old">15.5.5
</del>
<ins class="diff-chg">14.5.6
</ins>
fn:doc-available
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
The
function
returns
true
if
and
only
if
the
function
call
</ins><a href="#func-doc"><code><ins class="diff-new">
fn:doc($uri)
</ins></code></a><ins class="diff-new">
would
return
a
document
node.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:doc-available
</code>
(
<code class= "arg">
$uri
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$uri
</ins></code><ins class="diff-new">
is
an
empty
sequence,
this
function
returns
</ins><code><ins class="diff-new">
false
</ins></code>.</p>
<p>
<del class="diff-old">Summary:
</del>
If
<ins class="diff-new">a
call
on
</ins>
<a href="#func-doc">
<code>
fn:doc($uri)
</code>
</a>
<del class="diff-old">returns
</del>
<ins class="diff-chg">would
return
</ins>
a
document
node,
this
function
returns
<code>
true
</code>.
</p>
<p>
If
<code>
$uri
</code>
is
not
a
valid
<ins class="diff-new">URI
according
to
the
rules
applied
by
the
implementation
of
</ins><a href= "#func-doc">
<code>
<del class="diff-old">xs:anyURI
,
</del>
<ins class="diff-chg">fn:doc
</ins></code></a>,
an
error
is
raised
[
<a href= "#ERRFODC0005" title="err:FODC0005">
err:FODC0005
</a>
].
</p>
<p>
Otherwise,
this
function
returns
<code>
false
</code>.
</p>
<p>
If
this
function
returns
<code>
true
</code>,
then
calling
<a href="#func-doc">
<code>
fn:doc($uri)
</code>
</a>
within
the
same
<a title="execution scope" class="termref" href= "#execution-scope">
<span class="arrow">
·
</span>
execution
scope
<span class="arrow">
·
</span>
</a>
must
return
a
document
node.
However,
if
non-stable
processing
has
been
selected
for
the
<a href="#func-doc">
<code>
fn:doc
</code>
</a>
function,
this
guarantee
is
lost.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-collection" id="func-collection">
</a>
<del class="diff-old">15.5.6
</del>
<ins class="diff-chg">14.5.7
</ins>
fn:collection
</h4>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
sequence
of
nodes
representing
a
collection
of
documents
indentified
by
a
collection
URI;
or
a
default
collection
if
no
URI
is
supplied.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:collection
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
node()*
</code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:collection
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
node()*
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
This
function
takes
an
<code>
xs:string
</code>
as
argument
and
returns
a
sequence
of
nodes
obtained
by
interpreting
<code>
$arg
</code>
as
an
<code>
xs:anyURI
</code>
and
resolving
it
according
to
the
mapping
specified
in
<b>
Available
collections
</b>
described
in
<a href= "http://www.w3.org/TR/xpath20/#id-xp-evaluation-context-components">
Section
C.2
Dynamic
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>.
</p>
<p>
If
<b>
Available
collections
</b>
provides
a
mapping
from
this
string
to
a
sequence
of
nodes,
the
function
returns
that
sequence.
If
<b>
Available
collections
</b>
maps
the
string
to
an
empty
sequence,
then
the
function
returns
an
empty
sequence.
<del class="diff-old">If
Available
collections
provides
no
mapping
for
the
string,
an
error
is
raised
[
err:FODC0004
].
</del>
</p>
<p>
If
<code>
$arg
</code>
is
not
specified,
the
function
returns
the
sequence
of
the
nodes
in
the
default
collection
in
the
dynamic
context.
See
<a href= "http://www.w3.org/TR/xpath20/#id-xp-evaluation-context-components">
Section
C.2
Dynamic
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>.
<del class="diff-old">If
the
value
of
the
default
collection
is
undefined
an
error
is
raised
[
err:FODC0002
].
</del>
</p>
<p>
If
the
<ins class="diff-new">value
of
</ins>
<code>
$arg
</code>
is
a
relative
<code>
xs:anyURI
</code>,
it
is
resolved
against
the
value
of
the
base-URI
property
from
the
static
context.
<del class="diff-old">If
$arg
is
not
a
valid
xs:anyURI
,
an
error
is
raised
[
err:FODC0004
].
</del>
</p>
<p>
If
<code>
$arg
</code>
is
the
empty
sequence,
the
function
behaves
as
if
it
had
been
called
without
an
argument.
See
above.
</p>
<p>
By
default,
this
function
is
<a title="stable" class="termref" href="#stable">
<span class="arrow">
·
</span>
stable
<span class= "arrow">
·
</span>
</a>.
This
means
that
repeated
calls
on
the
function
with
the
same
argument
will
return
the
same
result.
However,
for
performance
reasons,
implementations
may
provide
a
user
option
to
evaluate
the
function
without
a
guarantee
of
stability.
The
manner
in
which
any
such
option
is
provided
is
<a title="implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>.
If
the
user
has
not
selected
such
an
option,
a
call
to
this
function
must
either
return
a
stable
result
or
must
raise
an
error:
[
<a href="#ERRFODC0003" title= "err:FODC0003">
err:FODC0003
</a>
].
</p>
<p>
For
detailed
type
semantics,
see
<a href= "http://www.w3.org/TR/xquery-semantics/#sec_fn_doc_collection">
Section
7.2.5
The
fn:collection
and
fn:doc
functions
</a>
<sup>
<small>
FS
</small>
</sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-chg">Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
no
URI
is
supplied
and
the
value
of
the
default
collection
is
undefined,
an
error
is
raised
[
</ins><a href="#ERRFODC0002" title= "err:FODC0002"><ins class="diff-chg">
err:FODC0002
</ins></a><ins class="diff-chg">
].
</ins></p><p><ins class="diff-chg">
If
</ins>
<b>
<del class="diff-old">Note:
</del>
<ins class="diff-chg">Available
collections
</ins>
</b>
<ins class="diff-chg">provides
no
mapping
for
the
absolutized
URI,
an
error
is
raised
[
</ins><a href="#ERRFODC0004" title= "err:FODC0004"><ins class="diff-chg">
err:FODC0004
</ins></a><ins class="diff-chg">
]
</ins>
</p>
<p>
<ins class="diff-new">If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
not
a
valid
</ins><code><ins class="diff-new">
xs:anyURI
</ins></code>,<ins class="diff-new">
an
error
is
raised
[
</ins><a href="#ERRFODC0004" title= "err:FODC0004"><ins class="diff-new">
err:FODC0004
</ins></a><ins class="diff-new">
].
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p>
This
function
provides
a
facility
for
users
to
work
with
a
collection
of
documents
which
may
be
contained
in
a
directory
or
rows
of
a
Relational
table
or
other
implementation-specific
construct.
An
implementation
may
also
use
external
variables
to
identify
external
resources,
but
<code>
<del class="diff-old">fn:collection()
</del>
<ins class="diff-chg">fn:collection
</ins>
</code>
provides
functionality
not
provided
by
external
variables.
Specifying
resources
using
URIs
is
useful
because
URIs
are
dynamic,
can
be
parameterized,
and
do
not
rely
on
an
external
environment.
</p>
</dd>
</dl>
</div>
<div class="div3">
<h4>
<a name="func-uri-collection" id= "func-uri-collection">
</a>
<ins class="diff-new">14.5.8
fn:uri-collection
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
a
sequence
of
</ins><code><ins class="diff-new">
xs:anyURI
</ins></code><ins class="diff-new">
values
representing
the
document
URIs
of
the
documents
in
a
collection.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:uri-collection
</ins></code><ins class="diff-new">
()
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:anyURI*
</ins></code>
</div>
</div>
<div class="exampleInner">
<div class="proto">
<code class= "function">
<ins class="diff-new">fn:uri-collection
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:anyURI*
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
A
collection,
as
returned
by
the
</ins><code><ins class="diff-new">
fn:collection
</ins></code><ins class="diff-new">
function,
is
in
general
a
sequence
of
nodes.
Some
of
these
nodes
may
be
document
nodes,
and
some
of
these
document
nodes
may
have
a
non-empty
document
URI,
accessible
using
the
</ins><code><ins class="diff-new">
fn:document-uri
</ins></code><ins class="diff-new">
function.
The
</ins><code><ins class="diff-new">
fn:uri-collection
</ins></code><ins class="diff-new">
function
returns
a
sequence
of
URIs,
being
the
document
URIs
of
those
nodes
in
the
collection
that
are
document
nodes
and
that
have
a
document
URI
(other
nodes
in
the
collection
are
ignored).
That
is,
in
the
absence
of
errors,
</ins><code><ins class="diff-new">
fn:uri-collection(X)
</ins></code><ins class="diff-new">
returns
the
same
set
of
URIs
as
</ins><a href= "#func-collection"><code><ins class="diff-new">
fn:collection(X)/fn:document-uri(.)
</ins></code></a>,<ins class="diff-new">
though
possibly
in
a
different
order.
</ins></p><p><ins class="diff-new">
The
purpose
in
providing
the
function,
however,
is
to
allow
the
URIs
of
the
documents
in
a
collection
to
be
retrieved
without
incurring
the
cost
(which
might
be
significant
in
some
implementations)
of
dereferencing
the
URIs
to
obtain
the
actual
nodes.
Where
required,
the
returned
URIs
can
then
be
dereferenced
by
calling
the
</ins><code><ins class="diff-new">
fn:doc
</ins></code><ins class="diff-new">
function.
</ins></p><p><ins class="diff-new">
The
zero-argument
form
of
the
function
returns
the
document
URIs
of
the
document
nodes
in
the
default
collection.
</ins></p><p><ins class="diff-new">
The
single-argument
form
returns
the
document
URIs
of
the
document
nodes
in
the
collection
with
a
given
collection
URI.
If
the
value
of
the
argument
is
an
empty
sequence,
the
action
is
as
for
the
zero-argument
form
of
the
function.
If
the
argument
is
a
relative
URI,
it
is
resolved
against
the
base
URI
property
of
the
static
context.
</ins></p></dd><dt class="label"><ins class="diff-new">
Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
If
no
URI
is
supplied
and
the
value
of
the
default
collection
is
undefined,
an
error
is
raised
[
</ins><a href="#ERRFODC0002" title= "err:FODC0002"><ins class="diff-new">
err:FODC0002
</ins></a><ins class="diff-new">
].
</ins></p><p><ins class="diff-new">
If
</ins><b><ins class="diff-new">
Available
collections
</ins></b><ins class="diff-new">
provides
no
mapping
for
the
absolutized
URI,
an
error
is
raised
[
</ins><a href="#ERRFODC0004" title= "err:FODC0004"><ins class="diff-new">
err:FODC0004
</ins></a><ins class="diff-new">
]
</ins></p><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
not
a
valid
</ins><code><ins class="diff-new">
xs:anyURI
</ins></code>,<ins class="diff-new">
an
error
is
raised
[
</ins><a href="#ERRFODC0004" title= "err:FODC0004"><ins class="diff-new">
err:FODC0004
</ins></a><ins class="diff-new">
].
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
There
are
several
reasons
it
might
be
appriopriate
to
retrieve
the
URIs
of
the
documents
in
a
collection
without
retrieving
the
documents
themselves.
For
example:
</ins></p><ul><li><p><ins class="diff-new">
In
XSLT
it
allows
the
documents
to
be
processed
in
streaming
mode
using
the
</ins><code><ins class="diff-new">
xsl:stream
</ins></code><ins class="diff-new">
instruction.
</ins></p></li><li><p><ins class="diff-new">
It
allows
recovery
from
failures
to
read,
parse,
or
validate
individual
documents,
by
calling
the
</ins><a href= "#func-doc"><code><ins class="diff-new">
fn:doc
</ins></code></a><ins class="diff-new">
function
within
the
scope
of
try/catch.
</ins></p></li><li><p><ins class="diff-new">
It
allows
selection
of
which
documents
to
read
based
on
their
URI,
for
example
they
can
be
filtered
to
select
those
whose
URIs
end
in
</ins><code>.xml</code>.</p></li></ul><p><ins class="diff-new">
However,
there
may
be
collections
that
cannot
be
processed
in
this
way:
specifically,
those
that
contain
nodes
other
than
document
nodes,
and
those
that
contain
document
nodes
having
no
document
URI.
</ins></p></dd></dl></div><div class="div3"><h4><a name="func-generate-id" id="func-generate-id"></a><ins class="diff-new">
14.5.9
fn:generate-id
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
This
function
returns
a
string
that
uniquely
identifies
a
given
node.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:generate-id
</ins></code><ins class="diff-new">
()
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></div></div><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:generate-id
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
node()?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
If
the
argument
is
omitted,
it
defaults
to
the
context
item
(
</ins><code>.</code><ins class="diff-new">
).
The
behavior
of
the
function
if
the
argument
is
omitted
is
exactly
the
same
as
if
the
context
item
had
been
passed
as
the
argument.
</ins></p><p><ins class="diff-new">
If
the
argument
is
the
empty
sequence,
the
result
is
the
zero-length
string.
</ins></p><p><ins class="diff-new">
In
other
cases,
the
function
returns
a
string
that
uniquely
identifies
a
given
node.
</ins></p><p><ins class="diff-new">
The
returned
identifier
</ins><strong><ins class="diff-new">
must
</ins></strong><ins class="diff-new">
consist
of
ASCII
alphanumeric
characters
and
</ins><strong><ins class="diff-new">
must
</ins></strong><ins class="diff-new">
start
with
an
alphabetic
character.
Thus,
the
string
is
syntactically
an
XML
name.
</ins></p><p><ins class="diff-new">
An
implementation
is
free
to
generate
an
identifier
in
any
convenient
way
provided
that
it
always
generates
the
same
identifier
for
the
same
node
and
that
different
identifiers
are
always
generated
from
different
nodes.
An
implementation
is
under
no
obligation
to
generate
the
same
identifiers
each
time
a
document
is
transformed
or
queried.
</ins></p></dd><dt class="label"><ins class="diff-new">
Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
The
following
errors
may
be
raised
when
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
omitted:
if
the
context
item
is
undefined
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002"><ins class="diff-new">
err:XPDY0002
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup><ins class="diff-new">
;
if
the
context
item
is
not
a
node
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004"><ins class="diff-new">
err:XPTY0004
</ins></a><ins class="diff-new">
]
</ins><sup><small><ins class="diff-new">
XP
</ins></small></sup>.</p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
There
is
no
guarantee
that
a
generated
unique
identifier
will
be
distinct
from
any
unique
IDs
specified
in
the
source
document.
</ins></p><p><ins class="diff-new">
There
is
no
inverse
to
this
function;
it
is
not
directly
possible
to
find
the
node
with
a
given
generated
ID.
Of
course,
it
is
possible
to
search
a
given
sequence
of
nodes
using
an
expression
such
as
</ins><code><ins class="diff-new">
$nodes[generate-id()=$id]
</ins></code>.</p><p><ins class="diff-new">
It
is
advisable,
but
not
required,
for
implementations
to
generate
IDs
that
are
distinct
even
when
compared
using
a
case-blind
collation.
</ins></p><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-new">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-new">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
This
function
was
moved
from
XSLT
to
F+O
as
a
decision
of
the
WG
on
23
Feb
2009.
</ins></td></tr></table></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><p><ins class="diff-new">
The
primary
use
case
for
this
function
is
to
generate
hyperlinks.
For
example,
when
generating
HTML,
an
anchor
for
a
given
section
</ins><code><ins class="diff-new">
$sect
</ins></code><ins class="diff-new">
can
be
generated
by
writing
(in
either
XSLT
or
XQuery):
</ins></p><p><code><ins class="diff-new">
&lt;a
name="{generate-id($sect)}"/&gt;
</ins></code></p><p><ins class="diff-new">
and
a
link
to
that
section
can
then
be
produced
with
code
such
as:
</ins></p><p><code><ins class="diff-new">
see
&lt;a
href="#{generate-id($sect)}"&gt;here&lt;/a&gt;
</ins></code></p><p><ins class="diff-new">
Note
that
anchors
generated
in
this
way
will
not
necessarily
be
the
same
each
time
a
document
is
republished.
</ins></p></dd></dl></div><div class="div3"><h4><a name="func-parse" id="func-parse"></a><ins class="diff-new">
14.5.10
fn:parse
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
This
function
takes
as
input
an
XML
document
represented
as
a
string,
and
returns
the
document
node
at
the
root
of
an
XDM
tree
representing
the
parsed
document.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:parse
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
document-node(element(*,
xs:untyped))
</ins></code></div></div><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="2"><code class= "function"><ins class="diff-new">
fn:parse
</ins></code><ins class="diff-new">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-new">
$arg
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-new">
xs:string
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-new">
$baseURI
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
document-node(element(*,
xs:untyped))
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
Schema
validation
is
</ins><em><ins class="diff-new">
not
</ins></em><ins class="diff-new">
invoked,
which
means
that
the
nodes
in
the
returned
document
will
all
be
untyped.
</ins></p><p><ins class="diff-new">
The
precise
process
used
to
construct
the
XDM
instance
is
implementation-defined.
In
particular,
it
is
implementation-defined
whether
DTD
validation
is
invoked,
and
it
is
implementation-defined
whether
an
XML
1.0
or
XML
1.1
parser
is
used.
</ins></p><p><ins class="diff-new">
If
the
second
argument
is
present
then
it
provides
a
URI
which
will
be
used
as
the
base
URI
of
the
document.
This
serves
both
as
the
base
URI
used
by
the
XML
parser
to
resolve
relative
entity
references
within
the
document,
and
as
the
base
URI
of
the
document
node
that
is
returned.
If
the
second
argument
is
omitted,
then
the
static
base
URI
of
the
</ins><code><ins class="diff-new">
fn:parse
</ins></code><ins class="diff-new">
function
call
is
used.
</ins></p><p><ins class="diff-new">
The
function
is
</ins><em><ins class="diff-new">
not
</ins></em><a title="stable" class="termref" href="#stable"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
stable
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a>:<ins class="diff-new">
that
is,
if
the
function
is
called
twice
with
the
same
arguments,
it
is
</ins><a title="implementation dependent" class="termref" href="#implementation-dependent"><span class= "arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
implementation-dependent
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
whether
the
same
node
is
returned
on
both
occasions.
</ins></p></dd><dt class="label"><ins class="diff-new">
Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
A
dynamic
error
[
</ins><a href="#ERRFODC0006" title= "err:FODC0006"><ins class="diff-new">
err:FODC0006
</ins></a><ins class="diff-new">
]
is
raised
if
the
content
of
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
not
a
well-formed
and
namespace-well-formed
XML
document.
</ins></p><p><ins class="diff-new">
A
dynamic
error
[
</ins><a href="#ERRFODC0007" title= "err:FODC0007"><ins class="diff-new">
err:FODC0007
</ins></a><ins class="diff-new">
]
is
raised
if
the
content
of
</ins><code><ins class="diff-new">
$baseURI
</ins></code><ins class="diff-new">
is
not
a
valid
absolute
URI.
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
Since
the
XML
document
is
presented
to
the
parser
as
a
string,
rather
than
as
a
sequence
of
octets,
the
encoding
specified
within
the
XML
declaration
has
no
meaning.
If
the
XML
parser
accepts
input
only
in
the
form
of
a
sequence
of
octets,
then
the
processor
must
ensure
that
the
string
is
encoded
as
octets
in
a
way
that
is
consistent
with
rules
used
by
the
XML
parser
to
detect
the
encoding.
</ins></p><p><ins class="diff-new">
The
primary
use
case
for
this
function
is
to
handle
input
documents
that
contain
nested
XML
documents
embedded
within
CDATA
sections.
Since
the
content
of
the
CDATA
section
are
exposed
as
text,
the
receiving
query
or
stylesheet
may
pass
this
text
to
the
</ins><code><ins class="diff-new">
fn:parse
</ins></code><ins class="diff-new">
function
to
create
a
tree
representation
of
the
nested
document.
</ins></p><p><ins class="diff-new">
Similarly,
nested
XML
within
comments
is
sometimes
encountered,
and
lexical
XML
is
sometimes
returned
by
extension
functions,
for
example,
functions
that
access
web
services
or
read
from
databases.
</ins></p><p><ins class="diff-new">
A
use
case
arises
in
XSLT
where
there
is
a
need
to
preprocess
an
input
document
before
parsing.
For
example,
an
application
might
wish
to
edit
the
document
to
remove
its
DOCTYPE
declaration.
This
can
be
done
by
reading
the
raw
text
using
the
</ins><code><ins class="diff-new">
fn:unparsed-text
</ins></code><ins class="diff-new">
function,
editing
the
resulting
string,
and
then
passing
it
to
the
</ins><code><ins class="diff-new">
fn:parse
</ins></code><ins class="diff-new">
function.
</ins></p></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
fn:parse("&lt;alpha&gt;abcd&lt;/alpha&gt;")
</ins></code><ins class="diff-new">
returns
a
newly
created
document
node,
having
an
</ins><code><ins class="diff-new">
alpha
</ins></code><ins class="diff-new">
element
as
its
only
child;
the
</ins><code><ins class="diff-new">
alpha
</ins></code><ins class="diff-new">
element
in
turn
is
the
parent
of
a
text
node
whose
string
value
is
</ins><code><ins class="diff-new">
"abcd"
</ins></code>.</p></dd></dl></div><div class="div3"><h4><a name="func-serialize" id="func-serialize"></a><ins class="diff-new">
14.5.11
fn:serialize
</ins></h4><dl><dt class="label"><ins class="diff-new">
Summary
</ins></dt><dd><p><ins class="diff-new">
This
function
serializes
the
supplied
node
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
as
described
in
</ins><a href="#"><ins class="diff-new">
[serialization]
</ins></a>,<ins class="diff-new">
returning
the
serialized
node
as
a
string.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:serialize
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
node()
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></div></div><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
fn:serialize
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
node()
</ins></code>,<code class="arg"><ins class="diff-new">
$params
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
node()*
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string
</ins></code></div></div></dd><dt class="label"><ins class="diff-new">
Rules
</ins></dt><dd><p><ins class="diff-new">
The
node
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
acts
as
the
(singleton)
input
sequence
to
the
serialization
process.
</ins></p><p><ins class="diff-new">
The
single-argument
version
of
this
function
has
the
same
effect
as
the
two-argument
version
called
with
</ins><code><ins class="diff-new">
$params
</ins></code><ins class="diff-new">
set
to
an
empty
sequence.
</ins></p><p><ins class="diff-new">
The
</ins><code><ins class="diff-new">
$params
</ins></code><ins class="diff-new">
argument
is
used
to
identify
a
set
of
serialization
parameters.
These
are
supplied
in
the
form
of
a
sequence
of
nodes,
typically
element
or
attribute
nodes.
Each
node
represents
one
serialization
parameter.
The
parameters
are
interpreted
as
follows:
</ins></p><ol class="enumar"><li><p><ins class="diff-new">
The
name
of
the
node
is
used
for
the
name
of
the
serialization
parameter.
</ins></p></li><li><p><ins class="diff-new">
The
string
value
of
the
node
is
used
for
the
value
of
the
parameter.
</ins></p></li><li><p><ins class="diff-new">
If
more
than
one
node
in
the
sequence
has
the
same
name,
then
the
one
that
appears
last
in
the
sequence
is
used.
</ins></p></li><li><p><ins class="diff-new">
If
any
node
in
the
sequence
has
a
name
that
is
not
recognized
as
the
name
of
a
serialization
parameter,
then
the
node
is
ignored.
</ins></p></li><li><p><ins class="diff-new">
Where
a
serialization
parameter
is
a
list
of
values
(for
example,
</ins><code><ins class="diff-new">
cdata-section-elements
</ins></code><ins class="diff-new">
)
its
value
is
supplied
as
a
whitespace-separated
list.
</ins></p></li><li><p><ins class="diff-new">
Where
the
value
of
a
serialization
parameter
includes
an
expanded-QName
(for
example,
</ins><code><ins class="diff-new">
method
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
cdata-section-elements
</ins></code><ins class="diff-new">
),
the
value
is
supplied
as
a
lexical
QName,
which
is
resolved
with
respect
to
the
in-scope
namespaces
for
the
node
in
which
the
parameter
value
is
supplied,
excluding
any
default
namespace
(so
a
name
with
no
prefix
is
in
no
namespace).
</ins></p></li><li><p><ins class="diff-new">
The
</ins><code><ins class="diff-new">
use-character-maps
</ins></code><ins class="diff-new">
property
is
not
available,
and
any
attempt
to
specify
a
value
for
this
property
is
a
dynamic
error
[SEPM0016].
</ins></p></li><li><p><ins class="diff-new">
Any
serialization
parameter
for
which
no
value
is
supplied
takes
an
implementation-defined
default
value.
However,
the
default
for
the
</ins><code><ins class="diff-new">
method
</ins></code><ins class="diff-new">
parameter
is
always
</ins><code><ins class="diff-new">
xml
</ins></code>.</p></li></ol><p><ins class="diff-new">
The
final
stage
of
serialization,
that
is,
encoding,
is
skipped.
If
the
serializer
does
not
allow
this
phase
to
be
skipped,
then
the
sequence
of
octets
returned
by
the
serializer
is
decoded
into
a
string
by
reversing
the
character
encoding
performed
in
the
final
stage.
</ins></p></dd><dt class="label"><ins class="diff-new">
Error
Conditions
</ins></dt><dd><p><ins class="diff-new">
The
serialization
process
will
raise
an
error
if
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
an
attribute
or
namespace
node.
</ins></p><p><ins class="diff-new">
If
any
serialization
error
occurs,
including
the
detection
of
an
invalid
value
for
a
serialization
parameter,
this
results
in
the
</ins><code><ins class="diff-new">
fn:serialize
</ins></code><ins class="diff-new">
call
failing
with
a
dynamic
error.
</ins></p></dd><dt class="label"><ins class="diff-new">
Notes
</ins></dt><dd><p><ins class="diff-new">
One
use
case
arises
when
there
is
a
need
to
construct
an
XML
document
containing
nested
XML
documents
within
a
CDATA
section
(or
on
occasions
within
a
comment).
See
</ins><a href= "#func-parse"><code><ins class="diff-new">
fn:parse
</ins></code></a><ins class="diff-new">
for
further
details.
</ins></p><p><ins class="diff-new">
Another
case
arises
when
calling
extension
functions
that
expect
a
lexical
XML
document
as
input.
</ins></p><p><ins class="diff-new">
There
are
also
use
cases
where
the
application
wants
to
post-process
the
output
of
a
query
or
transformation,
for
example
by
adding
an
internal
DTD
subset.
</ins></p></dd><dt class="label"><ins class="diff-new">
Examples
</ins></dt><dd><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-new">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-new">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
Add
some
examples!
</ins></td></tr></table></dd></dl></div>
</div>
</div>
<div class="div1">
<h2>
<a name="context" id="context">
</a>
<del class="diff-old">16
</del>
<ins class="diff-chg">15
</ins>
Context
Functions
</h2>
<p>
The
following
functions
are
defined
to
obtain
information
from
the
dynamic
context.
</p>
<table summary="Function/operator summary" border="1">
<thead>
<tr>
<th>
Function
</th>
<th>
Meaning
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="#func-position">
<code>
fn:position
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">position
of
the
</del>
context
<del class="diff-old">item
within
</del>
<ins class="diff-chg">position
from
</ins>
the
<del class="diff-old">sequence
of
items
currently
being
processed.
</del>
<ins class="diff-chg">dynamic
context.
</ins>
</td>
</tr>
<tr>
<td>
<a href="#func-last">
<code>
fn:last
</code>
</a>
</td>
<td>
Returns
the
<del class="diff-old">number
of
items
in
</del>
<ins class="diff-chg">context
size
from
</ins>
the
<del class="diff-old">sequence
of
items
currently
being
processed.
</del>
<ins class="diff-chg">dynamic
context.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-current-dateTime">
<code>
fn:current-dateTime
</code>
</a>
</td>
<td>
Returns
the
current
<del class="diff-old">xs:dateTime
.
</del>
<ins class="diff-chg">date
and
time
(with
timezone).
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-current-date">
<code>
fn:current-date
</code>
</a>
</td>
<td>
Returns
the
current
<del class="diff-old">xs:date
.
</del>
<ins class="diff-chg">date.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-current-time">
<code>
fn:current-time
</code>
</a>
</td>
<td>
Returns
the
current
<del class="diff-old">xs:time
.
</del>
<ins class="diff-chg">time.
</ins>
</td>
</tr>
<tr>
<td>
<a href= "#func-implicit-timezone">
<code>
fn:implicit-timezone
</code>
</a>
</td>
<td>
Returns
the
value
of
the
implicit
timezone
property
from
the
dynamic
context.
</td>
</tr>
<tr>
<td>
<a href= "#func-default-collation">
<code>
fn:default-collation
</code>
</a>
</td>
<td>
Returns
the
value
of
the
default
collation
property
from
the
static
context.
</td>
</tr>
<tr>
<td>
<a href= "#func-static-base-uri">
<code>
fn:static-base-uri
</code>
</a>
</td>
<td>
Returns
the
value
of
the
Base
URI
property
from
the
static
context.
</td>
</tr>
</tbody>
</table>
<div class="div2">
<h3>
<a name="func-position" id="func-position">
</a>
<del class="diff-old">16.1
</del>
<ins class="diff-chg">15.1
</ins>
fn:position
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
context
position
from
the
dynamic
context.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:position
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
the
context
position
from
the
dynamic
context.
(See
<a href= "http://www.w3.org/TR/xpath20/#id-xp-evaluation-context-components">
Section
C.2
Dynamic
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>.)
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p>
If
the
context
item
is
undefined,
an
error
is
raised:
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002">
err:XPDY0002
</a>
]
<sup>
<small>
XP
</small>
</sup>.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-last" id="func-last">
</a>
<del class="diff-old">16.2
</del>
<ins class="diff-chg">15.2
</ins>
fn:last
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
context
size
from
the
dynamic
context.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:last
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
the
context
size
from
the
dynamic
context.
(See
<a href= "http://www.w3.org/TR/xpath20/#id-xp-evaluation-context-components">
Section
C.2
Dynamic
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>.)
</p>
</dd>
<dt class="label">
<ins class="diff-new">Error
Conditions
</ins></dt><dd><p>
If
the
context
item
is
undefined,
an
error
is
raised:
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPDY0002" title= "err:XPDY0002">
err:XPDY0002
</a>
]
<sup>
<small>
XP
</small>
</sup>.
</p>
</dd>
<dt class="label">
<ins class="diff-new">Examples
</ins></dt><dd><p><ins class="diff-new">
The
expression
</ins><code><ins class="diff-new">
(1
to
20)[fn:last()
-
1]
</ins></code><ins class="diff-new">
returns
</ins><code><ins class="diff-new">
19
</ins></code>.</p></dd></dl>
</div>
<div class="div2">
<h3>
<a name="func-current-dateTime" id= "func-current-dateTime">
</a>
<del class="diff-old">16.3
</del>
<ins class="diff-chg">15.3
</ins>
fn:current-dateTime
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
current
date
and
time
(with
timezone).
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:current-dateTime
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:dateTimeStamp
</ins>
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
the
current
dateTime
(with
timezone)
from
the
dynamic
context.
(See
<a href= "http://www.w3.org/TR/xpath20/#id-xp-evaluation-context-components">
Section
C.2
Dynamic
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>.)
This
is
an
<code>
xs:dateTime
</code>
that
is
current
at
some
time
during
the
evaluation
of
a
query
or
transformation
in
which
<code>
<del class="diff-old">fn:current-dateTime()
</del>
<ins class="diff-chg">fn:current-dateTime
</ins>
</code>
is
executed.
</p>
<p>
This
function
is
<a title="stable" class="termref" href= "#stable">
<span class="arrow">
·
</span>
stable
<span class= "arrow">
·
</span>
</a>.
The
precise
instant
during
the
query
or
transformation
represented
by
the
value
of
<code>
fn:current-dateTime()
</code>
is
<a title= "implementation dependent" class="termref" href= "#implementation-dependent">
<span class= "arrow">
·
</span>
implementation
dependent
<span class= "arrow">
·
</span>
</a>.
</p>
<del class="diff-old">16.3.1
</del>
<p>
<ins class="diff-chg">If
the
implementation
supports
data
types
from
XSD
1.1
then
the
returned
value
will
be
an
instance
of
</ins><code><ins class="diff-chg">
xs:dateTimeStamp
</ins></code>.<ins class="diff-chg">
Otherwise,
the
only
guarantees
are
that
it
will
be
an
instance
of
</ins><code><ins class="diff-chg">
xs:dateTime
</ins></code><ins class="diff-chg">
and
will
have
a
timezone
component.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Notes
</ins></dt><dd><p><ins class="diff-chg">
The
returned
</ins><code><ins class="diff-chg">
xs:dateTime
</ins></code><ins class="diff-chg">
will
always
have
an
associated
timezone,
which
will
always
be
the
same
as
the
implicit
timezone
in
the
dynamic
context
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
<code>
fn:current-dateTime()
</code>
returns
an
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:dateTimeStamp
</ins>
</code>
corresponding
to
the
current
date
and
time.
For
example,
<del class="diff-old">an
invocation
</del>
<ins class="diff-chg">a
call
</ins>
of
<code>
fn:current-dateTime()
</code>
might
return
<code>
2004-05-12T18:17:15.125Z
</code>
corresponding
to
the
current
time
on
May
12,
2004
in
timezone
<code>
Z
</code>.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-current-date" id="func-current-date">
</a>
<del class="diff-old">16.4
</del>
<ins class="diff-chg">15.4
</ins>
fn:current-date
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
current
date.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:current-date
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:date
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
<code>
xs:date(fn:current-dateTime())
</code>.
This
is
an
<code>
xs:date
</code>
(with
timezone)
that
is
current
at
some
time
during
the
evaluation
of
a
query
or
transformation
in
which
<code>
<del class="diff-old">fn:current-date()
</del>
<ins class="diff-chg">fn:current-date
</ins>
</code>
is
executed.
</p>
<p>
This
function
is
<a title="stable" class="termref" href= "#stable">
<span class="arrow">
·
</span>
stable
<span class= "arrow">
·
</span>
</a>.
The
precise
instant
during
the
query
or
transformation
represented
by
the
value
of
<code>
<del class="diff-old">fn:current-date()
</del>
<ins class="diff-chg">fn:current-date
</ins>
</code>
is
<a title="implementation dependent" class="termref" href="#implementation-dependent">
<span class= "arrow">
·
</span>
implementation
dependent
<span class= "arrow">
·
</span>
</a>.
</p>
<del class="diff-old">16.4.1
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd><p><ins class="diff-chg">
The
returned
date
will
always
have
an
associated
timezone,
which
will
always
be
the
same
as
the
implicit
timezone
in
the
dynamic
context
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
<code>
fn:current-date()
</code>
returns
an
<code>
xs:date
</code>
corresponding
to
the
current
<del class="diff-old">date
and
time.
</del>
<ins class="diff-chg">date.
</ins>
For
example,
<del class="diff-old">an
invocation
</del>
<ins class="diff-chg">a
call
</ins>
of
<code>
fn:current-date()
</code>
might
return
<code>
2004-05-12+01:00
</code>.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-current-time" id="func-current-time">
</a>
<del class="diff-old">16.5
</del>
<ins class="diff-chg">15.5
</ins>
fn:current-time
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
current
time.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:current-time
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:time
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
<code>
xs:time(fn:current-dateTime())
</code>.
This
is
an
<code>
xs:time
</code>
(with
timezone)
that
is
current
at
some
time
during
the
evaluation
of
a
query
or
transformation
in
which
<code>
<del class="diff-old">fn:current-time()
</del>
<ins class="diff-chg">fn:current-time
</ins>
</code>
is
executed.
</p>
<p>
This
function
is
<a title="stable" class="termref" href= "#stable">
<span class="arrow">
·
</span>
stable
<span class= "arrow">
·
</span>
</a>.
The
precise
instant
during
the
query
or
transformation
represented
by
the
value
of
<code>
fn:current-time()
</code>
is
<a title= "implementation dependent" class="termref" href= "#implementation-dependent">
<span class= "arrow">
·
</span>
implementation
dependent
<span class= "arrow">
·
</span>
</a>.
</p>
<del class="diff-old">16.5.1
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd><p><ins class="diff-chg">
The
returned
time
will
always
have
an
associated
timezone,
which
will
always
be
the
same
as
the
implicit
timezone
in
the
dynamic
context
</ins></p></dd><dt class="label">
Examples
</dt>
<dd>
<p>
<code>
fn:current-time()
</code>
returns
an
<code>
xs:time
</code>
corresponding
to
the
current
<del class="diff-old">date
and
</del>
time.
For
example,
<del class="diff-old">an
invocation
</del>
<ins class="diff-chg">a
call
</ins>
of
<code>
fn:current-time()
</code>
might
return
<code>
23:17:00.000-05:00
</code>.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-implicit-timezone" id= "func-implicit-timezone">
</a>
<del class="diff-old">16.6
</del>
<ins class="diff-chg">15.6
</ins>
fn:implicit-timezone
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
value
of
the
implicit
timezone
property
from
the
dynamic
context.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:implicit-timezone
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:dayTimeDuration
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
the
value
of
the
implicit
timezone
property
from
the
dynamic
context.
Components
of
the
dynamic
context
are
discussed
in
<a href= "http://www.w3.org/TR/xpath20/#id-xp-evaluation-context-components">
Section
C.2
Dynamic
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-default-collation" id= "func-default-collation">
</a>
<del class="diff-old">16.7
</del>
<ins class="diff-chg">15.7
</ins>
fn:default-collation
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
value
of
the
default
collation
property
from
the
static
context.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:default-collation
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
</del>
Returns
the
value
of
the
default
collation
property
from
the
static
context.
Components
of
the
static
context
are
discussed
in
<a href= "http://www.w3.org/TR/xpath20/#id-xp-static-context-components">
Section
C.1
Static
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>.
</p>
<del class="diff-old">Note:
</del>
</dd>
<dt class="label">
<ins class="diff-chg">Notes
</ins></dt><dd>
<p>
The
default
collation
property
can
never
be
undefined.
If
it
is
not
explicitly
defined,
a
system
defined
default
can
be
invoked.
If
this
is
not
provided,
the
Unicode
<del class="diff-old">code
point
</del>
<ins class="diff-chg">codepoint
</ins>
collation
(
<code>
http://www.w3.org/2005/xpath-functions/collation/codepoint
</code>
)
is
used.
</p>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="func-static-base-uri" id= "func-static-base-uri">
</a>
<del class="diff-old">16.8
</del>
<ins class="diff-chg">15.8
</ins>
fn:static-base-uri
</h3>
<dl>
<dt class="label">
<ins class="diff-new">Summary
</ins></dt><dd><p><ins class="diff-new">
Returns
the
value
of
the
Base
URI
property
from
the
static
context.
</ins></p></dd><dt class="label"><ins class="diff-new">
Signature
</ins></dt><dd>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:static-base-uri
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyURI?
</code>
</div>
</div>
</dd>
<dt class="label">
<ins class="diff-new">Rules
</ins></dt><dd>
<p>
<del class="diff-old">Summary:
Returns
</del>
<ins class="diff-chg">The
function
returns
</ins>
the
value
of
the
Base
URI
property
from
the
static
context.
If
the
Base
URI
property
is
undefined,
the
empty
sequence
is
returned.
</p>
<p>
Components
of
the
static
context
are
discussed
in
<a href= "http://www.w3.org/TR/xpath20/#id-xp-static-context-components">
Section
C.1
Static
Context
Components
</a>
<sup>
<small>
XP
</small>
</sup>
.
</p>
</dd>
</dl>
</div>
</div>
<div class="div1">
<h2>
<a name="higher-order-functions" id= "higher-order-functions">
</a>
<ins class="diff-chg">16
Functions
on
Functions
</ins></h2><p><ins class="diff-chg">
The
following
functions
operate
on
function
items,
that
is,
values
referring
to
a
function.
</ins></p><table summary="Function/operator summary" border="1"><thead><tr><th><ins class="diff-chg">
Function
</ins></th><th><ins class="diff-chg">
Meaning
</ins></th></tr></thead><tbody><tr><td><a href= "#func-function-name"><code><ins class="diff-chg">
fn:function-name
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
name
of
the
function
identified
by
a
function
item.
</ins></td></tr><tr><td><a href= "#func-function-arity"><code><ins class="diff-chg">
fn:function-arity
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
arity
of
the
function
identified
by
a
function
item.
</ins></td></tr><tr><td><a href= "#func-partial-apply"><code><ins class="diff-chg">
fn:partial-apply
</ins></code></a></td><td><ins class="diff-chg">
Returns
the
new
function
item
obtained
by
binding
one
of
the
arguments
of
a
supplied
function
item
to
a
value.
That
is,
it
curries
the
supplied
function.
</ins></td></tr></tbody></table><div class="div2"><h3><a name="func-function-name" id="func-function-name"></a><ins class="diff-chg">
16.1
fn:function-name
</ins></h3><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
name
of
the
function
identified
by
a
function
item.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
fn:function-name
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg"><ins class="diff-chg">
$func
</ins></code><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-chg">
function()
</ins></code><ins class="diff-chg">
)
</ins><code class="as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class="return-type"><ins class="diff-chg">
xs:QName?
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$func
</ins></code><ins class="diff-chg">
refers
to
a
named
function,
</ins><code><ins class="diff-chg">
fn:function-name($func)
</ins></code><ins class="diff-chg">
returns
the
name
of
that
function.
</ins></p><p><ins class="diff-chg">
Otherwise
(
</ins><code><ins class="diff-chg">
$func
</ins></code><ins class="diff-chg">
refers
to
an
anonymous
function),
</ins><code><ins class="diff-chg">
fn:function-name($func)
</ins></code><ins class="diff-chg">
returns
an
empty
sequence.
</ins></p><p><ins class="diff-chg">
The
prefix
part
of
the
returned
QName
is
</ins><a title= "implementation dependent" class="termref" href= "#implementation-dependent"><span class= "arrow"><ins class="diff-chg">
·
</ins></span><ins class="diff-chg">
implementation
dependent
</ins><span class= "arrow"><ins class="diff-chg">
·
</ins></span></a>.</p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:function-name(fn:contains#2)
</ins></code><ins class="diff-chg">
returns
</ins><a href= "#func-QName"><code><ins class="diff-chg">
fn:QName("http://www.w3.org/2005/xpath-functions",
"fn:contains")
</ins></code></a>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:function-name(function($node){count($node/*})
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
()
</ins></code>.</p></dd></dl></div><div class="div2"><h3><a name="func-function-arity" id="func-function-arity"></a><ins class="diff-chg">
16.2
fn:function-arity
</ins></h3><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
arity
of
the
function
identified
by
a
function
item.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signature
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
fn:function-arity
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg"><ins class="diff-chg">
$func
</ins></code><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-chg">
function()
</ins></code><ins class="diff-chg">
)
</ins><code class="as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class="return-type"><ins class="diff-chg">
xs:integer
</ins></code></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
</ins><code><ins class="diff-chg">
fn:function-arity
</ins></code><ins class="diff-chg">
function
returns
the
arity
(number
of
arguments)
of
the
function
identified
by
</ins><code><ins class="diff-chg">
$func
</ins></code>.</p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:function-arity(fn:contains#2)
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
2
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
fn:function-arity(function($node){name($node})
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
1
</ins></code>.</p></dd></dl></div><div class="div2"><h3><a name="func-partial-apply" id="func-partial-apply"></a><ins class="diff-chg">
16.3
fn:partial-apply
</ins></h3><dl><dt class="label"><ins class="diff-chg">
Summary
</ins></dt><dd><p><ins class="diff-chg">
Returns
the
new
function
item
obtained
by
binding
one
of
the
arguments
of
a
supplied
function
item
to
a
value.
That
is,
it
curries
the
supplied
function.
</ins></p></dd><dt class="label"><ins class="diff-chg">
Signatures
</ins></dt><dd><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-chg">
fn:partial-apply
</ins></code><ins class="diff-chg">
(
</ins><code class= "arg"><ins class="diff-chg">
$func
</ins></code><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-chg">
function()
</ins></code>,<code class="arg"><ins class="diff-chg">
$arg
</ins></code><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
item()*
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
function()
</ins></code></div></div><div class="exampleInner"><div class="proto"><table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype"><tr><td valign="baseline" rowspan="3"><code class= "function"><ins class="diff-chg">
fn:partial-apply
</ins></code><ins class="diff-chg">
(
</ins></td><td valign="baseline"><code class="arg"><ins class="diff-chg">
$func
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
function()
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$arg
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class="type"><ins class="diff-chg">
item()*
</ins></code>,</td></tr><tr><td valign="baseline"><code class="arg"><ins class="diff-chg">
$argNum
</ins></code></td><td valign="baseline"><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
)
</ins><code class= "as"><ins class="diff-chg">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-chg">
function()
</ins></code></td></tr></table></div></div></dd><dt class="label"><ins class="diff-chg">
Rules
</ins></dt><dd><p><ins class="diff-chg">
The
effect
of
calling
the
2-argument
version
of
this
function
is
the
same
as
calling
the
3-argument
version
with
</ins><code><ins class="diff-chg">
$argNum
</ins></code><ins class="diff-chg">
set
to
1
(one).
</ins></p><p><ins class="diff-chg">
The
result
of
the
function
is
a
new
function
item
with
the
following
properties:
</ins></p><ul><li><p><ins class="diff-chg">
The
set
of
variable
values
is
the
same
as
the
variable
values
of
</ins><code><ins class="diff-chg">
$func
</ins></code>.</p></li><li><p><ins class="diff-chg">
The
name
is
absent
(the
function
item
is
anonymous)
</ins></p></li><li><p><ins class="diff-chg">
The
arity
is
one
less
than
the
arity
of
</ins><code><ins class="diff-chg">
$func
</ins></code></p></li><li><p><ins class="diff-chg">
The
new
function
</ins><var><ins class="diff-chg">
NF
</ins></var><ins class="diff-chg">
has
a
signature
which
is
the
same
as
the
signature
of
</ins><code><ins class="diff-chg">
$func
</ins></code>,<ins class="diff-chg">
removing
the
parameter
specified
by
</ins><code><ins class="diff-chg">
$argNum
</ins></code>,<ins class="diff-chg">
and
a
body
whose
effect
is
the
same
as
the
effect
of
invoking
</ins><code><ins class="diff-chg">
$func
</ins></code><ins class="diff-chg">
with
the
arguments
from
the
invocation
of
</ins><var><ins class="diff-chg">
NF
</ins></var>,<ins class="diff-chg">
inserting
the
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
as
the
value
of
argument
</ins><code><ins class="diff-chg">
$argNum.
</ins></code></p></li></ul><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-chg">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-chg">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-chg">
An
alternative
to
this
function
has
been
proposed
in
</ins><a href= "http://www.w3.org/Bugs/Public/show_bug.cgi?id=7350"><ins class="diff-chg">
bug
7350
</ins></a>:<ins class="diff-chg">
instead
of
the
</ins><code><ins class="diff-chg">
fn:partial-apply
</ins></code><ins class="diff-chg">
function,
use
custom
syntax
such
as
</ins><code><ins class="diff-chg">
max(?,
'http://my-collation/de')
</ins></code><ins class="diff-chg">
to
create
a
function
equivalent
to
</ins><code><ins class="diff-chg">
fn:partial-apply(max#2,
'http://my-collation/de',
2)
</ins></code>.<ins class="diff-chg">
This
would
allow
more
than
one
argument
to
be
bound
in
a
single
call,
as
well
as
being
more
readable.
</ins></td></tr></table></dd><dt class="label"><ins class="diff-chg">
Error
Conditions
</ins></dt><dd><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$argNum
</ins></code><ins class="diff-chg">
is
less
than
1
(one)
or
greater
than
</ins><a href= "#func-function-arity"><code><ins class="diff-chg">
fn:function-arity($func)
</ins></code></a>,<ins class="diff-chg">
then
a
dynamic
error
[
</ins><a href="#ERRFOFU0001" title= "err:FOFU0001"><ins class="diff-chg">
err:FOFU0001
</ins></a><ins class="diff-chg">
]
is
raised.
</ins></p><p><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
$arg
</ins></code><ins class="diff-chg">
cannot
be
converted
to
the
required
type
of
the
corresponding
argument
of
</ins><code><ins class="diff-chg">
$func
</ins></code><ins class="diff-chg">
by
applying
the
function
conversion
rules,
then
a
type
error
[
</ins><a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004"><ins class="diff-chg">
err:XPTY0004
</ins></a><ins class="diff-chg">
]
</ins><sup><small><ins class="diff-chg">
XP
</ins></small></sup><strong><ins class="diff-chg">
may
</ins></strong><ins class="diff-chg">
be
raised.
(If
a
type
error
is
not
raised
at
this
stage,
it
will
be
raised
later
when
the
new
function
is
invoked.)
</ins></p></dd><dt class="label"><ins class="diff-chg">
Examples
</ins></dt><dd><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
let
$f
:=
fn:partial-apply(fn:contains#2,
"e",
2)
return
($f("Mike"),
$f("John"))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
(true(),
false())
</ins></code>.</p><p><ins class="diff-chg">
The
expression
</ins><code><ins class="diff-chg">
let
$tail
:=
fn:partial-apply(fn:remove#2,
1,
2)
return
$tail((1,2,3,4))
</ins></code><ins class="diff-chg">
returns
</ins><code><ins class="diff-chg">
(2,3,4)
</ins></code>.</p></dd></dl></div></div><div class="div1"><h2><a name="constructor-functions" id= "constructor-functions">
</a>
17
<ins class="diff-new">Constructor
Functions
</ins></h2><div class="div2"><h3><a name="constructor-functions-for-xsd-types" id= "constructor-functions-for-xsd-types"></a><ins class="diff-new">
17.1
Constructor
Functions
for
XML
Schema
Built-in
Types
</ins></h3><table border="1" summary="Editorial note"><tr><td align="left" valign="top" width="50%"><b><ins class="diff-new">
Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-new">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
The
following
reference
needs
to
be
rephrased
so
it
refers
to
"whichever
version
of
XSD
the
implementation
chooses
to
support".
</ins></td></tr></table><p><ins class="diff-new">
Every
built-in
atomic
type
that
is
defined
in
</ins><a href= "#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a>,<ins class="diff-new">
except
</ins><code><ins class="diff-new">
xs:anyAtomicType
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code>,<ins class="diff-new">
has
an
associated
constructor
function.
</ins><code><ins class="diff-new">
xs:untypedAtomic
</ins></code>,<ins class="diff-new">
defined
in
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#types"><ins class="diff-new">
Section
2.6
Types
</ins></a><sup><small><ins class="diff-new">
DM
</ins></small></sup><ins class="diff-new">
and
the
two
derived
types
</ins><code><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
defined
in
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#types"><ins class="diff-new">
Section
2.6
Types
</ins></a><sup><small><ins class="diff-new">
DM
</ins></small></sup><ins class="diff-new">
also
have
associated
constructor
functions.
</ins></p><p><ins class="diff-new">
A
constructor
function
is
not
defined
for
</ins><code><ins class="diff-new">
xs:anyAtomicType
</ins></code><ins class="diff-new">
as
there
are
no
atomic
values
with
type
annotation
</ins><code><ins class="diff-new">
xs:anyAtomicType
</ins></code><ins class="diff-new">
at
runtime,
although
this
can
be
a
statically
inferred
type.
A
constructor
function
is
not
defined
for
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
since
it
is
defined
as
an
abstract
type
in
</ins><a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a>.<ins class="diff-new">
If
the
static
context
(See
</ins><a href= "http://www.w3.org/TR/xpath20/#static_context"><ins class="diff-new">
Section
2.1.1
Static
Context
</ins></a><sup><small><ins class="diff-new">
XP
</ins></small></sup><ins class="diff-new">
)
contains
a
type
derived
from
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
then
a
constructor
function
is
defined
for
it.
See
</ins><a href= "#constructor-functions-for-user-defined-types"><b><ins class="diff-new">
17.3
Constructor
Functions
for
User-Defined
Types
</ins></b></a>.</p><p><ins class="diff-new">
The
form
of
the
constructor
function
for
a
type
</ins><em><ins class="diff-new">
prefix:TYPE
</ins></em><ins class="diff-new">
is:
</ins></p><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
prefix:TYPE
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
prefix:TYPE?
</ins></code></div></div><p><ins class="diff-new">
If
</ins><code><ins class="diff-new">
$arg
</ins></code><ins class="diff-new">
is
the
empty
sequence,
the
empty
sequence
is
returned.
For
example,
the
signature
of
the
constructor
function
corresponding
to
the
</ins><code><ins class="diff-new">
xs:unsignedInt
</ins></code><ins class="diff-new">
type
defined
in
</ins><a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a><ins class="diff-new">
is:
</ins></p><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
xs:unsignedInt
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:unsignedInt?
</ins></code></div></div><p><ins class="diff-new">
Invoking
the
constructor
function
</ins><code><ins class="diff-new">
xs:unsignedInt(12)
</ins></code><ins class="diff-new">
returns
the
</ins><code><ins class="diff-new">
xs:unsignedInt
</ins></code><ins class="diff-new">
value
12.
Another
invocation
of
that
constructor
function
that
returns
the
same
</ins><code><ins class="diff-new">
xs:unsignedInt
</ins></code><ins class="diff-new">
value
is
</ins><code><ins class="diff-new">
xs:unsignedInt("12")
</ins></code>.<ins class="diff-new">
The
same
result
would
also
be
returned
if
the
constructor
function
were
to
be
invoked
with
a
node
that
had
a
typed
value
equal
to
the
</ins><code><ins class="diff-new">
xs:unsignedInt
</ins></code><ins class="diff-new">
12.
The
standard
features
described
in
</ins><a href= "http://www.w3.org/TR/xpath20/#id-atomization"><ins class="diff-new">
Section
2.4.2
Atomization
</ins></a><sup><small><ins class="diff-new">
XP
</ins></small></sup><ins class="diff-new">
would
'atomize'
the
node
to
extract
its
typed
value
and
then
call
the
constructor
with
that
value.
If
the
value
passed
to
a
constructor
is
illegal
for
the
datatype
to
be
constructed,
an
error
is
raised
[
</ins><a href= "#ERRFORG0001" title="err:FORG0001"><ins class="diff-new">
err:FORG0001
</ins></a><ins class="diff-new">
].
</ins></p><p><ins class="diff-new">
The
semantics
of
the
constructor
function
"
</ins><code><ins class="diff-new">
xs:TYPE(arg)
</ins></code><ins class="diff-new">
"
are
identical
to
the
semantics
of
"
</ins><code><ins class="diff-new">
arg
</ins></code><ins class="diff-new">
cast
as
</ins><code><ins class="diff-new">
xs:TYPE?
</ins></code><ins class="diff-new">
".
See
</ins><a href= "#casting"><b><ins class="diff-new">
18
Casting
</ins></b></a>.</p><p><ins class="diff-new">
If
the
argument
to
a
constructor
function
is
a
literal,
the
result
of
the
function
may
be
evaluated
statically;
if
an
error
is
found
during
such
evaluation,
it
may
be
reported
as
a
static
error.
</ins></p><p><ins class="diff-new">
Special
rules
apply
to
constructor
functions
for
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
and
types
derived
from
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code>.<ins class="diff-new">
See
</ins><a href= "#constructor-qname-notation"><b><ins class="diff-new">
17.2
Constructor
Functions
for
xs:QName
and
xs:NOTATION
</ins></b></a>.</p><p><ins class="diff-new">
The
following
constructor
functions
for
the
built-in
types
are
supported:
</ins></p><ul><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:string?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:boolean?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:decimal
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:decimal?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:float
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:float?
</ins></code></div><p><ins class="diff-new">
Implementations
</ins><a title="may" class="termref" href= "#may"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
may
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
return
negative
zero
for
</ins><code><ins class="diff-new">
xs:float("-0.0E0")
</ins></code>.<a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a><ins class="diff-new">
does
not
distinguish
between
the
values
positive
zero
and
negative
zero.
</ins></p></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:double
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:double?
</ins></code></div><p><ins class="diff-new">
Implementations
</ins><a title="may" class="termref" href= "#may"><span class="arrow"><ins class="diff-new">
·
</ins></span><ins class="diff-new">
may
</ins><span class= "arrow"><ins class="diff-new">
·
</ins></span></a><ins class="diff-new">
return
negative
zero
for
</ins><code><ins class="diff-new">
xs:double("-0.0E0").
</ins></code><a href="#xmlschema-2"><ins class="diff-new">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</ins></a><ins class="diff-new">
does
not
distinguish
between
the
values
positive
zero
and
negative
zero.
</ins></p></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:duration
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:duration?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:dateTime
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:dateTime?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:time
</ins></code><ins class="diff-new">
(
</ins><code class="arg"><ins class="diff-new">
$arg
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:time?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:date
</ins></code><ins class="diff-new">
(
</ins><code class="arg"><ins class="diff-new">
$arg
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:date?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:gYearMonth
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:gYearMonth?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:gYear
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:gYear?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:gMonthDay
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:gMonthDay?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:gDay
</ins></code><ins class="diff-new">
(
</ins><code class="arg"><ins class="diff-new">
$arg
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:gDay?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:gMonth
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:gMonth?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:hexBinary
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:hexBinary?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:base64Binary
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:base64Binary?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:anyURI
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:anyURI?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:QName?
</ins></code></div><p><ins class="diff-new">
See
</ins><a href="#constructor-qname-notation"><b><ins class="diff-new">
17.2
Constructor
Functions
for
xs:QName
and
xs:NOTATION
</ins></b></a><ins class="diff-new">
for
special
rules.
</ins></p></li></ul><ul><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:normalizedString
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:normalizedString?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:token
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:token?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:language
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:language?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:NMTOKEN
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:NMTOKEN?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:Name
</ins></code><ins class="diff-new">
(
</ins><code class="arg"><ins class="diff-new">
$arg
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:Name?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:NCName
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:NCName?
</ins></code></div></li><li><div class="proto"><code class="function"><ins class="diff-new">
xs:ID
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:ID?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:IDREF
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:IDREF?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:ENTITY
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:ENTITY?
</ins></code></div><p><ins class="diff-new">
See
</ins><a href="#casting-to-ENTITY"><b><ins class="diff-new">
18.4.1
Casting
to
xs:ENTITY
</ins></b></a><ins class="diff-new">
for
rules
related
to
constructing
values
of
type
</ins><code><ins class="diff-new">
xs:ENTITY
</ins></code><ins class="diff-new">
and
types
derived
from
it.
</ins></p></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:integer
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:integer?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:nonPositiveInteger
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:nonPositiveInteger?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:negativeInteger
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:negativeInteger?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:long
</ins></code><ins class="diff-new">
(
</ins><code class="arg"><ins class="diff-new">
$arg
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:long?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:int
</ins></code><ins class="diff-new">
(
</ins><code class="arg"><ins class="diff-new">
$arg
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:int?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:short
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:short?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:byte
</ins></code><ins class="diff-new">
(
</ins><code class="arg"><ins class="diff-new">
$arg
</ins></code><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:byte?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:nonNegativeInteger
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:nonNegativeInteger?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:unsignedLong
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:unsignedLong?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:unsignedInt
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:unsignedInt?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:unsignedShort
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:unsignedShort?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:unsignedByte
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:unsignedByte?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:positiveInteger
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:positiveInteger?
</ins></code></div></li></ul><ul><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:yearMonthDuration
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:yearMonthDuration?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:dayTimeDuration
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:dayTimeDuration?
</ins></code></div></li><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:untypedAtomic
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:untypedAtomic?
</ins></code></div></li></ul><ul><li><div class="proto"><code class= "function"><ins class="diff-new">
xs:dateTimeStamp
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
xs:dateTimeStamp?
</ins></code></div></li></ul></div><div class="div2"><h3><a name="constructor-qname-notation" id= "constructor-qname-notation"></a><ins class="diff-new">
17.2
Constructor
Functions
for
xs:QName
and
xs:NOTATION
</ins></h3><p><ins class="diff-new">
Special
rules
apply
to
constructor
functions
for
the
types
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code>,<ins class="diff-new">
for
two
reasons:
</ins></p><ul><li><p><ins class="diff-new">
The
lexical
representation
of
these
types
uses
namespace
prefixes,
whose
meaning
is
context-dependent.
</ins></p></li><li><p><ins class="diff-new">
Values
cannot
belong
directly
to
the
type
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code>,<ins class="diff-new">
only
to
its
subtypes.
</ins></p></li></ul><p><ins class="diff-new">
These
constraints
result
in
the
following
restrictions:
</ins></p><ul><li><p><ins class="diff-new">
Conversion
from
an
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
to
a
value
of
type
</ins><code><ins class="diff-new">
xs:QName
</ins></code>,<ins class="diff-new">
a
type
derived
from
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
or
a
type
derived
from
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
is
permitted
only
if
the
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
is
written
as
a
string
literal.
This
applies
whether
the
conversion
is
expressed
using
a
constructor
function
or
using
the
"cast
as"
syntax.
Such
a
conversion
can
be
regarded
as
a
pseudo-function,
which
is
always
evaluated
statically.
It
is
also
permitted
for
these
constructors
and
casts
to
take
a
dynamically-supplied
argument
in
the
normal
manner,
but
as
the
casting
table
(see
</ins><a href= "#casting-from-primitive-to-primitive"><b><ins class="diff-new">
18.1
Casting
from
primitive
types
to
primitive
types
</ins></b></a><ins class="diff-new">
)
indicates,
the
only
arguments
that
are
supported
in
this
case
are
values
of
type
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
respectively.
</ins></p></li><li><p><ins class="diff-new">
There
is
no
constructor
function
for
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code>.<ins class="diff-new">
Constructors
are
defined,
however,
for
</ins><code><ins class="diff-new">
xs:QName
</ins></code>,<ins class="diff-new">
for
types
derived
from
</ins><code><ins class="diff-new">
xs:QName
</ins></code>,<ins class="diff-new">
and
for
types
derived
from
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code>.</p></li></ul><p><ins class="diff-new">
When
converting
from
an
</ins><code><ins class="diff-new">
xs:string
</ins></code>,<ins class="diff-new">
the
prefix
within
the
lexical
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
supplied
as
the
argument
is
resolved
to
a
namespace
URI
using
the
statically
known
namespaces
from
the
static
context.
If
the
lexical
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
has
no
prefix,
the
namespace
URI
of
the
resulting
expanded-QName
is
the
default
element/type
namespace
from
the
static
context.
Components
of
the
static
context
are
discussed
in
</ins><a href="http://www.w3.org/TR/xpath20/#static_context"><ins class="diff-new">
Section
2.1.1
Static
Context
</ins></a><sup><small><ins class="diff-new">
XP
</ins></small></sup>.<ins class="diff-new">
A
static
error
is
raised
[
</ins><a href="#ERRFONS0004" title= "err:FONS0004"><ins class="diff-new">
err:FONS0004
</ins></a><ins class="diff-new">
]
if
the
prefix
is
not
bound
in
the
static
context.
As
described
in
</ins><a href= "http://www.w3.org/TR/xpath-datamodel/#terminology"><ins class="diff-new">
Section
2.1
Terminology
</ins></a><sup><small><ins class="diff-new">
DM
</ins></small></sup>,<ins class="diff-new">
the
supplied
prefix
is
retained
as
part
of
the
expanded-QName
value.
</ins></p></div><div class="div2"><h3><a name="constructor-functions-for-user-defined-types" id= "constructor-functions-for-user-defined-types"></a><ins class="diff-new">
17.3
Constructor
Functions
for
User-Defined
Types
</ins></h3><p><ins class="diff-new">
For
every
atomic
type
in
the
static
context
(See
</ins><a href= "http://www.w3.org/TR/xpath20/#static_context"><ins class="diff-new">
Section
2.1.1
Static
Context
</ins></a><sup><small><ins class="diff-new">
XP
</ins></small></sup><ins class="diff-new">
)
that
is
derived
from
a
primitive
type,
there
is
a
constructor
function
(whose
name
is
the
same
as
the
name
of
the
type)
whose
effect
is
to
create
a
value
of
that
type
from
the
supplied
argument.
The
rules
for
constructing
user-defined
types
are
defined
in
the
same
way
as
the
rules
for
constructing
built-in
derived
types
discussed
in
</ins><a href= "#constructor-functions-for-xsd-types"><b><ins class="diff-new">
17.1
Constructor
Functions
for
XML
Schema
Built-in
Types
</ins></b></a>.</p><p><ins class="diff-new">
Special
rules
apply
to
constructor
functions
for
types
derived
from
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code>.<ins class="diff-new">
See
</ins><a href="#constructor-qname-notation"><b><ins class="diff-new">
17.2
Constructor
Functions
for
xs:QName
and
xs:NOTATION
</ins></b></a>.</p><p><ins class="diff-new">
Consider
a
situation
where
the
static
context
contains
a
type
called
</ins><code><ins class="diff-new">
hatSize
</ins></code><ins class="diff-new">
defined
in
a
schema
whose
target
namespace
is
bound
to
the
prefix
</ins><code><ins class="diff-new">
my
</ins></code>.<ins class="diff-new">
In
such
a
case
the
constructor
function:
</ins></p><div class="exampleInner"><div class="proto"><code class= "function"><ins class="diff-new">
my:hatSize
</ins></code><ins class="diff-new">
(
</ins><code class= "arg"><ins class="diff-new">
$arg
</ins></code><code class="as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "type"><ins class="diff-new">
xs:anyAtomicType?
</ins></code><ins class="diff-new">
)
</ins><code class= "as"><ins class="diff-new">
&#160;as&#160;
</ins></code><code class= "return-type"><ins class="diff-new">
my:hatSize?
</ins></code></div></div><p><ins class="diff-new">
is
available
to
users.
</ins></p><p><ins class="diff-new">
To
construct
an
instance
of
an
atomic
type
that
is
not
in
a
namespace,
it
is
necessary
to
use
a
cast
expression
or
undeclare
the
default
function
namespace.
For
example,
if
the
user-defined
type
</ins><code><ins class="diff-new">
apple
</ins></code><ins class="diff-new">
is
derived
from
</ins><code><ins class="diff-new">
xs:integer
</ins></code><ins class="diff-new">
but
is
not
in
a
namespace,
an
instance
of
this
type
can
be
constructed
as
follows
using
a
cast
expression
(this
requires
that
the
default
element/type
namespace
is
no
namespace):
</ins></p><div class="exampleInner"><pre><ins class="diff-new">
17 cast as apple
</ins></pre></div><p><ins class="diff-new">
The
following
shows
the
use
of
the
constructor
function:
</ins></p><div class="exampleInner"><pre><ins class="diff-new">
declare default function namespace ""; apple(17)
</ins></pre></div></div></div><div class="div1"><h2><a name="casting" id="casting"></a><ins class="diff-new">
18
</ins>
Casting
</h2>
<p>
Constructor
functions
and
cast
expressions
accept
an
expression
and
return
a
value
of
a
given
type.
They
both
convert
a
source
value,
<em>
SV
</em>,
of
a
source
type,
<em>
ST
</em>,
to
a
target
value,
<em>
TV
</em>,
of
the
given
target
type,
<em>
TT
</em>,
with
identical
semantics
and
different
syntax.
The
name
of
the
constructor
function
is
the
same
as
the
name
of
the
built-in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
datatype
or
the
datatype
defined
in
<a href= "http://www.w3.org/TR/xpath-datamodel/#types">
Section
2.6
Types
</a>
<sup>
<small>
DM
</small>
</sup>
of
<a href= "#xpath-datamodel-11">
[XQuery
<del class="diff-old">1.0
</del>
and
XPath
<del class="diff-old">2.0
</del>
Data
<del class="diff-old">Model]
</del>
<ins class="diff-chg">Model
(XDM)
1.1]
</ins>
</a>
(see
<a href="#constructor-functions-for-xsd-types">
<b>
<del class="diff-old">5.1
</del>
<ins class="diff-chg">17.1
</ins>
Constructor
Functions
for
XML
Schema
Built-in
Types
</b>
</a>
)
or
the
user-derived
datatype
(see
<a href= "#constructor-functions-for-user-defined-types">
<b>
<del class="diff-old">5.4
</del>
<ins class="diff-chg">17.3
</ins>
Constructor
Functions
for
User-Defined
Types
</b>
</a>
)
that
is
the
target
for
the
conversion,
and
the
semantics
are
exactly
the
same
as
for
a
cast
expression;
for
example,"
<code>
xs:date("2003-01-01")
</code>
"
means
exactly
the
same
as
"
<code>
"2003-01-01"
</code>
cast
as
<code>
xs:date?
</code>
".
</p>
<p>
The
cast
expression
takes
a
type
name
to
indicate
the
target
type
of
the
conversion.
See
<a href= "http://www.w3.org/TR/xpath20/#id-cast">
Section
3.10.2
Cast
</a>
<sup>
<small>
XP
</small>
</sup>.
If
the
type
name
allows
the
empty
sequence
and
the
expression
to
be
cast
is
the
empty
sequence,
the
empty
sequence
is
returned.
If
the
type
name
does
not
allow
the
empty
sequence
and
the
expression
to
be
cast
is
the
empty
sequence,
a
type
error
is
raised
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004">
err:XPTY0004
</a>
]
<sup>
<small>
XP
</small>
</sup>.
</p>
<p>
Where
the
argument
to
a
cast
is
a
literal,
the
result
of
the
function
may
be
evaluated
statically;
if
an
error
is
encountered
during
such
evaluation,
it
may
be
reported
as
a
static
error.
</p>
<p>
Casting
from
primitive
type
to
primitive
type
is
discussed
in
<a href="#casting-from-primitive-to-primitive">
<b>
<del class="diff-old">17.1
</del>
<ins class="diff-chg">18.1
</ins>
Casting
from
primitive
types
to
primitive
types
</b>
</a>.
Casting
to
derived
types
is
discussed
in
<a href="#casting-to-derived-types">
<b>
<del class="diff-old">17.2
</del>
<ins class="diff-chg">18.2
</ins>
Casting
to
derived
types
</b>
</a>.
Casting
from
derived
types
is
discussed
in
<a href="#casting-from-derived-to-parent">
<b>
<del class="diff-old">17.3
</del>
<ins class="diff-chg">18.3
</ins>
Casting
from
derived
types
to
parent
types
</b>
</a>,
<a href= "#casting-within-branch">
<b>
<del class="diff-old">17.4
</del>
<ins class="diff-chg">18.4
</ins>
Casting
within
a
branch
of
the
type
hierarchy
</b>
</a>
and
<a href= "#casting-across-hierarchy">
<b>
<del class="diff-old">17.5
</del>
<ins class="diff-chg">18.5
</ins>
Casting
across
the
type
hierarchy
</b>
</a>.
</p>
<p>
When
casting
from
<code>
xs:string
</code>
the
semantics
in
<a href="#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>
apply,
regardless
of
target
type.
</p>
<div class="div2">
<h3>
<a name="casting-from-primitive-to-primitive" id= "casting-from-primitive-to-primitive">
</a>
<del class="diff-old">17.1
</del>
<ins class="diff-chg">18.1
</ins>
Casting
from
primitive
types
to
primitive
types
</h3>
<p>
This
section
defines
casting
between
the
19
primitive
types
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
as
well
as
<code>
xs:untypedAtomic
</code>,
<code>
xs:integer
</code>
and
the
two
derived
types
of
<code>
xs:duration
</code>
(
<code>
xs:yearMonthDuration
</code>
and
<code>
xs:dayTimeDuration
</code>
).
These
four
types
are
not
primitive
types
but
they
are
treated
as
primitive
types
in
this
section.
The
type
conversions
that
are
supported
are
indicated
in
the
table
below.
In
this
table,
there
is
a
row
for
each
primitive
type
with
that
type
as
the
source
of
the
conversion
and
there
is
a
column
for
each
primitive
type
as
the
target
of
the
conversion.
The
intersections
of
rows
and
columns
contain
one
of
three
characters:
"Y"
indicates
that
a
conversion
from
values
of
the
type
to
which
the
row
applies
to
the
type
to
which
the
column
applies
is
supported;
"N"
indicates
that
there
are
no
supported
conversions
from
values
of
the
type
to
which
the
row
applies
to
the
type
to
which
the
column
applies;
and
"M"
indicates
that
a
conversion
from
values
of
the
type
to
which
the
row
applies
to
the
type
to
which
the
column
applies
may
succeed
for
some
values
in
the
value
space
and
fails
for
others.
</p>
<p>
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
defines
<code>
xs:NOTATION
</code>
as
an
abstract
type.
Thus,
casting
to
<code>
xs:NOTATION
</code>
from
any
other
type
including
<code>
xs:NOTATION
</code>
is
not
permitted
and
raises
[
<a href="http://www.w3.org/TR/xpath20/#ERRXPST0080" title= "err:XPST0080">
err:XPST0080
</a>
]
<sup>
<small>
XP
</small>
</sup>.
However,
casting
from
one
subtype
of
<code>
xs:NOTATION
</code>
to
another
subtype
of
<code>
xs:NOTATION
</code>
is
permitted.
</p>
<p>
Casting
is
not
supported
to
or
from
<code>
xs:anySimpleType
</code>.
Thus,
there
is
no
row
or
column
for
this
type
in
the
table
below.
For
any
node
that
has
not
been
validated
or
has
been
validated
as
<code>
xs:anySimpleType
</code>,
the
typed
value
of
the
node
is
an
atomic
value
of
type
<code>
xs:untypedAtomic
</code>.
There
are
no
atomic
values
with
the
type
annotation
<code>
xs:anySimpleType
</code>
at
runtime.
Casting
to
a
type
that
is
not
atomic
raises
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPST0051" title= "err:XPST0051">
err:XPST0051
</a>
]
<sup>
<small>
XP
</small>
</sup>.
</p>
<p>
Similarly,
casting
is
not
supported
to
or
from
<code>
xs:anyAtomicType
</code>
and
will
raise
error
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPST0080" title= "err:XPST0080">
err:XPST0080
</a>
]
<sup>
<small>
XP
</small>
</sup>.
There
are
no
atomic
values
with
the
type
annotation
<code>
xs:anyAtomicType
</code>
at
runtime,
although
this
can
be
a
statically
inferred
type.
</p>
<p>
If
casting
is
attempted
from
an
<em>
ST
</em>
to
a
<em>
TT
</em>
for
which
casting
is
not
supported,
as
defined
in
the
table
below,
a
type
error
is
raised
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004">
err:XPTY0004
</a>
]
<sup>
<small>
XP
</small>
</sup>.
</p>
<p>
In
the
following
table,
the
columns
and
rows
are
identified
by
short
codes
that
identify
simple
types
as
follows:
</p>
<blockquote>
<p>
uA
=
xs:untypedAtomic
<br />
aURI
=
xs:anyURI
<br />
b64
=
xs:base64Binary
<br />
bool
=
xs:boolean
<br />
dat
=
xs:date
<br />
gDay
=
xs:gDay
<br />
dbl
=
xs:double
<br />
dec
=
xs:decimal
<br />
dT
=
xs:dateTime
<br />
dTD
=
xs:dayTimeDuration
<br />
dur
=
xs:duration
<br />
flt
=
xs:float
<br />
hxB
=
xs:hexBinary
<br />
gMD
=
xs:gMonthDay
<br />
gMon
=
xs:gMonth
<br />
int
=
xs:integer
<br />
NOT
=
xs:NOTATION
<br />
QN
=
xs:QName
<br />
str
=
xs:string
<br />
tim
=
xs:time
<br />
gYM
=
xs:gYearMonth
<br />
yMD
=
xs:yearMonthDuration
<br />
gYr
=
xs:gYear
</p>
</blockquote>
<p>
In
the
following
table,
the
notation
"S\T"
indicates
that
the
source
("S")
of
the
conversion
is
indicated
in
the
column
below
the
notation
and
that
the
target
("T")
is
indicated
in
the
row
to
the
right
of
the
notation.
</p>
<table class="casting" summary="Casting table" border="1" cellpadding="1" id="casting-to-primitives-table">
<col width="5%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<col width="3%" span="1" />
<thead>
<tr>
<th>
<span class="cancast" title="S\T">
S\T
</span>
</th>
<th>
<span class="cancast" title="untypedAtomic">
uA
</span>
</th>
<th>
<span class="cancast" title="string">
str
</span>
</th>
<th>
<span class="cancast" title="float">
flt
</span>
</th>
<th>
<span class="cancast" title="double">
dbl
</span>
</th>
<th>
<span class="cancast" title="decimal">
dec
</span>
</th>
<th>
<span class="cancast" title="integer">
int
</span>
</th>
<th>
<span class="cancast" title="duration">
dur
</span>
</th>
<th>
<span class="cancast" title="yearMonthDuration">
yMD
</span>
</th>
<th>
<span class="cancast" title="dayTimeDuration">
dTD
</span>
</th>
<th>
<span class="cancast" title="dateTime">
dT
</span>
</th>
<th>
<span class="cancast" title="time">
tim
</span>
</th>
<th>
<span class="cancast" title="date">
dat
</span>
</th>
<th>
<span class="cancast" title="gYearMonth">
gYM
</span>
</th>
<th>
<span class="cancast" title="gYear">
gYr
</span>
</th>
<th>
<span class="cancast" title="gMonthDay">
gMD
</span>
</th>
<th>
<span class="cancast" title="gDay">
gDay
</span>
</th>
<th>
<span class="cancast" title="gMonth">
gMon
</span>
</th>
<th>
<span class="cancast" title="boolean">
bool
</span>
</th>
<th>
<span class="cancast" title="base64Binary">
b64
</span>
</th>
<th>
<span class="cancast" title="hexBinary">
hxB
</span>
</th>
<th>
<span class="cancast" title="anyURI">
aURI
</span>
</th>
<th>
<span class="cancast" title="QName">
QN
</span>
</th>
<th>
<span class="cancast" title="NOTATION">
NOT
</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
<span class="cancast" title="untypedAtomic">
uA
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to string? Yes">
Y
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to float? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to double? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to decimal? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to integer? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to duration? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to yearMonthDuration? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to dayTimeDuration? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to dateTime? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to time? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to date? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to gYearMonth? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to gYear? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to gMonthDay? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to gDay? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to gMonth? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to boolean? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to base64Binary? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast untypedAtomic to hexBinary? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to anyURI? Maybe">
M
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast untypedAtomic to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="string">
str
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast string to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast string to string? Yes">
Y
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to float? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to double? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to decimal? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to integer? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to duration? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast string to yearMonthDuration? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title= "Cast string to dayTimeDuration? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to dateTime? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to time? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to date? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to gYearMonth? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to gYear? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to gMonthDay? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to gDay? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to gMonth? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to boolean? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to base64Binary? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to hexBinary? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to anyURI? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to QName? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast string to NOTATION? Maybe">
M
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="float">
flt
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast float to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast float to string? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast float to float? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast float to double? Yes">
Y
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast float to decimal? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast float to integer? Maybe">
M
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to gMonth? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast float to boolean? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast float to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="double">
dbl
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast double to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast double to string? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast double to float? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast double to double? Yes">
Y
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast double to decimal? Maybe">
M
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast double to integer? Maybe">
M
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast double to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to gMonth? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast double to boolean? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast double to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="decimal">
dec
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to string? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to float? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to double? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to decimal? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to integer? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast decimal to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to gMonth? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to boolean? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast decimal to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="integer">
int
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast integer to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast integer to string? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast integer to float? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast integer to double? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast integer to decimal? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast integer to integer? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast integer to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to gMonth? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast integer to boolean? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast integer to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="duration">
dur
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast duration to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast duration to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to integer? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast duration to duration? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast duration to yearMonthDuration? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast duration to dayTimeDuration? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast duration to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="yearMonthDuration">
yMD
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast yearMonthDuration to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to integer? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to duration? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to yearMonthDuration? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to dayTimeDuration? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast yearMonthDuration to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast yearMonthDuration to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast yearMonthDuration to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast yearMonthDuration to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast yearMonthDuration to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast yearMonthDuration to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="dayTimeDuration">
dTD
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast dayTimeDuration to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to integer? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast dayTimeDuration to duration? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast dayTimeDuration to yearMonthDuration? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast dayTimeDuration to dayTimeDuration? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast dayTimeDuration to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast dayTimeDuration to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast dayTimeDuration to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast dayTimeDuration to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast dayTimeDuration to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dayTimeDuration to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast dayTimeDuration to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="dateTime">
dT
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast dateTime to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast dateTime to dayTimeDuration? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to dateTime? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to time? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to date? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to gYearMonth? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to gYear? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to gMonthDay? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to gDay? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to gMonth? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast dateTime to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="time">
tim
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast time to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast time to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to dateTime? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast time to time? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast time to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="date">
dat
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast date to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast date to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to dayTimeDuration? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast date to dateTime? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to time? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast date to date? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast date to gYearMonth? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast date to gYear? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast date to gMonthDay? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast date to gDay? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast date to gMonth? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast date to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="gYearMonth">
gYM
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast gYearMonth to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast gYearMonth to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast gYearMonth to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to date? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to gYearMonth? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYearMonth to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="gYear">
gYr
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to gYearMonth? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to gYear? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gYear to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="gMonthDay">
gMD
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast gMonthDay to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast gMonthDay to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast gMonthDay to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to gYear? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to gMonthDay? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonthDay to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="gDay">
gDay
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to gMonthDay? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to gDay? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gDay to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="gMonth">
gMon
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast gMonth to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to gDay? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to gMonth? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast gMonth to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="boolean">
bool
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to string? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to float? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to double? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to decimal? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to integer? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast boolean to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to gMonth? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to boolean? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast boolean to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="base64Binary">
b64
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast base64Binary to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast base64Binary to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast base64Binary to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to boolean? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast base64Binary to base64Binary? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to hexBinary? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast base64Binary to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="hexBinary">
hxB
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title= "Cast hexBinary to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast hexBinary to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast hexBinary to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to boolean? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to base64Binary? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to hexBinary? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to anyURI? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast hexBinary to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="anyURI">
aURI
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast anyURI to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to hexBinary? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to anyURI? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to QName? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast anyURI to NOTATION? No">
N
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="QName">
QN
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast QName to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast QName to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast QName to anyURI? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast QName to QName? Yes">
Y
</span>
</td>
<td class="castM" align="center" valign="middle">
<del class="diff-old">N
</del>
<span class= "cancast" title="Cast QName to NOTATION? Maybe">
<ins class="diff-chg">M
</ins>
</span>
</td>
</tr>
<tr>
<th>
<span class="cancast" title="NOTATION">
NOT
</span>
</th>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to untypedAtomic? Yes">
Y
</span>
</td>
<td class="castY" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to string? Yes">
Y
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to float? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to double? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to decimal? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to integer? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to duration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast NOTATION to yearMonthDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title= "Cast NOTATION to dayTimeDuration? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to dateTime? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to time? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to date? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to gYearMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to gYear? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to gMonthDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to gDay? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to gMonth? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to boolean? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to base64Binary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to hexBinary? No">
N
</span>
</td>
<td class="castN" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to anyURI? No">
N
</span>
</td>
<td class="castY" align="center" valign="middle">
<del class="diff-old">N
</del>
<span class= "cancast" title="Cast NOTATION to QName? Yes">
<ins class="diff-chg">Y
</ins>
</span>
</td>
<td class="castM" align="center" valign="middle">
<span class= "cancast" title="Cast NOTATION to NOTATION? Maybe">
M
</span>
</td>
</tr>
</tbody>
</table>
<p>
The
following
sub-sections
define
the
semantics
of
casting
from
a
primitive
type
to
a
primitive
type.
Semantics
of
casting
to
and
from
a
derived
type
are
defined
in
sections
<a href= "#casting-to-derived-types">
<b>
<del class="diff-old">17.2
</del>
<ins class="diff-chg">18.2
</ins>
Casting
to
derived
types
</b>
</a>,
<a href="#casting-from-derived-to-parent">
<b>
<del class="diff-old">17.3
</del>
<ins class="diff-chg">18.3
</ins>
Casting
from
derived
types
to
parent
types
</b>
</a>,
<a href= "#casting-within-branch">
<b>
<del class="diff-old">17.4
</del>
<ins class="diff-chg">18.4
</ins>
Casting
within
a
branch
of
the
type
hierarchy
</b>
</a>
and
<a href= "#casting-across-hierarchy">
<b>
<del class="diff-old">17.5
</del>
<ins class="diff-chg">18.5
</ins>
Casting
across
the
type
hierarchy
</b>
</a>.
</p>
<div class="div3">
<h4>
<a name="casting-from-strings" id= "casting-from-strings">
</a>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</h4>
<p>
When
the
supplied
value
is
an
instance
of
<code>
xs:string
</code>
or
an
instance
of
<code>
xs:untypedAtomic
</code>,
it
is
treated
as
being
a
string
value
and
mapped
to
a
typed
value
of
the
target
type
as
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>.
Whitespace
normalization
is
applied
as
indicated
by
the
whiteSpace
facet
for
the
datatype.
The
resulting
whitespace-normalized
string
must
be
a
valid
lexical
form
for
the
datatype.
The
semantics
of
casting
are
identical
to
XML
Schema
validation.
For
example,
<code>
"13"
cast
as
xs:unsignedInt
</code>
returns
the
<code>
xs:unsignedInt
</code>
typed
value
<code>
13
</code>.
This
could
also
be
written
<code>
xs:unsignedInt("13")
</code>.
</p>
<p>
When
casting
from
<code>
xs:string
</code>
or
<code>
xs:untypedAtomic
</code>
to
a
derived
type
where
the
derived
type
is
restricted
by
a
pattern
facet,
the
lexical
form
is
first
checked
against
the
pattern
before
further
casting
is
attempted
(See
<a href="#casting-to-derived-types">
<b>
<del class="diff-old">17.2
</del>
<ins class="diff-chg">18.2
</ins>
Casting
to
derived
types
</b>
</a>
).
If
the
lexical
form
does
not
conform
to
the
pattern,
error
[
<a href="#ERRFORG0001" title= "err:FORG0001">
err:FORG0001
</a>
]
is
raised.
</p>
<p>
Consider
a
user-defined
Schema
whose
target
namespace
is
bound
to
the
prefix
<code>
mySchema
</code>
which
defines
a
restriction
of
<code>
xs:boolean
</code>
called
<code>
trueBool
</code>
which
allows
only
the
lexical
forms
"
<code>
1
</code>
"
and
"
<code>
0
</code>
".
<code>
"true"
cast
as
mySchema:trueBool
</code>
would
fail
with
[
<a href="#ERRFORG0001" title="err:FORG0001">
err:FORG0001
</a>
].
If
the
Schema
also
defines
a
datatype
called
<code>
height
</code>
as
a
restriction
of
<code>
xs:integer
</code>
with
a
maximum
value
of
<code>
84
</code>
then
<code>
"100"
cast
as
mySchema:height
</code>
would
also
fail
with
[
<a href="#ERRFORG0001" title= "err:FORG0001">
err:FORG0001
</a>
].
</p>
<p>
Casting
is
permitted
from
<code>
xs:string
</code>
and
<code>
xs:untypedAtomic
</code>
to
any
primitive
atomic
type
or
any
atomic
type
derived
by
restriction,
except
<code>
xs:QName
</code>
or
<code>
xs:NOTATION
</code>.
Casting
to
<code>
xs:NOTATION
</code>
is
not
permitted
because
it
is
an
abstract
type.
</p>
<p>
Casting
is
permitted
from
<code>
xs:string
</code>
literals
to
<code>
xs:QName
</code>
and
types
derived
from
<code>
xs:NOTATION
</code>.
If
the
argument
to
such
a
cast
is
computed
dynamically,
[
<a href= "http://www.w3.org/TR/xpath20/#ERRXPTY0004" title= "err:XPTY0004">
err:XPTY0004
</a>
]
<sup>
<small>
XP
</small>
</sup>
is
raised
if
the
value
is
of
any
type
other
than
<code>
xs:QName
</code>
or
<code>
xs:NOTATION
</code>
<del class="diff-old">respectively
</del>
(including
the
case
where
it
is
an
<code>
xs:string
</code>
).
<ins class="diff-new">The
process
is
described
in
more
detail
in
</ins><a href="#constructor-qname-notation"><b><ins class="diff-new">
17.2
Constructor
Functions
for
xs:QName
and
xs:NOTATION
</ins></b></a>.</p><div class="note"><p class="prefix"><b><ins class="diff-new">
Note:
</ins></b></p><p><ins class="diff-new">
This
version
of
the
specification
allows
casting
between
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
in
either
direction;
this
was
not
permitted
in
the
previous
Recommendation.
</ins>
</p>
</div>
<p>
In
casting
to
numerics,
if
the
value
is
too
large
or
too
small
to
be
accurately
represented
by
the
implementation,
it
is
handled
as
an
overflow
or
underflow
as
defined
in
<a href= "#op.numeric">
<b>
<del class="diff-old">6.2
</del>
<ins class="diff-chg">4.2
Arithmetic
</ins>
Operators
on
Numeric
Values
</b>
</a>.
</p>
<p>
In
casting
to
<code>
xs:decimal
</code>
or
to
a
type
derived
from
<code>
xs:decimal
</code>,
if
the
value
is
not
too
large
or
too
small
but
nevertheless
cannot
be
represented
accurately
with
the
number
of
decimal
digits
available
to
the
implementation,
the
implementation
may
round
to
the
nearest
representable
value
or
may
raise
a
dynamic
error
[
<a href="#ERRFOCA0006" title= "err:FOCA0006">
err:FOCA0006
</a>
].
The
choice
of
rounding
algorithm
and
the
choice
between
rounding
and
error
behavior
and
is
implementation-defined.
</p>
<p>
In
casting
to
<del class="diff-old">a
date
</del>
<code>
<ins class="diff-chg">xs:date
</ins></code>,<code><ins class="diff-chg">
xs:dateTime
</ins></code>,<code><ins class="diff-chg">
xs:gYear
</ins></code>,
or
<del class="diff-old">time
value,
</del>
<code>
<ins class="diff-chg">xs:gYearMonth
</ins></code><ins class="diff-chg">
(or
types
derived
from
these),
</ins>
if
the
value
is
too
large
or
too
small
to
be
represented
by
the
implementation,
error
[
<a href="#ERRFODT0001" title="err:FODT0001">
err:FODT0001
</a>
]
is
raised.
</p>
<p>
In
casting
to
a
duration
value,
if
the
value
is
too
large
or
too
small
to
be
represented
by
the
implementation,
error
[
<a href= "#ERRFODT0002" title="err:FODT0002">
err:FODT0002
</a>
]
is
raised.
</p>
<p>
For
<code>
xs:anyURI
</code>,
the
extent
to
which
an
implementation
validates
the
lexical
form
of
<code>
xs:anyURI
</code>
is
<a title="implementation dependent" class="termref" href= "#implementation-dependent">
<span class= "arrow">
·
</span>
implementation
dependent
<span class= "arrow">
·
</span>
</a>.
</p>
<p>
If
the
cast
fails
for
any
other
reason,
error
[
<a href= "#ERRFORG0001" title="err:FORG0001">
err:FORG0001
</a>
]
is
raised.
</p>
</div>
<div class="div3">
<h4>
<a name="casting-to-string" id="casting-to-string">
</a>
<del class="diff-old">17.1.2
</del>
<ins class="diff-chg">18.1.2
</ins>
Casting
to
xs:string
and
xs:untypedAtomic
</h4>
<p>
Casting
is
permitted
from
any
primitive
type
to
the
primitive
types
<code>
xs:string
</code>
and
<code>
xs:untypedAtomic
</code>.
</p>
<p>
When
a
value
of
any
simple
type
is
cast
as
<code>
xs:string
</code>,
the
derivation
of
the
<code>
xs:string
</code>
value
<em>
TV
</em>
depends
on
the
<em>
ST
</em>
and
on
the
<em>
SV
</em>,
as
follows.
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:string
</code>
or
a
type
derived
from
<code>
xs:string
</code>,
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:anyURI
</code>,
the
type
conversion
is
performed
without
escaping
any
characters.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:QName
</code>
or
<code>
xs:NOTATION
</code>:
</p>
<ul>
<li>
<p>
if
the
qualified
name
has
a
<del class="diff-old">prefix
</del>
<ins class="diff-chg">prefix,
then
</ins>
<em>
TV
</em>
is
<del class="diff-old">(
fn:concat(fn:prefix-from-QName(
</del>
<ins class="diff-chg">the
concatenation
of
the
prefix
of
</ins>
<em>
SV
<del class="diff-old">)
,
":"
,
fn:local-name-from-QName(
</del>
</em>,
<ins class="diff-chg">a
single
colon
(:),
and
the
local
name
of
</ins>
<em>
SV
<del class="diff-old">))
.
</del>
</em>.
</p>
</li>
<li>
<p>
otherwise
<em>
TV
</em>
is
the
local-name.
</p>
</li>
</ul>
</li>
<li>
<p>
If
<em>
ST
</em>
is
a
numeric
type,
the
following
rules
apply:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:integer
</code>,
<em>
TV
</em>
is
the
canonical
lexical
representation
of
<em>
SV
</em>
as
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>.
There
is
no
decimal
point.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:decimal
</code>,
then:
</p>
<ul>
<li>
<p>
If
<em>
SV
</em>
is
in
the
value
space
of
<code>
xs:integer
</code>,
that
is,
if
there
are
no
significant
digits
after
the
decimal
point,
then
the
value
is
converted
from
an
<code>
xs:decimal
</code>
to
an
<code>
xs:integer
</code>
and
the
resulting
<code>
xs:integer
</code>
is
converted
to
an
<code>
xs:string
</code>
using
the
rule
above.
</p>
</li>
<li>
<p>
Otherwise,
the
canonical
lexical
representation
of
<em>
SV
</em>
is
returned,
as
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>.
</p>
</li>
</ul>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:float
</code>
or
<code>
xs:double
</code>,
then:
</p>
<ul>
<li>
<p>
<em>
TV
</em>
will
be
an
<code>
xs:string
</code>
in
the
lexical
space
of
<code>
xs:double
</code>
or
<code>
xs:float
</code>
that
when
converted
to
an
<code>
xs:double
</code>
or
<code>
xs:float
</code>
under
the
rules
of
<a href="#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>
produces
a
value
that
is
equal
to
<em>
SV
</em>,
or
is
"NaN"
if
<em>
SV
</em>
is
<code>
NaN
</code>.
In
addition,
<em>
TV
</em>
must
satisfy
the
constraints
in
the
following
sub-bullets.
</p>
<ul>
<li>
<p>
If
<em>
SV
</em>
has
an
absolute
value
that
is
greater
than
or
equal
to
0.000001
(one
millionth)
and
less
than
1000000
(one
million),
then
the
value
is
converted
to
an
<code>
xs:decimal
</code>
and
the
resulting
<code>
xs:decimal
</code>
is
converted
to
an
<code>
xs:string
</code>
according
to
the
rules
above,
as
though
using
an
implementation
of
<code>
xs:decimal
</code>
that
imposes
no
limits
on
the
<code>
totalDigits
</code>
or
<code>
fractionDigits
</code>
facets.
</p>
</li>
<li>
<p>
If
<em>
SV
</em>
has
the
value
positive
or
negative
zero,
<em>
TV
</em>
is
"0"
or
"-0"
respectively.
</p>
</li>
<li>
<p>
If
<em>
SV
</em>
is
positive
or
negative
infinity,
<em>
TV
</em>
is
the
string
"
<code>
INF
</code>
"
or
"
<code>
-INF
</code>
"
respectively.
</p>
</li>
<li>
<p>
In
other
cases,
the
result
consists
of
a
mantissa,
which
has
the
lexical
form
of
an
<code>
xs:decimal
</code>,
followed
by
the
letter
"E",
followed
by
an
exponent
which
has
the
lexical
form
of
an
<code>
xs:integer
</code>.
Leading
zeroes
and
"+"
signs
are
prohibited
in
the
exponent.
For
the
mantissa,
there
must
be
a
decimal
point,
and
there
must
be
exactly
one
digit
before
the
decimal
point,
which
must
be
non-zero.
The
"+"
sign
is
prohibited.
There
must
be
at
least
one
digit
after
the
decimal
point.
Apart
from
this
mandatory
digit,
trailing
zero
digits
are
prohibited.
</p>
</li>
</ul>
</li>
</ul>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
The
above
rules
allow
more
than
one
representation
of
the
same
value.
For
example,
the
<code>
xs:float
</code>
value
whose
exact
decimal
representation
is
1.26743223E15
might
be
represented
by
any
of
the
strings
"1.26743223E15",
"1.26743222E15"
or
"1.26743224E15"
(inter
alia).
It
is
implementation-dependent
which
of
these
representations
is
chosen.
</p>
</div>
</li>
</ul>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:dateTime
</code>,
<code>
xs:date
</code>
or
<code>
xs:time
</code>,
<em>
TV
</em>
is
the
local
value.
The
components
of
<em>
TV
</em>
are
individually
cast
to
<code>
xs:string
</code>
using
the
functions
described
in
<a href= "#casting-to-datetimes">
[casting-to-datetimes]
</a>
and
the
results
are
concatenated
together.
The
<code>
year
</code>
component
is
cast
to
<code>
xs:string
</code>
using
<code>
eg:convertYearToString
</code>.
The
<code>
month
</code>,
<code>
day
</code>,
<code>
hour
</code>
and
<code>
minute
</code>
components
are
cast
to
<code>
xs:string
</code>
using
<code>
eg:convertTo2CharString
</code>.
The
<code>
second
</code>
component
is
cast
to
<code>
xs:string
</code>
using
<code>
eg:convertSecondsToString
</code>.
The
timezone
component,
if
present,
is
cast
to
<code>
xs:string
</code>
using
<code>
eg:convertTZtoString
</code>.
</p>
<p>
Note
that
the
hours
component
of
the
resulting
string
will
never
be
<code>
"24"
</code>.
Midnight
is
always
represented
as
<code>
"00:00:00"
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:yearMonthDuration
</code>
or
<code>
xs:dayTimeDuration
</code>,
<em>
TV
</em>
is
the
canonical
representation
of
<em>
SV
</em>
as
defined
in
<a href= "#dt-yearMonthDuration">
<b>
<del class="diff-old">10.3.1
</del>
<ins class="diff-chg">8.2.1
</ins>
xs:yearMonthDuration
</b>
</a>
or
<a href="#dt-dayTimeDuration">
<b>
<del class="diff-old">10.3.2
</del>
<ins class="diff-chg">8.2.2
</ins>
xs:dayTimeDuration
</b>
</a>,
respectively.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:duration
</code>
then
let
<em>
SYM
</em>
be
<em>
<code>
SV
</code>
</em>
<code>
cast
as
xs:yearMonthDuration
</code>,
and
let
<em>
SDT
</em>
be
<em>
<code>
SV
</code>
</em>
<code>
cast
as
xs:dayTimeDuration
</code>
;
Now,
let
the
next
intermediate
value,
<em>
TYM
</em>,
be
<em>
<code>
SYM
</code>
</em>
<code>
cast
as
</code>
<em>
<code>
TT
</code>
<del class="diff-old">,
</del>
</em>
<ins class="diff-chg">,
</ins>
and
let
<em>
TDT
</em>
be
<em>
<code>
SDT
</code>
</em>
<code>
cast
as
</code>
<em>
<code>
TT
</code>
<del class="diff-old">.
</del>
</em>
<ins class="diff-chg">.
</ins>
If
<em>
TYM
</em>
is
"P0M",
then
<em>
TV
</em>
is
<em>
TDT
</em>.
Otherwise,
<em>
TYM
</em>
and
<em>
TDT
</em>
are
merged
according
to
the
following
rules:
</p>
<ol class="enumar">
<li>
<p>
If
<em>
TDT
</em>
is
"PT0S",
then
<em>
TV
</em>
is
<em>
TYM
</em>.
</p>
</li>
<li>
<p>
Otherwise,
<em>
TV
</em>
is
the
concatenation
of
all
the
characters
in
<em>
TYM
</em>
and
all
the
characters
except
the
first
"P"
and
the
optional
negative
sign
in
<em>
TDT
</em>.
</p>
</li>
</ol>
</li>
<li>
<p>
In
all
other
cases,
<em>
TV
</em>
is
the
<a href= "#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
canonical
representation
of
<em>
SV
</em>.
For
datatypes
that
do
not
have
a
canonical
lexical
representation
defined
an
<a title= "implementation dependent" class="termref" href= "#implementation-dependent">
<span class= "arrow">
·
</span>
implementation
dependent
<span class= "arrow">
·
</span>
</a>
canonical
representation
may
be
used.
</p>
</li>
</ul>
<p>
To
cast
as
<code>
xs:untypedAtomic
</code>
the
value
is
cast
as
<code>
xs:string
</code>,
as
described
above,
and
the
type
annotation
changed
to
<code>
xs:untypedAtomic
</code>.
</p>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
The
string
representations
of
numeric
values
are
backwards
compatible
with
XPath
1.0
except
for
the
special
values
positive
and
negative
infinity,
negative
zero
and
values
outside
the
range
<code>
1.0e-6
</code>
to
<code>
1.0e+6
</code>.
</p>
</div>
</div>
<div class="div3">
<h4>
<a name="casting-to-numerics" id= "casting-to-numerics">
</a>
<del class="diff-old">17.1.3
</del>
<ins class="diff-chg">18.1.3
</ins>
Casting
to
numeric
types
</h4>
<div class="div4">
<h5>
<a name="casting-to-float" id="casting-to-float">
</a>
<del class="diff-old">17.1.3.1
</del>
<ins class="diff-chg">18.1.3.1
</ins>
Casting
to
xs:float
</h5>
<p>
When
a
value
of
any
simple
type
is
cast
as
<code>
xs:float
</code>,
the
<code>
xs:float
</code>
<em>
TV
</em>
is
derived
from
the
<em>
ST
</em>
and
the
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:float
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>
and
the
conversion
is
complete.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:double
</code>,
then
<em>
TV
</em>
is
obtained
as
follows:
</p>
<ul>
<li>
<p>
if
<em>
SV
</em>
is
the
<code>
xs:double
</code>
value
<code>
INF
</code>,
<code>
-INF
</code>,
<code>
NaN
</code>,
positive
zero,
or
negative
zero,
then
<em>
TV
</em>
is
the
<code>
xs:float
</code>
value
<code>
INF
</code>,
<code>
-INF
</code>,
<code>
NaN
</code>,
positive
zero,
or
negative
zero
respectively.
</p>
</li>
<li>
<p>
otherwise,
<em>
SV
</em>
can
be
expressed
in
the
form
<code>
m
×
2^e
</code>
where
the
mantissa
<code>
m
</code>
and
exponent
<code>
e
</code>
are
signed
<code>
xs:integer
</code>
s
whose
value
range
is
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>,
and
the
following
rules
apply:
</p>
<ul>
<li>
<p>
if
<code>
m
</code>
(the
mantissa
of
<em>
SV
</em>
)
is
outside
the
permitted
range
for
the
mantissa
of
an
<code>
xs:float
</code>
value
<code>
(-2^24-1
to
+2^24-1)
</code>,
then
it
is
divided
by
<code>
2^N
</code>
where
<code>
N
</code>
is
the
lowest
positive
<code>
xs:integer
</code>
that
brings
the
result
of
the
division
within
the
permitted
range,
and
the
exponent
<code>
e
</code>
is
increased
by
<code>
N
</code>.
This
is
integer
division
(in
effect,
the
binary
value
of
the
mantissa
is
truncated
on
the
right).
Let
<code>
M
</code>
be
the
mantissa
and
<code>
E
</code>
the
exponent
after
this
adjustment.
</p>
</li>
<li>
<p>
if
<code>
E
</code>
exceeds
<code>
104
</code>
(the
maximum
exponent
value
in
the
value
space
of
<code>
xs:float
</code>
)
then
<em>
TV
</em>
is
the
<code>
xs:float
</code>
value
<code>
INF
</code>
or
<code>
-INF
</code>
depending
on
the
sign
of
<code>
M
</code>.
</p>
</li>
<li>
<p>
if
<code>
E
</code>
is
less
than
<code>
-149
</code>
(the
minimum
exponent
value
in
the
value
space
of
<code>
xs:float
</code>
)
then
<em>
TV
</em>
is
the
<code>
xs:float
</code>
value
positive
or
negative
zero
depending
on
the
sign
of
<code>
M
</code>
</p>
</li>
<li>
<p>
otherwise,
<em>
TV
</em>
is
the
<code>
xs:float
</code>
value
<code>
M
×
2^E
</code>.
</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:decimal
</code>,
or
<code>
xs:integer
</code>,
then
<em>
TV
</em>
is
<code>
xs:float(
</code>
<em>
SV
</em>
<code>
cast
as
xs:string)
</code>
and
the
conversion
is
complete.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:boolean
</code>,
<em>
SV
</em>
is
converted
to
<code>
1.0E0
</code>
if
<em>
SV
</em>
is
<code>
true
</code>
and
to
<code>
0.0E0
</code>
if
<em>
SV
</em>
is
<code>
false
</code>
and
the
conversion
is
complete.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
Implementations
<a title="may" class="termref" href= "#may">
<span class="arrow">
·
</span>
may
<span class= "arrow">
·
</span>
</a>
return
negative
zero
for
<code>
"-0.0E0"
cast
as
xs:float
</code>.
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
does
not
distinguish
between
the
values
positive
zero
and
negative
zero.
</p>
</div>
</div>
<div class="div4">
<h5>
<a name="casting-to-double" id="casting-to-double">
</a>
<del class="diff-old">17.1.3.2
</del>
<ins class="diff-chg">18.1.3.2
</ins>
Casting
to
xs:double
</h5>
<p>
When
a
value
of
any
simple
type
is
cast
as
<code>
xs:double
</code>,
the
<code>
xs:double
</code>
value
<em>
TV
</em>
is
derived
from
the
<em>
ST
</em>
and
the
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:double
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>
and
the
conversion
is
complete.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:float
</code>
or
a
type
derived
from
<code>
xs:float
</code>,
then
<em>
TV
</em>
is
obtained
as
follows:
</p>
<ul>
<li>
<p>
if
<em>
SV
</em>
is
the
<code>
xs:float
</code>
value
<code>
INF
</code>,
<code>
-INF
</code>,
<code>
NaN
</code>,
positive
zero,
or
negative
zero,
then
<em>
TV
</em>
is
the
<code>
xs:double
</code>
value
<code>
INF
</code>,
<code>
-INF
</code>,
<code>
NaN
</code>,
positive
zero,
or
negative
zero
respectively.
</p>
</li>
<li>
<p>
otherwise,
<em>
SV
</em>
can
be
expressed
in
the
form
<code>
m
×
2^e
</code>
where
the
mantissa
<code>
m
</code>
and
exponent
<code>
e
</code>
are
signed
<code>
xs:integer
</code>
values
whose
value
range
is
defined
in
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>,
and
<em>
TV
</em>
is
the
<code>
xs:double
</code>
value
<code>
m
×
2^e
</code>.
</p>
</li>
</ul>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:decimal
</code>
or
<code>
xs:integer
</code>,
then
<em>
TV
</em>
is
<code>
xs:double(
</code>
<em>
SV
</em>
<code>
cast
as
xs:string)
</code>
and
the
conversion
is
complete.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:boolean
</code>,
<em>
SV
</em>
is
converted
to
<code>
1.0E0
</code>
if
<em>
SV
</em>
is
<code>
true
</code>
and
to
<code>
0.0E0
</code>
if
<em>
SV
</em>
is
<code>
false
</code>
and
the
conversion
is
complete.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
<div class="note">
<p class="prefix">
<b>
Note:
</b>
</p>
<p>
Implementations
<a title="may" class="termref" href= "#may">
<span class="arrow">
·
</span>
may
<span class= "arrow">
·
</span>
</a>
return
negative
zero
for
<code>
"-0.0E0"
cast
as
xs:double
</code>.
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
does
not
distinguish
between
the
values
positive
zero
and
negative
zero.
</p>
</div>
</div>
<div class="div4">
<h5>
<a name="casting-to-decimal" id= "casting-to-decimal">
</a>
<del class="diff-old">17.1.3.3
</del>
<ins class="diff-chg">18.1.3.3
</ins>
Casting
to
xs:decimal
</h5>
<p>
When
a
value
of
any
simple
type
is
cast
as
<code>
xs:decimal
</code>,
the
<code>
xs:decimal
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:decimal
</code>,
<code>
xs:integer
</code>
or
a
type
derived
from
them,
then
<em>
TV
</em>
is
<em>
SV
</em>,
converted
to
an
<code>
xs:decimal
</code>
value
if
need
be,
and
the
conversion
is
complete.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:float
</code>
or
<code>
xs:double
</code>,
then
<em>
TV
</em>
is
the
<code>
xs:decimal
</code>
value,
within
the
set
of
<code>
xs:decimal
</code>
values
that
the
implementation
is
capable
of
representing,
that
is
numerically
closest
to
<em>
SV
</em>.
If
two
values
are
equally
close,
then
the
one
that
is
closest
to
zero
is
chosen.
If
<em>
SV
</em>
is
too
large
to
be
accommodated
as
an
<code>
xs:decimal
</code>,
(see
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
for
<a title= "implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
limits
on
numeric
values)
an
error
is
raised
[
<a href="#ERRFOCA0001" title="err:FOCA0001">
err:FOCA0001
</a>
].
If
<em>
SV
</em>
is
one
of
the
special
<code>
xs:float
</code>
or
<code>
xs:double
</code>
values
<code>
NaN
</code>,
<code>
INF
</code>,
or
<code>
-INF
</code>,
an
error
is
raised
[
<a href="#ERRFOCA0002" title="err:FOCA0002">
err:FOCA0002
</a>
].
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:boolean
</code>,
<em>
SV
</em>
is
converted
to
<code>
1.0
</code>
if
<em>
SV
</em>
is
<code>
1
</code>
or
<code>
true
</code>
and
to
<code>
0.0
</code>
if
<em>
SV
</em>
is
<code>
0
</code>
or
<code>
false
</code>
and
the
conversion
is
complete.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</div>
<div class="div4">
<h5>
<a name="casting-to-integer" id= "casting-to-integer">
</a>
<del class="diff-old">17.1.3.4
</del>
<ins class="diff-chg">18.1.3.4
</ins>
Casting
to
xs:integer
</h5>
<p>
When
a
value
of
any
simple
type
is
cast
as
<code>
xs:integer
</code>,
the
<code>
xs:integer
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:integer
</code>,
or
a
type
derived
from
<code>
xs:integer
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>,
converted
to
an
<code>
xs:integer
</code>
value
if
need
be,
and
the
conversion
is
complete.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:decimal
</code>,
<code>
xs:float
</code>
or
<code>
xs:double
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>
with
the
fractional
part
discarded
and
the
value
converted
to
<code>
xs:integer
</code>.
Thus,
casting
<code>
3.1456
</code>
returns
<code>
3
</code>
and
<code>
-17.89
</code>
returns
<code>
-17
</code>.
Casting
<code>
3.124E1
</code>
returns
<code>
31
</code>.
If
<em>
SV
</em>
is
too
large
to
be
accommodated
as
an
integer,
(see
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
for
<a title="implementation-defined" class="termref" href="#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
limits
on
numeric
values)
an
error
is
raised
[
<a href="#ERRFOCA0003" title="err:FOCA0003">
err:FOCA0003
</a>
].
If
<em>
SV
</em>
is
one
of
the
special
<code>
xs:float
</code>
or
<code>
xs:double
</code>
values
<code>
NaN
</code>,
<code>
INF
</code>,
or
<code>
-INF
</code>,
an
error
is
raised
[
<a href="#ERRFOCA0002" title="err:FOCA0002">
err:FOCA0002
</a>
].
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:boolean
</code>,
<em>
SV
</em>
is
converted
to
<code>
1
</code>
if
<em>
SV
</em>
is
<code>
1
</code>
or
<code>
true
</code>
and
to
<code>
0
</code>
if
<em>
SV
</em>
is
<code>
0
</code>
or
<code>
false
</code>
and
the
conversion
is
complete.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</div>
</div>
<div class="div3">
<h4>
<a name="casting-to-durations" id= "casting-to-durations">
</a>
<del class="diff-old">17.1.4
</del>
<ins class="diff-chg">18.1.4
</ins>
Casting
to
duration
types
</h4>
<p>
When
a
value
of
type
<code>
xs:untypedAtomic
</code>,
<code>
xs:string
</code>,
a
type
derived
from
<code>
xs:string
</code>,
<code>
xs:yearMonthDuration
</code>
or
<code>
xs:dayTimeDuration
</code>
is
cast
as
<code>
xs:duration
</code>,
<code>
xs:yearMonthDuration
</code>
or
<code>
xs:dayTimeDuration
</code>,
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
the
same
as
<em>
TT
</em>,
then
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:duration
</code>,
or
a
type
derived
from
<code>
xs:duration
</code>,
but
not
<code>
xs:dayTimeDuration
</code>
or
a
type
derived
from
<code>
xs:dayTimeDuration
</code>,
and
<em>
TT
</em>
is
<code>
xs:yearMonthDuration
</code>,
then
<em>
TV
</em>
is
derived
from
<em>
SV
</em>
by
removing
the
day,
hour,
minute
and
second
components
from
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:duration
</code>,
or
a
type
derived
from
<code>
duration
</code>,
but
not
<code>
xs:yearMonthDuration
</code>
or
a
type
derived
from
<code>
xs:yearMonthDuration
</code>,
and
<em>
TT
</em>
is
<code>
xs:dayTimeDuration
</code>,
then
<em>
TV
</em>
is
derived
from
<em>
SV
</em>
by
removing
the
year
and
month
components
from
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:yearMonthDuration
</code>
or
<code>
xs:dayTimeDuration
</code>,
and
<em>
TT
</em>
is
<code>
xs:duration
</code>,
then
<em>
TV
</em>
is
derived
from
<em>
SV
</em>
as
discussed
in
<a href= "#casting-from-derived-to-parent">
<b>
<del class="diff-old">17.3
</del>
<ins class="diff-chg">18.3
</ins>
Casting
from
derived
types
to
parent
types
</b>
</a>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:yearMonthDuration
</code>
and
<em>
TT
</em>
is
<code>
xs:dayTimeDuration
</code>,
the
cast
is
permitted
and
returns
a
<code>
xs:dayTimeDuration
</code>
with
value
0.0
seconds.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:dayTimeDuration
</code>
and
<em>
TT
</em>
is
<code>
xs:yearMonthDuration
</code>,
the
cast
is
permitted
and
returns
a
<code>
xs:yearMonthDuration
</code>
with
value
0
months.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
<p>
Note
that
casting
from
<code>
xs:duration
</code>
to
<code>
xs:yearMonthDuration
</code>
or
<code>
xs:dayTimeDuration
</code>
loses
information.
To
avoid
this,
users
can
cast
the
<code>
xs:duration
</code>
value
to
both
an
<code>
xs:yearMonthDuration
</code>
and
an
<code>
xs:dayTimeDuration
</code>
and
work
with
both
values.
</p>
</div>
<div class="div3">
<h4>
<a name="casting-to-datetimes" id= "casting-to-datetimes">
</a>
<del class="diff-old">17.1.5
</del>
<ins class="diff-chg">18.1.5
</ins>
Casting
to
date
and
time
types
</h4>
<p>
In
several
situations,
casting
to
date
and
time
types
requires
the
extraction
of
a
component
from
<em>
SV
</em>
or
from
the
result
of
<a href= "#func-current-dateTime">
<code>
fn:current-dateTime
</code>
</a>
and
converting
it
to
an
<code>
xs:string
</code>.
These
conversions
must
follow
certain
rules.
For
example,
converting
an
<code>
xs:integer
</code>
year
value
requires
converting
to
an
<code>
xs:string
</code>
with
four
or
more
characters,
preceded
by
a
minus
sign
if
the
value
is
negative.
</p>
<p>
This
document
defines
four
functions
to
perform
these
conversions.
These
functions
are
for
illustrative
purposes
only
and
make
no
recommendations
as
to
style
or
efficiency.
References
to
these
functions
from
the
following
text
are
not
normative.
</p>
<p>
The
arguments
to
these
functions
come
from
functions
defined
in
this
document.
Thus,
the
functions
below
assume
that
they
are
correct
and
do
no
range
checking
on
them.
</p>
<div class="exampleInner">
<pre>
declare function eg:convertYearToString($year as xs:integer) as xs:string
{
   let $plusMinus := if ($year &gt;= 0) then "" else "-"
   let $yearString := fn:abs($year) cast as xs:string
<del class="diff-old">   let $length := fn:length($yearString)
</del>
<ins class="diff-chg">   let $length := fn:string-length($yearString)
</ins>
   return
     if ($length = 1)  then fn:concat($plusMinus, "000", $yearString)
     else
     if ($length = 2)  then fn:concat($plusMinus, "00", $yearString)
       else
       if ($length = 3)  then fn:concat($plusMinus, "0", $yearString)
       else fn:concat($plusMinus, $yearString)
}
                    
</pre>
</div>
<div class="exampleInner">
<pre>
declare function eg:convertTo2CharString($value as xs:integer) as xs:string
{
   let $string := $value cast as xs:string
   return 
<del class="diff-old">     if (fn:length($string) = 1) then fn:concat("0", $string)
</del>
<ins class="diff-chg">     if (fn:string-length($string) = 1) then fn:concat("0", $string)
</ins>
     else $string
}
                    
</pre>
</div>
<div class="exampleInner">
<pre>
declare function eg:convertSecondsToString($seconds as xs:decimal) as xs:string
{
   let $string := $seconds cast as xs:string
<del class="diff-old">   let $intLength := fn:length(($seconds cast as xs:integer) cast as xs:string)
</del>
<ins class="diff-chg">   let $intLength := fn:string-length(($seconds cast as xs:integer) cast as xs:string)
</ins>
   return 
     if ($intLength = 1) then fn:concat("0", $string)
     else $string
}
                    
</pre>
</div>
<div class="exampleInner">
<pre>
declare function eg:convertTZtoString($tz as xs:dayTimeDuration?) as xs:string
{
<del class="diff-old">   if (empty($tz)) then ""
</del>
<ins class="diff-chg">   if (empty($tz)) 
     then ""
   else if ($tz eq xs:dayTimeDuration('PT0S'))
     then "Z"
</ins>
   else 
<del class="diff-old">     let $tzh := fn:hours-from-dayTimeDuration($tz)
     let $tzm := fn:minutes-from-dayTimeDuration($tz)
</del>
<ins class="diff-chg">     let $tzh := fn:hours-from-duration($tz)
     let $tzm := fn:minutes-from-duration($tz)
</ins>
     let $plusMinus := if ($tzh &gt;= 0) then "+" else "-"
     let $tzhString := eg:convertTo2CharString(fn:abs($tzh))
     let $tzmString := eg:convertTo2CharString(fn:abs($tzm))
     return fn:concat($plusMinus, $tzhString, ":", $tzmString)
}
                    
</pre>
</div>
<p>
Conversion
from
primitive
types
to
date
and
time
types
follows
the
rules
below.
</p>
<ol class="enumar">
<li>
<p>
When
a
value
of
any
primitive
type
is
cast
as
<code>
xs:dateTime
</code>,
the
<code>
xs:dateTime
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:dateTime
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:date
</code>,
then
let
<em>
SYR
</em>
be
<code>
eg:convertYearToString(
fn:year-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>,
let
<em>
SMO
</em>
be
<code>
eg:convertTo2CharString(
fn:month-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>,
let
<em>
SDA
</em>
be
<code>
eg:convertTo2CharString(
fn:day-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:dateTime(
fn:concat(
</code>
<em>
SYR
</em>
<code>,
'-',
</code>
<em>
SMO
</em>
<code>,
'-',
</code>
<em>
SDA
</em>
<code>,
'T00:00:00
'
</code>,
<em>
STZ
</em>
<code>
)
)
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</li>
<li>
<p>
When
a
value
of
any
primitive
type
is
cast
as
<code>
xs:time
</code>,
the
<code>
xs:time
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:time
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:dateTime
</code>,
then
<em>
TV
</em>
is
<code>
xs:time(
fn:concat(
eg:convertTo2CharString(
fn:hours-from-dateTime(
</code>
<em>
SV
</em>
<code>
)),
':',
eg:convertTo2CharString(
fn:minutes-from-dateTime(
</code>
<em>
SV
</em>
<code>
)),
':',
eg:convertSecondsToString(
fn:seconds-from-dateTime(
</code>
<em>
SV
</em>
<code>
)),
eg:convertTZtoString(
fn:timezone-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
))
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</li>
<li>
<p>
When
a
value
of
any
primitive
type
is
cast
as
<code>
xs:date
</code>,
the
<code>
xs:date
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:date
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:dateTime
</code>,
then
let
<em>
SYR
</em>
be
<code>
eg:convertYearToString(
fn:year-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>,
let
<em>
SMO
</em>
be
<code>
eg:convertTo2CharString(
fn:month-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>,
let
<em>
SDA
</em>
be
<code>
eg:convertTo2CharString(
fn:day-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(fn:timezone-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:date(
fn:concat(
</code>
<em>
SYR
</em>
<code>,
'-',
</code>
<em>
SMO
</em>
<code>,
'-',
</code>
<em>
SDA
</em>,
<em>
STZ
</em>
<code>
)
)
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</li>
<li>
<p>
When
a
value
of
any
primitive
type
is
cast
as
<code>
xs:gYearMonth
</code>,
the
<code>
xs:gYearMonth
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:gYearMonth
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:dateTime
</code>,
then
let
<em>
SYR
</em>
be
<code>
eg:convertYearToString(
fn:year-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>,
let
<em>
SMO
</em>
be
<code>
eg:convertTo2CharString(
fn:month-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:gYearMonth(
fn:concat(
</code>
<em>
SYR
</em>
<code>,
'-',
</code>
<em>
SMO
</em>,
<em>
STZ
</em>
<code>
)
)
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:date
</code>,
then
let
<em>
SYR
</em>
be
<code>
eg:convertYearToString(
fn:year-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>,
let
<em>
SMO
</em>
be
<code>
eg:convertTo2CharString(
fn:month-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:gYearMonth(
fn:concat(
</code>
<em>
SYR
</em>
<code>,
'-',
</code>
<em>
SMO
</em>,
<em>
STZ
</em>
<code>
)
)
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</li>
<li>
<p>
When
a
value
of
any
primitive
type
is
cast
as
<code>
xs:gYear
</code>,
the
<code>
xs:gYear
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:gYear
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:dateTime
</code>,
let
<em>
SYR
</em>
be
<code>
eg:convertYearToString(
fn:year-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:gYear(fn:concat(
</code>
<em>
SYR
</em>,
<em>
STZ
</em>
<code>
))
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:date
</code>,
let
<em>
SYR
</em>
be
<code>
eg:convertYearToString(
fn:year-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
;
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:gYear(fn:concat(
</code>
<em>
SYR
</em>,
<em>
STZ
</em>
<code>
))
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</li>
<li>
<p>
When
a
value
of
any
primitive
type
is
cast
as
<code>
xs:gMonthDay
</code>,
the
<code>
xs:gMonthDay
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:gMonthDay
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:dateTime
</code>,
then
let
<em>
SMO
</em>
be
<code>
eg:convertTo2CharString(
fn:month-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>,
let
<em>
SDA
</em>
be
<code>
eg:convertTo2CharString(
fn:day-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:gYearMonth(
fn:concat(
</code>
<code>
'--',
</code>
<em>
SMO
</em>
<code>
'-',
</code>
<em>
SDA
</em>,
<em>
STZ
</em>
<code>
)
)
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:date
</code>,
then
let
<em>
SMO
</em>
be
<code>
eg:convertTo2CharString(
fn:month-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>,
let
<em>
SDA
</em>
be
<code>
eg:convertTo2CharString(
fn:day-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:gYearMonth(
fn:concat(
</code>
<code>
'--',
</code>
<em>
SMO
</em>
<code>,
'-',
</code>
<em>
SDA
</em>,
<em>
STZ
</em>
<code>
)
)
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</li>
<li>
<p>
When
a
value
of
any
primitive
type
is
cast
as
<code>
xs:gDay
</code>,
the
<code>
xs:gDay
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:gDay
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:dateTime
</code>,
then
let
<em>
SDA
</em>
be
<code>
eg:convertTo2CharString(
fn:day-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:gDay(
fn:concat(
'---'
</code>,
<em>
SDA
</em>,
<em>
STZ
</em>
<code>
))
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:date
</code>,
then
let
<em>
SDA
</em>
be
<code>
eg:convertTo2CharString(
fn:day-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:gDay(
fn:concat(
'---'
</code>,
<em>
SDA
</em>,
<em>
STZ
</em>
<code>
))
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</li>
<li>
<p>
When
a
value
of
any
primitive
type
is
cast
as
<code>
xs:gMonth
</code>,
the
<code>
xs:gMonth
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:gMonth
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:dateTime
</code>,
then
let
<em>
SMO
</em>
be
<code>
eg:convertTo2CharString(
fn:month-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-dateTime(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:gMonth(
fn:concat(
'--'
</code>
,
<em>
SMO
</em>,
<em>
STZ
</em>
<code>
))
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:date
</code>,
then
let
<em>
SMO
</em>
be
<code>
eg:convertTo2CharString(
fn:month-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
and
let
<em>
STZ
</em>
be
<code>
eg:convertTZtoString(
fn:timezone-from-date(
</code>
<em>
SV
</em>
<code>
))
</code>
;
<em>
TV
</em>
is
<code>
xs:gMonth(
fn:concat(
'--'
</code>,
<em>
SMO
</em>,
<em>
STZ
</em>
<code>
))
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</li>
</ol>
</div>
<div class="div3">
<h4>
<a name="casting-boolean" id="casting-boolean">
</a>
<del class="diff-old">17.1.6
</del>
<ins class="diff-chg">18.1.6
</ins>
Casting
to
xs:boolean
</h4>
<p>
When
a
value
of
any
primitive
type
is
cast
as
<code>
xs:boolean
</code>,
the
<code>
xs:boolean
</code>
value
<em>
TV
</em>
is
derived
from
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:boolean
</code>,
then
<em>
TV
</em>
is
<em>
SV
</em>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:float
</code>,
<code>
xs:double
</code>,
<code>
xs:decimal
</code>
or
<code>
xs:integer
</code>
and
<em>
SV
</em>
is
<code>
0
</code>,
<code>
+0
</code>,
<code>
-0
</code>,
<code>
0.0
</code>,
<code>
0.0E0
</code>
or
<code>
NaN
</code>,
then
<em>
TV
</em>
is
<code>
false
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:float
</code>,
<code>
xs:double
</code>,
<code>
xs:decimal
</code>
or
<code>
xs:integer
</code>
and
<em>
SV
</em>
is
not
one
of
the
above
values,
then
<em>
TV
</em>
is
<code>
true
</code>.
</p>
</li>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>,
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</div>
<div class="div3">
<h4>
<a name="casting-to-binary" id="casting-to-binary">
</a>
<del class="diff-old">17.1.7
</del>
<ins class="diff-chg">18.1.7
</ins>
Casting
to
xs:base64Binary
and
xs:hexBinary
</h4>
<p>
Values
of
type
<code>
xs:base64Binary
</code>
can
be
cast
as
<code>
xs:hexBinary
</code>
and
vice
versa,
since
the
two
types
have
the
same
value
space.
Casting
to
<code>
xs:base64Binary
</code>
and
<code>
xs:hexBinary
</code>
is
also
supported
from
the
same
type
and
from
<code>
xs:untypedAtomic
</code>,
<code>
xs:string
</code>
and
subtypes
of
<code>
xs:string
</code>
using
<a href= "#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
semantics.
</p>
</div>
<div class="div3">
<h4>
<a name="casting-to-anyuri" id="casting-to-anyuri">
</a>
<del class="diff-old">17.1.8
</del>
<ins class="diff-chg">18.1.8
</ins>
Casting
to
xs:anyURI
</h4>
<p>
Casting
to
<code>
xs:anyURI
</code>
is
supported
only
from
the
same
type,
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>.
</p>
<p>
When
a
value
of
any
primitive
type
is
cast
as
<code>
xs:anyURI
</code>,
the
<code>
xs:anyURI
</code>
value
<em>
TV
</em>
is
derived
from
the
<em>
ST
</em>
and
<em>
SV
</em>
as
follows:
</p>
<ul>
<li>
<p>
If
<em>
ST
</em>
is
<code>
xs:untypedAtomic
</code>
or
<code>
xs:string
</code>
see
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
</ul>
</div>
<div class="div3">
<h4>
<a name="casting-to-qname-and-notation" id= "casting-to-qname-and-notation">
</a>
<ins class="diff-new">18.1.9
Casting
to
xs:QName
and
xs:NOTATION
</ins></h4><p><ins class="diff-new">
Casting
from
</ins><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
xs:untypedAtomic
</ins></code><ins class="diff-new">
to
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
is
described
in
</ins><a href= "#casting-from-strings"><b><ins class="diff-new">
18.1.1
Casting
from
xs:string
and
xs:untypedAtomic
</ins></b></a>.</p><p><ins class="diff-new">
It
is
also
possible
to
cast
from
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
to
</ins><code><ins class="diff-new">
xs:QName
</ins></code>,<ins class="diff-new">
or
from
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
to
any
type
derived
by
restriction
from
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code>.<ins class="diff-new">
(Casting
to
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
itself
is
not
allowed,
because
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
is
an
abstract
type.)
The
resulting
</ins><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
has
the
same
prefix,
local
name,
and
namespace
URI
parts
as
the
supplied
value.
</ins></p></div>
</div>
<div class="div2">
<h3>
<a name="casting-to-derived-types" id= "casting-to-derived-types">
</a>
<del class="diff-old">17.2
</del>
<ins class="diff-chg">18.2
</ins>
Casting
to
derived
types
</h3>
<p>
Casting
a
value
to
a
derived
type
can
be
separated
into
four
cases.
Note
that
<code>
xs:untypedAtomic
</code>,
<code>
xs:integer
</code>
and
the
two
derived
types
of
<code>
xs:duration
</code>:
<code>
xs:yearMonthDuration
</code>
and
<code>
xs:dayTimeDuration
</code>
are
treated
as
primitive
types.
</p>
<ol class="enumar">
<li>
<p>
When
<em>
SV
</em>
is
an
instance
of
a
type
that
is
derived
by
restriction
from
<em>
TT
</em>.
This
is
described
in
section
<a href= "#casting-from-derived-to-parent">
<b>
<del class="diff-old">17.3
</del>
<ins class="diff-chg">18.3
</ins>
Casting
from
derived
types
to
parent
types
</b>
</a>.
</p>
</li>
<li>
<p>
When
<em>
SV
</em>
is
an
instance
of
a
type
derived
by
restriction
from
the
same
primitive
type
as
<em>
TT
</em>.
This
is
described
in
<a href="#casting-within-branch">
<b>
<del class="diff-old">17.4
</del>
<ins class="diff-chg">18.4
</ins>
Casting
within
a
branch
of
the
type
hierarchy
</b>
</a>.
</p>
</li>
<li>
<p>
When
the
derived
type
is
derived,
directly
or
indirectly,
from
a
different
primitive
type
than
the
primitive
type
of
<em>
ST
</em>.
This
is
described
in
<a href="#casting-across-hierarchy">
<b>
<del class="diff-old">17.5
</del>
<ins class="diff-chg">18.5
</ins>
Casting
across
the
type
hierarchy
</b>
</a>.
</p>
</li>
<li>
<p>
When
<em>
SV
</em>
is
an
instance
of
the
<em>
TT
</em>,
the
cast
always
succeeds
(Identity
cast).
</p>
</li>
</ol>
</div>
<div class="div2">
<h3>
<a name="casting-from-derived-to-parent" id= "casting-from-derived-to-parent">
</a>
<del class="diff-old">17.3
</del>
<ins class="diff-chg">18.3
</ins>
Casting
from
derived
types
to
parent
types
</h3>
<p>
Except
in
the
case
of
<code>
xs:NOTATION
</code>,
it
is
always
possible
to
cast
a
value
of
any
atomic
type
to
an
atomic
type
from
which
it
is
derived,
directly
or
indirectly,
by
restriction.
For
example,
it
is
possible
to
cast
an
<code>
xs:unsignedShort
</code>
to
an
<code>
xs:unsignedInt
</code>,
an
<code>
xs:integer
</code>,
or
an
<code>
xs:decimal
</code>.
Since
the
value
space
of
the
original
type
is
a
subset
of
the
value
space
of
the
target
type,
such
a
cast
is
always
successful.
The
result
will
have
the
same
value
as
the
original,
but
will
have
a
new
type
annotation.
</p>
</div>
<div class="div2">
<h3>
<a name="casting-within-branch" id= "casting-within-branch">
</a>
<del class="diff-old">17.4
</del>
<ins class="diff-chg">18.4
</ins>
Casting
within
a
branch
of
the
type
hierarchy
</h3>
<p>
It
is
possible
to
cast
an
<em>
SV
</em>
to
a
<em>
TT
</em>
if
the
type
of
the
<em>
SV
</em>
and
the
<em>
TT
</em>
type
are
both
derived
by
restriction
(directly
or
indirectly)
from
the
same
primitive
type,
provided
that
the
supplied
value
conforms
to
the
constraints
implied
by
the
facets
of
the
target
type.
This
includes
the
case
where
the
target
type
is
derived
from
the
type
of
the
supplied
value,
as
well
as
the
case
where
the
type
of
the
supplied
value
is
derived
from
the
target
type.
For
example,
an
instance
of
<code>
xs:byte
</code>
can
be
cast
as
<code>
xs:unsignedShort
</code>,
provided
the
value
is
not
negative.
</p>
<p>
If
the
value
does
not
conform
to
the
facets
defined
for
the
target
type,
then
an
error
is
raised
[
<a href="#ERRFORG0001" title= "err:FORG0001">
err:FORG0001
</a>
].
See
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>.
In
the
case
of
the
pattern
facet
(which
applies
to
the
lexical
space
rather
than
the
value
space),
the
pattern
is
tested
against
the
canonical
lexical
representation
of
the
value,
as
defined
for
the
source
type
(or
the
result
of
casting
the
value
to
an
<code>
xs:string
</code>,
in
the
case
of
types
that
have
no
canonical
lexical
representation
defined
for
them).
</p>
<p>
Note
that
this
will
cause
casts
to
fail
if
the
pattern
excludes
the
canonical
lexical
representation
of
the
source
type.
For
example,
if
the
type
<code>
my:distance
</code>
is
defined
as
a
restriction
of
<code>
xs:decimal
</code>
with
a
pattern
that
requires
two
digits
after
the
decimal
point,
casting
of
an
<code>
xs:integer
</code>
to
<code>
my:distance
</code>
will
always
fail,
because
the
canonical
representation
of
an
<code>
xs:integer
</code>
does
not
conform
to
this
pattern.
</p>
<p>
In
some
cases,
casting
from
a
parent
type
to
a
derived
type
requires
special
rules.
See
<a href= "#casting-to-durations">
<b>
<del class="diff-old">17.1.4
</del>
<ins class="diff-chg">18.1.4
</ins>
Casting
to
duration
types
</b>
</a>
for
rules
regarding
casting
to
<code>
xs:yearMonthDuration
</code>
and
<code>
xs:dayTimeDuration
</code>.
See
<a href= "#casting-to-ENTITY">
<b>
<del class="diff-old">17.4.1
</del>
<ins class="diff-chg">18.4.1
</ins>
Casting
to
xs:ENTITY
</b>
</a>,
below,
for
casting
to
<code>
xs:ENTITY
</code>
and
types
derived
from
it.
</p>
<div class="div3">
<h4>
<a name="casting-to-ENTITY" id="casting-to-ENTITY">
</a>
<del class="diff-old">17.4.1
</del>
<ins class="diff-chg">18.4.1
</ins>
Casting
to
xs:ENTITY
</h4>
<p>
<a href="#xmlschema-2">
[XML
Schema
Part
2:
Datatypes
Second
Edition]
</a>
says
that
"The
value
space
of
ENTITY
is
the
set
of
all
strings
that
match
the
NCName
production
...
and
have
been
declared
as
an
unparsed
entity
in
a
document
type
definition."
However,
<a href="#xslt20">
[XSL
Transformations
(XSLT)
Version
2.0]
</a>
and
<a href="#xquery">
[XQuery
1.0:
An
XML
Query
Language]
</a>
do
not
check
that
constructed
values
of
type
<code>
xs:ENTITY
</code>
match
declared
unparsed
entities.
Thus,
this
rule
is
relaxed
in
this
specification
and,
in
casting
to
<code>
xs:ENTITY
</code>
and
types
derived
from
it,
no
check
is
made
that
the
values
correspond
to
declared
unparsed
entities.
</p>
</div>
</div>
<div class="div2">
<h3>
<a name="casting-across-hierarchy" id= "casting-across-hierarchy">
</a>
<del class="diff-old">17.5
</del>
<ins class="diff-chg">18.5
</ins>
Casting
across
the
type
hierarchy
</h3>
<p>
When
the
<em>
ST
</em>
and
the
<em>
TT
</em>
are
derived,
directly
or
indirectly,
from
different
primitive
types,
this
is
called
casting
across
the
type
hierarchy.
Casting
across
the
type
hierarchy
is
logically
equivalent
to
three
separate
steps
performed
in
order.
Errors
can
occur
in
either
of
the
latter
two
steps.
</p>
<ol class="enumar">
<li>
<p>
Cast
the
<em>
SV
</em>,
up
the
hierarchy,
to
the
primitive
type
of
the
source,
as
described
in
<a href= "#casting-from-derived-to-parent">
<b>
<del class="diff-old">17.3
</del>
<ins class="diff-chg">18.3
</ins>
Casting
from
derived
types
to
parent
types
</b>
</a>.
</p>
<ol class="enumla">
<li>
<p>
If
<em>
SV
</em>
is
an
instance
of
<code>
xs:string
</code>
or
<code>
xs:untypedAtomic
</code>,
check
its
value
against
the
pattern
facet
of
<em>
TT
</em>,
and
raise
an
error
[
<a href="#ERRFORG0001" title="err:FORG0001">
err:FORG0001
</a>
]
if
the
check
fails.
</p>
</li>
</ol>
</li>
<li>
<p>
Cast
the
value
to
the
primitive
type
of
<em>
TT
</em>,
as
described
in
<a href="#casting-from-primitive-to-primitive">
<b>
<del class="diff-old">17.1
</del>
<ins class="diff-chg">18.1
</ins>
Casting
from
primitive
types
to
primitive
types
</b>
</a>.
</p>
<ul>
<li>
<p>
If
<em>
TT
</em>
is
derived
from
<code>
xs:NOTATION
</code>,
assume
for
the
purposes
of
this
rule
that
casting
to
<code>
xs:NOTATION
</code>
succeeds.
</p>
</li>
</ul>
</li>
<li>
<p>
Cast
the
value
down
to
the
<em>
TT
</em>,
as
described
in
<a href= "#casting-within-branch">
<b>
<del class="diff-old">17.4
</del>
<ins class="diff-chg">18.4
</ins>
Casting
within
a
branch
of
the
type
hierarchy
</b>
</a>
</p>
</li>
</ol>
</div>
</div>
</div>
<div class="back">
<div class="div1">
<h2>
<a name="biblio" id="biblio">
</a>
A
References
</h2>
<div class="div2">
<h3>
<a name="normative-biblio" id="normative-biblio">
</a>
A.1
Normative
References
</h3>
<dl>
<dt class="label">
<span>
<a name="ieee754" id="ieee754">
</a>
IEEE
754-1985
</span>
</dt>
<dd>
<div>
IEEE.
<em>
IEEE
Standard
for
Binary
Floating-Point
Arithmetic.
</em>
</div>
</dd>
<dt class="label">
<span>
<a name="LDML" id="LDML">
</a>
Locale
Data
Markup
Language
</span>
</dt>
<dd>
<div>
Unicode
Technical
Standard
#35,
Locale
Data
Markup
Language.
Available
at:
<a href= "http://www.unicode.org/unicode/reports/tr35/">
http://www.unicode.org/unicode/reports/tr35/
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="rfc2396" id="rfc2396">
</a>
RFC
2396
</span>
</dt>
<dd>
<div>
IETF.
<em>
RFC
2396:
Uniform
Resource
Identifiers
(URI):
Generic
Syntax.
</em>
Available
at:
<a href= "http://www.ietf.org/rfc/rfc2396.txt">
http://www.ietf.org/rfc/rfc2396.txt
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="rfc3986" id="rfc3986">
</a>
RFC
3986
</span>
</dt>
<dd>
<div>
IETF.
<em>
RFC
3986:
Uniform
Resource
Identifiers
(URI):
Generic
Syntax.
</em>
Available
at:
<a href= "http://www.ietf.org/rfc/rfc3986.txt">
http://www.ietf.org/rfc/rfc3986.txt
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="rfc3987" id="rfc3987">
</a>
RFC
3987
</span>
</dt>
<dd>
<div>
IETF.
<em>
RFC
3987:
Internationalized
Resource
Identifiers
(IRIs).
</em>
Available
at:
<a href= "http://www.ietf.org/rfc/rfc3987.txt">
http://www.ietf.org/rfc/rfc3987.txt
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="charmod" id= "charmod">
</a>
Character
Model
for
the
World
Wide
Web
1.0:
Fundamentals
</span>
</dt>
<dd>
<div>
Character
Model
for
the
World
Wide
Web
1.0:
Fundamentals.
Available
at:
<a href= "http://www.w3.org/TR/2005/REC-charmod-20050215/">
http://www.w3.org/TR/2005/REC-charmod-20050215/
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="charmod-normalization" id= "charmod-normalization">
</a>
Character
Model
for
the
World
Wide
Web
1.0:
Normalization
</span>
</dt>
<dd>
<div>
Character
Model
for
the
World
Wide
Web
1.0:
Normalization,
Last
Call
Working
Draft.
Available
at:
<a href= "http://www.w3.org/TR/2004/WD-charmod-norm-20040225/">
http://www.w3.org/TR/2004/WD-charmod-norm-20040225/
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="ISO3166" id="ISO3166">
</a>
<ins class="diff-new">ISO
3166-1
</ins></span></dt><dd><div><ins class="diff-new">
ISO
(International
Organization
for
Standardization)
</ins><em><ins class="diff-new">
Codes
for
the
representation
of
names
of
countries
and
their
subdivisions
-
Part
1:
Country
codes
</ins></em><ins class="diff-new">
ISO
3166-1:1997.
</ins></div></dd><dt class="label"><span>
<a name="ISO10967" id="ISO10967">
</a>
ISO
10967
</span>
</dt>
<dd>
<div>
ISO
(International
Organization
for
Standardization).
<em>
ISO/IEC
10967-1:1994,
Information
technology—Language
Independent
Arithmetic—Part
1:
Integer
and
floating
point
arithmetic
</em>
[Geneva]:
International
Organization
for
Standardization,
1994.
Available
from:
<a href= "http://www.iso.ch/">
http://www.iso.ch/
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="Unicode4" id="Unicode4">
</a>
The
Unicode
Standard
</span>
</dt>
<dd>
<div>
The
Unicode
Consortium,
Reading,
MA,
Addison-Wesley,
2003.
<em>
The
Unicode
Standard
</em>
as
updated
from
time
to
time
by
the
publication
of
new
versions.
See
<a href= "http://www.unicode.org/unicode/standard/versions">
http://www.unicode.org/unicode/standard/versions
</a>
for
the
latest
version
and
additional
information
on
versions
of
the
standard
and
of
the
Unicode
Character
Database.
The
version
of
Unicode
to
be
used
is
<a title="implementation-defined" class= "termref" href="#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>,
but
implementations
are
recommended
to
use
the
latest
Unicode
version;
currently,
Version
4.0.00,
Addison-Wesley,
2003
ISBN
0-321-18578-1
</div>
</dd>
<dt class="label">
<span>
<a name="Unicode-Collations" id= "Unicode-Collations">
</a>
Unicode
Collation
Algorithm
</span>
</dt>
<dd>
<div>
Unicode
Technical
Standard
#10,
Unicode
Collation
Algorithm.
Available
at:
<a href= "http://www.unicode.org/unicode/reports/tr10/">
http://www.unicode.org/unicode/reports/tr10/
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="Unicode-Regex" id= "Unicode-Regex">
</a>
Unicode
Regular
Expressions
</span>
</dt>
<dd>
<div>
Unicode
Technical
Standard
#18,
Unicode
Regular
Expressions.
Available
at:
<a href= "http://www.unicode.org/unicode/reports/tr18/">
http://www.unicode.org/unicode/reports/tr18/
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="REC-xml" id= "REC-xml">
</a>
<del class="diff-old">Extensible
Markup
Language
(XML)
1.0
Recommendation
(Third
Edition)
</del>
<ins class="diff-chg">REC-xml
</ins>
</span>
</dt>
<dd>
<div>
World
Wide
Web
Consortium.
<em>
Extensible
Markup
Language
(XML)
1.0
Third
Edition.
</em>
Available
at:
<a href= "http://www.w3.org/TR/REC-xml">
http://www.w3.org/TR/REC-xml
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="xml11" id="xml11">
</a>
Extensible
Markup
Language
(XML)
1.1
Recommendation
</span>
</dt>
<dd>
<div>
World
Wide
Web
Consortium.
<em>
Extensible
Markup
Language
(XML)
1.1.
</em>
Available
at:
<a href= "http://www.w3.org/TR/2004/REC-xml11-20040204/">
http://www.w3.org/TR/2004/REC-xml11-20040204/
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="xpath" id="xpath">
</a>
XML
Path
Language
(XPath)
<del class="diff-old">2.0
</del>
<ins class="diff-chg">Version
1.0
</ins>
</span>
</dt>
<dd>
<div>
<a href="http://www.w3.org/TR/xpath">
<cite>
<ins class="diff-new">XML
Path
Language
(XPath)
Version
1.0
</ins></cite></a>,<ins class="diff-new">
Steven
DeRose
and
James
Clark,
Editors.
</ins>
World
Wide
Web
<del class="diff-old">Consortium.
</del>
<ins class="diff-chg">Consortium,
16&#160;Nov&#160;1999.
This
version
is
http://www.w3.org/TR/1999/REC-xpath-19991116.
The
</ins><a href="http://www.w3.org/TR/xpath"><ins class="diff-chg">
latest
version
</ins></a><ins class="diff-chg">
is
available
at
http://www.w3.org/TR/xpath.
</ins></div></dd><dt class="label"><span><a name="xpath20" id="xpath20"></a>
XML
Path
Language
(XPath)
<del class="diff-old">Version
2.0.
Available
at:
</del>
<ins class="diff-chg">2.0
</ins></span></dt><dd><div><a href="http://www.w3.org/TR/xpath20/"><cite><ins class="diff-chg">
XML
Path
Language
(XPath)
2.0
</ins></cite></a>,<ins class="diff-chg">
Don
Chamberlin,
Anders
Berglund,
Scott
Boag,
</ins><em><ins class="diff-chg">
et.
al.
</ins></em>,<ins class="diff-chg">
Editors.
World
Wide
Web
Consortium,
23
January
2007.
This
version
is
http://www.w3.org/TR/2007/REC-xpath20-20070123/.
The
</ins>
<a href= "http://www.w3.org/TR/xpath20/">
<del class="diff-old">http://www.w3.org/TR/xpath20/
</del>
<ins class="diff-chg">latest
version
</ins>
</a>
<ins class="diff-new">is
available
at
http://www.w3.org/TR/xpath20/.
</ins></div></dd><dt class="label">
<span>
<a name="xpath-21" id="xpath-21">
</a>
<ins class="diff-new">XML
Path
Language
(XPath)
2.1
</ins></span></dt><dd><div><a href="http://www.w3.org/TR/xpath-21/"><cite><ins class="diff-new">
XML
Path
Language
(XPath)
2.1
</ins></cite></a>,<ins class="diff-new">
Jonathan
Robie,
Don
Chamberlin,
Michael
Dyck,
John
Snelson,
Editors.
World
Wide
Web
Consortium,
15
December
2009.
This
version
is
http://www.w3.org/TR/2009/WD-xpath-21-20091215/.
The
</ins><a href= "http://www.w3.org/TR/xpath-21/"><ins class="diff-new">
latest
version
</ins></a><ins class="diff-new">
is
available
at
http://www.w3.org/TR/xpath-21/.
</ins>
</div>
</dd>
<dt class="label">
<span>
<a name="xslt20" id="xslt20">
</a>
XSL
Transformations
(XSLT)
Version
2.0
</span>
</dt>
<dd>
<div>
<a href="http://www.w3.org/TR/xslt20">
<cite>
<ins class="diff-new">XSL
Transformations
(XSLT)
Version
2.0
</ins></cite></a>,<ins class="diff-new">
Michael
Kay,
Editor.
</ins>
World
Wide
Web
<del class="diff-old">Consortium.
</del>
<ins class="diff-chg">Consortium,
23
January
2007.
This
version
is
http://www.w3.org/TR/2007/REC-xslt20-20070123/.
The
</ins><a href= "http://www.w3.org/TR/xslt20/"><ins class="diff-chg">
latest
version
</ins></a><ins class="diff-chg">
is
available
at
http://www.w3.org/TR/xslt20/.
</ins></div></dd><dt class="label"><span><a name="xslt-21" id="xslt-21"></a>
XSL
Transformations
<ins class="diff-new">(XSLT)
</ins>
Version
<del class="diff-old">2.0.
Available
at:
http://www.w3.org/TR/xslt20/
</del>
<ins class="diff-chg">2.1
</ins></span>
</dt>
<dd>
<div>
<a href="http://www.w3.org/TR/xslt-21">
<cite>
<ins class="diff-new">XSL
Transformations
(XSLT)
Version
2.1
</ins></cite></a>,<ins class="diff-new">
Michael
Kay,
Editor.
World
Wide
Web
Consortium,
«awaiting
First
Public
Working
Draft
publication».
This
version
is
http://www.w3.org/TR/2007/WD-xslt-21-YYYYMMDD/.
The
</ins><a href= "http://www.w3.org/TR/xslt-21/"><ins class="diff-new">
latest
version
</ins></a><ins class="diff-new">
is
available
at
http://www.w3.org/TR/xslt-21/.
</ins>
</div>
</dd>
<dt class="label">
<span>
<a name="xpath-datamodel-11" id= "xpath-datamodel-11">
</a>
XQuery
<del class="diff-old">1.0
</del>
and
XPath
<del class="diff-old">2.0
</del>
Data
Model
<ins class="diff-new">(XDM)
1.1
</ins>
</span>
</dt>
<dd>
<div>
<del class="diff-old">World
Wide
Web
Consortium.
</del>
<a href= "http://www.w3.org/TR/xpath-datamodel-11/">
<cite>
XQuery
<del class="diff-old">1.0
</del>
and
XPath
<del class="diff-old">2.0
</del>
Data
Model
<del class="diff-old">(XDM).
Available
at:
http://www.w3.org/TR/query-datamodel/
</del>
<ins class="diff-chg">(XDM)
1.1
</ins></cite></a>,<ins class="diff-chg">
Norman
Walsh,
John
Snelson,
Editors.
World
Wide
Web
Consortium,
15
December
2009.
This
version
is
http://www.w3.org/TR/2009/WD-xpath-datamodel-11-20091215/.
The
</ins><a href="http://www.w3.org/TR/xpath-datamodel-11/"><ins class="diff-chg">
latest
version
</ins>
</a>
<ins class="diff-new">is
available
at
http://www.w3.org/TR/xpath-datamodel-11/.
</ins></div></dd><dt class="label"><span><a name="xslt-xquery-serialization-11" id= "xslt-xquery-serialization-11"></a><ins class="diff-new">
XSLT
and
XQuery
Serialization
1.1
</ins></span></dt><dd><div><a href= "http://www.w3.org/TR/xslt-xquery-serialization-11/"><cite><ins class="diff-new">
XSLT
and
XQuery
Serialization
1.1
</ins></cite>
</a>,
<ins class="diff-new">Henry
Zongaro,
Editor.
World
Wide
Web
Consortium,
15
December
2009.
This
version
is
http://www.w3.org/TR/2009/WD-xslt-xquery-serialization-11-20091215/.
The
</ins><a href= "http://www.w3.org/TR/xslt-xquery-serialization-11/"><ins class="diff-new">
latest
version
</ins></a><ins class="diff-new">
is
available
at
http://www.w3.org/TR/xslt-xquery-serialization-11/.
</ins>
</div>
</dd>
<dt class="label">
<span>
<a name="xquery-semantics" id= "xquery-semantics">
</a>
XQuery
1.0
and
XPath
2.0
Formal
Semantics
</span>
</dt>
<dd>
<div>
<del class="diff-old">World
Wide
Web
Consortium.
</del>
<a href="http://www.w3.org/TR/xquery-semantics/">
<cite>
XQuery
1.0
and
XPath
2.0
Formal
<del class="diff-old">Semantics.
Available
at:
http://www.w3.org/TR/query-semantics/
</del>
<ins class="diff-chg">Semantics
</ins></cite>
</a>,
<ins class="diff-new">Jérôme
Siméon,
Denise
Draper,
Peter
Frankhauser,
</ins><em><ins class="diff-new">
et.
al.
</ins></em>,<ins class="diff-new">
Editors.
World
Wide
Web
Consortium,
23
January
2007.
This
version
is
http://www.w3.org/TR/2007/REC-xquery-semantics-20070123/.
The
</ins><a href="http://www.w3.org/TR/xquery-semantics/"><ins class="diff-new">
latest
version
</ins></a><ins class="diff-new">
is
available
at
http://www.w3.org/TR/xquery-semantics/.
</ins>
</div>
</dd>
<dt class="label">
<span>
<a name="xquery" id="xquery">
</a>
XQuery
1.0:
An
XML
Query
Language
</span>
</dt>
<dd>
<div>
<a href="http://www.w3.org/TR/xquery/">
<cite>
<ins class="diff-new">XQuery
1.0:
An
XML
Query
Language
</ins></cite></a>,<ins class="diff-new">
Don
Chamberlin,
Anders
Berglund,
Scott
Boag,
</ins><em><ins class="diff-new">
et.
al.
</ins></em>,<ins class="diff-new">
Editors.
</ins>
World
Wide
Web
<del class="diff-old">Consortium.
</del>
<ins class="diff-chg">Consortium,
23
January
2007.
This
version
is
http://www.w3.org/TR/2007/REC-xquery-20070123/.
The
</ins><a href= "http://www.w3.org/TR/xquery/"><ins class="diff-chg">
latest
version
</ins></a><ins class="diff-chg">
is
available
at
http://www.w3.org/TR/xquery/.
</ins></div></dd><dt class="label"><span><a name="xquery-11" id= "xquery-11"></a>
XQuery
<del class="diff-old">1.0:
</del>
<ins class="diff-chg">1.1:
</ins>
An
XML
Query
<del class="diff-old">Language.
Available
at:
</del>
<ins class="diff-chg">Language
</ins></span></dt><dd><div><a href="http://www.w3.org/TR/xquery-11/"><cite><ins class="diff-chg">
XQuery
1.1:
An
XML
Query
Language
</ins></cite></a>,<ins class="diff-chg">
Jonathan
Robie,
Don
Chamberlin,
Michael
Dyck,
John
Snelson,
Editors.
World
Wide
Web
Consortium,
15
December
2009.
This
version
is
http://www.w3.org/TR/2009/WD-xquery-11-20091215/.
The
</ins>
<a href= "http://www.w3.org/TR/xquery/">
<del class="diff-old">http://www.w3.org/TR/xquery/
</del>
<ins class="diff-chg">latest
version
</ins>
</a>
<ins class="diff-chg">is
available
at
http://www.w3.org/TR/xquery-11/.
</ins>
</div>
</dd>
<dt class="label">
<span>
<a name="xmlschema-2" id= "xmlschema-2">
</a>
XML
Schema
Part
<del class="diff-old">1:
Structures
</del>
<ins class="diff-chg">2:
Datatypes
</ins>
Second
Edition
</span>
</dt>
<dd>
<div>
XML
Schema
Part
<del class="diff-old">1:
Structures
</del>
<ins class="diff-chg">2:
Datatypes
</ins>
Second
Edition,
<del class="diff-old">Oct
</del>
<ins class="diff-chg">Oct.
</ins>
28
2004.
Available
at:
<del class="diff-old">http://www.w3.org/TR/xmlschema-1/
</del>
<a href= "http://www.w3.org/TR/xmlschema-2/">
<ins class="diff-chg">http://www.w3.org/TR/xmlschema-2/
</ins>
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="xmlschema11-2" id= "xmlschema11-2">
</a>
XML
Schema
<ins class="diff-new">1.1
</ins>
Part
2:
Datatypes
<del class="diff-old">Second
Edition
</del>
</span>
</dt>
<dd>
<div>
XML
Schema
<ins class="diff-new">1.1
</ins>
Part
2:
<del class="diff-old">Datatypes
Second
Edition,
Oct.
28
2004.
</del>
<ins class="diff-chg">Datatypes,
30
January
2009.
</ins>
Available
at:
<del class="diff-old">http://www.w3.org/TR/xmlschema-2/
</del>
<a href= "http://www.w3.org/TR/xmlschema11-2/">
<ins class="diff-chg">http://www.w3.org/TR/xmlschema11-2/
</ins>
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="REC-xml-names" id= "REC-xml-names">
</a>
Namespaces
in
XML
</span>
</dt>
<dd>
<div>
Namespaces
in
XML.
Available
at:
<a href= "http://www.w3.org/TR/1999/REC-xml-names-19990114/">
http://www.w3.org/TR/1999/REC-xml-names-19990114/
</a>
</div>
</dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="non-normative-biblio" id= "non-normative-biblio">
</a>
A.2
Non-normative
References
</h3>
<dl>
<dt class="label">
<span>
<a name="CALCALC" id= "CALCALC">
</a>
<ins class="diff-new">Calendrical
Calculations
</ins></span></dt><dd><div><ins class="diff-new">
Edward
M.
Reingold
and
Nachum
Dershowitz.
</ins><em><ins class="diff-new">
Calendrical
Calculations
Millennium
edition
(2nd
Edition)
</ins></em>.<ins class="diff-new">
Cambridge
University
Press,
ISBN
0
521
77752
6
</ins></div></dd><dt class="label"><span>
<a name="HTML40" id="HTML40">
</a>
HTML
4.0
</span>
</dt>
<dd>
<div>
HTML
4.01
Recommendation,
24
December
1999.
Available
at:
<a href= "http://www.w3.org/TR/REC-html40/">
http://www.w3.org/TR/REC-html40/
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="ISO8601" id="ISO8601">
</a>
ISO
8601
</span>
</dt>
<dd>
<div>
ISO
(International
Organization
for
Standardization).
<em>
Representations
of
dates
and
times,
2000-08-03.
</em>
Available
from:
<a href="http://www.iso.ch/">
http://www.iso.ch/"
</a>
</div>
</dd>
<dt class="label">
<span>
<a name="Working-With-Timezones" id= "Working-With-Timezones">
</a>
Working
With
Timezones
</span>
</dt>
<dd>
<div>
World
Wide
Web
Consortium
Working
Group
Note.
<em>
Working
With
Timezones,
October
13,
2005.
</em>
Available
at:
<a href= "http://www.w3.org/TR/2005/NOTE-timezone-20051013/">
http://www.w3.org/TR/2005/NOTE-timezone-20051013/
</a>
</div>
</dd>
<del class="diff-old">XML
Path
Language
(XPath)
Version
1.0
World
Wide
Web
Consortium.
XML
Path
Language
(XPath)
Version
1.0
Available
at:
http://www.w3.org/TR/xpath
</del>
</dl>
</div>
</div>
<div class="div1">
<h2>
<del class="diff-old">B
Change
Log
for
this
Version
of
the
Document
This
draft
includes
corrections
and
changes
based
on
public
comments
recorded
in
the
W3C
public
Bugzilla
repository
(
http://www.w3.org/Bugs/Public/
)
used
for
issue
tracking
on
the
Proposed
Recommendation
of
21
November
2006.
A
list
of
changes
since
the
publication
of
the
Proposed
Recommendation
appears
below.
Bug
1207:
Is
unsignedInt("+123")
an
error?
The
rules
for
casting
from
xs:string
to
derived
types
were
felt
to
be
unclear.
This
was
resolved
by
adding
a
sentence
at
the
end
of
17
Casting
that
says
"When
casting
from
xs:string
the
semantics
in
17.1.1
Casting
from
xs:string
and
xs:untypedAtomic
apply,
regardless
of
target
type."
Bug
4030:
Ambiguity
re.
normalization
of
the
result
of
fn:concat
It
was
not
clear
whether
the
result
of
result
of
fn:concat
may
not
be
normalized
or
must
not
be
normalized.
This
was
resolved
by
changing
the
first
setence
in
the
note
in
fn:concat
to
say
"Unicode
normalization
is
not
automatically
applied
to
the
result
of
fn:concat
".
Bug
4036:
Ambiguity
re.
matching
of
argument
to
fn:lang
The
rules
for
matching
the
argument
to
fn:lang
with
the
value
of
the
xml:lang
attribute
were
felt
to
be
imprecise.
This
was
resolved
by
changing
the
final
paragraph
to
read
"Otherwise,
the
function
returns
true
if
and
only
if,
based
on
a
caseless
default
match
as
specified
in
[The
Unicode
Standard],
either
(1)
$testlang
is
equal
to
the
string-value
of
the
relevant
xml:lang
attribute,
or
(2)
$testlang
is
equal
to
some
substring
of
the
string-value
of
the
relevant
xml:lang
attribute
that
starts
at
the
start
of
the
string-value
and
ends
immediately
before
a
hyphen
(x2D)."
fn:iri-to-uri
Added
a
note
that
says
that
if
the
argument
contains
a
character
that
is
prohibited
in
an
IRI
that
character
must
be
percent
encoded.
</del>
<a name="error-summary" id="error-summary">
</a>
<del class="diff-old">C
</del>
<ins class="diff-chg">B
</ins>
Error
Summary
</h2>
<p>
The
error
text
provided
with
these
errors
is
non-normative.
</p>
<dl>
<dt>
<a name="ERRFOER0000" id="ERRFOER0000">
</a>
err:FOER0000,
Unidentified
error.
</dt>
<dd>
<p>
Unidentified
error.
</p>
</dd>
<dt>
<a name="ERRFOAR0001" id="ERRFOAR0001">
</a>
err:FOAR0001,
Division
by
zero.
</dt>
<dd>
<p>
This
error
is
raised
whenever
an
attempt
is
made
to
divide
by
zero.
</p>
</dd>
<dt>
<a name="ERRFOAR0002" id="ERRFOAR0002">
</a>
err:FOAR0002,
Numeric
operation
overflow/underflow.
</dt>
<dd>
<p>
This
error
is
raised
whenever
numeric
operations
result
in
an
overflow
or
underflow.
</p>
</dd>
<dt>
<a name="ERRFOCA0001" id="ERRFOCA0001">
</a>
err:FOCA0001,
Input
value
too
large
for
decimal.
</dt>
<dt>
<a name="ERRFOCA0002" id="ERRFOCA0002">
</a>
err:FOCA0002,
Invalid
lexical
value.
</dt>
<dt>
<a name="ERRFOCA0003" id="ERRFOCA0003">
</a>
err:FOCA0003,
Input
value
too
large
for
integer.
</dt>
<dt>
<a name="ERRFOCA0005" id="ERRFOCA0005">
</a>
err:FOCA0005,
NaN
supplied
as
float/double
value.
</dt>
<dt>
<a name="ERRFOCA0006" id="ERRFOCA0006">
</a>
err:FOCA0006,
String
to
be
cast
to
decimal
has
too
many
digits
of
precision.
</dt>
<dt>
<a name="ERRFOCH0001" id="ERRFOCH0001">
</a>
err:FOCH0001,
<del class="diff-old">Code
point
</del>
<ins class="diff-chg">Codepoint
</ins>
not
valid.
</dt>
<dt>
<a name="ERRFOCH0002" id="ERRFOCH0002">
</a>
err:FOCH0002,
Unsupported
collation.
</dt>
<dt>
<a name="ERRFOCH0003" id="ERRFOCH0003">
</a>
err:FOCH0003,
Unsupported
normalization
form.
</dt>
<dt>
<a name="ERRFOCH0004" id="ERRFOCH0004">
</a>
err:FOCH0004,
Collation
does
not
support
collation
units.
</dt>
<dt>
<a name="ERRFODC0001" id="ERRFODC0001">
</a>
err:FODC0001,
No
context
document.
</dt>
<dt>
<a name="ERRFODC0002" id="ERRFODC0002">
</a>
err:FODC0002,
Error
retrieving
resource.
</dt>
<dt>
<a name="ERRFODC0003" id="ERRFODC0003">
</a>
err:FODC0003,
Function
stability
not
defined.
</dt>
<dt>
<a name="ERRFODC0004" id="ERRFODC0004">
</a>
err:FODC0004,
Invalid
argument
to
fn:collection.
</dt>
<dt>
<a name="ERRFODC0005" id="ERRFODC0005">
</a>
err:FODC0005,
Invalid
argument
to
fn:doc
or
fn:doc-available.
</dt>
<dt>
<a name="ERRFODC0006" id="ERRFODC0006">
</a>
<ins class="diff-new">err:FODC0006,
String
passed
to
fn:parse
is
not
a
well-formed
XML
document.
</ins></dt><dt><a name="ERRFODC0007" id="ERRFODC0007"></a><ins class="diff-new">
err:FODC0007,
Base
URI
passed
to
fn:parse
is
not
a
valid
absolute
URI.
</ins></dt><dt><a name="ERRFODF1280" id="ERRFODF1280"></a><ins class="diff-new">
err:FODF1280,
Invalid
decimal
format
name.
</ins></dt><dd><p><ins class="diff-new">
This
error
is
raised
if
the
decimal
format
name
supplied
to
</ins><a href="#func-format-number"><code><ins class="diff-new">
fn:format-number
</ins></code></a><ins class="diff-new">
is
not
a
valid
QName,
or
if
the
prefix
in
the
QName
is
undeclared,
or
if
there
is
no
decimal
format
in
the
static
context
with
a
matching
name.
</ins></p></dd><dt><a name="ERRFODF1310" id="ERRFODF1310"></a><ins class="diff-new">
err:FODF1310,
Invalid
decimal
format
picture
string.
</ins></dt><dd><p><ins class="diff-new">
This
error
is
raised
if
the
picture
string
supplied
to
</ins><a href= "#func-format-number"><code><ins class="diff-new">
fn:format-number
</ins></code></a><ins class="diff-new">
has
invalid
syntax.
</ins></p></dd><dt>
<a name="ERRFODT0001" id="ERRFODT0001">
</a>
err:FODT0001,
Overflow/underflow
in
date/time
operation.
</dt>
<dt>
<a name="ERRFODT0002" id="ERRFODT0002">
</a>
err:FODT0002,
Overflow/underflow
in
duration
operation.
</dt>
<dt>
<a name="ERRFODT0003" id="ERRFODT0003">
</a>
err:FODT0003,
Invalid
timezone
value.
</dt>
<dt>
<a name="ERRFOFD1340" id="ERRFOFD1340">
</a>
<ins class="diff-new">err:FOFD1340,
Invalid
date/time
formatting
picture
string.
</ins></dt><dd><p><ins class="diff-new">
This
error
is
raised
if
the
picture
string
supplied
to
</ins><a href= "#func-format-date"><code><ins class="diff-new">
fn:format-date
</ins></code></a>,<a href= "#func-format-time"><code><ins class="diff-new">
fn:format-time
</ins></code></a>,<ins class="diff-new">
or
</ins><a href= "#func-format-dateTime"><code><ins class="diff-new">
fn:format-dateTime
</ins></code></a><ins class="diff-new">
has
invalid
syntax.
</ins></p></dd><dt><a name="ERRFOFD1350" id="ERRFOFD1350"></a><ins class="diff-new">
err:FOFD1350,
Invalid
date/time
formatting
component.
</ins></dt><dd><p><ins class="diff-new">
This
error
is
raised
if
the
picture
string
supplied
to
</ins><a href= "#func-format-date"><code><ins class="diff-new">
fn:format-date
</ins></code></a><ins class="diff-new">
selects
a
component
that
is
not
present
in
a
date,
or
if
the
picture
string
supplied
to
</ins><a href= "#func-format-time"><code><ins class="diff-new">
fn:format-time
</ins></code></a><ins class="diff-new">
selects
a
component
that
is
not
present
in
a
time.
</ins></p></dd><dt><a name="ERRFOFU0001" id="ERRFOFU0001"></a><ins class="diff-new">
err:FOFU0001,
Invalid
value
of
$argNum
in
call
to
fn:partial-apply.
</ins></dt><dt>
<a name="ERRFONS0004" id="ERRFONS0004">
</a>
err:FONS0004,
No
namespace
found
for
prefix.
</dt>
<dt>
<a name="ERRFONS0005" id="ERRFONS0005">
</a>
err:FONS0005,
Base-uri
not
defined
in
the
static
context.
</dt>
<dt>
<a name="ERRFORG0001" id="ERRFORG0001">
</a>
err:FORG0001,
Invalid
value
for
cast/constructor.
</dt>
<dt>
<a name="ERRFORG0002" id="ERRFORG0002">
</a>
err:FORG0002,
Invalid
argument
to
fn:resolve-uri().
</dt>
<dt>
<a name="ERRFORG0003" id="ERRFORG0003">
</a>
err:FORG0003,
fn:zero-or-one
called
with
a
sequence
containing
more
than
one
item.
</dt>
<dt>
<a name="ERRFORG0004" id="ERRFORG0004">
</a>
err:FORG0004,
fn:one-or-more
called
with
a
sequence
containing
no
items.
</dt>
<dt>
<a name="ERRFORG0005" id="ERRFORG0005">
</a>
err:FORG0005,
fn:exactly-one
called
with
a
sequence
containing
zero
or
more
than
one
item.
</dt>
<dt>
<a name="ERRFORG0006" id="ERRFORG0006">
</a>
err:FORG0006,
Invalid
argument
type.
</dt>
<dt>
<a name="ERRFORG0008" id="ERRFORG0008">
</a>
err:FORG0008,
<del class="diff-old">Both
</del>
<ins class="diff-chg">The
two
</ins>
arguments
to
fn:dateTime
have
<del class="diff-old">a
specified
timezone.
</del>
<ins class="diff-chg">inconsistent
timezones.
</ins>
</dt>
<dt>
<a name="ERRFORG0009" id="ERRFORG0009">
</a>
err:FORG0009,
Error
in
resolving
a
relative
URI
against
a
base
URI
in
fn:resolve-uri.
</dt>
<dt>
<a name="ERRFORX0001" id="ERRFORX0001">
</a>
err:FORX0001,
Invalid
regular
<del class="diff-old">expression.
flags
</del>
<ins class="diff-chg">expression
flags.
</ins>
</dt>
<dt>
<a name="ERRFORX0002" id="ERRFORX0002">
</a>
err:FORX0002,
Invalid
regular
expression.
</dt>
<dt>
<a name="ERRFORX0003" id="ERRFORX0003">
</a>
err:FORX0003,
Regular
expression
matches
zero-length
string.
</dt>
<dt>
<a name="ERRFORX0004" id="ERRFORX0004">
</a>
err:FORX0004,
Invalid
replacement
string.
</dt>
<dt>
<a name="ERRFOTY0012" id="ERRFOTY0012">
</a>
err:FOTY0012,
Argument
<ins class="diff-new">to
fn:data()
contains
a
</ins>
node
<ins class="diff-new">that
</ins>
does
not
have
a
typed
value.
</dt>
<dt>
<a name="ERRFOTY0013" id="ERRFOTY0013">
</a>
<ins class="diff-new">err:FOTY0013,
The
argument
to
fn:data()
contains
a
function
item.
</ins></dt><dt><a name="ERRFOTY0014" id="ERRFOTY0014"></a><ins class="diff-new">
err:FOTY0014,
The
argument
to
fn:string()
is
a
function
item.
</ins></dt><dt><a name="ERRFOTY0015" id="ERRFOTY0015"></a><ins class="diff-new">
err:FOTY0015,
An
argument
to
fn:deep-equal()
contains
a
function
item.
</ins></dt>
</dl>
</div>
<div class="div1">
<h2>
<a name="xpath1-compatibility" id="xpath1-compatibility">
</a>
<del class="diff-old">D
</del>
<ins class="diff-chg">C
</ins>
Compatibility
with
XPath
1.0
(Non-Normative)
</h2>
<p>
This
appendix
summarizes
the
relationship
between
certain
functions
defined
in
<a href="#xpath">
[XML
Path
Language
(XPath)
Version
1.0]
</a>
and
the
corresponding
functions
defined
in
this
document.
The
first
column
of
the
table
provides
the
signature
of
functions
defined
in
this
document.
The
second
column
provides
the
signature
of
the
corresponding
function
in
<a href="#xpath">
[XML
Path
Language
(XPath)
Version
1.0]
</a>.
The
third
column
<del class="diff-old">discusses
</del>
<ins class="diff-chg">describes
</ins>
the
differences
in
the
semantics
of
the
corresponding
functions.
The
functions
appear
in
the
order
they
appear
in
<a href= "#xpath">
[XML
Path
Language
(XPath)
Version
1.0]
</a>.
</p>
<p>
The
evaluation
of
the
arguments
to
the
functions
defined
in
this
document
depends
on
whether
the
XPath
1.0
compatibility
mode
is
on
or
off.
See
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>.
If
the
mode
is
on,
the
following
conversions
are
applied,
in
order,
before
the
argument
value
is
passed
to
the
function:
</p>
<ul>
<li>
<p>
If
the
expected
type
is
a
single
item
or
an
optional
single
item,
(examples:
<code>
xs:string,
xs:string?,
xs:untypedAtomic,
xs:untypedAtomic?,
node(),
node()?,
item(),
item()?
</code>
),
then
the
given
value
<code>
V
</code>
is
effectively
replaced
by
<a href= "#func-subsequence">
<code>
fn:subsequence(V,
1,
1)
</code>
</a>.
</p>
</li>
<li>
<p>
If
the
expected
type
is
<code>
xs:string
</code>
or
<code>
xs:string?
</code>,
then
the
given
value
<code>
V
</code>
is
effectively
replaced
by
<a href= "#func-string">
<code>
fn:string(V)
</code>
</a>.
</p>
</li>
<li>
<p>
If
the
expected
type
is
numeric
or
optional
numeric,
then
the
given
value
<code>
V
</code>
is
effectively
replaced
by
<a href= "#func-number">
<code>
fn:number(V)
</code>
</a>.
</p>
</li>
<li>
<p>
Otherwise,
the
given
value
is
unchanged.
</p>
</li>
</ul>
<table summary="Issues list" border="1" width="100%">
<col width="33%" span="1" />
<col width="33%" span="1" />
<col width="33%" span="1" />
<tbody>
<tr>
<th>
XQuery
1.0
and
XPath
2.0
</th>
<th>
XPath
1.0
</th>
<th>
Notes
</th>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:last
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer
</code>
</div>
</td>
<td>
<code>
last()
=&gt;
number
</code>
</td>
<td>
Precision
of
numeric
results
may
be
different.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:position
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer
</code>
</div>
</td>
<td>
<code>
position()
=&gt;
number
</code>
</td>
<td>
Precision
of
numeric
results
may
be
different.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:count
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer
</code>
</div>
</td>
<td>
<code>
count(node-set)
=&gt;
number
</code>
</td>
<td>
Precision
of
numeric
results
may
be
different.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class="function">
fn:id
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
element()*
</code>
</div>
</td>
<td>
<code>
id(object)
=&gt;
node-set
</code>
</td>
<td>
XPath
2.0
behavior
is
different
for
boolean
and
numeric
arguments.
The
recognition
of
a
node
as
an
id
value
is
sensitive
to
the
manner
in
which
the
datamodel
is
constructed.
In
XPath
1.0
the
whole
string
is
treated
as
a
unit.
In
XPath
2.0
each
string
is
treated
as
a
list.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:local-name
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
<td rowspan="2">
<code>
local-name(node-set?)
=&gt;
string
</code>
</td>
<td rowspan="2">
If
compatibility
mode
is
off,
an
error
will
occur
if
argument
has
more
than
one
node.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:local-name
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
node()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:namespace-uri
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
<td rowspan="2">
<code>
namespace-uri(node-set?)
=&gt;
string
</code>
</td>
<td rowspan="2">
If
compatibility
mode
is
off,
an
error
will
occur
if
argument
has
more
than
one
node.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:namespace-uri
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
node?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:name
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
<td>
<code>
name(node-set?)
=&gt;
string
</code>
</td>
<td>
If
compatibility
mode
is
off,
an
error
will
occur
if
argument
has
more
than
one
node.
The
rules
for
determining
the
prefix
are
more
precisely
defined
in
<a href="#xpath20">
[XML
Path
Language
(XPath)
2.0]
</a>.
Function
is
not
"well-defined"
for
parentless
attribute
nodes.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:string
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
<td rowspan="2">
<code>
string(object)
=&gt;
string
</code>
</td>
<td rowspan="2">
If
compatibility
mode
is
off,
an
error
will
occur
if
argument
has
more
than
one
node.
Representations
of
numeric
values
are
XPath
1.0
compatible
except
for
the
special
values
positive
and
negative
infinity,
and
for
values
outside
the
range
1.0e-6
to
1.0e+6.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:string
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item()?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:concat
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<span class="varargs">...
</span>
</td>
<td valign="baseline">
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</td>
<td>
<code>
concat(string,
string,
string*)
=&gt;
string
</code>
</td>
<td>
If
compatibility
mode
is
off,
an
error
will
occur
if
an
argument
has
more
than
one
node.
If
compatibility
mode
on,
the
first
node
in
the
sequence
is
used.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:starts-with
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</td>
<td rowspan="2">
<code>
starts-with(string,
string)
=&gt;
boolean
</code>
</td>
<td rowspan="2">
If
compatibility
mode
is
off,
an
error
will
occur
if
either
argument
has
more
than
one
node
or
is
a
number
or
a
boolean.
If
compatibility
mode
is
on,
implicit
conversion
is
performed.
</td>
</tr>
<tr>
<td>
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:starts-with
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:contains
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</td>
<td rowspan="2">
<code>
contains(string,
string)
=&gt;
boolean
</code>
</td>
<td rowspan="2">
If
compatibility
mode
is
off,
an
error
will
occur
if
either
argument
has
more
than
one
node
or
is
a
number
or
a
boolean.
If
compatibility
mode
is
on,
implicit
conversion
is
performed.
</td>
</tr>
<tr>
<td>
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:contains
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:substring-before
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
<td rowspan="2">
<code>
substring-before(string,
string)
=&gt;
string
</code>
</td>
<td rowspan="2">
If
compatibility
mode
is
off,
an
error
will
occur
if
either
argument
has
more
than
one
node
or
is
a
number
or
a
boolean.
If
compatibility
mode
is
on,
implicit
conversion
is
performed.
</td>
</tr>
<tr>
<td>
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:substring-before
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:substring-after
</code>
(
<code class= "arg">
$arg1
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$arg2
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
<td rowspan="2">
<code>
substring-after(string,
string)
=&gt;
string
</code>
</td>
<td rowspan="2">
If
compatibility
mode
is
off,
an
error
will
occur
if
either
argument
has
more
than
one
node
or
is
a
number
or
a
boolean.
If
compatibility
mode
is
on,
implicit
conversion
is
performed.
</td>
</tr>
<tr>
<td>
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:substring-after
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$collation
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
fn:substring
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$sourceString
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$startingLoc
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:double
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</td>
<td rowspan="2">
<code>
substring(string,
number,
number?)
=&gt;
string
</code>
</td>
<td rowspan="2">
If
compatibility
mode
is
off,
an
error
will
occur
if
<code>
$sourceString
</code>
has
more
than
one
node
or
is
a
number
or
a
boolean.
If
compatibility
mode
is
on,
implicit
conversion
is
performed.
</td>
</tr>
<tr>
<td>
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:substring
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$sourceString
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$startingLoc
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:double
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$length
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:double
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:string-length
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</td>
<td rowspan="2">
<code>
string-length(string?)
=&gt;
number
</code>
</td>
<td rowspan="2">
If
compatibility
mode
is
off,
numbers
and
booleans
will
give
errors
for
first
arg.
Also,
multiple
nodes
will
give
error.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:string-length
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer?
</code>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:normalize-space
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
<td rowspan="2">
<code>
normalize-space(string?)
=&gt;
string
</code>
</td>
<td rowspan="2">
If
compatibility
mode
is
off,
an
error
will
occur
if
<code>
$arg
</code>
has
more
than
one
node
or
is
a
number
or
a
boolean.
If
compatibility
mode
is
on,
implicit
conversion
is
performed.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:normalize-space
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="3">
<code class= "function">
fn:translate
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$mapString
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<del class="diff-old">xs:string?
</del>
<code class="type">
<ins class="diff-chg">xs:string
</ins>
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$transString
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
<del class="diff-old">xs:string?
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</td>
</tr>
</table>
</div>
</td>
<td>
<code>
translate(string,
string,
string)=&gt;
string
</code>
</td>
<td>.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:boolean
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</td>
<td>
<code>
boolean(object)
=&gt;
boolean
</code>
</td>
<td>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:not
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
item()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</td>
<td>
<code>
not(boolean)
=&gt;
boolean
</code>
</td>
<td>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:true
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</td>
<td>
<code>
true()
=&gt;
boolean
</code>
</td>
<td>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:false
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</td>
<td>
<code>
false()
=&gt;
boolean
</code>
</td>
<td>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:lang
</code>
(
<code class= "arg">
$testlang
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:string
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:boolean
</code>
</div>
</td>
<td>
<code>
lang(string)
=&gt;
boolean
</code>
</td>
<td>
If
compatibility
mode
is
off,
numbers
and
booleans
will
give
errors.
Also,
multiple
nodes
will
give
error.
If
compatibility
mode
is
on,
implicit
conversion
is
performed.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:number
</code>
()
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:double
</code>
</div>
</td>
<td rowspan="2">
<code>
number(object?)
=&gt;
number
</code>
</td>
<td rowspan="2">
Error
if
argument
has
more
than
one
node
when
not
in
compatibility
node.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:number
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:double
</code>
</div>
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:sum
</code>
(
<code class="arg">
$arg
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-varies">
xs:anyAtomicType
</code>
</div>
</td>
<td>
<code>
sum(node-set)
=&gt;
number
</code>
</td>
<td>
2.0
raises
an
error
if
sequence
contains
values
that
cannot
be
added
together
such
as
NMTOKENS
and
other
subtypes
of
string.
1.0
returns
<code>
NaN
</code>.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:floor
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-varies">
numeric?
</code>
</div>
</td>
<td>
<code>
floor(number)=&gt;
number
</code>
</td>
<td>
In
2.0,
if
argument
is
<code>
()
</code>,
the
result
is
<code>
()
</code>.
In
1.0,
the
result
is
<code>
NaN
</code>.
If
compatibility
mode
is
off,
an
error
will
occur
with
more
than
one
node.
If
compatibility
mode
is
on,
implicit
conversion
is
performed.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:ceiling
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-varies">
numeric?
</code>
</div>
</td>
<td>
<code>
ceiling(number)=&gt;
number
</code>
</td>
<td>
In
2.0,
if
argument
is
<code>
()
</code>,
the
result
is
<code>
()
</code>.
In
1.0,
the
result
is
<code>
NaN
</code>.
If
compatibility
mode
is
off,
an
error
will
occur
with
more
than
one
node.
If
compatibility
mode
is
on,
implicit
conversion
is
performed.
</td>
</tr>
<tr>
<td>
<div class="proto">
<code class= "function">
fn:round
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
numeric?
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-varies">
numeric?
</code>
</div>
</td>
<td>
<code>
round(number)=&gt;
number
</code>
</td>
<td>
In
2.0,
if
argument
is
<code>
()
</code>,
the
result
is
<code>
()
</code>.
In
1.0,
the
result
is
<code>
NaN
</code>.
If
compatibility
mode
is
off,
an
error
will
occur
with
more
than
one
node.
If
compatibility
mode
is
on,
implicit
conversion
is
performed.
</td>
</tr>
</tbody>
</table>
</div>
<div class="div1">
<h2>
<a name="examples" id="examples">
</a>
<del class="diff-old">E
</del>
<ins class="diff-chg">D
</ins>
Illustrative
User-written
Functions
(Non-Normative)
</h2>
<p>
Certain
functions
that
were
proposed
for
inclusion
in
this
function
library
have
been
excluded
on
the
basis
that
it
is
straightforward
for
users
to
implement
these
functions
themselves
using
XSLT
2.0
or
XQuery
1.0.
</p>
<p>
This
Appendix
provides
sample
implementations
of
some
of
these
functions.
</p>
<p>
To
emphasize
that
these
functions
are
examples
of
functions
that
vendors
may
write,
their
names
carry
the
prefix
'eg'.
Vendors
are
free
to
define
such
functions
in
any
namespace.
A
group
of
vendors
may
also
choose
to
create
a
collection
of
such
useful
functions
and
put
them
in
a
common
namespace.
</p>
<div class="div2">
<h3>
<a name="if-empty-if-absent" id="if-empty-if-absent">
</a>
<del class="diff-old">E.1
</del>
<ins class="diff-chg">D.1
</ins>
eg:if-empty
and
eg:if-absent
</h3>
<p>
In
some
situations,
users
may
want
to
provide
default
values
for
missing
information
that
may
be
signaled
by
elements
that
are
omitted,
have
no
value
or
have
the
empty
sequence
as
their
value.
For
example,
a
missing
middle
initial
may
be
indicated
by
omitting
the
element
or
a
non-existent
bonus
signaled
with
an
empty
sequence.
This
section
includes
examples
of
functions
that
provide
such
defaults.
These
functions
return
<code>
xs:anyAtomicType*
</code>.
Users
may
want
to
write
functions
that
return
more
specific
types.
</p>
<div class="div3">
<h4>
<a name="if-empty" id="if-empty">
</a>
<del class="diff-old">E.1.1
</del>
<ins class="diff-chg">D.1.1
</ins>
eg:if-empty
</h4>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
eg:if-empty
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$node
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
node()?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$value
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType*
</code>
</td>
</tr>
</table>
</div>
</div>
<p>
If
the
first
argument
is
the
empty
sequence
or
an
element
without
simple
or
complex
content,
if-empty()
returns
the
second
argument;
otherwise,
it
returns
the
content
of
the
first
argument.
</p>
<p>
XSLT
implementation
</p>
<div class="exampleInner">
<pre>
&lt;xsl:function name="eg:if-empty" as="xs:anyAtomicType*"&gt;
  &lt;xsl:param name="node" as="node()?"/&gt;
  &lt;xsl:param name="value" as="xs:anyAtomicType"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node and $node/child::node()"&gt;
      &lt;xsl:sequence select="fn:data($node)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$value"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;
</pre>
</div>
<p>
XQuery
implementation
</p>
<div class="exampleInner">
<pre>
declare function eg:if-empty (
  $node as node()?,
  $value as xs:anyAtomicType) as xs:anyAtomicType* 
{
  if ($node and $node/child::node())
            then fn:data($node)
            else $value
}
                    
</pre>
</div>
</div>
<div class="div3">
<h4>
<a name="if-absent" id="if-absent">
</a>
<del class="diff-old">E.1.2
</del>
<ins class="diff-chg">D.1.2
</ins>
eg:if-absent
</h4>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
eg:if-absent
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$node
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
node()?
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$value
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType*
</code>
</td>
</tr>
</table>
</div>
</div>
<p>
If
the
first
argument
is
the
empty
sequence,
if-absent()
returns
the
second
argument;
otherwise,
it
returns
the
content
of
the
first
argument.
</p>
<p>
XSLT
implementation
</p>
<div class="exampleInner">
<pre>
&lt;xsl:function name="eg:if-absent"&gt;
  &lt;xsl:param name="node" as="node()?"/&gt;
  &lt;xsl:param name="value" as="xs:anyAtomicType"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node"&gt;
      &lt;xsl:sequence select="fn:data($node)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$value"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;
</pre>
</div>
<p>
XQuery
implementation
</p>
<div class="exampleInner">
<pre>
declare function eg:if-absent (
  $node as node()?,
  $value as xs:anyAtomicType) as xs:anyAtomicType* 
{
  if ($node)
    then fn:data($node)
    else $value
}
                    
</pre>
</div>
</div>
</div>
<div class="div2">
<h3>
<a name="union-intersect-except-on-values" id= "union-intersect-except-on-values">
</a>
<del class="diff-old">E.2
</del>
<ins class="diff-chg">D.2
</ins>
union,
intersect
and
except
on
sequences
of
values
</h3>
<div class="div3">
<h4>
<a name="value-union" id="value-union">
</a>
<del class="diff-old">E.2.1
</del>
<ins class="diff-chg">D.2.1
</ins>
eg:value-union
</h4>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
eg:value-union
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType*
</code>
</td>
</tr>
</table>
</div>
</div>
<p>
This
function
returns
a
sequence
containing
all
the
distinct
items
in
$arg1
and
$arg2,
in
an
undefined
order.
</p>
<p>
XSLT
implementation
</p>
<div class="exampleInner">
<pre>
xsl:function name="eg:value-union" as="xs:anyAtomicType*"&gt;
  &lt;xsl:param name="arg1" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:param name="arg2" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:sequence
     select="fn:distinct-values(($arg1, $arg2))"/&gt; 
&lt;/xsl:function&gt;
</pre>
</div>
<p>
XQuery
implementation
</p>
<div class="exampleInner">
<pre>
declare function eg:value-union (
  $arg1 as xs:anyAtomicType*,
  $arg2 as xs:anyAtomicType*) as xs:anyAtomicType* 
{
  fn:distinct-values(($arg1, $arg2))
}
                    
</pre>
</div>
</div>
<div class="div3">
<h4>
<a name="value-intersect" id="value-intersect">
</a>
<del class="diff-old">E.2.2
</del>
<ins class="diff-chg">D.2.2
</ins>
eg:value-intersect
</h4>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
eg:value-intersect
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType*
</code>
</td>
</tr>
</table>
</div>
</div>
<p>
This
function
returns
a
sequence
containing
all
the
distinct
items
that
appear
in
both
$arg1
and
$arg2,
in
an
undefined
order.
</p>
<p>
XSLT
implementation&gt;
</p>
<div class="exampleInner">
<pre>
&lt;xsl:function name="eg:value-intersect" as="xs:anyAtomicType*"&gt;
  &lt;xsl:param name="arg1" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:param name="arg2" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:sequence 
     select="fn:distinct-values($arg1[.=$arg2])"/&gt;
&lt;/xsl:function&gt;
</pre>
</div>
<p>
XQuery
implementation
</p>
<div class="exampleInner">
<pre>
declare function eg:value-intersect (
  $arg1 as xs:anyAtomicType*,
  $arg2 as xs:anyAtomicType* ) as xs:anyAtomicType* 
{
  fn:distinct-values($arg1[.=$arg2])
}
                    
</pre>
</div>
</div>
<div class="div3">
<h4>
<a name="value-except" id="value-except">
</a>
<del class="diff-old">E.2.3
</del>
<ins class="diff-chg">D.2.3
</ins>
eg:value-except
</h4>
<div class="exampleInner">
<div class="proto">
<table border="0" cellpadding="0" cellspacing="0" summary= "Function/operator prototype">
<tr>
<td valign="baseline" rowspan="2">
<code class= "function">
eg:value-except
</code>
(
</td>
<td valign="baseline">
<code class="arg">
$arg1
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>,
</td>
</tr>
<tr>
<td valign="baseline">
<code class="arg">
$arg2
</code>
</td>
<td valign="baseline">
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:anyAtomicType*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:anyAtomicType*
</code>
</td>
</tr>
</table>
</div>
</div>
<p>
This
function
returns
a
sequence
containing
all
the
distinct
items
that
appear
in
$arg1
but
not
in
$arg2,
in
an
undefined
order.
</p>
<p>
XSLT
implementation
</p>
<div class="exampleInner">
<pre>
&lt;xsl:function name="eg:value-except" as="xs:anyAtomicType*"&gt;
  &lt;xsl:param name="arg1" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:param name="arg2" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:sequence
     select="fn:distinct-values($arg1[not(.=$arg2)])"/&gt;
&lt;/xsl:function&gt;
</pre>
</div>
<p>
XQuery
implementation
</p>
<div class="exampleInner">
<pre>
declare function eg:value-except (
  $arg1 as xs:anyAtomicType*,
  $arg2 as xs:anyAtomicType*) as xs:anyAtomicType* 
{
  fn:distinct-values($arg1[not(.=$arg2)])
}
</pre>
</div>
</div>
</div>
<div class="div2">
<h3>
<a name="index-of-node" id="index-of-node">
</a>
<del class="diff-old">E.3
</del>
<ins class="diff-chg">D.3
</ins>
eg:index-of-node
</h3>
<div class="exampleInner">
<div class="proto">
<code class= "function">
eg:index-of-node
</code>
(
<code class= "arg">
$seqParam
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
node()*
</code>,
<code class="arg">
$srchParam
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
node()
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:integer*
</code>
</div>
</div>
<p>
This
function
returns
a
sequence
of
positive
integers
giving
the
positions
within
the
sequence
<code>
$seqParam
</code>
of
nodes
that
are
identical
to
<code>
$srchParam
</code>.
</p>
<p>
The
nodes
in
the
sequence
<code>
$seqParam
</code>
are
compared
with
<code>
$srchParam
</code>
under
the
rules
for
the
<code>
is
</code>
operator.
If
a
node
compares
identical,
then
the
position
of
that
node
in
the
sequence
<code>
$srchParam
</code>
is
included
in
the
result.
</p>
<p>
If
the
value
of
<code>
$seqParam
</code>
is
the
empty
sequence,
or
if
no
node
in
<code>
$seqParam
</code>
matches
$srchParam,
then
the
empty
sequence
is
returned.
</p>
<p>
The
index
is
1-based,
not
0-based.
</p>
<p>
The
result
sequence
is
in
ascending
numeric
order.
</p>
<p>
XSLT
implementation
</p>
<div class="exampleInner">
<pre>
&lt;xsl:function name="eg:index-of-node" as="xs:integer*"&gt;
  &lt;xsl:param name="sequence" as="node()*"/&gt;
  &lt;xsl:param name="srch" as="node()"/&gt;
  &lt;xsl:for-each select="$sequence"&gt;
    &lt;xsl:if test=". is $srch"&gt;
       &lt;xsl:sequence select="position()"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:function&gt;
</pre>
</div>
<p>
XQuery
implementation
</p>
<div class="exampleInner">
<pre>
declare function eg:index-of-node($sequence as node()*, $srch as node()) as xs:integer* 
{
  for $n at $i in $sequence where ($n is $srch) return $i
}
</pre>
</div>
</div>
<div class="div2">
<h3>
<a name="string-pad" id="string-pad">
</a>
<del class="diff-old">E.4
</del>
<ins class="diff-chg">D.4
</ins>
eg:string-pad
</h3>
<div class="exampleInner">
<div class="proto">
<code class= "function">
eg:string-pad
</code>
(
<code class= "arg">
$padString
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class="type">
xs:string?
</code>,
<code class="arg">
$padCount
</code>
<code class= "as">
&#160;as&#160;
</code>
<code class= "type">
xs:integer
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
xs:string
</code>
</div>
</div>
<p>
Returns
a
<code>
xs:string
</code>
consisting
of
a
given
number
of
copies
of
an
<code>
xs:string
</code>
argument
concatenated
together.
</p>
<p>
XSLT
implementation
</p>
<div class="exampleInner">
<pre>
&lt;xsl:function name="eg:string-pad" as="xs:string"&gt;
  &lt;xsl:param name="padString" as="xs:string?"/&gt;
  &lt;xsl:param name="padCount" as="xs:integer"/&gt;
  &lt;xsl:sequence select="fn:string-join((for $i in 1 to $padCount 
                                    return $padString), '')"/&gt;
 &lt;/xsl:function&gt;
                
</pre>
</div>
<p>
XQuery
implementation
</p>
<div class="exampleInner">
<pre>
declare function eg:string-pad (
  $padString as xs:string?,
  $padCount as xs:integer) as xs:string 
{
   fn:string-join((for $i in 1 to $padCount return $padString), "")
}
                
</pre>
</div>
<p>
This
returns
the
zero-length
string
if
<code>
$padString
</code>
is
the
empty
sequence,
which
is
consistent
with
the
general
principle
that
if
an
<code>
xs:string
</code>
argument
is
the
empty
sequence
it
is
treated
as
if
it
were
the
zero-length
string.
</p>
</div>
<div class="div2">
<h3>
<a name="func-distinct-nodes-stable" id= "func-distinct-nodes-stable">
</a>
<del class="diff-old">E.5
</del>
<ins class="diff-chg">D.5
</ins>
eg:distinct-nodes-stable
</h3>
<div class="exampleInner">
<div class="proto">
<code class= "function">
fn:eg:distinct-nodes-stable
</code>
(
<code class= "arg">
$arg
</code>
<code class="as">
&#160;as&#160;
</code>
<code class= "type">
node()*
</code>
)
<code class= "as">
&#160;as&#160;
</code>
<code class= "return-type">
node()*
</code>
</div>
</div>
<p>
This
function
illustrates
one
possible
implementation
of
a
distinct-nodes
function.
It
removes
duplicate
nodes
by
identity,
preserving
the
first
occurrence
of
each
node.
</p>
<p>
XPath
</p>
<div class="exampleInner">
<pre>
$arg[empty(subsequence($arg, 1, position()-1) intersect .)]
                
</pre>
</div>
<p>
XSLT
implementation
</p>
<div class="exampleInner">
<pre>
&lt;xsl:function name="eg:distinct-nodes-stable" as="node()*"&gt;
  &lt;xsl:param name="arg" as="node()*"/&gt;
  &lt;xsl:sequence 
    select="$arg[empty(subsequence($arg, 1, position()-1) intersect .)]"/&gt; &lt;/xsl:function&gt;
                
</pre>
</div>
<p>
XQuery
implementation
</p>
<div class="exampleInner">
<pre>
declare function distinct-nodes-stable ($arg as node()*) as node()* 
{ 
   for $a at $apos in $arg 
   let $before_a := fn:subsequence($arg, 1, $apos - 1) 
   where every $ba in $before_a satisfies not($ba is $a) 
   return $a 
}
</pre>
</div>
</div>
</div>
<div class="div1">
<h2>
<a name="impl-def" id="impl-def">
</a>
<del class="diff-old">F
</del>
<ins class="diff-chg">E
</ins>
Checklist
of
Implementation-Defined
Features
(Non-Normative)
</h2>
<p>
This
appendix
provides
a
summary
of
features
defined
in
this
specification
whose
effect
is
explicitly
<a title= "implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>.
The
conformance
rules
require
vendors
to
provide
documentation
that
explains
how
these
choices
have
been
exercised.
</p>
<table border="1" summary="Editorial note">
<tr>
<td align="left" valign="top" width="50%">
<b>
<ins class="diff-new">Editorial
note
</ins></b></td><td align="right" valign="top" width="50%"><ins class="diff-new">
&#160;
</ins></td></tr><tr><td colspan="2" align="left" valign="top"><ins class="diff-new">
This
list
is
incomplete
in
this
working
draft.
</ins></td></tr></table>
<ol class="enumar">
<li>
<p>
The
destination
of
the
trace
output
is
<a title= "implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>.
See
<a href="#func-trace">
<b>
<del class="diff-old">4
The
Trace
Function
</del>
<ins class="diff-chg">3.2.1
fn:trace
</ins>
</b>
</a>.
</p>
</li>
<li>
<p>
For
<code>
xs:integer
</code>
operations,
implementations
that
support
limited-precision
integer
operations
<a title="must" class= "termref" href="#must">
<span class="arrow">
·
</span>
must
<span class= "arrow">
·
</span>
</a>
either
raise
an
error
[
<a href="#ERRFOAR0002" title="err:FOAR0002">
err:FOAR0002
</a>
]
or
provide
an
<a title= "implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
mechanism
that
allows
users
to
choose
between
raising
an
error
and
returning
a
result
that
is
modulo
the
largest
representable
integer
value.
See
<a href="#op.numeric">
<b>
<del class="diff-old">6.2
</del>
<ins class="diff-chg">4.2
Arithmetic
</ins>
Operators
on
Numeric
Values
</b>
</a>.
</p>
</li>
<li>
<p>
For
<code>
xs:decimal
</code>
values
the
number
of
digits
of
precision
returned
by
the
numeric
operators
is
<a title= "implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>.
See
<a href="#op.numeric">
<b>
<del class="diff-old">6.2
</del>
<ins class="diff-chg">4.2
Arithmetic
</ins>
Operators
on
Numeric
Values
</b>
</a>.
See
also
<a href= "#casting-to-decimal">
<b>
<del class="diff-old">17.1.3.3
</del>
<ins class="diff-chg">18.1.3.3
</ins>
Casting
to
xs:decimal
</b>
</a>
and
<a href="#casting-to-integer">
<b>
<del class="diff-old">17.1.3.4
</del>
<ins class="diff-chg">18.1.3.4
</ins>
Casting
to
xs:integer
</b>
</a>
</p>
</li>
<li>
<p>
If
the
number
of
digits
in
the
result
of
a
numeric
operation
exceeds
the
number
of
digits
that
the
implementation
supports,
the
result
is
truncated
or
rounded
in
an
<a title= "implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
manner.
See
<a href="#op.numeric">
<b>
<del class="diff-old">6.2
</del>
<ins class="diff-chg">4.2
Arithmetic
</ins>
Operators
on
Numeric
Values
</b>
</a>.
See
also
<a href= "#casting-to-decimal">
<b>
<del class="diff-old">17.1.3.3
</del>
<ins class="diff-chg">18.1.3.3
</ins>
Casting
to
xs:decimal
</b>
</a>
and
<a href="#casting-to-integer">
<b>
<del class="diff-old">17.1.3.4
</del>
<ins class="diff-chg">18.1.3.4
</ins>
Casting
to
xs:integer
</b>
</a>
</p>
</li>
<li>
<p>
It
is
<a title="implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
which
version
of
Unicode
is
supported
by
the
features
defined
in
this
specification,
but
it
is
recommended
that
the
most
recent
version
of
Unicode
be
used.
See
<a href= "#string-types">
<b>
<del class="diff-old">7.1
</del>
<ins class="diff-chg">5.1
</ins>
String
Types
</b>
</a>.
</p>
</li>
<li>
<p>
For
<a href="#func-normalize-unicode">
<b>
<del class="diff-old">7.4.6
</del>
<ins class="diff-chg">5.4.6
</ins>
fn:normalize-unicode
</b>
</a>,
conforming
implementations
<a title= "must" class="termref" href="#must">
<span class= "arrow">
·
</span>
must
<span class="arrow">
·
</span>
</a>
support
normalization
form
"NFC"
and
<a title="may" class="termref" href= "#may">
<span class="arrow">
·
</span>
may
<span class= "arrow">
·
</span>
</a>
support
normalization
forms
"NFD",
"NFKC",
"NFKD",
"FULLY-NORMALIZED".
They
<a title="may" class="termref" href="#may">
<span class="arrow">
·
</span>
may
<span class= "arrow">
·
</span>
</a>
also
support
other
normalization
forms
with
<a title="implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
semantics.
</p>
</li>
<li>
<p>
The
ability
to
decompose
strings
into
collation
units
suitable
for
substring
matching
is
an
<a title="implementation-defined" class="termref" href="#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
property
of
a
collation.
See
<a href= "#substring.functions">
<b>
<del class="diff-old">7.5
</del>
<ins class="diff-chg">5.5
</ins>
Functions
Based
on
Substring
Matching
</b>
</a>.
</p>
</li>
<li>
<p>
All
<em>
minimally
conforming
</em>
processors
<a title="must" class="termref" href="#must">
<span class= "arrow">
·
</span>
must
<span class="arrow">
·
</span>
</a>
support
year
values
with
a
minimum
of
4
digits
(i.e.,
YYYY)
and
a
minimum
fractional
second
precision
of
1
millisecond
or
three
digits
(i.e.,
s.sss).
However,
<em>
conforming
processors
</em>
<a title="may" class="termref" href="#may">
<span class= "arrow">
·
</span>
may
<span class="arrow">
·
</span>
</a>
set
larger
<a title="implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>
limits
on
the
maximum
number
of
digits
they
support
in
these
two
situations.
See
<a href= "#date-time-duration-conformance">
<b>
<del class="diff-old">10.1.1
</del>
<ins class="diff-chg">9.1.1
</ins>
Limits
and
Precision
</b>
</a>.
</p>
</li>
<li>
<p>
The
result
of
casting
a
string
to
<code>
xs:decimal
</code>,
when
the
resulting
value
is
not
too
large
or
too
small
but
nevertheless
has
too
many
decimal
digits
to
be
accurately
represented,
is
implementation-defined.
See
<a href= "#casting-from-strings">
<b>
<del class="diff-old">17.1.1
</del>
<ins class="diff-chg">18.1.1
</ins>
Casting
from
xs:string
and
xs:untypedAtomic
</b>
</a>.
</p>
</li>
<li>
<p>
Various
aspects
of
the
processing
provided
by
<a href= "#func-doc">
<b>
<del class="diff-old">15.5.4
</del>
<ins class="diff-chg">14.5.5
</ins>
fn:doc
</b>
</a>
are
<a title= "implementation-defined" class="termref" href= "#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>.
Implementations
may
provide
external
configuration
options
that
allow
any
aspect
of
the
processing
to
be
controlled
by
the
user.
</p>
</li>
<li>
<p>
The
manner
in
which
implementations
provide
options
to
weaken
the
<a title="stable" class="termref" href="#stable">
<span class= "arrow">
·
</span>
stable
<span class="arrow">
·
</span>
</a>
characteristic
of
<a href="#func-collection">
<b>
<del class="diff-old">15.5.6
</del>
<ins class="diff-chg">14.5.7
</ins>
fn:collection
</b>
</a>
and
<a href="#func-doc">
<b>
<del class="diff-old">15.5.4
</del>
<ins class="diff-chg">14.5.5
</ins>
fn:doc
</b>
</a>
are
<a title="implementation-defined" class= "termref" href="#implementation-defined">
<span class= "arrow">
·
</span>
implementation-defined
<span class= "arrow">
·
</span>
</a>.
</p>
</li>
</ol>
</div>
<div class="div1">
<h2>
<a name="changelog" id="changelog">
</a>
<del class="diff-old">G
Function
and
Operator
Quick
Reference
</del>
<ins class="diff-chg">F
Changes
since
previous
Recommendation
</ins>
(Non-Normative)
</h2>
<div class="div2">
<h3>
<a name="substantive-changes" id="substantive-changes">
</a>
<del class="diff-old">G.1
</del>
<ins class="diff-chg">F.1
Substantive
changes
</ins></h3><p><ins class="diff-chg">
The
following
changes
have
been
made
since
the
first
edition
of
the
</ins>
Functions
and
Operators
<del class="diff-old">by
Section
2
Accessors
2.1
fn:node-name
</del>
<ins class="diff-chg">specification
for
XPath
2.0
and
XQuery
1.0
published
on
23
January
2007:
</ins></p><ol class="enumar"><li><p><ins class="diff-chg">
Errata
E1
through
E47
have
been
applied.
</ins></p></li><li><p><ins class="diff-chg">
A
two-argument
version
of
the
</ins><a href= "#func-round">
<code>
<del class="diff-old">fn:node-name
</del>
<ins class="diff-chg">fn:round
</ins>
</code>
</a>
<del class="diff-old">(
$arg
</del>
<ins class="diff-chg">function
has
been
introduced.
(Bugzilla
6240)
</ins></p></li><li><p><ins class="diff-chg">
A
single-argument
version
of
the
</ins><a href= "#func-string-join">
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">fn:string-join
</ins>
</code>
</a>
<ins class="diff-new">function
has
been
introduced.
</ins></p></li><li><p><ins class="diff-new">
Specifications
for
the
functions
</ins><a href= "#func-format-date">
<code>
<del class="diff-old">node()?
)
&#160;as&#160;
</del>
<ins class="diff-chg">fn:format-date
</ins>
</code>
</a>,
<a href= "#func-format-time">
<code>
<del class="diff-old">xs:QName?
</del>
<ins class="diff-chg">fn:format-time
</ins>
</code>
<del class="diff-old">2.2
fn:nilled
</del>
</a>,
<ins class="diff-chg">and
</ins><a href= "#func-format-dateTime">
<code>
<del class="diff-old">fn:nilled
</del>
<ins class="diff-chg">fn:format-dateTime
</ins>
</code>
</a>
<del class="diff-old">(
$arg
</del>
<ins class="diff-chg">have
been
transferred
from
the
XSLT
2.0
specification.
</ins></p></li><li><p><ins class="diff-chg">
The
specification
of
</ins><a href= "#func-format-number">
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">fn:format-number
</ins>
</code>
<del class="diff-old">node()?
)
&#160;as&#160;
</del>
</a>
<ins class="diff-chg">has
been
transferred
from
the
XSLT
specification.
</ins></p></li><li><p><ins class="diff-chg">
A
function
</ins><a href= "#func-format-integer">
<code>
<del class="diff-old">xs:boolean?
</del>
<ins class="diff-chg">fn:format-integer
</ins>
</code>
<del class="diff-old">2.3
fn:string
</del>
</a>
<ins class="diff-chg">is
introduced.
</ins></p></li><li><p><ins class="diff-chg">
The
function
</ins><a href= "#func-generate-id">
<code>
<del class="diff-old">fn:string
</del>
<ins class="diff-chg">fn:generate-id
</ins>
</code>
</a>
<del class="diff-old">()
&#160;as&#160;
</del>
<ins class="diff-chg">is
introduced,
transferred
from
the
XSLT
specification.
</ins></p></li><li><p><ins class="diff-chg">
A
range
of
trigonometric
functions
is
defined
(in
a
new
namespace).
</ins></p></li><li><p><ins class="diff-chg">
New
functions
</ins><a href="#func-parse">
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">fn:parse
</ins>
</code>
</a>
<ins class="diff-chg">and
</ins><a href="#func-serialize">
<code>
<del class="diff-old">fn:string
</del>
<ins class="diff-chg">fn:serialize
</ins>
</code>
</a>
<del class="diff-old">(
$arg
</del>
<ins class="diff-chg">are
defined.
</ins></p></li><li><p><ins class="diff-chg">
A
new
function
</ins><a href= "#func-analyze-string">
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">fn:analyze-string
</ins>
</code>
</a>
<ins class="diff-new">is
defined.
</ins></p></li><li><p><ins class="diff-new">
The
syntax
of
regular
expressions
is
extended
to
allow
non-capturing
groups.
</ins></p></li><li><p><ins class="diff-new">
A
new
flag
is
introduced
for
the
</ins>
<code>
<del class="diff-old">item()?
</del>
<ins class="diff-chg">$flags
</ins>
</code>
<del class="diff-old">)
</del>
<ins class="diff-chg">argument
of
functions
that
use
regular
expressions:
the
</ins>
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">q
</ins>
</code>
<ins class="diff-new">flag
causes
all
characters
in
a
regular
expression
to
be
treated
as
ordinary
characters
rather
than
metacharacters.
</ins></p></li><li><p><ins class="diff-new">
Supporting
the
new
language
feature
of
higher-order
functions,
a
number
of
functions
are
defined
that
operate
on
function
items
as
their
arguments.
</ins></p></li><li><p><ins class="diff-new">
The
description
of
the
</ins><a href= "#func-error">
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">fn:error
</ins>
</code>
</a>
<ins class="diff-new">function
has
been
rewritten
to
allow
for
the
introduction
of
try/catch
facilities
into
XQuery
and
XSLT.
</ins></p></li><li><p><ins class="diff-new">
The
section
describing
what
it
means
for
functions
to
be
contextual
and/or
stable
has
been
rewritten.
</ins></p></li></ol>
</div>
<del class="diff-old">2.4
fn:data
</del>
<div class="div2">
<h3>
<a name="editorial-changes" id="editorial-changes">
</a>
<ins class="diff-chg">F.2
Editorial
changes
</ins></h3><p><ins class="diff-chg">
The
following
editorial
changes
have
been
made
since
the
first
edition
of
the
Functions
and
Operators
specification
for
XPath
2.0
and
XQuery
1.0
published
on
23
January
2007.
These
are
not
explicitly
marked
in
the
change-highlighted
version
of
the
specification:
</ins></p><ol class="enumar"><li><p><ins class="diff-chg">
A
quick
reference
section
containing
links
to
the
functions
has
been
added
before
the
full
table
of
contents.
</ins></p></li><li><p><ins class="diff-chg">
The
section
on
constructor
functions
has
been
moved
so
that
it
is
now
adjacent
to
the
closely-related
section
on
casting.
</ins></p></li><li><p><ins class="diff-chg">
The
function
</ins><a href= "#func-dateTime">
<code>
<del class="diff-old">fn:data
</del>
<ins class="diff-chg">fn:dateTime
</ins>
</code>
</a>
<del class="diff-old">(
$arg
</del>
<ins class="diff-chg">has
been
moved
out
of
the
section
describing
constructor
functions,
and
is
no
longer
described
as
"a
special
constructor
function".
It
is
now
an
ordinary
function
described
in
the
appropriate
section
along
with
other
functions
on
dates
and
times.
This
allows
the
term
"constructor
function"
to
be
associated
exclusively
with
single-argument
functions
whose
name
is
the
same
as
the
type
name
of
the
value
that
they
return,
and
avoids
any
suggestion
that
this
function
has
special
behavior.
Similarly,
the
functions
</ins><a href= "#func-true">
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">fn:true
</ins>
</code>
<del class="diff-old">item()*
)
&#160;as&#160;
</del>
</a>
<ins class="diff-chg">and
</ins><a href= "#func-false">
<code>
<del class="diff-old">xs:anyAtomicType*
</del>
<ins class="diff-chg">fn:false
</ins>
</code>
<del class="diff-old">2.5
fn:base-uri
</del>
</a>
<ins class="diff-chg">are
no
longer
described
as
constructor
functions.
</ins></p></li><li><p><ins class="diff-chg">
Where
a
function
is
referred
to
by
name,
the
reference
is
now
always
in
the
form
(for
example)
</ins>
<a href= "#func-base-uri">
<code>
fn:base-uri
</code>
</a>
<del class="diff-old">()
&#160;as&#160;
xs:anyURI?
</del>
<ins class="diff-chg">rather
than
</ins>
<a href= "#func-base-uri">
<code>
<del class="diff-old">fn:base-uri
</del>
<ins class="diff-chg">fn:base-uri()
</ins>
</code>
<del class="diff-old">(
</del>
</a>.
<ins class="diff-chg">The
latter
form
is
used
only
to
indicate
a
call
on
the
function
in
which
no
arguments
are
supplied.
</ins></p></li><li><p><ins class="diff-chg">
The
specification
of
each
function
now
consists
of
a
set
of
standard
subsections:
Summary,
Operator
Mapping,
Signature,
Rules,
Error
Conditions,
Notes,
and
Examples.
</ins></p></li><li><p><ins class="diff-chg">
The
"Summary"
of
the
effect
of
each
function
is
now
just
that:
it
never
contains
any
information
that
cannot
be
found
in
the
more
detailed
rules,
and
it
does
not
attempt
to
list
unusual
or
error
conditions.
Such
rules
have
been
moved
into
separate
paragraphs.
Sometimes
the
language
used
in
the
summary
is
relatively
informal.
Although
the
summary
remains
normative,
it
must
be
regarded
as
being
subservient
to
the
rules
that
follow.
</ins></p></li><li><p><ins class="diff-chg">
Functions
are
always
</ins><em><ins class="diff-chg">
called
</ins></em>,<ins class="diff-chg">
never
</ins><em><ins class="diff-chg">
invoked
</ins></em>.</p></li><li><p><ins class="diff-chg">
The
specification
no
longer
</ins><em><ins class="diff-chg">
discusses
</ins></em><ins class="diff-chg">
functions,
it
now
</ins><em><ins class="diff-chg">
specifies
</ins></em><ins class="diff-chg">
or
</ins><em><ins class="diff-chg">
defines
</ins></em><ins class="diff-chg">
them.
</ins></p></li><li><p><ins class="diff-chg">
Rules
have
been
rewritten
in
a
more
consistent
style:
"If
</ins>
<code>
$arg
</code>
<ins class="diff-chg">is
X,
the
function
returns
Y"
(avoiding
alternatives
such
as
"Returns
Y
if
</ins>
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<ins class="diff-chg">is
X",
and
avoiding
the
passive
"is
returned").
</ins></p></li><li><p><ins class="diff-chg">
The
section
heading
for
a
section
that
defines
a
function
is
now
always
the
name
of
the
function.
Some
function
definitions
have
been
moved
into
subsections
to
achieve
this.
</ins></p></li><li><p><ins class="diff-chg">
Statements
within
the
rules
of
a
function
that
follow
inevitably
from
other
rules
have
in
many
cases
been
downgraded
to
notes.
An
example
is
the
statement
that
</ins>
<code>
<del class="diff-old">node()?
</del>
<ins class="diff-chg">remove($seq,
N)
</ins>
</code>
<del class="diff-old">)
</del>
<ins class="diff-chg">returns
an
empty
sequence
if
</ins>
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">$seq
</ins>
</code>
<ins class="diff-new">is
an
empty
sequence.
</ins></p></li><li><p><ins class="diff-new">
The
functions
for
durations
and
those
for
dates/times
have
been
split
into
separate
sections.
</ins></p></li><li><p><ins class="diff-new">
The
</ins><a href="#func-boolean">
<code>
<del class="diff-old">xs:anyURI?
</del>
<ins class="diff-chg">fn:boolean
</ins>
</code>
<del class="diff-old">2.6
fn:document-uri
</del>
</a>
<ins class="diff-chg">function
has
been
moved
from
"General
Functions
and
Operators
on
Sequences"
to
"Functions
on
Boolean
Values".
</ins></p></li><li><p><ins class="diff-chg">
In
the
interests
of
automating
the
testing
of
examples,
the
convention
has
been
adopted
that
the
result
of
an
example
expression
is
wherever
possible
given
in
the
form
of
a
simple
but
legal
XPath
expression.
Specifically
a
numeric
or
string
literal
is
used
for
numbers
and
strings;
the
expressions
</ins>
<code>
<del class="diff-old">fn:document-uri
</del>
<ins class="diff-chg">true()
</ins>
</code>
<del class="diff-old">(
</del>
<ins class="diff-chg">and
</ins>
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">false()
</ins>
</code>
<ins class="diff-chg">for
booleans;
constructors
such
as
</ins>
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">xs:duration('PT0S')
</ins>
</code>
<ins class="diff-chg">for
other
atomic
types;
expressions
such
as
</ins>
<code>
<del class="diff-old">node()?
</del>
<ins class="diff-chg">(1,
2,
3,
4)
</ins>
</code>
<del class="diff-old">)
</del>
<ins class="diff-chg">for
sequences.
The
expression
will
always
return
a
value
of
the
correct
type;
so
the
</ins>
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">xs:double
</ins>
</code>
<ins class="diff-chg">value
zero
is
shown
as
</ins>
<code>
<del class="diff-old">xs:anyURI?
</del>
<ins class="diff-chg">0.0e0
</ins></code>,<ins class="diff-chg">
not
as
</ins><code><ins class="diff-chg">
0
</ins></code>,<ins class="diff-chg">
which
is
the
way
the
value
would
be
serialized
on
output.
The
value
</ins><code><ins class="diff-chg">
NaN
</ins>
</code>
<ins class="diff-chg">is
given
as
</ins><code><ins class="diff-chg">
xs:double('NaN')
</ins></code>.<ins class="diff-chg">
Previously
results
were
sometimes
given
in
this
form,
sometimes
in
the
form
of
a
serialization
of
the
result
value,
and
sometimes
(particularly
for
dates,
times,
and
durations)
in
the
form
of
an
informal
description.
</ins></p></li><li><p><ins class="diff-chg">
In
some
cases
where
one
function
can
be
readily
specified
in
terms
of
another,
the
opportunity
has
been
taken
to
simplify
the
specification.
For
example,
all
the
operator
support
functions
of
the
form
</ins><code><ins class="diff-chg">
op:xx-greater-than
</ins></code><ins class="diff-chg">
are
now
specified
by
reference
to
the
corresponding
</ins><code><ins class="diff-chg">
op:xx-less-than
</ins></code><ins class="diff-chg">
function
with
the
arguments
reversed.
This
reduces
the
risk
of
introducing
errors
and
inconsistencies.
</ins></p></li><li><p><ins class="diff-chg">
In
some
cases,
the
rules
for
a
function
have
been
reordered.
For
example,
the
rule
describing
how
an
empty
sequence
is
handled
now
generally
comes
before
any
rule
that
works
only
if
the
argument
is
not
an
empty
sequence.
</ins></p></li><li><p><ins class="diff-chg">
Some
non-normative
examples
and
notes
have
been
added.
</ins></p></li></ol>
</div>
</div>
<div class="div1">
<h2>
<a name="quickref" id="quickref">
</a>
<ins class="diff-chg">G
Function
and
Operator
Quick
Reference
(Non-Normative)
</ins></h2><div class="div2"><h3><a name="quickref-section" id="quickref-section"></a><ins class="diff-chg">
G.1
Functions
and
Operators
by
Section
</ins></h3><dl><dt class="label"><ins class="diff-chg">
2
Accessors
</ins></dt><dd><dl><dt class="label"><ins class="diff-chg">
2.1
fn:node-name
</ins></dt><dt class="label"><ins class="diff-chg">
2.2
fn:nilled
</ins></dt><dt class="label"><ins class="diff-chg">
2.3
fn:string
</ins></dt><dt class="label"><ins class="diff-chg">
2.4
fn:data
</ins></dt><dt class="label"><ins class="diff-chg">
2.5
fn:base-uri
</ins></dt><dt class="label"><ins class="diff-chg">
2.6
fn:document-uri
</ins></dt>
</dl>
</dd>
<dt class="label">
3
<del class="diff-old">The
Error
Function
</del>
<ins class="diff-chg">Errors
and
Diagnostics
</ins></dt><dd><dl><dt class="label"><ins class="diff-chg">
3.1
Raising
Errors
</ins>
</dt>
<dd>
<div class="protoref">
<a href= "#func-error">
<code>
fn:error
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
none
</code>
</div>
<div class="protoref">
<a href= "#func-error">
<code>
fn:error
</code>
</a>
(
<code>
<del class="diff-old">$error
</del>
<ins class="diff-chg">$code
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:QName
</code>
)
<code>
&#160;as&#160;
</code>
<code>
none
</code>
</div>
<div class="protoref">
<a href= "#func-error">
<code>
fn:error
</code>
</a>
(
<code>
<del class="diff-old">$error
</del>
<ins class="diff-chg">$code
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:QName?
</code>,
<code>
$description
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
none
</code>
</div>
<div class="protoref">
<a href= "#func-error">
<code>
fn:error
</code>
</a>
(
<code>
<del class="diff-old">$error
</del>
<ins class="diff-chg">$code
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:QName?
</code>,
<code>
$description
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$error-object
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
none
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">4
The
Trace
Function
</del>
<ins class="diff-chg">3.2
Diagnostic
Tracing
</ins>
</dt>
<dd>
<div class="protoref">
<a href= "#func-trace">
<code>
fn:trace
</code>
</a>
(
<code>
$value
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$label
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
</div>
</dd>
<del class="diff-old">5
Constructor
Functions
5.2
A
Special
Constructor
Function
for
xs:dateTime
fn:dateTime
(
$arg1
&#160;as&#160;
xs:date?
,
$arg2
&#160;as&#160;
xs:time?
)
&#160;as&#160;
xs:dateTime?
</del>
</dl>
</dd>
<dt class="label">
<del class="diff-old">6
</del>
<ins class="diff-chg">4
</ins>
Functions
and
Operators
on
Numerics
</dt>
<dd>
<dl>
<dt class="label">
<del class="diff-old">6.2
</del>
<ins class="diff-chg">4.2
Arithmetic
</ins>
Operators
on
Numeric
Values
</dt>
<dd>
<div class="protoref">
<a href= "#func-numeric-add">
<code>
op:numeric-add
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
</div>
<div class="protoref">
<a href= "#func-numeric-subtract">
<code>
op:numeric-subtract
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
</div>
<div class="protoref">
<a href= "#func-numeric-multiply">
<code>
op:numeric-multiply
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
</div>
<div class="protoref">
<a href= "#func-numeric-divide">
<code>
op:numeric-divide
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
</div>
<div class="protoref">
<a href= "#func-numeric-integer-divide">
<code>
op:numeric-integer-divide
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
</div>
<div class="protoref">
<a href= "#func-numeric-mod">
<code>
op:numeric-mod
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
</div>
<div class="protoref">
<a href= "#func-numeric-unary-plus">
<code>
op:numeric-unary-plus
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
</div>
<div class="protoref">
<a href= "#func-numeric-unary-minus">
<code>
op:numeric-unary-minus
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">6.3
</del>
<ins class="diff-chg">4.3
</ins>
Comparison
Operators
on
Numeric
Values
</dt>
<dd>
<div class="protoref">
<a href= "#func-numeric-equal">
<code>
op:numeric-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-numeric-less-than">
<code>
op:numeric-less-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-numeric-greater-than">
<code>
op:numeric-greater-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">6.4
</del>
<ins class="diff-chg">4.4
</ins>
Functions
on
Numeric
Values
</dt>
<dd>
<div class="protoref">
<a href= "#func-abs">
<code>
fn:abs
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
</div>
<div class="protoref">
<a href= "#func-ceiling">
<code>
fn:ceiling
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
</div>
<div class="protoref">
<a href= "#func-floor">
<code>
fn:floor
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
</div>
<div class="protoref">
<a href= "#func-round">
<code>
fn:round
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
</div>
<div class="protoref">
<a href= "#func-round">
<code>
<ins class="diff-new">fn:round
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
numeric?
</ins></code>,<code><ins class="diff-new">
$precision
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:integer
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
numeric?
</ins></code></div><div class="protoref">
<a href= "#func-round-half-to-even">
<code>
fn:round-half-to-even
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
</div>
<div class="protoref">
<a href= "#func-round-half-to-even">
<code>
fn:round-half-to-even
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>,
<code>
$precision
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
</div>
</dd>
<dt class="label">
<ins class="diff-new">4.5
Formatting
Integers
</ins></dt><dd><div class="protoref"><a href= "#func-format-integer"><code><ins class="diff-new">
fn:format-integer
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$value
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:integer?
</ins></code>,<code><ins class="diff-new">
$picture
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code></div><div class="protoref"><a href= "#func-format-integer"><code><ins class="diff-new">
fn:format-integer
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$value
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:integer?
</ins></code>,<code><ins class="diff-new">
$picture
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code>,<code><ins class="diff-new">
$language
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:language
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code></div></dd><dt class="label"><ins class="diff-new">
4.6
Formatting
Numbers
</ins></dt><dd><div class="protoref"><a href= "#func-format-number"><code><ins class="diff-new">
fn:format-number
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$value
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
numeric?
</ins></code>,<code><ins class="diff-new">
$picture
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code></div><div class="protoref"><a href= "#func-format-number"><code><ins class="diff-new">
fn:format-number
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$value
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
numeric?
</ins></code>,<code><ins class="diff-new">
$picture
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code>,<code><ins class="diff-new">
$decimal-format-name
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code></div></dd><dt class="label"><ins class="diff-new">
4.7
Trigonometrical
Functions
</ins></dt><dd><div class="protoref"><a href= "#func-pi"><code><ins class="diff-new">
fn:pi
</ins></code></a><ins class="diff-new">
()
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double
</ins></code></div><div class="protoref"><a href= "#func-sqrt"><code><ins class="diff-new">
fn:sqrt
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code></div><div class="protoref"><a href= "#func-sin"><code><ins class="diff-new">
fn:sin
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
θ
</ins></span><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code></div><div class="protoref"><a href= "#func-cos"><code><ins class="diff-new">
fn:cos
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
θ
</ins></span><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code></div><div class="protoref"><a href= "#func-tan"><code><ins class="diff-new">
fn:tan
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-new">
θ
</ins></span><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code></div><div class="protoref"><a href= "#func-asin"><code><ins class="diff-new">
fn:asin
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code></div><div class="protoref"><a href= "#func-acos"><code><ins class="diff-new">
fn:acos
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code></div><div class="protoref"><a href= "#func-atan"><code><ins class="diff-new">
fn:atan
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:double?
</ins></code></div></dd>
</dl>
</dd>
<dt class="label">
<del class="diff-old">7
</del>
<ins class="diff-chg">5
</ins>
Functions
on
Strings
</dt>
<dd>
<dl>
<dt class="label">
<del class="diff-old">7.2
</del>
<ins class="diff-chg">5.2
</ins>
Functions
to
Assemble
and
Disassemble
Strings
</dt>
<dd>
<div class="protoref">
<a href= "#func-codepoints-to-string">
<code>
fn:codepoints-to-string
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-string-to-codepoints">
<code>
fn:string-to-codepoints
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer*
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">7.3
</del>
<ins class="diff-chg">5.3
</ins>
Equality
and
Comparison
of
Strings
</dt>
<dd>
<div class="protoref">
<a href= "#func-compare">
<code>
fn:compare
</code>
</a>
(
<code>
$comparand1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$comparand2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
</div>
<div class="protoref">
<a href= "#func-compare">
<code>
fn:compare
</code>
</a>
(
<code>
$comparand1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$comparand2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
</div>
<div class="protoref">
<a href= "#func-codepoint-equal">
<code>
fn:codepoint-equal
</code>
</a>
(
<code>
$comparand1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$comparand2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean?
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">7.4
</del>
<ins class="diff-chg">5.4
</ins>
Functions
on
String
Values
</dt>
<dd>
<div class="protoref">
<a href= "#func-concat">
<code>
fn:concat
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>,
<span class= "varargs">...
</span>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-string-join">
<code>
fn:string-join
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
<ins class="diff-new">)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code></div><div class="protoref"><a href= "#func-string-join"><code><ins class="diff-new">
fn:string-join
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg1
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string*
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-substring">
<code>
fn:substring
</code>
</a>
(
<code>
$sourceString
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
<del class="diff-old">$startingLoc
</del>
<ins class="diff-chg">$start
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-substring">
<code>
fn:substring
</code>
</a>
(
<code>
$sourceString
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
<del class="diff-old">$startingLoc
</del>
<ins class="diff-chg">$start
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>,
<code>
$length
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-string-length">
<code>
fn:string-length
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
</div>
<div class="protoref">
<a href= "#func-string-length">
<code>
fn:string-length
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
</div>
<div class="protoref">
<a href= "#func-normalize-space">
<code>
fn:normalize-space
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-normalize-space">
<code>
fn:normalize-space
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-normalize-unicode">
<code>
fn:normalize-unicode
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-normalize-unicode">
<code>
fn:normalize-unicode
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$normalizationForm
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-upper-case">
<code>
fn:upper-case
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-lower-case">
<code>
fn:lower-case
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-translate">
<code>
fn:translate
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$mapString
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$transString
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<del class="diff-old">fn:encode-for-uri
(
$uri-part
&#160;as&#160;
xs:string?
)
&#160;as&#160;
xs:string
fn:iri-to-uri
(
$iri
&#160;as&#160;
xs:string?
)
&#160;as&#160;
xs:string
fn:escape-html-uri
(
$uri
&#160;as&#160;
xs:string?
)
&#160;as&#160;
xs:string
</del>
</dd>
<dt class="label">
<del class="diff-old">7.5
</del>
<ins class="diff-chg">5.5
</ins>
Functions
Based
on
Substring
Matching
</dt>
<dd>
<div class="protoref">
<a href= "#func-contains">
<code>
fn:contains
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-contains">
<code>
fn:contains
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-starts-with">
<code>
fn:starts-with
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-starts-with">
<code>
fn:starts-with
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-ends-with">
<code>
fn:ends-with
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-ends-with">
<code>
fn:ends-with
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-substring-before">
<code>
fn:substring-before
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-substring-before">
<code>
fn:substring-before
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-substring-after">
<code>
fn:substring-after
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-substring-after">
<code>
fn:substring-after
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">7.6
</del>
<ins class="diff-chg">5.6
</ins>
String
Functions
that
<del class="diff-old">Use
Pattern
Matching
</del>
<ins class="diff-chg">use
Regular
Expressions
</ins>
</dt>
<dd>
<div class="protoref">
<a href= "#func-matches">
<code>
fn:matches
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-matches">
<code>
fn:matches
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$flags
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-replace">
<code>
fn:replace
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$replacement
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-replace">
<code>
fn:replace
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$replacement
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$flags
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<div class="protoref">
<a href= "#func-tokenize">
<code>
fn:tokenize
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
</div>
<div class="protoref">
<a href= "#func-tokenize">
<code>
fn:tokenize
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$flags
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
</div>
<del class="diff-old">8
Functions
on
anyURI
8.1
fn:resolve-uri
</del>
<div class="protoref">
<a href= "#func-analyze-string">
<code>
<del class="diff-old">fn:resolve-uri
</del>
<ins class="diff-chg">fn:analyze-string
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$relative
</del>
<ins class="diff-chg">$input
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
<ins class="diff-new">$pattern
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:anyURI?
</del>
<ins class="diff-chg">element(fn:analyze-string-result)
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-analyze-string">
<code>
<del class="diff-old">fn:resolve-uri
</del>
<ins class="diff-chg">fn:analyze-string
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$relative
</del>
<ins class="diff-chg">$input
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
<del class="diff-old">$base
</del>
<ins class="diff-chg">$pattern
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code>,<code><ins class="diff-chg">
$flags
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:anyURI?
</del>
<ins class="diff-chg">element(fn:analyze-string-result)
</ins>
</code>
</div>
</dd>
</dl>
</dd>
<dt class="label">
<del class="diff-old">9
</del>
<ins class="diff-chg">6
Functions
that
manipulate
URIs
</ins></dt><dd><dl><dt class="label"><ins class="diff-chg">
6.1
fn:resolve-uri
</ins></dt><dt class="label"><ins class="diff-chg">
6.2
fn:encode-for-uri
</ins></dt><dt class="label"><ins class="diff-chg">
6.3
fn:iri-to-uri
</ins></dt><dt class="label"><ins class="diff-chg">
6.4
fn:escape-html-uri
</ins></dt></dl></dd><dt class="label"><ins class="diff-chg">
7
</ins>
Functions
and
Operators
on
Boolean
Values
</dt>
<dd>
<dl>
<dt class="label">
<del class="diff-old">9.1
Additional
</del>
<ins class="diff-chg">7.1
</ins>
Boolean
<del class="diff-old">Constructor
</del>
<ins class="diff-chg">Constant
</ins>
Functions
</dt>
<dd>
<div class="protoref">
<a href= "#func-true">
<code>
fn:true
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-false">
<code>
fn:false
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">9.2
</del>
<ins class="diff-chg">7.2
</ins>
Operators
on
Boolean
Values
</dt>
<dd>
<div class="protoref">
<a href= "#func-boolean-equal">
<code>
op:boolean-equal
</code>
</a>
(
<code>
$value1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>,
<code>
$value2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-boolean-less-than">
<code>
op:boolean-less-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-boolean-greater-than">
<code>
op:boolean-greater-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">9.3
</del>
<ins class="diff-chg">7.3
</ins>
Functions
on
Boolean
Values
</dt>
<dd>
<div class="protoref">
<a href= "#func-boolean">
<code>
<ins class="diff-new">fn:boolean
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
item()*
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:boolean
</ins></code></div><div class="protoref">
<a href= "#func-not">
<code>
fn:not
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
</dd>
</dl>
</dd>
<dt class="label">
<del class="diff-old">10
</del>
<ins class="diff-chg">8
</ins>
Functions
and
Operators
on
<del class="diff-old">Durations,
Dates
and
Times
</del>
<ins class="diff-chg">Durations
</ins>
</dt>
<dd>
<dl>
<dt class="label">
<del class="diff-old">10.4
</del>
<ins class="diff-chg">8.3
</ins>
Comparison
Operators
on
<del class="diff-old">Duration,
Date
and
Time
Values
</del>
<ins class="diff-chg">Durations
</ins>
</dt>
<dd>
<div class="protoref">
<a href= "#func-yearMonthDuration-less-than">
<code>
op:yearMonthDuration-less-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-yearMonthDuration-greater-than">
<code>
op:yearMonthDuration-greater-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-dayTimeDuration-less-than">
<code>
op:dayTimeDuration-less-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-dayTimeDuration-greater-than">
<code>
op:dayTimeDuration-greater-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-duration-equal">
<code>
op:duration-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:duration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:duration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
</dd>
<dt class="label">
<ins class="diff-new">8.4
Component
Extraction
Functions
on
Durations
</ins></dt><dd>
<div class="protoref">
<a href= "#func-years-from-duration">
<code>
<del class="diff-old">op:dateTime-equal
</del>
<ins class="diff-chg">fn:years-from-duration
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:dateTime
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:duration?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-months-from-duration">
<code>
<del class="diff-old">op:dateTime-less-than
</del>
<ins class="diff-chg">fn:months-from-duration
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:dateTime
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:duration?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-days-from-duration">
<code>
<del class="diff-old">op:dateTime-greater-than
</del>
<ins class="diff-chg">fn:days-from-duration
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime
,
</del>
<ins class="diff-chg">xs:duration?
</ins></code><ins class="diff-chg">
)
</ins>
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:integer?
</ins></code></div><div class="protoref"><a href= "#func-hours-from-duration"><code><ins class="diff-chg">
fn:hours-from-duration
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:duration?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-minutes-from-duration">
<code>
<del class="diff-old">op:date-equal
</del>
<ins class="diff-chg">fn:minutes-from-duration
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date
,
</del>
<ins class="diff-chg">xs:duration?
</ins></code><ins class="diff-chg">
)
</ins>
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:integer?
</ins></code></div><div class="protoref"><a href= "#func-seconds-from-duration"><code><ins class="diff-chg">
fn:seconds-from-duration
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">xs:duration?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:decimal?
</ins>
</code>
</div>
</dd>
<dt class="label">
<ins class="diff-new">8.5
Arithmetic
Operators
on
Durations
</ins></dt><dd>
<div class="protoref">
<a href= "#func-add-yearMonthDurations">
<code>
<del class="diff-old">op:date-less-than
</del>
<ins class="diff-chg">op:add-yearMonthDurations
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-subtract-yearMonthDurations">
<code>
<del class="diff-old">op:date-greater-than
</del>
<ins class="diff-chg">op:subtract-yearMonthDurations
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-multiply-yearMonthDuration">
<code>
<del class="diff-old">op:time-equal
</del>
<ins class="diff-chg">op:multiply-yearMonthDuration
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:double
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-divide-yearMonthDuration">
<code>
<del class="diff-old">op:time-less-than
</del>
<ins class="diff-chg">op:divide-yearMonthDuration
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:double
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-divide-yearMonthDuration-by-yearMonthDuration">
<code>
<del class="diff-old">op:time-greater-than
</del>
<ins class="diff-chg">op:divide-yearMonthDuration-by-yearMonthDuration
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:yearMonthDuration
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:decimal
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-add-dayTimeDurations">
<code>
<del class="diff-old">op:gYearMonth-equal
</del>
<ins class="diff-chg">op:add-dayTimeDurations
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:gYearMonth
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:gYearMonth
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-subtract-dayTimeDurations">
<code>
<del class="diff-old">op:gYear-equal
</del>
<ins class="diff-chg">op:subtract-dayTimeDurations
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:gYear
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:gYear
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-multiply-dayTimeDuration">
<code>
<del class="diff-old">op:gMonthDay-equal
</del>
<ins class="diff-chg">op:multiply-dayTimeDuration
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:gMonthDay
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:gMonthDay
</del>
<ins class="diff-chg">xs:double
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-divide-dayTimeDuration">
<code>
<del class="diff-old">op:gMonth-equal
</del>
<ins class="diff-chg">op:divide-dayTimeDuration
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:gMonth
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:gMonth
</del>
<ins class="diff-chg">xs:double
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-divide-dayTimeDuration-by-dayTimeDuration">
<code>
<del class="diff-old">op:gDay-equal
</del>
<ins class="diff-chg">op:divide-dayTimeDuration-by-dayTimeDuration
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:gDay
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:gDay
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:decimal
</ins>
</code>
</div>
</dd>
</dl>
</dd>
<dt class="label">
<del class="diff-old">10.5
Component
Extraction
</del>
<ins class="diff-chg">9
</ins>
Functions
<ins class="diff-new">and
Operators
</ins>
on
<del class="diff-old">Durations,
</del>
Dates
and
Times
</dt>
<dd>
<dl>
<dt class="label">
<ins class="diff-new">9.3
Constructing
a
dateTime
</ins></dt><dd>
<div class="protoref">
<a href= "#func-dateTime">
<code>
<del class="diff-old">fn:years-from-duration
</del>
<ins class="diff-chg">fn:dateTime
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:duration?
)
&#160;as&#160;
xs:integer?
fn:months-from-duration
(
</del>
<ins class="diff-chg">xs:date?
</ins></code>,
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:duration?
</del>
<ins class="diff-chg">xs:time?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>
</div>
</dd>
<dt class="label">
<ins class="diff-new">9.4
Comparison
Operators
on
Duration,
Date
and
Time
Values
</ins></dt><dd>
<div class="protoref">
<a href= "#func-dateTime-equal">
<code>
<del class="diff-old">fn:days-from-duration
</del>
<ins class="diff-chg">op:dateTime-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:duration?
</del>
<ins class="diff-chg">xs:dateTime
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:dateTime
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-dateTime-less-than">
<code>
<del class="diff-old">fn:hours-from-duration
</del>
<ins class="diff-chg">op:dateTime-less-than
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:duration?
</del>
<ins class="diff-chg">xs:dateTime
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:dateTime
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-dateTime-greater-than">
<code>
<del class="diff-old">fn:minutes-from-duration
</del>
<ins class="diff-chg">op:dateTime-greater-than
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:duration?
</del>
<ins class="diff-chg">xs:dateTime
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:dateTime
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-date-equal">
<code>
<del class="diff-old">fn:seconds-from-duration
</del>
<ins class="diff-chg">op:date-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:duration?
</del>
<ins class="diff-chg">xs:date
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:date
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:decimal?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-date-less-than">
<code>
<del class="diff-old">fn:year-from-dateTime
</del>
<ins class="diff-chg">op:date-less-than
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:date
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:date
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-date-greater-than">
<code>
<del class="diff-old">fn:month-from-dateTime
</del>
<ins class="diff-chg">op:date-greater-than
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:date
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:date
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-time-equal">
<code>
<del class="diff-old">fn:day-from-dateTime
</del>
<ins class="diff-chg">op:time-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:time
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:time
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-time-less-than">
<code>
<del class="diff-old">fn:hours-from-dateTime
</del>
<ins class="diff-chg">op:time-less-than
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:time
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:time
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-time-greater-than">
<code>
<del class="diff-old">fn:minutes-from-dateTime
</del>
<ins class="diff-chg">op:time-greater-than
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:time
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:time
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-gYearMonth-equal">
<code>
<del class="diff-old">fn:seconds-from-dateTime
</del>
<ins class="diff-chg">op:gYearMonth-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:gYearMonth
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:gYearMonth
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:decimal?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-gYear-equal">
<code>
<del class="diff-old">fn:timezone-from-dateTime
</del>
<ins class="diff-chg">op:gYear-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:gYear
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:gYear
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-gMonthDay-equal">
<code>
<del class="diff-old">fn:year-from-date
</del>
<ins class="diff-chg">op:gMonthDay-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date?
</del>
<ins class="diff-chg">xs:gMonthDay
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:gMonthDay
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-gMonth-equal">
<code>
<del class="diff-old">fn:month-from-date
</del>
<ins class="diff-chg">op:gMonth-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date?
</del>
<ins class="diff-chg">xs:gMonth
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:gMonth
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-gDay-equal">
<code>
<del class="diff-old">fn:day-from-date
</del>
<ins class="diff-chg">op:gDay-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date?
</del>
<ins class="diff-chg">xs:gDay
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:gDay
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
</dd>
<dt class="label">
<ins class="diff-new">9.5
Component
Extraction
Functions
on
Dates
and
Times
</ins></dt><dd>
<div class="protoref">
<a href= "#func-year-from-dateTime">
<code>
<del class="diff-old">fn:timezone-from-date
</del>
<ins class="diff-chg">fn:year-from-dateTime
</ins>
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date?
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration?
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-month-from-dateTime">
<code>
<del class="diff-old">fn:hours-from-time
</del>
<ins class="diff-chg">fn:month-from-dateTime
</ins>
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time?
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
</div>
<div class="protoref">
<a href= "#func-day-from-dateTime">
<code>
<del class="diff-old">fn:minutes-from-time
</del>
<ins class="diff-chg">fn:day-from-dateTime
</ins>
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time?
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
</div>
<div class="protoref">
<a href= "#func-hours-from-dateTime">
<code>
<del class="diff-old">fn:seconds-from-time
</del>
<ins class="diff-chg">fn:hours-from-dateTime
</ins>
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time?
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:decimal?
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-minutes-from-dateTime">
<code>
<del class="diff-old">fn:timezone-from-time
</del>
<ins class="diff-chg">fn:minutes-from-dateTime
</ins>
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time?
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration?
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<del class="diff-old">10.6
Arithmetic
Operators
on
Durations
</del>
<div class="protoref">
<a href= "#func-seconds-from-dateTime">
<code>
<del class="diff-old">op:add-yearMonthDurations
</del>
<ins class="diff-chg">fn:seconds-from-dateTime
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:decimal?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-timezone-from-dateTime">
<code>
<del class="diff-old">op:subtract-yearMonthDurations
</del>
<ins class="diff-chg">fn:timezone-from-dateTime
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:dayTimeDuration?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-year-from-date">
<code>
<del class="diff-old">op:multiply-yearMonthDuration
</del>
<ins class="diff-chg">fn:year-from-date
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:double
</del>
<ins class="diff-chg">xs:date?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-month-from-date">
<code>
<del class="diff-old">op:divide-yearMonthDuration
</del>
<ins class="diff-chg">fn:month-from-date
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:double
</del>
<ins class="diff-chg">xs:date?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-day-from-date">
<code>
<del class="diff-old">op:divide-yearMonthDuration-by-yearMonthDuration
</del>
<ins class="diff-chg">fn:day-from-date
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:yearMonthDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:yearMonthDuration
</del>
<ins class="diff-chg">xs:date?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:decimal
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-timezone-from-date">
<code>
<del class="diff-old">op:add-dayTimeDurations
</del>
<ins class="diff-chg">fn:timezone-from-date
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:date?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:dayTimeDuration?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-hours-from-time">
<code>
<del class="diff-old">op:subtract-dayTimeDurations
</del>
<ins class="diff-chg">fn:hours-from-time
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:time?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-minutes-from-time">
<code>
<del class="diff-old">op:multiply-dayTimeDuration
</del>
<ins class="diff-chg">fn:minutes-from-time
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:double
</del>
<ins class="diff-chg">xs:time?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-seconds-from-time">
<code>
<del class="diff-old">op:divide-dayTimeDuration
</del>
<ins class="diff-chg">fn:seconds-from-time
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:double
</del>
<ins class="diff-chg">xs:time?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:decimal?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-timezone-from-time">
<code>
<del class="diff-old">op:divide-dayTimeDuration-by-dayTimeDuration
</del>
<ins class="diff-chg">fn:timezone-from-time
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:time?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:decimal
</del>
<ins class="diff-chg">xs:dayTimeDuration?
</ins>
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">10.7
</del>
<ins class="diff-chg">9.6
</ins>
Timezone
Adjustment
Functions
on
Dates
and
Time
Values
</dt>
<dd>
<div class="protoref">
<a href= "#func-adjust-dateTime-to-timezone">
<code>
fn:adjust-dateTime-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-adjust-dateTime-to-timezone">
<code>
fn:adjust-dateTime-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>,
<code>
$timezone
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-adjust-date-to-timezone">
<code>
fn:adjust-date-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>
</div>
<div class="protoref">
<a href= "#func-adjust-date-to-timezone">
<code>
fn:adjust-date-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>,
<code>
$timezone
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>
</div>
<div class="protoref">
<a href= "#func-adjust-time-to-timezone">
<code>
fn:adjust-time-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
</div>
<div class="protoref">
<a href= "#func-adjust-time-to-timezone">
<code>
fn:adjust-time-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>,
<code>
$timezone
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">10.8
</del>
<ins class="diff-chg">9.7
</ins>
Arithmetic
Operators
on
Durations,
Dates
and
Times
</dt>
<dd>
<div class="protoref">
<a href= "#func-subtract-dateTimes">
<code>
op:subtract-dateTimes
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration?
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-subtract-dates">
<code>
op:subtract-dates
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration?
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-subtract-times">
<code>
op:subtract-times
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
</div>
<div class="protoref">
<a href= "#func-add-yearMonthDuration-to-dateTime">
<code>
op:add-yearMonthDuration-to-dateTime
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
</div>
<div class="protoref">
<a href= "#func-add-dayTimeDuration-to-dateTime">
<code>
op:add-dayTimeDuration-to-dateTime
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
</div>
<div class="protoref">
<a href= "#func-subtract-yearMonthDuration-from-dateTime">
<code>
op:subtract-yearMonthDuration-from-dateTime
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
</div>
<div class="protoref">
<a href= "#func-subtract-dayTimeDuration-from-dateTime">
<code>
op:subtract-dayTimeDuration-from-dateTime
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
</div>
<div class="protoref">
<a href= "#func-add-yearMonthDuration-to-date">
<code>
op:add-yearMonthDuration-to-date
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
</div>
<div class="protoref">
<a href= "#func-add-dayTimeDuration-to-date">
<code>
op:add-dayTimeDuration-to-date
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
</div>
<div class="protoref">
<a href= "#func-subtract-yearMonthDuration-from-date">
<code>
op:subtract-yearMonthDuration-from-date
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
</div>
<div class="protoref">
<a href= "#func-subtract-dayTimeDuration-from-date">
<code>
op:subtract-dayTimeDuration-from-date
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
</div>
<div class="protoref">
<a href= "#func-add-dayTimeDuration-to-time">
<code>
op:add-dayTimeDuration-to-time
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>
</div>
<div class="protoref">
<a href= "#func-subtract-dayTimeDuration-from-time">
<code>
op:subtract-dayTimeDuration-from-time
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">11
Functions
Related
to
QNames
11.1
Additional
Constructor
Functions
for
QNames
</del>
<ins class="diff-chg">9.8
Formatting
Dates
and
Times
</ins>
</dt>
<dd>
<div class="protoref">
<a href= "#func-format-dateTime">
<code>
<del class="diff-old">fn:resolve-QName
</del>
<ins class="diff-chg">fn:format-dateTime
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$qname
</del>
<ins class="diff-chg">$value
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:string?
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>,
<code>
<del class="diff-old">$element
</del>
<ins class="diff-chg">$picture
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">element()
)
</del>
<ins class="diff-chg">xs:string
</ins></code>,
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">$language
</ins>
</code>
<code>
<del class="diff-old">xs:QName?
</del>
<ins class="diff-chg">&#160;as&#160;
</ins>
</code>
<code>
<del class="diff-old">fn:QName
(
</del>
<ins class="diff-chg">xs:string?
</ins></code>,
<code>
<del class="diff-old">$paramURI
</del>
<ins class="diff-chg">$calendar
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
<del class="diff-old">$paramQName
</del>
<ins class="diff-chg">$country
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:QName
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>
</div>
<del class="diff-old">11.2
Functions
and
Operators
Related
to
QNames
</del>
<div class="protoref">
<a href= "#func-format-dateTime">
<code>
<del class="diff-old">op:QName-equal
</del>
<ins class="diff-chg">fn:format-dateTime
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">$value
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:QName
</del>
<ins class="diff-chg">xs:dateTime?
</ins>
</code>,
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">$picture
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:QName
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-format-date">
<code>
<del class="diff-old">fn:prefix-from-QName
</del>
<ins class="diff-chg">fn:format-date
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$value
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:QName?
)
</del>
<ins class="diff-chg">xs:date?
</ins></code>,
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">$picture
</ins>
</code>
<code>
<del class="diff-old">xs:NCName?
</del>
<ins class="diff-chg">&#160;as&#160;
</ins>
</code>
<code>
<del class="diff-old">fn:local-name-from-QName
(
</del>
<ins class="diff-chg">xs:string
</ins></code>,
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$language
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:QName?
)
</del>
<ins class="diff-chg">xs:string?
</ins></code>,
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">$calendar
</ins>
</code>
<code>
<del class="diff-old">xs:NCName?
</del>
<ins class="diff-chg">&#160;as&#160;
</ins>
</code>
<code>
<del class="diff-old">fn:namespace-uri-from-QName
(
</del>
<ins class="diff-chg">xs:string?
</ins></code>,
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$country
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:QName?
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:anyURI?
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-format-date">
<code>
<del class="diff-old">fn:namespace-uri-for-prefix
</del>
<ins class="diff-chg">fn:format-date
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$prefix
</del>
<ins class="diff-chg">$value
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:string?
</del>
<ins class="diff-chg">xs:date?
</ins>
</code>,
<code>
<del class="diff-old">$element
</del>
<ins class="diff-chg">$picture
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">element()
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:anyURI?
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-format-time">
<code>
<del class="diff-old">fn:in-scope-prefixes
</del>
<ins class="diff-chg">fn:format-time
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$element
</del>
<ins class="diff-chg">$value
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">element()
</del>
<ins class="diff-chg">xs:time?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins>
</code>
<del class="diff-old">)
</del>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:string*
</del>
<ins class="diff-chg">xs:string
</ins></code>,<code><ins class="diff-chg">
$language
</ins>
</code>
<del class="diff-old">12
Operators
on
base64Binary
and
hexBinary
12.1
Comparisons
of
base64Binary
and
hexBinary
Values
</del>
<code>
<del class="diff-old">op:hexBinary-equal
</del>
<ins class="diff-chg">&#160;as&#160;
</ins>
</code>
<del class="diff-old">(
</del>
<code>
<del class="diff-old">$value1
</del>
<ins class="diff-chg">xs:string?
</ins></code>,<code><ins class="diff-chg">
$calendar
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:hexBinary
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>,
<code>
<del class="diff-old">$value2
</del>
<ins class="diff-chg">$country
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:hexBinary
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-format-time">
<code>
<del class="diff-old">op:base64Binary-equal
</del>
<ins class="diff-chg">fn:format-time
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$value1
</del>
<ins class="diff-chg">$value
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:base64Binary
</del>
<ins class="diff-chg">xs:time?
</ins>
</code>,
<code>
<del class="diff-old">$value2
</del>
<ins class="diff-chg">$picture
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:base64Binary
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>
</div>
</dd>
</dl>
</dd>
<dt class="label">
<del class="diff-old">13
Operators
on
NOTATION
</del>
<ins class="diff-chg">10
Functions
Related
to
QNames
</ins>
</dt>
<dd>
<dl>
<dt class="label">
<del class="diff-old">13.1
Operators
on
NOTATION
</del>
<ins class="diff-chg">10.1
Functions
to
create
a
QNames
</ins>
</dt>
<dd>
<div class="protoref">
<a href= "#func-resolve-QName">
<code>
<del class="diff-old">op:NOTATION-equal
</del>
<ins class="diff-chg">fn:resolve-QName
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">$qname
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:NOTATION
</del>
<ins class="diff-chg">xs:string?
</ins>
</code>,
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">$element
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:NOTATION
</del>
<ins class="diff-chg">element()
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:QName?
</ins>
</code>
</div>
<del class="diff-old">14
Functions
and
Operators
on
Nodes
14.1
fn:name
</del>
<div class="protoref">
<a href= "#func-QName">
<code>
<del class="diff-old">fn:name
</del>
<ins class="diff-chg">fn:QName
</ins>
</code>
</a>
<del class="diff-old">()
</del>
<ins class="diff-chg">(
</ins>
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">$paramURI
</ins>
</code>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">&#160;as&#160;
</ins>
</code>
<code>
<del class="diff-old">fn:name
(
</del>
<ins class="diff-chg">xs:string?
</ins></code>,
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$paramQName
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">node()?
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">xs:QName
</ins>
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">14.2
fn:local-name
</del>
<ins class="diff-chg">10.2
Functions
and
Operators
Related
to
QNames
</ins>
</dt>
<dd>
<div class="protoref">
<del class="diff-old">fn:local-name
()
&#160;as&#160;
xs:string
</del>
<a href= "#func-QName-equal">
<code>
<del class="diff-old">fn:local-name
</del>
<ins class="diff-chg">op:QName-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">node()?
)
</del>
<ins class="diff-chg">xs:QName
</ins></code>,
<code>
<del class="diff-old">&#160;as&#160;
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">&#160;as&#160;
</ins>
</code>
<del class="diff-old">14.3
fn:namespace-uri
</del>
<code>
<del class="diff-old">fn:namespace-uri
</del>
<ins class="diff-chg">xs:QName
</ins>
</code>
<del class="diff-old">()
</del>
<ins class="diff-chg">)
</ins>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:anyURI
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-prefix-from-QName">
<code>
<del class="diff-old">fn:namespace-uri
</del>
<ins class="diff-chg">fn:prefix-from-QName
</ins>
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">node()?
</del>
<ins class="diff-chg">xs:QName?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:anyURI
14.4
fn:number
fn:number
()
&#160;as&#160;
xs:double
</del>
<ins class="diff-chg">xs:NCName?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-local-name-from-QName">
<code>
<del class="diff-old">fn:number
</del>
<ins class="diff-chg">fn:local-name-from-QName
</ins>
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:anyAtomicType?
</del>
<ins class="diff-chg">xs:QName?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:double
</del>
<ins class="diff-chg">xs:NCName?
</ins>
</code>
</div>
<del class="diff-old">14.5
fn:lang
</del>
<div class="protoref">
<a href= "#func-namespace-uri-from-QName">
<code>
<del class="diff-old">fn:lang
</del>
<ins class="diff-chg">fn:namespace-uri-from-QName
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$testlang
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:string?
</del>
<ins class="diff-chg">xs:QName?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:anyURI?
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-namespace-uri-for-prefix">
<code>
<del class="diff-old">fn:lang
</del>
<ins class="diff-chg">fn:namespace-uri-for-prefix
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$testlang
</del>
<ins class="diff-chg">$prefix
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
<del class="diff-old">$node
</del>
<ins class="diff-chg">$element
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">node()
</del>
<ins class="diff-chg">element()
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:anyURI?
</ins>
</code>
</div>
<del class="diff-old">14.6
op:is-same-node
</del>
<div class="protoref">
<a href= "#func-in-scope-prefixes">
<code>
<del class="diff-old">op:is-same-node
</del>
<ins class="diff-chg">fn:in-scope-prefixes
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
&#160;as&#160;
node()
,
$parameter2
</del>
<ins class="diff-chg">$element
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">node()
</del>
<ins class="diff-chg">element()
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:string*
</ins>
</code>
</div>
</dd>
</dl>
</dd>
<dt class="label">
<del class="diff-old">14.7
op:node-before
</del>
<ins class="diff-chg">11
Operators
on
base64Binary
and
hexBinary
</ins></dt><dd><dl><dt class="label"><ins class="diff-chg">
11.1
Comparisons
of
base64Binary
and
hexBinary
Values
</ins>
</dt>
<dd>
<div class="protoref">
<a href= "#func-hexBinary-equal">
<code>
<del class="diff-old">op:node-before
</del>
<ins class="diff-chg">op:hexBinary-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$value1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">node()
</del>
<ins class="diff-chg">xs:hexBinary
</ins>
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$value2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">node()
</del>
<ins class="diff-chg">xs:hexBinary
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<del class="diff-old">14.8
op:node-after
</del>
<div class="protoref">
<a href= "#func-base64Binary-equal">
<code>
<del class="diff-old">op:node-after
</del>
<ins class="diff-chg">op:base64Binary-equal
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$value1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">node()
</del>
<ins class="diff-chg">xs:base64Binary
</ins>
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$value2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">node()
</del>
<ins class="diff-chg">xs:base64Binary
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
</dd>
</dl>
</dd>
<dt class="label">
<del class="diff-old">14.9
fn:root
</del>
<ins class="diff-chg">12
Operators
on
NOTATION
</ins>
</dt>
<dd>
<del class="diff-old">fn:root
()
&#160;as&#160;
node()
fn:root
(
$arg
&#160;as&#160;
node()?
)
&#160;as&#160;
node()?
</del>
<dl>
<dt class="label">
<ins class="diff-chg">12.1
op:NOTATION-equal
</ins></dt></dl>
</dd>
<dt class="label">
<ins class="diff-new">13
Functions
and
Operators
on
Nodes
</ins></dt><dd><dl><dt class="label"><ins class="diff-new">
13.1
fn:name
</ins></dt><dt class="label"><ins class="diff-new">
13.2
fn:local-name
</ins></dt><dt class="label"><ins class="diff-new">
13.3
fn:namespace-uri
</ins></dt><dt class="label"><ins class="diff-new">
13.4
fn:number
</ins></dt><dt class="label"><ins class="diff-new">
13.5
fn:lang
</ins></dt><dt class="label"><ins class="diff-new">
13.6
op:is-same-node
</ins></dt><dt class="label"><ins class="diff-new">
13.7
op:node-before
</ins></dt><dt class="label"><ins class="diff-new">
13.8
op:node-after
</ins></dt><dt class="label"><ins class="diff-new">
13.9
fn:root
</ins></dt>
</dl>
</dd>
<dt class="label">
<del class="diff-old">15
</del>
<ins class="diff-chg">14
</ins>
Functions
and
Operators
on
Sequences
</dt>
<dd>
<dl>
<dt class="label">
<del class="diff-old">15.1
</del>
<ins class="diff-chg">14.1
</ins>
General
Functions
and
Operators
on
Sequences
</dt>
<dd>
<div class="protoref">
<del class="diff-old">fn:boolean
(
$arg
&#160;as&#160;
item()*
)
&#160;as&#160;
xs:boolean
</del>
<a href= "#func-concatenate">
<code>
op:concatenate
</code>
</a>
(
<code>
$seq1
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$seq2
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
</div>
<div class="protoref">
<a href= "#func-distinct-values">
<code>
<del class="diff-old">fn:index-of
</del>
<ins class="diff-chg">fn:distinct-values
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$seqParam
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
<del class="diff-old">,
$srchParam
&#160;as&#160;
xs:anyAtomicType
</del>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer*
</del>
<ins class="diff-chg">xs:anyAtomicType*
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-distinct-values">
<code>
<del class="diff-old">fn:index-of
</del>
<ins class="diff-chg">fn:distinct-values
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$seqParam
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
<del class="diff-old">$srchParam
&#160;as&#160;
xs:anyAtomicType
,
</del>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer*
</del>
<ins class="diff-chg">xs:anyAtomicType*
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-empty">
<code>
fn:empty
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-exists">
<code>
fn:exists
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-index-of">
<code>
<del class="diff-old">fn:distinct-values
</del>
<ins class="diff-chg">fn:index-of
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$seqArg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
<ins class="diff-new">$searchArg
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:anyAtomicType
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:anyAtomicType*
</del>
<ins class="diff-chg">xs:integer*
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-index-of">
<code>
<del class="diff-old">fn:distinct-values
</del>
<ins class="diff-chg">fn:index-of
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$seqArg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
<ins class="diff-new">$searchArg
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:anyAtomicType
</ins></code>,<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:anyAtomicType*
</del>
<ins class="diff-chg">xs:integer*
</ins>
</code>
</div>
<div class="protoref">
<a href= "#func-insert-before">
<code>
fn:insert-before
</code>
</a>
(
<code>
$target
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$position
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>,
<code>
$inserts
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
</div>
<div class="protoref">
<a href= "#func-remove">
<code>
fn:remove
</code>
</a>
(
<code>
$target
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$position
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
</div>
<div class="protoref">
<a href= "#func-reverse">
<code>
fn:reverse
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
</div>
<div class="protoref">
<a href= "#func-subsequence">
<code>
fn:subsequence
</code>
</a>
(
<code>
$sourceSeq
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$startingLoc
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
</div>
<div class="protoref">
<a href= "#func-subsequence">
<code>
fn:subsequence
</code>
</a>
(
<code>
$sourceSeq
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$startingLoc
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>,
<code>
$length
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
</div>
<div class="protoref">
<a href= "#func-unordered">
<code>
fn:unordered
</code>
</a>
(
<code>
$sourceSeq
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">15.2
</del>
<ins class="diff-chg">14.2
</ins>
Functions
That
Test
the
Cardinality
of
Sequences
</dt>
<dd>
<div class="protoref">
<a href= "#func-zero-or-one">
<code>
fn:zero-or-one
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()?
</code>
</div>
<div class="protoref">
<a href= "#func-one-or-more">
<code>
fn:one-or-more
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()+
</code>
</div>
<div class="protoref">
<a href= "#func-exactly-one">
<code>
fn:exactly-one
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">15.3
</del>
<ins class="diff-chg">14.3
</ins>
Equals,
Union,
Intersection
and
Except
</dt>
<dd>
<div class="protoref">
<a href= "#func-deep-equal">
<code>
fn:deep-equal
</code>
</a>
(
<code>
$parameter1
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$parameter2
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-deep-equal">
<code>
fn:deep-equal
</code>
</a>
(
<code>
$parameter1
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$parameter2
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-union">
<code>
op:union
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
</div>
<div class="protoref">
<a href= "#func-intersect">
<code>
op:intersect
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
</div>
<div class="protoref">
<a href= "#func-except">
<code>
op:except
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">15.4
</del>
<ins class="diff-chg">14.4
</ins>
Aggregate
Functions
</dt>
<dd>
<div class="protoref">
<a href= "#func-count">
<code>
fn:count
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
</div>
<div class="protoref">
<a href= "#func-avg">
<code>
fn:avg
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
</div>
<div class="protoref">
<a href= "#func-max">
<code>
fn:max
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
</div>
<div class="protoref">
<a href= "#func-max">
<code>
fn:max
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
</div>
<div class="protoref">
<a href= "#func-min">
<code>
fn:min
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
</div>
<div class="protoref">
<a href= "#func-min">
<code>
fn:min
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
</div>
<div class="protoref">
<a href= "#func-sum">
<code>
fn:sum
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType
</code>
</div>
<div class="protoref">
<a href= "#func-sum">
<code>
fn:sum
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
$zero
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
</div>
</dd>
<dt class="label">
<del class="diff-old">15.5
</del>
<ins class="diff-chg">14.5
</ins>
Functions
and
Operators
that
Generate
Sequences
</dt>
<dd>
<div class="protoref">
<a href= "#func-to">
<code>
op:to
</code>
</a>
(
<code>
$firstval
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>,
<code>
$lastval
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer*
</code>
</div>
<div class="protoref">
<a href= "#func-id">
<code>
fn:id
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
element()*
</code>
</div>
<div class="protoref">
<a href= "#func-id">
<code>
fn:id
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>,
<code>
$node
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
element()*
</code>
</div>
<div class="protoref">
<a href= "#func-element-with-id">
<code>
<ins class="diff-new">fn:element-with-id
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string*
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
element()*
</ins></code></div><div class="protoref"><a href= "#func-element-with-id"><code><ins class="diff-new">
fn:element-with-id
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string*
</ins></code>,<code><ins class="diff-new">
$node
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
node()
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
element()*
</ins></code></div><div class="protoref">
<a href= "#func-idref">
<code>
fn:idref
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
</div>
<div class="protoref">
<a href= "#func-idref">
<code>
fn:idref
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>,
<code>
$node
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
</div>
<div class="protoref">
<a href= "#func-doc">
<code>
fn:doc
</code>
</a>
(
<code>
$uri
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
document-node()?
</code>
</div>
<div class="protoref">
<a href= "#func-doc-available">
<code>
fn:doc-available
</code>
</a>
(
<code>
$uri
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
</div>
<div class="protoref">
<a href= "#func-collection">
<code>
fn:collection
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
</div>
<div class="protoref">
<a href= "#func-collection">
<code>
fn:collection
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
</div>
<del class="diff-old">16
Context
Functions
16.1
fn:position
</del>
<div class="protoref">
<a href= "#func-uri-collection">
<code>
<del class="diff-old">fn:position
</del>
<ins class="diff-chg">fn:uri-collection
</ins>
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer
</del>
<ins class="diff-chg">xs:anyURI*
</ins>
</code>
</div>
<del class="diff-old">16.2
fn:last
</del>
<div class="protoref">
<a href= "#func-uri-collection">
<code>
<del class="diff-old">fn:last
</del>
<ins class="diff-chg">fn:uri-collection
</ins>
</code>
</a>
<del class="diff-old">()
</del>
<ins class="diff-chg">(
</ins><code><ins class="diff-chg">
$arg
</ins></code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer
</del>
<ins class="diff-chg">xs:string?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:anyURI*
</ins>
</code>
</div>
<del class="diff-old">16.3
fn:current-dateTime
</del>
<div class="protoref">
<a href= "#func-generate-id">
<code>
<del class="diff-old">fn:current-dateTime
</del>
<ins class="diff-chg">fn:generate-id
</ins>
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
</div>
<del class="diff-old">16.4
fn:current-date
</del>
<div class="protoref">
<a href= "#func-generate-id">
<code>
<del class="diff-old">fn:current-date
</del>
<ins class="diff-chg">fn:generate-id
</ins>
</code>
</a>
<del class="diff-old">()
</del>
<ins class="diff-chg">(
</ins><code><ins class="diff-chg">
$arg
</ins></code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">node()?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins>
</code>
</div>
<del class="diff-old">16.5
fn:current-time
</del>
<div class="protoref">
<a href= "#func-parse">
<code>
<del class="diff-old">fn:current-time
</del>
<ins class="diff-chg">fn:parse
</ins>
</code>
</a>
<del class="diff-old">()
</del>
<ins class="diff-chg">(
</ins><code><ins class="diff-chg">
$arg
</ins></code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:time
</del>
<ins class="diff-chg">xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
document-node(element(*,
xs:untyped))
</ins>
</code>
</div>
<del class="diff-old">16.6
fn:implicit-timezone
</del>
<div class="protoref">
<a href= "#func-parse">
<code>
<del class="diff-old">fn:implicit-timezone
</del>
<ins class="diff-chg">fn:parse
</ins>
</code>
</a>
<del class="diff-old">()
</del>
<ins class="diff-chg">(
</ins><code><ins class="diff-chg">
$arg
</ins></code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:string
</ins></code>,<code><ins class="diff-chg">
$baseURI
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
document-node(element(*,
xs:untyped))
</ins>
</code>
</div>
<del class="diff-old">16.7
fn:default-collation
</del>
<div class="protoref">
<a href= "#func-serialize">
<code>
<del class="diff-old">fn:default-collation
</del>
<ins class="diff-chg">fn:serialize
</ins>
</code>
</a>
<del class="diff-old">()
</del>
<ins class="diff-chg">(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
node()
</ins></code><ins class="diff-chg">
)
</ins>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
</div>
<del class="diff-old">16.8
fn:static-base-uri
</del>
<div class="protoref">
<a href= "#func-serialize">
<code>
<del class="diff-old">fn:static-base-uri
</del>
<ins class="diff-chg">fn:serialize
</ins>
</code>
</a>
<del class="diff-old">()
</del>
<ins class="diff-chg">(
</ins><code><ins class="diff-chg">
$arg
</ins></code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:anyURI?
</del>
<ins class="diff-chg">node()
</ins></code>,<code><ins class="diff-chg">
$params
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
node()*
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins>
</code>
</div>
</dd>
</dl>
</dd>
<dt class="label">
<ins class="diff-new">15
Context
Functions
</ins></dt><dd><dl><dt class="label"><ins class="diff-new">
15.1
fn:position
</ins></dt><dt class="label"><ins class="diff-new">
15.2
fn:last
</ins></dt><dt class="label"><ins class="diff-new">
15.3
fn:current-dateTime
</ins></dt><dt class="label"><ins class="diff-new">
15.4
fn:current-date
</ins></dt><dt class="label"><ins class="diff-new">
15.5
fn:current-time
</ins></dt><dt class="label"><ins class="diff-new">
15.6
fn:implicit-timezone
</ins></dt><dt class="label"><ins class="diff-new">
15.7
fn:default-collation
</ins></dt><dt class="label"><ins class="diff-new">
15.8
fn:static-base-uri
</ins></dt></dl></dd><dt class="label"><ins class="diff-new">
16
Functions
on
Functions
</ins></dt><dd><dl><dt class="label"><ins class="diff-new">
16.1
fn:function-name
</ins></dt><dt class="label"><ins class="diff-new">
16.2
fn:function-arity
</ins></dt><dt class="label"><ins class="diff-new">
16.3
fn:partial-apply
</ins></dt></dl></dd>
</dl>
</div>
<div class="div2">
<h3>
<a name="quickref-alpha" id="quickref-alpha">
</a>
G.2
Functions
and
Operators
Alphabetically
</h3>
<div class="protoref">
<a href= "#func-NOTATION-equal">
<code>
<ins class="diff-new">op:NOTATION-equal
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg1
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:NOTATION
</ins></code>,<code><ins class="diff-new">
$arg2
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:NOTATION
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
(§
</ins><a href="#func-NOTATION-equal"><ins class="diff-new">
12.1
</ins></a><ins class="diff-new">
)
</ins></div><div class="protoref"><a href= "#func-QName"><code><ins class="diff-new">
fn:QName
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$paramURI
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string?
</ins></code>,<code><ins class="diff-new">
$paramQName
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
(§
</ins><a href="#func-QName"><ins class="diff-new">
10.1.2
</ins></a><ins class="diff-new">
)
</ins></div><div class="protoref"><a href= "#func-QName-equal"><code><ins class="diff-new">
op:QName-equal
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg1
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:QName
</ins></code>,<code><ins class="diff-new">
$arg2
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:QName
</ins></code><ins class="diff-new">
)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:boolean
</ins></code><ins class="diff-new">
(§
</ins><a href="#func-QName-equal"><ins class="diff-new">
10.2.1
</ins></a><ins class="diff-new">
)
</ins></div><div class="protoref">
<a href= "#func-abs">
<code>
fn:abs
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
(§
<a href="#func-abs">
<del class="diff-old">6.4.1
</del>
<ins class="diff-chg">4.4.1
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-acos"><code><ins class="diff-chg">
fn:acos
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-acos"><ins class="diff-chg">
4.7.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-add-dayTimeDuration-to-date">
<code>
op:add-dayTimeDuration-to-date
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
(§
<del class="diff-old">10.8.9
</del>
<a href="#func-add-dayTimeDuration-to-date">
<ins class="diff-chg">9.7.9
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-add-dayTimeDuration-to-dateTime">
<code>
op:add-dayTimeDuration-to-dateTime
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
(§
<del class="diff-old">10.8.5
</del>
<a href="#func-add-dayTimeDuration-to-dateTime">
<ins class="diff-chg">9.7.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-add-dayTimeDuration-to-time">
<code>
op:add-dayTimeDuration-to-time
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>
(§
<del class="diff-old">10.8.12
</del>
<a href="#func-add-dayTimeDuration-to-time">
<ins class="diff-chg">9.7.12
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-add-dayTimeDurations">
<code>
op:add-dayTimeDurations
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
(§
<del class="diff-old">10.6.6
</del>
<a href="#func-add-dayTimeDurations">
<ins class="diff-chg">8.5.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-add-yearMonthDuration-to-date">
<code>
op:add-yearMonthDuration-to-date
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
(§
<del class="diff-old">10.8.8
</del>
<a href="#func-add-yearMonthDuration-to-date">
<ins class="diff-chg">9.7.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-add-yearMonthDuration-to-dateTime">
<code>
op:add-yearMonthDuration-to-dateTime
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
(§
<a href= "#func-add-yearMonthDuration-to-dateTime">
<del class="diff-old">10.8.4
</del>
<ins class="diff-chg">9.7.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-add-yearMonthDurations">
<code>
op:add-yearMonthDurations
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
(§
<del class="diff-old">10.6.1
</del>
<a href="#func-add-yearMonthDurations">
<ins class="diff-chg">8.5.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-adjust-date-to-timezone">
<code>
fn:adjust-date-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>
(§
<del class="diff-old">10.7.2
</del>
<a href="#func-adjust-date-to-timezone">
<ins class="diff-chg">9.6.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-adjust-date-to-timezone">
<code>
fn:adjust-date-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>,
<code>
$timezone
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>
(§
<del class="diff-old">10.7.2
</del>
<a href="#func-adjust-date-to-timezone">
<ins class="diff-chg">9.6.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-adjust-dateTime-to-timezone">
<code>
fn:adjust-dateTime-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
(§
<del class="diff-old">10.7.1
</del>
<a href="#func-adjust-dateTime-to-timezone">
<ins class="diff-chg">9.6.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-adjust-dateTime-to-timezone">
<code>
fn:adjust-dateTime-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>,
<code>
$timezone
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime?
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
(§
<del class="diff-old">10.7.1
</del>
<a href="#func-adjust-dateTime-to-timezone">
<ins class="diff-chg">9.6.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-adjust-time-to-timezone">
<code>
fn:adjust-time-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
(§
<del class="diff-old">10.7.3
</del>
<a href="#func-adjust-time-to-timezone">
<ins class="diff-chg">9.6.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-adjust-time-to-timezone">
<code>
fn:adjust-time-to-timezone
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>,
<code>
$timezone
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
(§
<del class="diff-old">10.7.3
</del>
<a href="#func-adjust-time-to-timezone">
<ins class="diff-chg">9.6.3
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-analyze-string"><code><ins class="diff-chg">
fn:analyze-string
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$input
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code>,<code><ins class="diff-chg">
$pattern
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
element(fn:analyze-string-result)
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-analyze-string"><ins class="diff-chg">
5.6.5
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-analyze-string"><code><ins class="diff-chg">
fn:analyze-string
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$input
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code>,<code><ins class="diff-chg">
$pattern
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code>,<code><ins class="diff-chg">
$flags
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
element(fn:analyze-string-result)
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-analyze-string"><ins class="diff-chg">
5.6.5
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-asin"><code><ins class="diff-chg">
fn:asin
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-asin"><ins class="diff-chg">
4.7.6
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-atan"><code><ins class="diff-chg">
fn:atan
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-atan"><ins class="diff-chg">
4.7.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-avg">
<code>
fn:avg
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
(§
<a href="#func-avg">
<del class="diff-old">15.4.2
</del>
<ins class="diff-chg">14.4.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-base-uri">
<code>
fn:base-uri
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:anyURI?
</code>
(§
<a href="#func-base-uri">
2.5
</a>
)
</div>
<div class="protoref">
<a href= "#func-base-uri">
<code>
fn:base-uri
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
node()?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyURI?
</code>
(§
<a href="#func-base-uri">
2.5
</a>
)
</div>
<div class="protoref">
<a href= "#func-base64Binary-equal">
<code>
op:base64Binary-equal
</code>
</a>
(
<code>
$value1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:base64Binary
</code>,
<code>
$value2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:base64Binary
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">12.1.2
</del>
<a href="#func-base64Binary-equal">
<ins class="diff-chg">11.1.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-boolean">
<code>
fn:boolean
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<a href="#func-boolean">
<del class="diff-old">15.1.1
</del>
<ins class="diff-chg">7.3.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-boolean-equal">
<code>
op:boolean-equal
</code>
</a>
(
<code>
$value1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>,
<code>
$value2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">9.2.1
</del>
<a href="#func-boolean-equal">
<ins class="diff-chg">7.2.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-boolean-greater-than">
<code>
op:boolean-greater-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">9.2.3
</del>
<a href="#func-boolean-greater-than">
<ins class="diff-chg">7.2.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-boolean-less-than">
<code>
op:boolean-less-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">9.2.2
</del>
<a href="#func-boolean-less-than">
<ins class="diff-chg">7.2.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-ceiling">
<code>
fn:ceiling
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
(§
<a href="#func-ceiling">
<del class="diff-old">6.4.2
</del>
<ins class="diff-chg">4.4.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-codepoint-equal">
<code>
fn:codepoint-equal
</code>
</a>
(
<code>
$comparand1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$comparand2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean?
</code>
(§
<del class="diff-old">7.3.3
</del>
<a href="#func-codepoint-equal">
<ins class="diff-chg">5.3.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-codepoints-to-string">
<code>
fn:codepoints-to-string
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.2.1
</del>
<a href="#func-codepoints-to-string">
<ins class="diff-chg">5.2.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-collection">
<code>
fn:collection
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
(§
<a href="#func-collection">
<del class="diff-old">15.5.6
</del>
<ins class="diff-chg">14.5.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-collection">
<code>
fn:collection
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
(§
<a href="#func-collection">
<del class="diff-old">15.5.6
</del>
<ins class="diff-chg">14.5.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-compare">
<code>
fn:compare
</code>
</a>
(
<code>
$comparand1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$comparand2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">7.3.2
</del>
<a href="#func-compare">
<ins class="diff-chg">5.3.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-compare">
<code>
fn:compare
</code>
</a>
(
<code>
$comparand1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$comparand2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">7.3.2
</del>
<a href="#func-compare">
<ins class="diff-chg">5.3.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-concat">
<code>
fn:concat
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>,
<span class= "varargs">...
</span>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-concat">
<del class="diff-old">7.4.1
</del>
<ins class="diff-chg">5.4.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-concatenate">
<code>
op:concatenate
</code>
</a>
(
<code>
$seq1
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$seq2
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
(§
<del class="diff-old">15.1.2
</del>
<a href="#func-concatenate">
<ins class="diff-chg">14.1.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-contains">
<code>
fn:contains
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">7.5.1
</del>
<a href="#func-contains">
<ins class="diff-chg">5.5.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-contains">
<code>
fn:contains
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">7.5.1
</del>
<a href="#func-contains">
<ins class="diff-chg">5.5.1
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-cos"><code><ins class="diff-chg">
fn:cos
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-cos"><ins class="diff-chg">
4.7.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-count">
<code>
fn:count
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
(§
<a href="#func-count">
<del class="diff-old">15.4.1
</del>
<ins class="diff-chg">14.4.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-current-date">
<code>
fn:current-date
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
(§
<a href="#func-current-date">
<del class="diff-old">16.4
</del>
<ins class="diff-chg">15.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-current-dateTime">
<code>
fn:current-dateTime
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:dateTimeStamp
</ins>
</code>
(§
<del class="diff-old">16.3
</del>
<a href="#func-current-dateTime">
<ins class="diff-chg">15.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-current-time">
<code>
fn:current-time
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>
(§
<a href="#func-current-time">
<del class="diff-old">16.5
</del>
<ins class="diff-chg">15.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-data">
<code>
fn:data
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
(§
<a href="#func-data">
2.4
</a>
)
</div>
<div class="protoref">
<a href= "#func-date-equal">
<code>
op:date-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.9
</del>
<a href="#func-date-equal">
<ins class="diff-chg">9.4.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-date-greater-than">
<code>
op:date-greater-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.11
</del>
<a href="#func-date-greater-than">
<ins class="diff-chg">9.4.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-date-less-than">
<code>
op:date-less-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.10
</del>
<a href="#func-date-less-than">
<ins class="diff-chg">9.4.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-dateTime">
<code>
fn:dateTime
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>
(§
<del class="diff-old">5.2
</del>
<a href="#func-dateTime">
<ins class="diff-chg">9.3.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-dateTime-equal">
<code>
op:dateTime-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.6
</del>
<a href="#func-dateTime-equal">
<ins class="diff-chg">9.4.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-dateTime-greater-than">
<code>
op:dateTime-greater-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.8
</del>
<a href="#func-dateTime-greater-than">
<ins class="diff-chg">9.4.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-dateTime-less-than">
<code>
op:dateTime-less-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.7
</del>
<a href="#func-dateTime-less-than">
<ins class="diff-chg">9.4.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-day-from-date">
<code>
fn:day-from-date
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.16
</del>
<a href="#func-day-from-date">
<ins class="diff-chg">9.5.10
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-day-from-dateTime">
<code>
fn:day-from-dateTime
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.9
</del>
<a href="#func-day-from-dateTime">
<ins class="diff-chg">9.5.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-dayTimeDuration-greater-than">
<code>
<del class="diff-old">fn:days-from-duration
</del>
<ins class="diff-chg">op:dayTimeDuration-greater-than
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:duration?
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins></code>,<code><ins class="diff-chg">
$arg2
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:dayTimeDuration
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer?
</del>
<ins class="diff-chg">xs:boolean
</ins>
</code>
(§
<del class="diff-old">10.5.3
</del>
<a href="#func-dayTimeDuration-greater-than">
<ins class="diff-chg">8.3.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-dayTimeDuration-less-than">
<code>
<del class="diff-old">op:dayTimeDuration-greater-than
</del>
<ins class="diff-chg">op:dayTimeDuration-less-than
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.4
</del>
<a href="#func-dayTimeDuration-less-than">
<ins class="diff-chg">8.3.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-days-from-duration">
<code>
<del class="diff-old">op:dayTimeDuration-less-than
</del>
<ins class="diff-chg">fn:days-from-duration
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
&#160;as&#160;
xs:dayTimeDuration
,
$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration
</del>
<ins class="diff-chg">xs:duration?
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">xs:integer?
</ins>
</code>
(§
<del class="diff-old">10.4.3
</del>
<a href="#func-days-from-duration">
<ins class="diff-chg">8.4.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-deep-equal">
<code>
fn:deep-equal
</code>
</a>
(
<code>
$parameter1
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$parameter2
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">15.3.1
</del>
<a href="#func-deep-equal">
<ins class="diff-chg">14.3.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-deep-equal">
<code>
fn:deep-equal
</code>
</a>
(
<code>
$parameter1
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$parameter2
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">15.3.1
</del>
<a href="#func-deep-equal">
<ins class="diff-chg">14.3.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-default-collation">
<code>
fn:default-collation
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">16.7
</del>
<a href="#func-default-collation">
<ins class="diff-chg">15.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-distinct-values">
<code>
fn:distinct-values
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
(§
<del class="diff-old">15.1.6
</del>
<a href="#func-distinct-values">
<ins class="diff-chg">14.1.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-distinct-values">
<code>
fn:distinct-values
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
(§
<del class="diff-old">15.1.6
</del>
<a href="#func-distinct-values">
<ins class="diff-chg">14.1.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-divide-dayTimeDuration">
<code>
op:divide-dayTimeDuration
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
(§
<del class="diff-old">10.6.9
</del>
<a href="#func-divide-dayTimeDuration">
<ins class="diff-chg">8.5.9
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-divide-dayTimeDuration-by-dayTimeDuration">
<code>
op:divide-dayTimeDuration-by-dayTimeDuration
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:decimal
</code>
(§
<a href= "#func-divide-dayTimeDuration-by-dayTimeDuration">
<del class="diff-old">10.6.10
</del>
<ins class="diff-chg">8.5.10
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-divide-yearMonthDuration">
<code>
op:divide-yearMonthDuration
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
(§
<del class="diff-old">10.6.4
</del>
<a href="#func-divide-yearMonthDuration">
<ins class="diff-chg">8.5.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-divide-yearMonthDuration-by-yearMonthDuration">
<code>
op:divide-yearMonthDuration-by-yearMonthDuration
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:decimal
</code>
(§
<a href= "#func-divide-yearMonthDuration-by-yearMonthDuration">
<del class="diff-old">10.6.5
</del>
<ins class="diff-chg">8.5.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-doc">
<code>
fn:doc
</code>
</a>
(
<code>
$uri
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
document-node()?
</code>
(§
<a href="#func-doc">
<del class="diff-old">15.5.4
</del>
<ins class="diff-chg">14.5.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-doc-available">
<code>
fn:doc-available
</code>
</a>
(
<code>
$uri
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<a href="#func-doc-available">
<del class="diff-old">15.5.5
</del>
<ins class="diff-chg">14.5.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-document-uri">
<code>
fn:document-uri
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
node()?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyURI?
</code>
(§
<a href="#func-document-uri">
2.6
</a>
)
</div>
<div class="protoref">
<a href= "#func-duration-equal">
<code>
op:duration-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:duration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:duration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.5
</del>
<a href="#func-duration-equal">
<ins class="diff-chg">8.3.5
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-element-with-id"><code><ins class="diff-chg">
fn:element-with-id
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string*
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
element()*
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-element-with-id"><ins class="diff-chg">
14.5.3
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-element-with-id"><code><ins class="diff-chg">
fn:element-with-id
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string*
</ins></code>,<code><ins class="diff-chg">
$node
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
node()
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
element()*
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-element-with-id"><ins class="diff-chg">
14.5.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-empty">
<code>
fn:empty
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<a href="#func-empty">
<del class="diff-old">15.1.4
</del>
<ins class="diff-chg">14.1.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-encode-for-uri">
<code>
fn:encode-for-uri
</code>
</a>
(
<code>
$uri-part
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-encode-for-uri">
<del class="diff-old">7.4.10
</del>
<ins class="diff-chg">6.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-ends-with">
<code>
fn:ends-with
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">7.5.3
</del>
<a href="#func-ends-with">
<ins class="diff-chg">5.5.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-ends-with">
<code>
fn:ends-with
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">7.5.3
</del>
<a href="#func-ends-with">
<ins class="diff-chg">5.5.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-error">
<code>
fn:error
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
none
</code>
(§
<a href="#func-error">
<del class="diff-old">3
</del>
<ins class="diff-chg">3.1.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-error">
<code>
fn:error
</code>
</a>
(
<code>
<del class="diff-old">$error
</del>
<ins class="diff-chg">$code
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:QName
</code>
)
<code>
&#160;as&#160;
</code>
<code>
none
</code>
(§
<a href="#func-error">
<del class="diff-old">3
</del>
<ins class="diff-chg">3.1.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-error">
<code>
fn:error
</code>
</a>
(
<code>
<del class="diff-old">$error
</del>
<ins class="diff-chg">$code
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:QName?
</code>,
<code>
$description
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
none
</code>
(§
<del class="diff-old">3
</del>
<a href="#func-error">
<ins class="diff-chg">3.1.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-error">
<code>
fn:error
</code>
</a>
(
<code>
<del class="diff-old">$error
</del>
<ins class="diff-chg">$code
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:QName?
</code>,
<code>
$description
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$error-object
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
none
</code>
(§
<del class="diff-old">3
</del>
<a href="#func-error">
<ins class="diff-chg">3.1.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-escape-html-uri">
<code>
fn:escape-html-uri
</code>
</a>
(
<code>
$uri
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.4.12
</del>
<a href="#func-escape-html-uri">
<ins class="diff-chg">6.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-exactly-one">
<code>
fn:exactly-one
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()
</code>
(§
<a href="#func-exactly-one">
<del class="diff-old">15.2.3
</del>
<ins class="diff-chg">14.2.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-except">
<code>
op:except
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
(§
<del class="diff-old">15.3.4
</del>
<a href="#func-except">
<ins class="diff-chg">14.3.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-exists">
<code>
fn:exists
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<a href="#func-exists">
<del class="diff-old">15.1.5
</del>
<ins class="diff-chg">14.1.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-false">
<code>
fn:false
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<a href="#func-false">
<del class="diff-old">9.1.2
</del>
<ins class="diff-chg">7.1.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-floor">
<code>
fn:floor
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
(§
<a href="#func-floor">
<del class="diff-old">6.4.3
</del>
<ins class="diff-chg">4.4.3
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-format-date"><code><ins class="diff-chg">
fn:format-date
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$value
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:date?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code>,<code><ins class="diff-chg">
$language
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code>,<code><ins class="diff-chg">
$calendar
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code>,<code><ins class="diff-chg">
$country
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-format-date"><ins class="diff-chg">
9.8.2
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-format-date"><code><ins class="diff-chg">
fn:format-date
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$value
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:date?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-format-date"><ins class="diff-chg">
9.8.2
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-format-dateTime"><code><ins class="diff-chg">
fn:format-dateTime
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$value
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:dateTime?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code>,<code><ins class="diff-chg">
$language
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code>,<code><ins class="diff-chg">
$calendar
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code>,<code><ins class="diff-chg">
$country
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-format-dateTime"><ins class="diff-chg">
9.8.1
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-format-dateTime"><code><ins class="diff-chg">
fn:format-dateTime
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$value
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:dateTime?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-format-dateTime"><ins class="diff-chg">
9.8.1
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-format-integer"><code><ins class="diff-chg">
fn:format-integer
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$value
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:integer?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-format-integer"><ins class="diff-chg">
4.5.1
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-format-integer"><code><ins class="diff-chg">
fn:format-integer
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$value
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:integer?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code>,<code><ins class="diff-chg">
$language
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:language
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-format-integer"><ins class="diff-chg">
4.5.1
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-format-number"><code><ins class="diff-chg">
fn:format-number
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$value
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
numeric?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-format-number"><ins class="diff-chg">
4.6.2
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-format-number"><code><ins class="diff-chg">
fn:format-number
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$value
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
numeric?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code>,<code><ins class="diff-chg">
$decimal-format-name
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-format-number"><ins class="diff-chg">
4.6.2
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-format-time"><code><ins class="diff-chg">
fn:format-time
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$value
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:time?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code>,<code><ins class="diff-chg">
$language
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code>,<code><ins class="diff-chg">
$calendar
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code>,<code><ins class="diff-chg">
$country
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-format-time"><ins class="diff-chg">
9.8.3
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-format-time"><code><ins class="diff-chg">
fn:format-time
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$value
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:time?
</ins></code>,<code><ins class="diff-chg">
$picture
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-format-time"><ins class="diff-chg">
9.8.3
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-function-arity"><code><ins class="diff-chg">
fn:function-arity
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$func
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
function()
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-function-arity"><ins class="diff-chg">
16.2
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-function-name"><code><ins class="diff-chg">
fn:function-name
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$func
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
function()
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:QName?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-function-name"><ins class="diff-chg">
16.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-gDay-equal">
<code>
op:gDay-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:gDay
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:gDay
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.19
</del>
<a href="#func-gDay-equal">
<ins class="diff-chg">9.4.14
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-gMonth-equal">
<code>
op:gMonth-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:gMonth
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:gMonth
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.18
</del>
<a href="#func-gMonth-equal">
<ins class="diff-chg">9.4.13
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-gMonthDay-equal">
<code>
op:gMonthDay-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:gMonthDay
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:gMonthDay
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.17
</del>
<a href="#func-gMonthDay-equal">
<ins class="diff-chg">9.4.12
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-gYear-equal">
<code>
op:gYear-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:gYear
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:gYear
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.16
</del>
<a href="#func-gYear-equal">
<ins class="diff-chg">9.4.11
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-gYearMonth-equal">
<code>
op:gYearMonth-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:gYearMonth
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:gYearMonth
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.15
</del>
<a href="#func-gYearMonth-equal">
<ins class="diff-chg">9.4.10
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-generate-id"><code><ins class="diff-chg">
fn:generate-id
</ins></code></a><ins class="diff-chg">
()
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-generate-id"><ins class="diff-chg">
14.5.9
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-generate-id"><code><ins class="diff-chg">
fn:generate-id
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
node()?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-generate-id"><ins class="diff-chg">
14.5.9
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-hexBinary-equal">
<code>
op:hexBinary-equal
</code>
</a>
(
<code>
$value1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:hexBinary
</code>,
<code>
$value2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:hexBinary
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">12.1.1
</del>
<a href="#func-hexBinary-equal">
<ins class="diff-chg">11.1.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-hours-from-dateTime">
<code>
fn:hours-from-dateTime
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.10
</del>
<a href="#func-hours-from-dateTime">
<ins class="diff-chg">9.5.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-hours-from-duration">
<code>
fn:hours-from-duration
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:duration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.4
</del>
<a href="#func-hours-from-duration">
<ins class="diff-chg">8.4.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-hours-from-time">
<code>
fn:hours-from-time
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.18
</del>
<a href="#func-hours-from-time">
<ins class="diff-chg">9.5.12
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-id">
<code>
fn:id
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
element()*
</code>
(§
<a href="#func-id">
<del class="diff-old">15.5.2
</del>
<ins class="diff-chg">14.5.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-id">
<code>
fn:id
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>,
<code>
$node
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
element()*
</code>
(§
<del class="diff-old">15.5.2
</del>
<a href="#func-id">
<ins class="diff-chg">14.5.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-idref">
<code>
fn:idref
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
(§
<a href="#func-idref">
<del class="diff-old">15.5.3
</del>
<ins class="diff-chg">14.5.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-idref">
<code>
fn:idref
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>,
<code>
$node
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
(§
<del class="diff-old">15.5.3
</del>
<a href="#func-idref">
<ins class="diff-chg">14.5.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-implicit-timezone">
<code>
fn:implicit-timezone
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
(§
<del class="diff-old">16.6
</del>
<a href="#func-implicit-timezone">
<ins class="diff-chg">15.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-in-scope-prefixes">
<code>
fn:in-scope-prefixes
</code>
</a>
(
<code>
$element
</code>
<code>
&#160;as&#160;
</code>
<code>
element()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
(§
<del class="diff-old">11.2.6
</del>
<a href="#func-in-scope-prefixes">
<ins class="diff-chg">10.2.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-index-of">
<code>
fn:index-of
</code>
</a>
(
<code>
<del class="diff-old">$seqParam
</del>
<ins class="diff-chg">$seqArg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
<del class="diff-old">$srchParam
</del>
<ins class="diff-chg">$searchArg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer*
</code>
(§
<del class="diff-old">15.1.3
</del>
<a href="#func-index-of">
<ins class="diff-chg">14.1.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-index-of">
<code>
fn:index-of
</code>
</a>
(
<code>
<del class="diff-old">$seqParam
</del>
<ins class="diff-chg">$seqArg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
<del class="diff-old">$srchParam
</del>
<ins class="diff-chg">$searchArg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer*
</code>
(§
<del class="diff-old">15.1.3
</del>
<a href="#func-index-of">
<ins class="diff-chg">14.1.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-insert-before">
<code>
fn:insert-before
</code>
</a>
(
<code>
$target
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$position
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>,
<code>
$inserts
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
(§
<del class="diff-old">15.1.7
</del>
<a href="#func-insert-before">
<ins class="diff-chg">14.1.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-intersect">
<code>
op:intersect
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
(§
<del class="diff-old">15.3.3
</del>
<a href="#func-intersect">
<ins class="diff-chg">14.3.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-iri-to-uri">
<code>
fn:iri-to-uri
</code>
</a>
(
<code>
$iri
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-iri-to-uri">
<del class="diff-old">7.4.11
</del>
<ins class="diff-chg">6.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-is-same-node">
<code>
op:is-same-node
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">14.6
</del>
<a href="#func-is-same-node">
<ins class="diff-chg">13.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-lang">
<code>
fn:lang
</code>
</a>
(
<code>
$testlang
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<a href="#func-lang">
<del class="diff-old">14.5
</del>
<ins class="diff-chg">13.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-lang">
<code>
fn:lang
</code>
</a>
(
<code>
$testlang
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$node
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">14.5
</del>
<a href="#func-lang">
<ins class="diff-chg">13.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-last">
<code>
fn:last
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
(§
<a href="#func-last">
<del class="diff-old">16.2
</del>
<ins class="diff-chg">15.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-local-name">
<code>
fn:local-name
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-local-name">
<del class="diff-old">14.2
</del>
<ins class="diff-chg">13.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-local-name">
<code>
fn:local-name
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
node()?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-local-name">
<del class="diff-old">14.2
</del>
<ins class="diff-chg">13.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-local-name-from-QName">
<code>
fn:local-name-from-QName
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:QName?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:NCName?
</code>
(§
<del class="diff-old">11.2.3
</del>
<a href="#func-local-name-from-QName">
<ins class="diff-chg">10.2.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-lower-case">
<code>
fn:lower-case
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-lower-case">
<del class="diff-old">7.4.8
</del>
<ins class="diff-chg">5.4.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-matches">
<code>
fn:matches
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">7.6.2
</del>
<a href="#func-matches">
<ins class="diff-chg">5.6.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-matches">
<code>
fn:matches
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$flags
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">7.6.2
</del>
<a href="#func-matches">
<ins class="diff-chg">5.6.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-max">
<code>
fn:max
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
(§
<a href="#func-max">
<del class="diff-old">15.4.3
</del>
<ins class="diff-chg">14.4.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-max">
<code>
fn:max
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
(§
<del class="diff-old">15.4.3
</del>
<a href="#func-max">
<ins class="diff-chg">14.4.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-min">
<code>
fn:min
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
(§
<a href="#func-min">
<del class="diff-old">15.4.4
</del>
<ins class="diff-chg">14.4.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-min">
<code>
fn:min
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
(§
<del class="diff-old">15.4.4
</del>
<a href="#func-min">
<ins class="diff-chg">14.4.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-minutes-from-dateTime">
<code>
fn:minutes-from-dateTime
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.11
</del>
<a href="#func-minutes-from-dateTime">
<ins class="diff-chg">9.5.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-minutes-from-duration">
<code>
fn:minutes-from-duration
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:duration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.5
</del>
<a href="#func-minutes-from-duration">
<ins class="diff-chg">8.4.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-minutes-from-time">
<code>
fn:minutes-from-time
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.19
</del>
<a href="#func-minutes-from-time">
<ins class="diff-chg">9.5.13
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-month-from-date">
<code>
fn:month-from-date
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.15
</del>
<a href="#func-month-from-date">
<ins class="diff-chg">9.5.9
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-month-from-dateTime">
<code>
fn:month-from-dateTime
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.8
</del>
<a href="#func-month-from-dateTime">
<ins class="diff-chg">9.5.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-months-from-duration">
<code>
fn:months-from-duration
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:duration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.2
</del>
<a href="#func-months-from-duration">
<ins class="diff-chg">8.4.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-multiply-dayTimeDuration">
<code>
op:multiply-dayTimeDuration
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
(§
<del class="diff-old">10.6.8
</del>
<a href="#func-multiply-dayTimeDuration">
<ins class="diff-chg">8.5.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-multiply-yearMonthDuration">
<code>
op:multiply-yearMonthDuration
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
(§
<del class="diff-old">10.6.3
</del>
<a href="#func-multiply-yearMonthDuration">
<ins class="diff-chg">8.5.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-name">
<code>
fn:name
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-name">
<del class="diff-old">14.1
</del>
<ins class="diff-chg">13.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-name">
<code>
fn:name
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
node()?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-name">
<del class="diff-old">14.1
</del>
<ins class="diff-chg">13.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-namespace-uri">
<code>
fn:namespace-uri
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:anyURI
</code>
(§
<a href="#func-namespace-uri">
<del class="diff-old">14.3
</del>
<ins class="diff-chg">13.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-namespace-uri">
<code>
fn:namespace-uri
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
node()?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyURI
</code>
(§
<a href="#func-namespace-uri">
<del class="diff-old">14.3
</del>
<ins class="diff-chg">13.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-namespace-uri-for-prefix">
<code>
fn:namespace-uri-for-prefix
</code>
</a>
(
<code>
$prefix
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$element
</code>
<code>
&#160;as&#160;
</code>
<code>
element()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyURI?
</code>
(§
<del class="diff-old">11.2.5
</del>
<a href="#func-namespace-uri-for-prefix">
<ins class="diff-chg">10.2.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-namespace-uri-from-QName">
<code>
fn:namespace-uri-from-QName
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:QName?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyURI?
</code>
(§
<del class="diff-old">11.2.4
</del>
<a href="#func-namespace-uri-from-QName">
<ins class="diff-chg">10.2.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-nilled">
<code>
fn:nilled
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
node()?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean?
</code>
(§
<a href="#func-nilled">
2.2
</a>
)
</div>
<div class="protoref">
<a href= "#func-node-after">
<code>
op:node-after
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">14.8
</del>
<a href="#func-node-after">
<ins class="diff-chg">13.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-node-before">
<code>
op:node-before
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">14.7
</del>
<a href="#func-node-before">
<ins class="diff-chg">13.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-node-name">
<code>
fn:node-name
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
node()?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:QName?
</code>
(§
<a href="#func-node-name">
2.1
</a>
)
</div>
<div class="protoref">
<a href= "#func-normalize-space">
<code>
fn:normalize-space
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-normalize-space">
<del class="diff-old">7.4.5
</del>
<ins class="diff-chg">5.4.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-normalize-space">
<code>
fn:normalize-space
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-normalize-space">
<del class="diff-old">7.4.5
</del>
<ins class="diff-chg">5.4.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-normalize-unicode">
<code>
fn:normalize-unicode
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.4.6
</del>
<a href="#func-normalize-unicode">
<ins class="diff-chg">5.4.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-normalize-unicode">
<code>
fn:normalize-unicode
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$normalizationForm
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.4.6
</del>
<a href="#func-normalize-unicode">
<ins class="diff-chg">5.4.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-not">
<code>
fn:not
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<a href="#func-not">
<del class="diff-old">9.3.1
)
op:NOTATION-equal
(
$arg1
&#160;as&#160;
xs:NOTATION
,
$arg2
&#160;as&#160;
xs:NOTATION
)
&#160;as&#160;
xs:boolean
(§
13.1.1
</del>
<ins class="diff-chg">7.3.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-number">
<code>
fn:number
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
(§
<a href="#func-number">
<del class="diff-old">14.4
</del>
<ins class="diff-chg">13.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-number">
<code>
fn:number
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
(§
<a href="#func-number">
<del class="diff-old">14.4
</del>
<ins class="diff-chg">13.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-add">
<code>
op:numeric-add
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
(§
<del class="diff-old">6.2.1
</del>
<a href="#func-numeric-add">
<ins class="diff-chg">4.2.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-divide">
<code>
op:numeric-divide
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
(§
<del class="diff-old">6.2.4
</del>
<a href="#func-numeric-divide">
<ins class="diff-chg">4.2.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-equal">
<code>
op:numeric-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">6.3.1
</del>
<a href="#func-numeric-equal">
<ins class="diff-chg">4.3.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-greater-than">
<code>
op:numeric-greater-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">6.3.3
</del>
<a href="#func-numeric-greater-than">
<ins class="diff-chg">4.3.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-integer-divide">
<code>
op:numeric-integer-divide
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
(§
<del class="diff-old">6.2.5
</del>
<a href="#func-numeric-integer-divide">
<ins class="diff-chg">4.2.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-less-than">
<code>
op:numeric-less-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">6.3.2
</del>
<a href="#func-numeric-less-than">
<ins class="diff-chg">4.3.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-mod">
<code>
op:numeric-mod
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
(§
<del class="diff-old">6.2.6
</del>
<a href="#func-numeric-mod">
<ins class="diff-chg">4.2.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-multiply">
<code>
op:numeric-multiply
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
(§
<del class="diff-old">6.2.3
</del>
<a href="#func-numeric-multiply">
<ins class="diff-chg">4.2.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-subtract">
<code>
op:numeric-subtract
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
(§
<del class="diff-old">6.2.2
</del>
<a href="#func-numeric-subtract">
<ins class="diff-chg">4.2.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-unary-minus">
<code>
op:numeric-unary-minus
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
(§
<del class="diff-old">6.2.8
</del>
<a href="#func-numeric-unary-minus">
<ins class="diff-chg">4.2.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-numeric-unary-plus">
<code>
op:numeric-unary-plus
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric
</code>
(§
<del class="diff-old">6.2.7
</del>
<a href="#func-numeric-unary-plus">
<ins class="diff-chg">4.2.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-one-or-more">
<code>
fn:one-or-more
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()+
</code>
(§
<a href="#func-one-or-more">
<del class="diff-old">15.2.2
</del>
<ins class="diff-chg">14.2.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-parse">
<code>
<del class="diff-old">fn:position
</del>
<ins class="diff-chg">fn:parse
</ins>
</code>
</a>
<del class="diff-old">()
</del>
<ins class="diff-chg">(
</ins><code><ins class="diff-chg">
$arg
</ins></code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:integer
</del>
<ins class="diff-chg">xs:string
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
document-node(element(*,
xs:untyped))
</ins>
</code>
(§
<del class="diff-old">16.1
</del>
<a href="#func-parse">
<ins class="diff-chg">14.5.10
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-parse">
<code>
<del class="diff-old">fn:prefix-from-QName
</del>
<ins class="diff-chg">fn:parse
</ins>
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:QName?
</del>
<ins class="diff-chg">xs:string
</ins></code>,<code><ins class="diff-chg">
$baseURI
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:NCName?
</del>
<ins class="diff-chg">document-node(element(*,
xs:untyped))
</ins>
</code>
(§
<del class="diff-old">11.2.2
</del>
<a href="#func-parse">
<ins class="diff-chg">14.5.10
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-partial-apply">
<code>
<del class="diff-old">fn:QName
</del>
<ins class="diff-chg">fn:partial-apply
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$paramURI
</del>
<ins class="diff-chg">$func
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:string?
</del>
<ins class="diff-chg">function()
</ins>
</code>,
<code>
<del class="diff-old">$paramQName
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:string
</del>
<ins class="diff-chg">item()*
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:QName
</del>
<ins class="diff-chg">function()
</ins>
</code>
(§
<del class="diff-old">11.1.2
</del>
<a href="#func-partial-apply">
<ins class="diff-chg">16.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-partial-apply">
<code>
<del class="diff-old">op:QName-equal
</del>
<ins class="diff-chg">fn:partial-apply
</ins>
</code>
</a>
(
<code>
<del class="diff-old">$arg1
</del>
<ins class="diff-chg">$func
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:QName
</del>
<ins class="diff-chg">function()
</ins>
</code>,
<code>
<del class="diff-old">$arg2
</del>
<ins class="diff-chg">$arg
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:QName
</del>
<ins class="diff-chg">item()*
</ins></code>,<code><ins class="diff-chg">
$argNum
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:integer
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:boolean
</del>
<ins class="diff-chg">function()
</ins>
</code>
(§
<del class="diff-old">11.2.1
</del>
<a href="#func-partial-apply">
<ins class="diff-chg">16.3
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-pi"><code><ins class="diff-chg">
fn:pi
</ins></code></a><ins class="diff-chg">
()
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-pi"><ins class="diff-chg">
4.7.1
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-position"><code><ins class="diff-chg">
fn:position
</ins></code></a><ins class="diff-chg">
()
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-position"><ins class="diff-chg">
15.1
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-prefix-from-QName"><code><ins class="diff-chg">
fn:prefix-from-QName
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:QName?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:NCName?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-prefix-from-QName"><ins class="diff-chg">
10.2.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-remove">
<code>
fn:remove
</code>
</a>
(
<code>
$target
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$position
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
(§
<del class="diff-old">15.1.8
</del>
<a href="#func-remove">
<ins class="diff-chg">14.1.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-replace">
<code>
fn:replace
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$replacement
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.6.3
</del>
<a href="#func-replace">
<ins class="diff-chg">5.6.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-replace">
<code>
fn:replace
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$replacement
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$flags
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.6.3
</del>
<a href="#func-replace">
<ins class="diff-chg">5.6.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-resolve-QName">
<code>
fn:resolve-QName
</code>
</a>
(
<code>
$qname
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$element
</code>
<code>
&#160;as&#160;
</code>
<code>
element()
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:QName?
</code>
(§
<del class="diff-old">11.1.1
</del>
<a href="#func-resolve-QName">
<ins class="diff-chg">10.1.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-resolve-uri">
<code>
fn:resolve-uri
</code>
</a>
(
<code>
$relative
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyURI?
</code>
(§
<a href="#func-resolve-uri">
<del class="diff-old">8.1
</del>
<ins class="diff-chg">6.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-resolve-uri">
<code>
fn:resolve-uri
</code>
</a>
(
<code>
$relative
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$base
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyURI?
</code>
(§
<del class="diff-old">8.1
</del>
<a href="#func-resolve-uri">
<ins class="diff-chg">6.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-reverse">
<code>
fn:reverse
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
(§
<a href="#func-reverse">
<del class="diff-old">15.1.9
</del>
<ins class="diff-chg">14.1.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-root">
<code>
fn:root
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
node()
</code>
(§
<a href="#func-root">
<del class="diff-old">14.9
</del>
<ins class="diff-chg">13.9
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-root">
<code>
fn:root
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
node()?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()?
</code>
(§
<a href="#func-root">
<del class="diff-old">14.9
</del>
<ins class="diff-chg">13.9
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-round">
<code>
fn:round
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
(§
<a href="#func-round">
<del class="diff-old">6.4.4
</del>
<ins class="diff-chg">4.4.4
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-round"><code><ins class="diff-chg">
fn:round
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
numeric?
</ins></code>,<code><ins class="diff-chg">
$precision
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:integer
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
numeric?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-round"><ins class="diff-chg">
4.4.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-round-half-to-even">
<code>
fn:round-half-to-even
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
(§
<del class="diff-old">6.4.5
</del>
<a href="#func-round-half-to-even">
<ins class="diff-chg">4.4.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-round-half-to-even">
<code>
fn:round-half-to-even
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>,
<code>
$precision
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
)
<code>
&#160;as&#160;
</code>
<code>
numeric?
</code>
(§
<del class="diff-old">6.4.5
</del>
<a href="#func-round-half-to-even">
<ins class="diff-chg">4.4.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-seconds-from-dateTime">
<code>
fn:seconds-from-dateTime
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:decimal?
</code>
(§
<del class="diff-old">10.5.12
</del>
<a href="#func-seconds-from-dateTime">
<ins class="diff-chg">9.5.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-seconds-from-duration">
<code>
fn:seconds-from-duration
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:duration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:decimal?
</code>
(§
<del class="diff-old">10.5.6
</del>
<a href="#func-seconds-from-duration">
<ins class="diff-chg">8.4.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-seconds-from-time">
<code>
fn:seconds-from-time
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:decimal?
</code>
(§
<del class="diff-old">10.5.20
</del>
<a href="#func-seconds-from-time">
<ins class="diff-chg">9.5.14
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-serialize"><code><ins class="diff-chg">
fn:serialize
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
node()
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-serialize"><ins class="diff-chg">
14.5.11
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-serialize"><code><ins class="diff-chg">
fn:serialize
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
node()
</ins></code>,<code><ins class="diff-chg">
$params
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
node()*
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-serialize"><ins class="diff-chg">
14.5.11
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-sin"><code><ins class="diff-chg">
fn:sin
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-sin"><ins class="diff-chg">
4.7.3
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-sqrt"><code><ins class="diff-chg">
fn:sqrt
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-sqrt"><ins class="diff-chg">
4.7.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-starts-with">
<code>
fn:starts-with
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">7.5.2
</del>
<a href="#func-starts-with">
<ins class="diff-chg">5.5.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-starts-with">
<code>
fn:starts-with
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">7.5.2
</del>
<a href="#func-starts-with">
<ins class="diff-chg">5.5.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-static-base-uri">
<code>
fn:static-base-uri
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:anyURI?
</code>
(§
<a href="#func-static-base-uri">
<del class="diff-old">16.8
</del>
<ins class="diff-chg">15.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-string">
<code>
fn:string
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-string">
2.3
</a>
)
</div>
<div class="protoref">
<a href= "#func-string">
<code>
fn:string
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-string">
2.3
</a>
)
</div>
<div class="protoref">
<a href= "#func-string-join">
<code>
fn:string-join
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
<ins class="diff-new">)
</ins><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string
</ins></code><ins class="diff-new">
(§
</ins><a href="#func-string-join"><ins class="diff-new">
5.4.2
</ins></a><ins class="diff-new">
)
</ins></div><div class="protoref"><a href= "#func-string-join"><code><ins class="diff-new">
fn:string-join
</ins></code></a><ins class="diff-new">
(
</ins><code><ins class="diff-new">
$arg1
</ins></code><code><ins class="diff-new">
&#160;as&#160;
</ins></code><code><ins class="diff-new">
xs:string*
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.4.2
</del>
<a href="#func-string-join">
<ins class="diff-chg">5.4.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-string-length">
<code>
fn:string-length
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
(§
<a href="#func-string-length">
<del class="diff-old">7.4.4
</del>
<ins class="diff-chg">5.4.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-string-length">
<code>
fn:string-length
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
(§
<a href="#func-string-length">
<del class="diff-old">7.4.4
</del>
<ins class="diff-chg">5.4.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-string-to-codepoints">
<code>
fn:string-to-codepoints
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer*
</code>
(§
<del class="diff-old">7.2.2
</del>
<a href="#func-string-to-codepoints">
<ins class="diff-chg">5.2.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subsequence">
<code>
fn:subsequence
</code>
</a>
(
<code>
$sourceSeq
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$startingLoc
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
(§
<del class="diff-old">15.1.10
</del>
<a href="#func-subsequence">
<ins class="diff-chg">14.1.9
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subsequence">
<code>
fn:subsequence
</code>
</a>
(
<code>
$sourceSeq
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$startingLoc
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>,
<code>
$length
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
(§
<del class="diff-old">15.1.10
</del>
<a href="#func-subsequence">
<ins class="diff-chg">14.1.9
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-substring">
<code>
fn:substring
</code>
</a>
(
<code>
$sourceString
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
<del class="diff-old">$startingLoc
</del>
<ins class="diff-chg">$start
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.4.3
</del>
<a href="#func-substring">
<ins class="diff-chg">5.4.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-substring">
<code>
fn:substring
</code>
</a>
(
<code>
$sourceString
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
<del class="diff-old">$startingLoc
</del>
<ins class="diff-chg">$start
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>,
<code>
$length
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:double
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.4.3
</del>
<a href="#func-substring">
<ins class="diff-chg">5.4.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-substring-after">
<code>
fn:substring-after
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.5.5
</del>
<a href="#func-substring-after">
<ins class="diff-chg">5.5.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-substring-after">
<code>
fn:substring-after
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.5.5
</del>
<a href="#func-substring-after">
<ins class="diff-chg">5.5.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-substring-before">
<code>
fn:substring-before
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.5.4
</del>
<a href="#func-substring-before">
<ins class="diff-chg">5.5.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-substring-before">
<code>
fn:substring-before
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$collation
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.5.4
</del>
<a href="#func-substring-before">
<ins class="diff-chg">5.5.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subtract-dateTimes">
<code>
<del class="diff-old">op:subtract-dates
</del>
<ins class="diff-chg">op:subtract-dateTimes
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:date
</del>
<ins class="diff-chg">xs:dateTime
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration?
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
(§
<del class="diff-old">10.8.2
</del>
<a href="#func-subtract-dateTimes">
<ins class="diff-chg">9.7.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subtract-dates">
<code>
<del class="diff-old">op:subtract-dateTimes
</del>
<ins class="diff-chg">op:subtract-dates
</ins>
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:date
</ins>
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dateTime
</del>
<ins class="diff-chg">xs:date
</ins>
</code>
)
<code>
&#160;as&#160;
</code>
<code>
<del class="diff-old">xs:dayTimeDuration?
</del>
<ins class="diff-chg">xs:dayTimeDuration
</ins>
</code>
(§
<del class="diff-old">10.8.1
</del>
<a href="#func-subtract-dates">
<ins class="diff-chg">9.7.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subtract-dayTimeDuration-from-date">
<code>
op:subtract-dayTimeDuration-from-date
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
(§
<a href= "#func-subtract-dayTimeDuration-from-date">
<del class="diff-old">10.8.11
</del>
<ins class="diff-chg">9.7.11
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subtract-dayTimeDuration-from-dateTime">
<code>
op:subtract-dayTimeDuration-from-dateTime
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
(§
<a href= "#func-subtract-dayTimeDuration-from-dateTime">
<del class="diff-old">10.8.7
</del>
<ins class="diff-chg">9.7.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subtract-dayTimeDuration-from-time">
<code>
op:subtract-dayTimeDuration-from-time
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>
(§
<a href= "#func-subtract-dayTimeDuration-from-time">
<del class="diff-old">10.8.13
</del>
<ins class="diff-chg">9.7.13
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subtract-dayTimeDurations">
<code>
op:subtract-dayTimeDurations
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
(§
<del class="diff-old">10.6.7
</del>
<a href="#func-subtract-dayTimeDurations">
<ins class="diff-chg">8.5.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subtract-times">
<code>
op:subtract-times
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration
</code>
(§
<del class="diff-old">10.8.3
</del>
<a href="#func-subtract-times">
<ins class="diff-chg">9.7.3
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subtract-yearMonthDuration-from-date">
<code>
op:subtract-yearMonthDuration-from-date
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:date
</code>
(§
<a href= "#func-subtract-yearMonthDuration-from-date">
<del class="diff-old">10.8.10
</del>
<ins class="diff-chg">9.7.10
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subtract-yearMonthDuration-from-dateTime">
<code>
op:subtract-yearMonthDuration-from-dateTime
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime
</code>
(§
<a href= "#func-subtract-yearMonthDuration-from-dateTime">
<del class="diff-old">10.8.6
</del>
<ins class="diff-chg">9.7.6
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-subtract-yearMonthDurations">
<code>
op:subtract-yearMonthDurations
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
(§
<del class="diff-old">10.6.2
</del>
<a href="#func-subtract-yearMonthDurations">
<ins class="diff-chg">8.5.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-sum">
<code>
fn:sum
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType
</code>
(§
<a href="#func-sum">
<del class="diff-old">15.4.5
</del>
<ins class="diff-chg">14.4.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-sum">
<code>
fn:sum
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType*
</code>,
<code>
$zero
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:anyAtomicType?
</code>
(§
<del class="diff-old">15.4.5
</del>
<a href="#func-sum">
<ins class="diff-chg">14.4.5
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-tan"><code><ins class="diff-chg">
fn:tan
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$
</ins></code><span style= "font-family:Times; font-style:italic"><ins class="diff-chg">
θ
</ins></span><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:double?
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-tan"><ins class="diff-chg">
4.7.5
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-time-equal">
<code>
op:time-equal
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.12
</del>
<a href="#func-time-equal">
<ins class="diff-chg">9.4.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-time-greater-than">
<code>
op:time-greater-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.14
</del>
<a href="#func-time-greater-than">
<ins class="diff-chg">9.4.9
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-time-less-than">
<code>
op:time-less-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.13
</del>
<a href="#func-time-less-than">
<ins class="diff-chg">9.4.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-timezone-from-date">
<code>
fn:timezone-from-date
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration?
</code>
(§
<del class="diff-old">10.5.17
</del>
<a href="#func-timezone-from-date">
<ins class="diff-chg">9.5.11
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-timezone-from-dateTime">
<code>
fn:timezone-from-dateTime
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration?
</code>
(§
<del class="diff-old">10.5.13
</del>
<a href="#func-timezone-from-dateTime">
<ins class="diff-chg">9.5.7
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-timezone-from-time">
<code>
fn:timezone-from-time
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:time?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:dayTimeDuration?
</code>
(§
<del class="diff-old">10.5.21
</del>
<a href="#func-timezone-from-time">
<ins class="diff-chg">9.5.15
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-to">
<code>
op:to
</code>
</a>
(
<code>
$firstval
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>,
<code>
$lastval
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:integer
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer*
</code>
(§
<del class="diff-old">15.5.1
</del>
<a href="#func-to">
<ins class="diff-chg">14.5.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-tokenize">
<code>
fn:tokenize
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
(§
<del class="diff-old">7.6.4
</del>
<a href="#func-tokenize">
<ins class="diff-chg">5.6.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-tokenize">
<code>
fn:tokenize
</code>
</a>
(
<code>
$input
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$pattern
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$flags
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string*
</code>
(§
<del class="diff-old">7.6.4
</del>
<a href="#func-tokenize">
<ins class="diff-chg">5.6.4
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-trace">
<code>
fn:trace
</code>
</a>
(
<code>
$value
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>,
<code>
$label
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
(§
<del class="diff-old">4
</del>
<a href="#func-trace">
<ins class="diff-chg">3.2.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-translate">
<code>
fn:translate
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>,
<code>
$mapString
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>,
<code>
$transString
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<del class="diff-old">7.4.9
</del>
<a href="#func-translate">
<ins class="diff-chg">5.4.9
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-true">
<code>
fn:true
</code>
</a>
()
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<a href="#func-true">
<del class="diff-old">9.1.1
</del>
<ins class="diff-chg">7.1.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-union">
<code>
op:union
</code>
</a>
(
<code>
<del class="diff-old">$parameter1
</del>
<ins class="diff-chg">$arg1
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>,
<code>
<del class="diff-old">$parameter2
</del>
<ins class="diff-chg">$arg2
</ins>
</code>
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
node()*
</code>
(§
<del class="diff-old">15.3.2
</del>
<a href="#func-union">
<ins class="diff-chg">14.3.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-unordered">
<code>
fn:unordered
</code>
</a>
(
<code>
$sourceSeq
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
(§
<a href="#func-unordered">
<del class="diff-old">15.1.11
</del>
<ins class="diff-chg">14.1.10
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-upper-case">
<code>
fn:upper-case
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:string?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:string
</code>
(§
<a href="#func-upper-case">
<del class="diff-old">7.4.7
</del>
<ins class="diff-chg">5.4.7
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-uri-collection"><code><ins class="diff-chg">
fn:uri-collection
</ins></code></a><ins class="diff-chg">
()
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:anyURI*
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-uri-collection"><ins class="diff-chg">
14.5.8
</ins></a><ins class="diff-chg">
)
</ins></div><div class="protoref"><a href= "#func-uri-collection"><code><ins class="diff-chg">
fn:uri-collection
</ins></code></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
$arg
</ins></code><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:string?
</ins></code><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
&#160;as&#160;
</ins></code><code><ins class="diff-chg">
xs:anyURI*
</ins></code><ins class="diff-chg">
(§
</ins><a href="#func-uri-collection"><ins class="diff-chg">
14.5.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-year-from-date">
<code>
fn:year-from-date
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:date?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.14
</del>
<a href="#func-year-from-date">
<ins class="diff-chg">9.5.8
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-year-from-dateTime">
<code>
fn:year-from-dateTime
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:dateTime?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.7
</del>
<a href="#func-year-from-dateTime">
<ins class="diff-chg">9.5.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-yearMonthDuration-greater-than">
<code>
op:yearMonthDuration-greater-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.2
</del>
<a href="#func-yearMonthDuration-greater-than">
<ins class="diff-chg">8.3.2
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-yearMonthDuration-less-than">
<code>
op:yearMonthDuration-less-than
</code>
</a>
(
<code>
$arg1
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>,
<code>
$arg2
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:yearMonthDuration
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:boolean
</code>
(§
<del class="diff-old">10.4.1
</del>
<a href="#func-yearMonthDuration-less-than">
<ins class="diff-chg">8.3.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-years-from-duration">
<code>
fn:years-from-duration
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
xs:duration?
</code>
)
<code>
&#160;as&#160;
</code>
<code>
xs:integer?
</code>
(§
<del class="diff-old">10.5.1
</del>
<a href="#func-years-from-duration">
<ins class="diff-chg">8.4.1
</ins>
</a>
)
</div>
<div class="protoref">
<a href= "#func-zero-or-one">
<code>
fn:zero-or-one
</code>
</a>
(
<code>
$arg
</code>
<code>
&#160;as&#160;
</code>
<code>
item()*
</code>
)
<code>
&#160;as&#160;
</code>
<code>
item()?
</code>
(§
<a href="#func-zero-or-one">
<del class="diff-old">15.2.1
</del>
<ins class="diff-chg">14.2.1
</ins>
</a>
)
</div>
</div>
</div>
</div>
</body>
</html>
