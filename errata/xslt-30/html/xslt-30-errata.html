<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!--Created using SAXON EE 9.9.1.1--><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Draft Errata for XSL Transformations (XSLT) Version 3.0</title><style type="text/css">
/* from xsl:query.xsl (C) */          
code           { font-family: monospace; }

div.constraint,
div.issue,
div.note,
div.notice     { margin-left: 2em; }

div.issue
p.title        { margin-left: -2em; }

ol.enumar      { list-style-type: decimal; }
ol.enumla      { list-style-type: lower-alpha; }
ol.enumlr      { list-style-type: lower-roman; }
ol.enumua      { list-style-type: upper-alpha; }
ol.enumur      { list-style-type: upper-roman; }

li p           { margin-top: 0.3em;
                 margin-bottom: 0.3em; }

sup small      { font-style: italic;
                 color: #8F8F8F;
               }
    
/* from xsl:query.xsl (D) */          
div.exampleInner pre { margin-left: 1em;
                       margin-top: 0em; margin-bottom: 0em}
                       
pre.small { font-size: small }                       
div.exampleOuter {border: 4px double gray;
                  margin: 0em; padding: 0em}
div.exampleInner { background-color: #d5dee3;
                   padding: 4px; margin: 0em }
                   
div.exampleInner table { border: 0;
                         border-spacing: 0;
                       }
                   
div.exampleInner td { vertical-align: baseline;
                      padding: 0;
                    }
                   
div.exampleWrapper { margin: 4px }
div.exampleHeader { font-weight: bold;
                    margin: 4px}
                    
div.proto { border: 0;
            border-spacing: 0; 
          }

div.issue { border-bottom-color: black;
            border-bottom-style: solid;
	    border-bottom-width: 1pt;
	    margin-bottom: 20pt;
}

th.issue-toc-head { border-bottom-color: black;
                    border-bottom-style: solid;
                    border-bottom-width: 1pt;
}

      
div.schemaComp  { border: 4px double gray;
                  margin: 0em 1em;
                  padding: 0em;
                }
div.compHeader  { margin: 4px;
                  font-weight: bold;
                }
span.schemaComp { background-color: white;
                  color: #A52A2A;
                }
div.compBody    { border-top-width: 4px;
                  border-top-style: double;
                  border-top-color: #d3d3d3;
                  padding: 4px;
                  margin: 0em;
                }

div.exampleInner { background-color: #d5dee3;
                   color: black;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px;
		   margin-bottom: 4px;
                 }

div.issueBody    { margin-left: 0.25in;
                 }

code.function    { font-weight: bold;
                 }
code.return-type { font-style: italic;
                 }
code.return-varies { font-weight: bold;
                   font-style: italic;
                 }
code.type        { font-style: italic;
                 }
code.as          { font-style: normal;
                 }
code.arg         {
                 }
code.strikeout   { text-decoration: line-through;
                 }
code.small       { font-size: small;
                 }
p.table.footnote { font-size: 8pt;
                 }

table.casting    { font-size: x-small;
                 }
table.hierarchy  { font-size: x-small;
                 }
table.proto      {
                  
                 }

td.castY         { background-color: #7FFF7F;
                   color: black;
                   text-align: center;
                   vertical-align: middle;
                 }

td.castN         { background-color: #FF7F7F;
                   color: black;
                   text-align: center;
                   vertical-align: middle;
                 }

td.castM         { background-color: white;
                   color: black;
                   text-align: center;
                   vertical-align: middle;
                 }

td.castOther     { background-color: yellow;
                   color: black;
                   text-align: center;
                   vertical-align: middle;
                 }

span.cancast:hover { background-color: #ffa;
                   color: black;
                 }

div.protoref     { margin-left: 0.5in;
                   text-indent: -0.5in;
                 }

dd.indent        { margin-left: 2em;
                 }

p.element-syntax { border: solid thin; background-color: #ffccff
                 }

p.element-syntax-chg { border: solid thick yellow; background-color: #ffccff
                 }

div.proto        { 
    padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
		margin: 1em auto;
		border-color: #ff99ff;
		background: #ffe6ff;
		overflow: auto;
                 }


div.example-chg  { border: solid thick yellow; background-color: #40e0d0; padding: 1em
                 }
                 
div.ffheader     {  
			margin-top: .8rem;
			font-size: 140%;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: hsla(203, 20%, 40%, .7);
		}                  

span.verb        { font: small-caps 100% sans-serif
                 }

span.error       { font-size: small
                 }

span.definition  { font: small-caps 100% sans-serif
                 }

span.grayed      { color: gray
                 }
                 
table.scrap td {
	 vertical-align: baseline;
	 text-align: left;
	 padding-left: 30px;
}

table.data table.index {
 border-bottom:2px !important ;
}


/* from xsl-query.xsl (B) */    
table.small                             { 
                                          font-size: x-small; 
                                          border-collapse: collapse;
                                        }
table.small td                          { 
                                          border: 1px solid #000000;
                                          padding: 5px;
                                        }
table.small th                          { 
                                          border: 1px solid #000000;
                                          padding: 5px;
                                          text-align: center;
                                        }

table.medium                            { 
                                          font-size: smaller;
                                          border-collapse: collapse; 
                                        }
table.medium td                         { 
                                          border: 1px solid #000000;
                                          padding: 5px;
                                        }
table.medium th                         { 
                                          border: 1px solid #000000;
                                          padding: 5px;
                                          text-align: center;
                                        }
                                        
table.no-code-break code {
  white-space: nowrap;
}

table.longlastcol td {
  vertical-align: baseline;
  text-align: left;
}

a.judgment:visited, a.judgment:link     { font-family: sans-serif;
                              	          color: black; 
                              	          text-decoration: none }
a.processing:visited, a.processing:link { color: black; 
                              		        text-decoration: none }
a.env:visited, a.env:link               { color: black; 
                                          text-decoration: none }</style><link rel="stylesheet" type="text/css" href="https://www.w3.org/StyleSheets/TR/2016/base.css"></head><body><div><h1>Draft Errata for XSL Transformations (XSLT) Version 3.0</h1><h2><a name="w3c-doctype" id="w3c-doctype"></a>18 February 2019</h2><dl><dt>Latest version:</dt><dd><a href="http://www.w3.org/XML/2007/qt-errata/xslt-30-errata.html">http://www.w3.org/XML/2007/qt-errata/xslt-30-errata.html</a></dd><dt>Editor:</dt><dd>Michael Kay, Saxonica <a href="http://www.saxonica.com/">http://www.saxonica.com/</a></dd></dl><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2019 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p></div><hr><div><h2><a name="abstract" id="abstract"></a>Abstract</h2><p>This document addresses errors in the
         <a href="http://www.w3.org/TR/2017/REC-xslt-30-20170608/">XSL Transformations (XSLT) Version 3.0</a>
         Recommendation published on 8&nbsp;June&nbsp;2017. 
         It records all errors that, at the time of this document's publication,
         have solutions that have been approved by the
		 <a href="http://www.w3.org/Style/XSL/">XSL Working Group</a>. 
         For updates see the <a href="http://www.w3.org/TR/xslt-30/">latest version</a> of that document. </p><p>The errata are numbered,
         and are listed in reverse chronological order of their date of origin.
		 Each erratum is classified as
         Substantive, Editorial, or Markup. These categories are defined as follows:</p><ul><li><p><b>Substantive: </b> a change to the specification that may require
		 implementations to change and that may change the outcome of a stylesheet or query.</p></li><li><p><b>Editorial: </b> a clarification, correction of a textual error, or removal of an
		 inconsistency, where the Working Group does not believe that the intent of the specification
		 has changed. The erratum may affect implementations or user-written queries and stylesheets
		 if the previous lack of clarity in the specification resulted in a misreading.</p></li><li><p><b>Markup: </b> correction of formatting; the effect is cosmetic only.</p></li></ul><p>Each entry contains the following information: </p><ul><li><p>A description of the error. </p></li><li><p>A reference to the Bugzilla entry recording the original problem
	  report, subsequent discussion, and resolution by the Working Group.</p></li><li><p>Key dates in the process of resolving the error. </p></li><li><p>Where appropriate, one or more textual changes to be applied
	  to the published Recommendation. </p></li></ul><p>Colored boxes and shading are used to help distinguish new text from old,
	however these visual clues are not essential to an understanding of the change.
	The styling of old and new text is an approximation to its appearance in the
	published Recommendation, but is not normative. Hyperlinks are shown underlined
	in the erratum text, but the links are not live.</p><p>A number of indexes appear at the end of the document.</p><p>Since the XSL Working Group has ceased operations, these errata have been produced
    by the Editor using an informal process of consultation with interested parties, and
    they have no official standing. In cases where the changes a substantive (generally filling in gaps
    where the published specifications leave behavior unspecified, or where they contain inconsistent normative statements,
    the Editor has attempted to make minimal changes that in his opinion best reflect the original intent of the
    Working Group.</p></div><div><h2><a name="status" id="status"></a>Status of this Document</h2><p><em>This is an editor's draft. </em>
		  None of the errata reported in this document have been approved
		  by any formal process. 
		  As a consequence, they must not be considered to be normative.
		  </p><p>Those errata published before the end of 2017 were reviewed by the Working Group prior to publication.</p></div><div><h2><a name="contents" id="contents"></a>Table of Contents</h2><p>&nbsp;&nbsp;<b>Errata</b></p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E48">XT30.E48</a>&nbsp;&nbsp;
		It is not stated whether xsl:namespace-alias stylesheet-prefix="#default", in the case where there is no default namespace, affects no-namespace attributes.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E47">XT30.E47</a>&nbsp;&nbsp;
		Error XTSE3350 refers to "non-hidden accumulators"; but accumulators are never hidden.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E45">XT30.E45</a>&nbsp;&nbsp;
		In xsl:sort, it needs to be made clear that the collation, case-order, and lang attributes are ignored when data-type="number"; this is not an error.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E44">XT30.E44</a>&nbsp;&nbsp;
		In xsl:merge-source, the rules are defined by reference to xsl:source-document, but the analogy is imperfect.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E43">XT30.E43</a>&nbsp;&nbsp;
		The effect of specifying input-type-annotations="unspecified" is unspecified.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E42">XT30.E42</a>&nbsp;&nbsp;
		In xsl:merge-key, the effect of having no select attribute and no contained sequence constructor is underspecified.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E41">XT30.E41</a>&nbsp;&nbsp;
		In xsl:merge, the effect of sort-before-merge="yes" is underspecified.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E40">XT30.E40</a>&nbsp;&nbsp;
		In xsl:merge, error XTSE3195 does not consider the case where neither of the attributes for-each-source or for-each-item is present.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E39">XT30.E39</a>&nbsp;&nbsp;
		The xsl:merge instruction is under-specified in cases where merge keys evaluate to an empty sequence or to NaN.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E38">XT30.E38</a>&nbsp;&nbsp;
		The rules for handling errors in the evaluation of accumulators assume the use of initial-value or select expressions, but the same rules should apply when the accumulator is evaluated using a sequence constructor.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E37">XT30.E37</a>&nbsp;&nbsp;
		The rules for the default priority of patterns do not cover patterns of the form match="Q{uri}*.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E36">XT30.E36</a>&nbsp;&nbsp;
		It should be made more clear that in xsl:accept and xsl:expose, a NameTest with no arity cannot be used to identify functions.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E35">XT30.E35</a>&nbsp;&nbsp;
		The specification states that overriding variables must have an identical declared type; it fails to say how this applies when one of the variables has no declared type.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E34">XT30.E34</a>&nbsp;&nbsp;
		The specification should clarify whether it is permissible to have two global variables with the same name, one static and one non-static, at different import precedences.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E32">XT30.E32</a>&nbsp;&nbsp;
		The rules for compatibility of overriding functions refer incorrectly to the streamable attribute of xsl:function, rather than to the streamability attribute.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E31">XT30.E31</a>&nbsp;&nbsp;
		The streamability rules for stylesheet functions with streamability="ascent" are incorrect.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E30">XT30.E30</a>&nbsp;&nbsp;
		The stylesheet xml-to-json.xsl fails to declare the mode that it uses, which is required because the default value of declared-modes is true.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E29">XT30.E29</a>&nbsp;&nbsp;
		The rules for consistency of merge keys in xsl:merge can be misread.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E27">XT30.E27</a>&nbsp;&nbsp;
		The function map:find depends on arrays, which are only available with XPath 3.1.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E26">XT30.E26</a>&nbsp;&nbsp;
		The specification defines default values for media-type with output methods XML, HTML, etc, but not for JSON.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E24">XT30.E24</a>&nbsp;&nbsp;
		Section 5.3 should make it clear that it only defines the static and dynamic context for "ordinary" XPath expressions in a stylesheet, and that the rules for (a) static expressions (for example xsl:use-when), and (b) dynamically evaluated expressions (xsl:evaluate) are to be found elsewhere.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E23">XT30.E23</a>&nbsp;&nbsp;
		In the rules for tunnel parameters, the phrase "When a template accesses the value of a tunnel parameter by declaring it with &lt;xsl:param tunnel="yes"&gt;" uses confusing language.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E22">XT30.E22</a>&nbsp;&nbsp;
		The rules for xsl:context-item and xsl:global-context-item say that no conversion is attempted to the declared type.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E21">XT30.E21</a>&nbsp;&nbsp;
		In the context of function conversion rules, a note in section 5.2 says that "Attempting to convert the string 2003-02-29 to a date is a dynamic error rather than a type error".</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E20">XT30.E20</a>&nbsp;&nbsp;
		Section 25.4.1.2 states that the value of the [xsl:]type attribute is a QName; the rules actually permit any EQName.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E18">XT30.E18</a>&nbsp;&nbsp;
		An oddity in the rules for patterns is that doc('a.xml')/(id('abc')) is permitted, whereas doc('a.xml')/id('abc') is not.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E17">XT30.E17</a>&nbsp;&nbsp;
		Error XTDE0450 (which occurs when a function/map/array is added to the content of an element) should be a type error rather than a dynamic error, so that it can be detected and reported statically.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E16">XT30.E16</a>&nbsp;&nbsp;
		The rules for the base URI of nodes generated using xsl:copy-of are unclear.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E15">XT30.E15</a>&nbsp;&nbsp;
		It is unclear exactly what the scope of the default-validation attribute is.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E14">XT30.E14</a>&nbsp;&nbsp;
		There are inconsistencies and inaccuracies in the handling of build-tree and item-separator serialization attributes.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E13">XT30.E13</a>&nbsp;&nbsp;
		Error XTDE0555 can apply to any kind of item, not only to nodes.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E12">XT30.E12</a>&nbsp;&nbsp;
		Various minor spelling and grammatical mistakes.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E11">XT30.E11</a>&nbsp;&nbsp;
		The (non-normative) Relax-NG Schema for XSLT 3.0 stylesheets permits the attribute xsl:merge-source/@for-each-stream.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E10">XT30.E10</a>&nbsp;&nbsp;
		There are a number of errors in the (non-normative) XSD Schema for XSLT 3.0 stylesheets.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E9">XT30.E9</a>&nbsp;&nbsp;
		The reasoning explaining an example of streamability uses obsolete concepts.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E8">XT30.E8</a>&nbsp;&nbsp;
		The rule stating that the initial named template must have public visibility could be misinterpreted.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E7">XT30.E7</a>&nbsp;&nbsp;
		The rule that disallows reference to the global context item from within a library package uses unclear language.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E6">XT30.E6</a>&nbsp;&nbsp;
		No error code is prescribed for the case where xsl:global-context-item specifies use="required", and no global context item is supplied.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E5">XT30.E5</a>&nbsp;&nbsp;
		The specification is not unambiguously clear that a global variable cannot reference the imported variable that it is overriding.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E4">XT30.E4</a>&nbsp;&nbsp;
		A non-normative note explaining the consequences of error XTSE3080 is inaccurate.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E3">XT30.E3</a>&nbsp;&nbsp;
		Minor spelling and grammatical errors in the specification of xsl:merge.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E2">XT30.E2</a>&nbsp;&nbsp;
		In the map:merge function, one of the values for the duplicates option is given as unspecified, but the corresponding option in Functions and Operators is given as use-any.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;
	    <a href="#E1">XT30.E1</a>&nbsp;&nbsp;
		There are several examples of streamable stylesheet functions where the variable name used in the example ($input) does not match the name used in the accompanying prose ($nodes).</p><p>&nbsp;&nbsp;<b>Indexes</b></p><p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#index-by-section">Index by affected section</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#index-by-bugzilla">Index by Bugzilla entry</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#index-by-feature">Index by
	        feature</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#index-by-element">Index by
	        element</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#index-by-function">Index by
	        function</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#index-by-error">Index by
	        error</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#index-by-attribute">Index by
	        attribute</a></p></div><hr><h2><a id="E48" name="E48">XT30.E48 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30397">Bug 30397</a></i></p><h3>Description</h3><p>It is not stated whether <code>xsl:namespace-alias stylesheet-prefix="#default"</code>,
				in the case where there is no default namespace, affects no-namespace attributes.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 11.1.4 Namespace Aliasing (tenth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The default namespace (as declared by <code>xmlns</code>) may be specified by
                  using <code>#default</code> instead of a prefix. If no default namespace is in
                  force, specifying <code>#default</code> denotes the null namespace URI. This
                  allows elements that are in no namespace in the stylesheet to acquire a namespace
                  in the result document, or vice versa.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The default namespace (as declared by <code>xmlns</code>) may be specified by
					using <code>#default</code> instead of a prefix. If no default namespace is in
					force, specifying <code>#default</code> denotes the null namespace URI. This
					allows elements that are in no namespace in the stylesheet to acquire a namespace
					in the result document, or vice versa. <span style="background-color:#99ff99">Defining an alias for
					the null namespace URI does not affect no-namespace attributes; these remain in no namespace.
					However, where <code>result-prefix="#default"</code> is specified and 
					no default namespace is in force, attributes whose namespace matches the
					literal namespace URI are renamed to be in no namespace.</span></p></div><h2><a id="E47" name="E47">XT30.E47 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30394">Bug 30394</a></i></p><h3>Description</h3><p>Error XTSE3350 refers to "non-hidden accumulators"; but accumulators are never hidden.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 18.2.8 Importing of Accumulators (second paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)">
                  <p><b>err:XTSE3350</b></p><p>It is a <span style="text-decoration: underline">static error</span> for a <span style="text-decoration: underline">package</span> to contain two or more non-hidden
                        accumulators with the same <span style="text-decoration: underline">expanded
                           QName</span> and the same <span style="text-decoration: underline">import
                           precedence</span>, unless there is another accumulator with the same
                           <span style="text-decoration: underline">expanded QName</span>, and a higher
                        import precedence.</p>
               </div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)">
					<p><b>err:XTSE3350</b></p>
						<p>It is a <span style="text-decoration: underline">static error</span> for a <span style="text-decoration: underline">package</span> to contain two or more <span style="background-color:#ff3333; text-decoration:line-through">non-hidden</span>
							accumulators with the same <span style="text-decoration: underline">expanded
								QName</span> and the same <span style="text-decoration: underline">import
									precedence</span>, unless there is another accumulator with the same
							<span style="text-decoration: underline">expanded QName</span>, and a higher
							import precedence.</p>
					
				</div><h2><a id="E45" name="E45">XT30.E45 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30386">Bug 30386</a></i></p><h3>Description</h3><p>In <code>xsl:sort</code>, it needs to be made clear that the <code>collation</code>, <code>case-order</code>,
				and <code>lang</code> attributes are ignored when <code>data-type="number"</code>; this is not an error.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p><i>Insert at the end of section <b>13.1.3 Sorting Using Collations</b></i></p><p><i>The following:</i></p><div style="border: medium double rgb(0,255,0)"><p>The <code>collation</code>, <code>case-order</code>,
					and <code>lang</code> attributes are ignored when no string comparisons are performed
				during the sorting process; this includes the cases where (a) the sequences to be sorted are empty,
				(b) the sort keys are of a non-string type such as <code>xs:integer</code>, or (c) <code>data-type="number"</code>
				is specified. In these cases, an implementation <span class="verb">may</span> report errors in the value
				of these attributes, but is not <span class="verb">required</span> to do so. As always, an implementation
				<span class="verb">may</span> issue warnings.</p></div><h2><a id="E44" name="E44">XT30.E44 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30384">Bug 30384</a></i></p><h3>Description</h3><p>In <code>xsl:merge-source</code>, the rules are defined by reference to <code>xsl:source-document</code>,
				but the analogy is imperfect.</p><p>In particular:</p><ul><li>The rules for validation refer to "an <code>xsl:source-document</code> instruction specifying
					<code>streamable="yes"</code>; but the rules for validation in <code>xsl:source-document</code> do not
				depend on the value of the <code>streamable</code> attribute.</li><li>Saying that the rules "are the same as" some other rules requires a rather more precise reference so that
				the reader knows which rules apply and which do not. And since the rules for <code>xsl:source-document</code>
				are themselves specified by reference to the rules for <code>xsl:copy-of</code>, there is plenty of scope
				for misunderstanding of edge cases. In fact, this indirection appears to add nothing; the semantics can be equally
				well defined by a direct reference to section 25.4.</li></ul><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 15.3 Selecting the Sequences to be Merged (eighth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The attributes <code>validation</code> and
                  <code>type</code> are used to control schema validation of documents read by
               virtue of their appearance in the result of the <code>for-each-source</code>
               expression. These attributes are mutually exclusive [err:XTSE1505]. The rules are the same as for an <code>xsl:source-document</code>
               instruction <span>specifying <code>streamable="yes"</code></span>. 
               If the <code>for-each-source</code> attribute is absent, then the
                  <code>validation</code> and <code>type</code> attributes <span class="verb">must</span>
               both be absent.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The attributes <code>validation</code> and
					<code>type</code> are used to control schema validation of documents read by
					virtue of their appearance in the result of the <code>for-each-source</code>
					expression. These attributes are mutually exclusive [err:XTSE1505]. <span style="background-color:#ff3333; text-decoration:line-through">The rules are the same as for an <code>xsl:source-document</code>
					instruction specifying <code>streamable="yes"</code>.</span> 
					If the <code>for-each-source</code> attribute is absent, then the
					<code>validation</code> and <code>type</code> attributes <span class="verb">must</span>
					both be absent. <span style="background-color:#99ff99">The process of validation follows the rules defined in <span style="text-decoration: underline">25.4 Validation</span>.</span></p></div><h2><a id="E43" name="E43">XT30.E43 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30383">Bug 30383</a></i></p><h3>Description</h3><p>The effect of specifying <code>input-type-annotations="unspecified"</code> is unspecified.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Changes</h3><ol><li><p>In 4.4.1 Stripping Type Annotations from a Source Tree (third paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>Such stripping of <span style="text-decoration: underline">type annotations</span> can be
               requested by specifying <code>input-type-annotations="strip"</code> on the <span><code>xsl:package</code></span> element. This
               attribute has three permitted values: <code>strip</code>, <code>preserve</code>, and
                  <code>unspecified</code>. The default value is <code>unspecified</code>. <span class="diff-del">Stripping of type annotations takes place if at least
                  one <span style="text-decoration: underline">stylesheet module</span> in the
                     <span style="text-decoration: underline">stylesheet</span> specifies
                     <code>input-type-annotations="strip"</code>.</span></p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>Such stripping of <span style="text-decoration: underline">type annotations</span> can be
					requested by specifying <code>input-type-annotations="strip"</code> on the 
					<code>xsl:package</code> element. This
					attribute has three permitted values: <code>strip</code>, <code>preserve</code>, and
					<code>unspecified</code>. The default value is <code>unspecified</code>. 
					<span style="background-color:#99ff99"></span>Specifying <code>unspecified</code> has the same effect
					as omitting the attribute.</p></div></li><li><p>In 4.4.1 Stripping Type Annotations from a Source Tree (fifth paragraph):</p><p><i>Insert after the text:</i></p><div style="border: medium double rgb(255,255,0)">
               <p><b>err:XTSE0265</b></p><p> It is a <span style="text-decoration: underline">static error</span> if there is a
                        <span style="text-decoration: underline">stylesheet module</span> in a
                        <span style="text-decoration: underline">package</span> that specifies
                        <code>input-type-annotations="strip"</code> and another <span style="text-decoration: underline">stylesheet module</span> that specifies
                        <code>input-type-annotations="preserve"</code>, <span>or if a stylesheet module specifies the value
                           <code>strip</code> or <code>preserve</code> and the same value is not
                        specified on the <code>xsl:package</code> element of the containing
                        package.</span></p>
            </div><p><i>The following:</i></p><div style="border: medium double rgb(0,255,0)"><p>Type annotations are stripped from relevant source documents if at least
					one <span style="text-decoration: underline">stylesheet module</span> in the
					<span style="text-decoration: underline">stylesheet</span> specifies
					<code>input-type-annotations="strip"</code> on the <code>xsl:package</code>,
				    <code>xsl:stylesheet</code>, or <code>xsl:transform</code> element.</p></div></li></ol><h2><a id="E42" name="E42">XT30.E42 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30130">Bug 30130</a></i></p><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30382">Bug 30382</a></i></p><h3>Description</h3><p>In <code>xsl:merge-key</code>, the effect of having no <code>select</code> attribute and
				no contained sequence constructor is underspecified.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Changes</h3><ol><li><p>In 15.5 Defining the Merge Keys (second paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The merge key for each type of input sequence (that is, for each
                  <code>xsl:merge-source</code> element) is defined by a sequence of
                  <code>xsl:merge-key</code> element children of the
                  <code>xsl:merge-source</code> element. Each <code>xsl:merge-key</code>
               element defines one merge key component. The syntax and semantics of an
                  <code>xsl:merge-key</code> element are closely based on the rules for the
                  <code>xsl:sort</code> element (the only exception being the absence of the
                  <code>stable</code> attribute); the difference is that
                  <code>xsl:merge-key</code> elements do not cause a sort to take place, they
               merely declare the existing sort order of the input sequence.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The merge key for each type of input sequence (that is, for each
					<code>xsl:merge-source</code> element) is defined by a sequence of
					<code>xsl:merge-key</code> element children of the
					<code>xsl:merge-source</code> element. Each <code>xsl:merge-key</code>
					element defines one merge key component. The syntax and semantics of an
					<code>xsl:merge-key</code> element are closely based on the rules for the
					<code>xsl:sort</code> element (<span style="background-color:#99ff99">with minor exceptions noted below;
					the only difference in syntax is the absence of the <code>stable</code> attribute</span>); 
					the <span style="background-color:#99ff99">main</span> difference is that
					<code>xsl:merge-key</code> elements do not cause a sort to take place, they
					merely declare the existing sort order of the input sequence.</p></div></li><li><p>In 15.5 Defining the Merge Keys (fifth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The value of <var>N</var>th merge key value of an item
               <var>J</var> in a <span style="text-decoration: underline">merge input
                  sequence</span>
               <var>S</var> is the result of the expression in the <code>select</code> attribute of
               the <var>N</var>th <code>xsl:merge-key</code> child of the corresponding
               <code>xsl:merge-source</code> element, or in the absence of the
               <code>select</code> attribute, the result of the contained <span style="text-decoration: underline">sequence constructor</span>. This is evaluated with a <span style="text-decoration: underline">singleton focus</span> based on <var>J</var>, or, if
               <code>streamable=yes</code> is specified on the <code>xsl:merge-source</code>,
               a <span style="text-decoration: underline">singleton focus</span> based on a <code>snapshot</code> of
               <var>J</var> (see <span style="text-decoration: underline">15.4 Streamable Merging</span>).</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The value of the <var>N</var>th item in the merge key of an item
					<var>J</var> in a <span style="text-decoration: underline">merge input
						sequence</span>
					<var>S</var> is computed as follows, where <var>K</var> is the <var>N</var>th
					<code>xsl:merge-key</code> element of the relevant <code>xsl:merge-source</code>:</p><ol class="enumar"><li>If <var>K</var> has a <code>select</code> attribute, then the result of
					evaluating and atomizing that <code>select</code> expression;</li><li>If <var>K</var> contains a non-empty sequence constructor, then the result
					of evaluating and atomizing that sequence constructor;</li><li>Otherwise, the result of atomizing the context item.</li></ol><p>In each case the evaluation uses a <span style="text-decoration: underline">singleton focus</span> based on <var>J</var>, or, if
					<code>streamable=yes</code> is specified on the <code>xsl:merge-source</code> element,
					a <span style="text-decoration: underline">singleton focus</span> based on a <code>snapshot</code> of
					<var>J</var> (see <span style="text-decoration: underline">15.4 Streamable Merging</span>).</p></div></li></ol><h2><a id="E41" name="E41">XT30.E41 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30380">Bug 30380</a></i></p><h3>Description</h3><p>In <code>xsl:merge</code>, the effect of <code>sort-before-merge="yes"</code> is underspecified.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 15.3 Selecting the Sequences to be Merged (tenth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>If the <code>sort-before-merge</code> attribute is absent or has
               the value <code>no</code>, then each input sequence <span class="verb">must</span> already
               be in the correct order for merging (a dynamic error occurs if it is not). If the
               attribute is present with the value <code>yes</code>, then each input sequence will
               first be sorted to ensure that it is in the correct order.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>If the <code>sort-before-merge</code> attribute is absent or has
					the value <code>no</code>, then each 
					<span style="background-color:#99ff99">merge</span> input sequence <span class="verb">must</span> already
					be in the correct order for merging (a dynamic error occurs if it is not). If the
					attribute is present with the value <code>yes</code>, then each input sequence will
					first be sorted to ensure that it is in the correct order. <span style="background-color:#99ff99">The
					sorting is carried out as if by evaluating an <code>xsl:perform-sort</code> instruction
					with <code>xsl:sort</code> children corresponding one-to-one with the <code>xsl:merge-key</code>
					children of the <code>xsl:merge-source</code> element, differing only (a) in the change of element name,
					and (b) in the addition of the attribute <code>stable="yes"</code> to the first such element.</span></p></div><h2><a id="E40" name="E40">XT30.E40 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30265">Bug 30265</a></i></p><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30378">Bug 30378</a></i></p><h3>Description</h3><p>In <code>xsl:merge</code>, error XTSE3195 does not consider the case where neither of the attributes
				<code>for-each-source</code> or <code>for-each-item</code> is present.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 15.3 Selecting the Sequences to be Merged (third paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p><b>err:XTSE3195</b></p><p>If the <code>for-each-item</code> is present then the
                        <span><code>for-each-source</code>, <code>use-accumulators</code>, and <code>streamable</code></span> attributes
                     must both be absent. If the <code>use-accumulators</code> attribute is present
                     then the <code>for-each-source</code> attribute must be present. If the
                        <code>for-each-source</code> attribute is present then the
                        <code>for-each-item</code> attribute must be absent. </p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p><b>err:XTSE3195</b></p>
					<p>If the <code>for-each-item</code> <span style="background-color:#99ff99">attribute</span> is present then the
						<code>for-each-source</code>, <code>use-accumulators</code>, and <code>streamable</code> attributes
						<span class="verb">must</span> <span style="background-color:#99ff99">all</span> be absent. 
						<span style="background-color:#99ff99">If either or both of the 
							<code>use-accumulators</code> or <code>streamable</code> attributes is present</span>
						then the <code>for-each-source</code> attribute <span class="verb">must</span> be present. If the
						<code>for-each-source</code> attribute is present then the
						<code>for-each-item</code> attribute <span class="verb">must</span> be absent. </p>
				</div><h2><a id="E39" name="E39">XT30.E39 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30377">Bug 30377</a></i></p><h3>Description</h3><p>The <code>xsl:merge</code> instruction is under-specified in cases where merge keys evaluate to
				an empty sequence or to <code>NaN</code>.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 15.7 The Element (fourth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>Generally, two sets of merge key values are distinct if any corresponding items in
               the two sets of values do not compare equal under the rules for the XPath
                  <code>eq</code> operator, under the collating rules for the corresponding merge
               key definition. In rare cases, when considering more than two sets of merge key
               values, ambiguities may arise because of the non-transitivity of the <code>eq</code>
               operator when applied across different numeric types. In this situation, the
               partitioning of items into sets having distinct key values is handled in the same way
               as for <code>xsl:for-each-group</code> (see <span style="text-decoration: underline">14.5 Non-Transitivity</span>),
               and is to some extent <span style="text-decoration: underline">implementation-dependent</span>. </p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p><span style="background-color:#99ff99">Comparison of merge key values follows the rules for <code>xsl:sort</code>
				given in <span style="text-decoration: underline">13.1.2 Comparing Sort Key Values</span>. This means that except for special cases such as empty sequences and NaN,
				</span> two sets of merge key values are distinct if any corresponding items in
					the two sets of values do not compare equal under the rules for the XPath
					<code>eq</code> operator, under the collating rules for the corresponding merge
					key definition. In rare cases, when considering more than two sets of merge key
					values, ambiguities may arise because of the non-transitivity of the <code>eq</code>
					operator when applied across different numeric types. In this situation, the
					partitioning of items into sets having distinct key values is handled in the same way
					as for <code>xsl:for-each-group</code> (see <span style="text-decoration: underline">14.5 Non-Transitivity</span>),
					and is to some extent <span style="text-decoration: underline">implementation-dependent</span>. </p></div><h2><a id="E38" name="E38">XT30.E38 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30376">Bug 30376</a></i></p><h3>Description</h3><p>The rules for handling errors in the evaluation of accumulators assume the use of <code>initial-value</code>
				or <code>select</code> expressions, but the same rules should apply when the accumulator is evaluated
				using a sequence constructor.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 18.2.5 Dynamic Errors in Accumulators (first paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>If a dynamic error occurs when evaluating the <code>initial-value</code> expression
               of <code>xsl:accumulator</code>, or the <code>select</code> expression of <code>xsl:accumulator-rule</code>,
               then the error is signaled as an error from any subsequent call on <code>accumulator-before</code>
                  or <code>accumulator-after</code> that references the accumulator. If no such call on <code>accumulator-before</code>
                  or <code>accumulator-after</code> happens, then the error goes unreported.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>If a dynamic error occurs when evaluating the <code>initial-value</code> expression
					of <code>xsl:accumulator</code>, or the <code>select</code> expression of <code>xsl:accumulator-rule</code>,
					<span style="background-color:#99ff99">or the sequence constructor contained in <code>xsl:accumulator-rule</code></span>,
					then the error is signaled as an error from any subsequent call on <code>accumulator-before</code>
					or <code>accumulator-after</code> that references the accumulator. If no such call on <code>accumulator-before</code>
					or <code>accumulator-after</code> happens, then the error goes unreported.</p></div><h2><a id="E37" name="E37">XT30.E37 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30375">Bug 30375</a></i></p><h3>Description</h3><p>The rules for the default priority of patterns do not cover patterns of the form <code>match="Q{uri}*</code>.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 6.5 Default Priority for Template Rules (first numbered list, tenth item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>If the pattern is a <span style="text-decoration: underline">PathExprP</span> taking the form of an
                        <a href="https://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a><sup><small>Names</small></sup><code>:*</code> or
                        <code>*:</code><a href="https://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a><sup><small>Names</small></sup>, optionally
                     preceded by a <span style="text-decoration: underline">ForwardAxisP</span>, then the priority is
                     −0.25.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>If the pattern is a <span style="text-decoration: underline">PathExprP</span> taking the form of an
					<a href="https://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a><sup><small>Names</small></sup><code>:*</code><span style="background-color:#99ff99">, 
						<a href="https://www.w3.org/TR/xpath-30/#prod-xpath30-BracedURILiteral">BracedURILiteral</a><sup><small>XP30</small></sup><code>*</code>,</span> or
					<code>*:</code><a href="https://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a><sup><small>Names</small></sup>, optionally
					preceded by a <span style="text-decoration: underline">ForwardAxisP</span>, then the priority is
					−0.25.</p></div><h2><a id="E36" name="E36">XT30.E36 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30323">Bug 30323</a></i></p><h3>Description</h3><p>It should be made more clear that in <code>xsl:accept</code> and <code>xsl:expose</code>,
				a <code>NameTest</code> with no arity cannot be used to identify functions.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 3.5.3.1 Visibility of Components (tenth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The value may be a <code>NamedFunctionRef</code> only in the case of stylesheet
                     functions, and distinguishes functions with the same name and different
                     arity.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The value may be a <code>NamedFunctionRef</code> only in the case of stylesheet
					functions, and distinguishes functions with the same name and different
					arity. <span style="background-color:#99ff99">A <a href="https://www.w3.org/TR/xpath-30/#prod-xpath30-NameTest">NameTest</a><sup><small>XP30</small></sup> 
						on its own (that is, with no arity) cannot be used to identify a function.</span></p></div><h2><a id="E35" name="E35">XT30.E35 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30313">Bug 30313</a></i></p><h3>Description</h3><p>The specification states that overriding variables must have an identical declared type; it fails
			to say how this applies when one of the variables has no declared type.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 3.5.3.3 Overriding Components from a Used Package (first bulleted list, fifth item, first numbered list, first item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>Their declared types are <span style="text-decoration: underline">identical</span>.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>Their declared types are <span style="text-decoration: underline">identical</span>. For this purpose, the declared type is the first of the following that applies:</p><ol class="enumar"><p>If there is an <code>as</code> attribute, then the type defined by that attribute.</p><p>If there is a <code>select</code> attribute, then <code>item()*</code>.</p><p>If there is a non-empty sequence constructor, then <code>document-node()</code>.</p><p>Otherwise, <code>xs:string</code>.</p></ol></div><h2><a id="E34" name="E34">XT30.E34 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30301">Bug 30301</a></i></p><h3>Description</h3><p>The specification should clarify whether it is permissible to have two global variables with the same name,
				one static and one non-static, at different import precedences.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p><i>Insert at the end of section <b>9.6 Static Variables and Parameters</b></i></p><p><i>The following:</i></p><div style="border: medium double rgb(0,255,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>It is not an error to have two global variables or parameters with the same name,
				one static and one non-static, provided that they have different import precedence. If the static
				variable has higher precedence, then it will be used as the selected binding for all global variable
				references with this name, whether or not they appear in static expressions. If the non-static variable
				has higher precedence, then the static variable will be used as the selected binding for variable
				references appearing in static expressions, while the non-static variable will be used for variable
				references in non-static expressions. The two variables may have different values. In the case of
				global parameters, however, a transformation API <span class="verb">may</span> restrict them to have the
				same value.</p><p>If the two variable declarations have the same import precedence, and there is no declaration
					with higher import precedence, then error condition 
					[err:XTSE0630] applies.</p></div></div><h2><a id="E32" name="E32">XT30.E32 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30297">Bug 30297</a></i></p><h3>Description</h3><p>The rules for compatibility of overriding functions refer incorrectly to the <code>streamable</code>
				attribute of <code>xsl:function</code>, rather than to the <code>streamability</code> attribute.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 3.5.3.3 Overriding Components from a Used Package (first bulleted list, second item, first numbered list, fourth item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>If the overridden function specifies
                                    <code>streamable="yes"</code> then the overriding function also
                                 specifies <code>streamable="yes"</code>, and in addition, it has
                                 the same <span style="text-decoration: underline">posture</span> and <span style="text-decoration: underline">sweep</span>
                                 as the function that it overrides.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>If the overridden function has a <code>streamability</code> attribute with a value other than
					<code>unspecified</code>, then the overriding function must have a <code>streamability</code>
					attribute with the same value.</p></div><h2><a id="E31" name="E31">XT30.E31 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30289">Bug 30289</a></i></p><h3>Description</h3><p>The streamability rules for stylesheet functions with <code>streamability="ascent"</code>
				are incorrect.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Changes</h3><ol><li><p>In 19.8.5.7 Streamability Category: ascent (first numbered list, first item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>Let <var>P<sub>0</sub></var> and <var>S<sub>0</sub></var> be the <span style="text-decoration: underline">posture</span>
                           and <span style="text-decoration: underline">sweep</span> obtained by assessing the function call
                           using the <span style="text-decoration: underline">general streamability rules</span>, where the
                           operands are the arguments to the function call, with an <span style="text-decoration: underline">operand usage</span> for the first argument of <span style="text-decoration: underline">inspection</span>, and an <span style="text-decoration: underline">operand usage</span> for
                           arguments after the first being the <span style="text-decoration: underline">type-determined usage</span> based on the declared type of the
                           corresponding <span style="text-decoration: underline">function parameter</span>.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>Let <var>P<sub>0</sub></var> and <var>S<sub>0</sub></var> be the <span style="text-decoration: underline">posture</span>
					and <span style="text-decoration: underline">sweep</span> obtained by assessing the function call
					using the <span style="text-decoration: underline">general streamability rules</span>, where the
					operands are the arguments to the function call, with an <span style="text-decoration: underline">operand usage</span> for the first argument of <span style="background-color:#99ff99"><span style="text-decoration: underline">transmission</span></span>, and an <span style="text-decoration: underline">operand usage</span> for
					arguments after the first being the <span style="text-decoration: underline">type-determined usage</span> based on the declared type of the
					corresponding <span style="text-decoration: underline">function parameter</span>.</p></div></li><li><p>In 19.8.5.7 Streamability Category: ascent (first numbered list, sixth item):</p><p><i>Insert after the text:</i></p><div style="border: medium double rgb(255,255,0)"><table cellpadding="5"><tr><td valign="top"><p>6</p></td><td valign="top"><p>Otherwise, the function call is <span style="text-decoration: underline">climbing</span> and <span style="text-decoration: underline">motionless</span>.</p></td></tr></table></div><p><i>The following:</i></p><div style="border: medium double rgb(0,255,0)"><ul><li><p>If the declared return type of the function does not permit nodes, then the function
					call is <span style="text-decoration: underline">grounded</span> and <span style="text-decoration: underline">motionless</span>.</p></li></ul></div></li></ol><h2><a id="E30" name="E30">XT30.E30 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30288">Bug 30288</a></i></p><h3>Description</h3><p>The stylesheet <code>xml-to-json.xsl</code> fails to declare the mode that it uses,
				which is required because the default value of <code>declared-modes</code>
				is true.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In the <code>xml-to-json.xsl</code> stylesheet listed in Appendix B.2, add the declaration 
				<code>&lt;xsl:mode name="j:xml-to-json"/&gt;</code>.</p><h2><a id="E29" name="E29">XT30.E29 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30267">Bug 30267</a></i></p><h3>Description</h3><p>The rules for consistency of merge keys in <code>xsl:merge</code> can be misread.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p style="color:red">Expression ulist[2]/item[2]/p selects nothing</p><h2><a id="E27" name="E27">XT30.E27 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30253">Bug 30253</a></i></p><h3>Description</h3><p>The function <code>map:find</code> depends on arrays, which are
				only available with XPath 3.1.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 21.2 Functions that Operate on Maps (first paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>XSLT 3.0 provides a number of functions that operate on maps, or that are useful in
               conjunction with maps. These functions are specified in <span style="text-decoration: underline">
    [Functions and Operators 3.1]
  </span>, but they are available with XSLT 3.0 whether or not
               the processor offers the <span style="text-decoration: underline">XPath 3.1 Feature</span>.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>XSLT 3.0 provides a number of functions that operate on maps, or that are useful in
					conjunction with maps. These functions are specified in <span style="text-decoration: underline">
    [Functions and Operators 3.1]
  </span>. <span style="background-color:#99ff99">With the exception of <code>map:find</code></span>, 
					they are available with XSLT 3.0 whether or not
					the processor offers the <span style="text-decoration: underline">XPath 3.1 Feature</span>.
					<span style="background-color:#99ff99">The <code>map:find</code> function is defined to use arrays, and
						is therefore only available when the processor offers the <span style="text-decoration: underline">XPath 3.1 Feature</span>.</span></p></div><h2><a id="E26" name="E26">XT30.E26 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30245">Bug 30245</a></i></p><h3>Description</h3><p>The specification defines default values for <code>media-type</code> with output
			methods XML, HTML, etc, but not for JSON.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 26 Serialization (second bulleted list, eleventh item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p> The value of the <code>media-type</code> attribute provides the value of the
                     <code>media-type</code> parameter to the serialization method. The default
                  value is <code>text/xml</code> in the case of the <code>xml</code> output method,
                     <code>text/html</code> in the case of the <code>html</code> and
                     <code>xhtml</code> output methods, and <code>text/plain</code> in the case of
                  the <code>text</code> output method. </p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The value of the <code>media-type</code> attribute provides the value of the
					<code>media-type</code> parameter to the serialization method. The default
					value is <code>text/xml</code> in the case of the <code>xml</code> output method,
					<code>text/html</code> in the case of the <code>html</code> and
					<code>xhtml</code> output methods, and <code>text/plain</code> in the case of
					the <code>text</code> output method. <span style="background-color:#99ff99">The default for the <code>json</code> output method
				is <code>application/json</code>; the default for the <code>adaptive</code> output method
				is <span style="text-decoration: underline">implementation-defined</span>.</span></p></div><h2><a id="E24" name="E24">XT30.E24 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30241">Bug 30241</a></i></p><h3>Description</h3><p>Section 5.3 should make it clear that it only defines the static and dynamic context for "ordinary" XPath
			expressions in a stylesheet, and that the rules for (a) static expressions (for example <code>xsl:use-when</code>), and (b)
			dynamically evaluated expressions (<code>xsl:evaluate</code>) are to be found elsewhere.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 5.3 The Static and Dynamic Context (first paragraph):</p><p><i>Insert after the text:</i></p><div style="border: medium double rgb(255,255,0)"><p>XPath defines the concept of an <a href="https://www.w3.org/TR/xpath-30/#dt-expression-context">expression context</a><sup><small>XP30</small></sup> which contains all the information that can affect
               the result of evaluating an <span style="text-decoration: underline">expression</span>. The
               expression context has two parts, the <a href="https://www.w3.org/TR/xpath-30/#dt-static-context">static context</a><sup><small>XP30</small></sup>, and the <a href="https://www.w3.org/TR/xpath-30/#dt-dynamic-context">dynamic context</a><sup><small>XP30</small></sup>. The components that make up the expression context
               are defined in the XPath specification (see <a href="https://www.w3.org/TR/xpath-30/#context">Section 
            
               2.1 Expression Context
         </a><sup><small>XP30</small></sup>).
               This section describes the way in which these components are initialized when an
               XPath expression is contained within an XSLT stylesheet.</p></div><p><i>The following:</i></p><div style="border: medium double rgb(0,255,0)"><p>This section does not apply to <span style="text-decoration: underline">static expressions</span>
				(whose context is defined in <span style="text-decoration: underline">9.7 Static Expressions</span>), nor to XPath expressions evaluated
				using <code>xsl:evaluate</code> (whose context is defined in <span style="text-decoration: underline">10.4.2 Dynamic context for the target expression</span>).</p></div><h2><a id="E23" name="E23">XT30.E23 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30240">Bug 30240</a></i></p><h3>Description</h3><p>In the rules for tunnel parameters, the phrase "When a template accesses the value of a tunnel 
				parameter by declaring it with <code>&lt;xsl:param tunnel="yes"&gt;</code>" uses confusing language.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 10.1.3 Tunnel Parameters (fourth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>When a template accesses the value of a <span style="text-decoration: underline">tunnel
                     parameter</span> by declaring it with <code>&lt;xsl:param
                     tunnel="yes"&gt;</code>, this does not remove the parameter from the base set
                  of tunnel parameters that is passed on to any templates called by this
                  template.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>When a template specifies <code>&lt;xsl:param tunnel="yes"&gt;</code>, this declares its intention to make use of  
					a <span style="text-decoration: underline">tunnel	parameter</span>; it does not remove the parameter from the base set
					of tunnel parameters that is passed on to any templates called by this template.</p></div><h2><a id="E22" name="E22">XT30.E22 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30238">Bug 30238</a></i></p><h3>Description</h3><p>The rules for <code>xsl:context-item</code> and <code>xsl:global-context-item</code> say that no
				conversion is attempted to the declared type. But the error that occurs if the supplied
			item is of the wrong type is <code>XTTE0590</code>, whose description assumes that a conversion
			is taking place.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 9.2.1 The Required Type of a Parameter (fourth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)">
                  <p><b>err:XTTE0590</b></p><p>It is a <span style="text-decoration: underline">type error</span> if the conversion
                        of the <span style="text-decoration: underline">supplied value</span> of a
                        parameter to its <span style="text-decoration: underline">required type</span> fails.</p>
               </div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)">
					<p><b>err:XTTE0590</b></p>
						<p>It is a <span style="text-decoration: underline">type error</span> if the 
							<span style="text-decoration: underline">supplied value</span> of a parameter,
							or of the context item, does not match the required type, after applying any permitted conversions.</p>
					
				</div><h2><a id="E21" name="E21">XT30.E21 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30236">Bug 30236</a></i></p><h3>Description</h3><p>In the context of function conversion rules, a note in section 5.2 says that 
				"Attempting to convert the string 2003-02-29 to a date is a dynamic error rather than a type error". 
			In fact such a conversion will never be attempted by the function conversion rules; a clearer example
			would be conversion of an <code>xs:untypedAtomic</code> value.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 5.2 Expressions (second note):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>Note the distinction between the two kinds of error that may occur. Attempting to
                  convert an integer to a date is a type error, because such a conversion is never
                  possible. Type errors can be reported statically if they can be detected
                  statically, whether or not the construct in question is ever evaluated. Attempting
                  to convert the string <code>2003-02-29</code> to a date is a dynamic error rather
                  than a type error, because the problem is with this particular value, not with its
                  type. Dynamic errors are reported only if the instructions or expressions that
                  cause them are actually evaluated.</p></div></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>Note the distinction between the two kinds of error that may occur. Attempting to
					convert an integer to a date is a type error, because such a conversion is never
					possible. Type errors can be reported statically if they can be detected
					statically, whether or not the construct in question is ever evaluated. Attempting
					to convert the <span style="background-color:#99ff99"><code>xs:untypedAtomic</code></span> value <code>"2003-02-29"</code> to a date is a dynamic error rather
					than a type error, because the problem is with this particular value, not with its
					type. Dynamic errors are reported only if the instructions or expressions that
					cause them are actually evaluated.</p></div></div><h2><a id="E20" name="E20">XT30.E20 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30234">Bug 30234</a></i></p><h3>Description</h3><p>Section 25.4.1.2 states that the value of the <code>[xsl:]type</code> attribute is a QName;
			the rules actually permit any EQName.</p><p>Moreover, in the description of error XTSE1520, the list of places where the <code>[xsl:]type</code>
			attribute can appear is incomplete.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Changes</h3><ol><li><p>In 25.4.1.2 Validation using the [xsl:]type Attribute (first paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The <code>[xsl:]type</code> attribute takes as its value a <code>QName</code>.
                     This <span class="verb">must</span> be the name of a type definition included in the
                        <span style="text-decoration: underline">in-scope schema
                        components</span> for the stylesheet. If the QName has no prefix, it is
                     expanded using the default namespace established using the effective
                        <code>[xsl:]xpath-default-namespace</code> attribute if there is one;
                     otherwise, it is taken as being a name in no namespace.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The <code>[xsl:]type</code> attribute takes as its value an <span style="background-color:#99ff99"><span style="text-decoration: underline">EQName</span></span>.
					This <span class="verb">must</span> be the name of a type definition included in the
					<span style="text-decoration: underline">in-scope schema
						components</span> for the stylesheet. If the QName has no prefix, it is
					expanded using the default namespace established using the effective
					<code>[xsl:]xpath-default-namespace</code> attribute if there is one;
					otherwise, it is taken as being a name in no namespace.</p></div></li><li><p>In 25.4.1.2 Validation using the [xsl:]type Attribute (fifth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)">
                     <p><b>err:XTSE1520</b></p><p>It is a <span style="text-decoration: underline">static error</span> if the
                           value of the <code>type</code> attribute of an
                              <code>xsl:element</code>, <code>xsl:attribute</code>,
                              <code>xsl:copy</code>, <code>xsl:copy-of</code>,
                              <code>xsl:document</code>, or <code>xsl:result-document</code>
                           instruction, or the <code>xsl:type</code> attribute of a literal result
                           element, is not a valid <code>QName</code>, or if it uses a prefix that
                           is not defined in an in-scope namespace declaration, or if the QName is
                           not the name of a type definition included in the <span style="text-decoration: underline">in-scope schema
                              components</span> for the <span style="text-decoration: underline">package</span>.</p>
                  </div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)">
					<p><b>err:XTSE1520</b></p>
						<p>It is a <span style="text-decoration: underline">static error</span> if the
							value of the <code>type</code> attribute of an
							<code>xsl:element</code>, <code>xsl:attribute</code>,
							<code>xsl:copy</code>, <code>xsl:copy-of</code>,
							<code>xsl:document</code>, <code>xsl:result-document</code>,
							<span style="background-color:#99ff99"><code>xsl:source-document</code>, or <code>xsl:merge-source</code></span>
							instruction, or the <code>xsl:type</code> attribute of a literal result
							element, is not a valid <code>QName</code>, or if it uses a prefix that
							is not defined in an in-scope namespace declaration, or if the QName is
							not the name of a type definition included in the <span style="text-decoration: underline">in-scope schema
								components</span> for the <span style="text-decoration: underline">package</span>.</p>
					
				</div></li></ol><h2><a id="E18" name="E18">XT30.E18 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30229">Bug 30229</a></i></p><h3>Description</h3><p>An oddity in the rules for patterns is that <code>doc('a.xml')/(id('abc'))</code> is permitted, whereas
				<code>doc('a.xml')/id('abc')</code> is not. This is sufficiently strange that an explanatory note
			is warranted.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p><i>Insert at the end of section <b>5.5.2 Syntax of Patterns</b></i></p><p><i>The following:</i></p><div style="border: medium double rgb(0,255,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>A peculiarity of this grammar is that <code>doc('a.xml')/(id('abc'))</code>
					is a valid pattern, while <code>doc('a.xml')/id('abc')</code> is not: the <code>/</code> 
				operator must be followed either by a parenthesized expression, or by an axis step.</p></div></div><h2><a id="E17" name="E17">XT30.E17 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30223">Bug 30223</a></i></p><h3>Description</h3><p>Error XTDE0450 (which occurs when a function/map/array is added to the content of an element) should
				be a type error rather than a dynamic error, so that it can be detected and reported statically.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 5.7.1 Constructing Complex Content (first numbered list, eighth item, sixth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)">
                        <p><b>err:XTDE0450</b></p><p>It is a <span style="text-decoration: underline"><span class="diff-del">non-recoverable</span> dynamic error</span> if the result
                              sequence contains a function item. </p>
                     </div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)">
					<p><b>err:XTDE0450</b></p>
						<p>It is a <span style="text-decoration: underline"><span style="background-color:#99ff99">type</span> error</span> if the result
							sequence contains a function item. </p>
					
				<div class="note"><p class="prefix"><b>Note:</b></p><p>The error code reflects the fact that this error was at one time classified as a dynamic error
				rather than a type error.</p></div></div><h2><a id="E16" name="E16">XT30.E16 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30222">Bug 30222</a></i></p><h3>Description</h3><p>The rules for the base URI of nodes generated using <code>xsl:copy-of</code> are unclear.</p><ol class="enumar"><li><p>The specification says that "The base URI of a node is copied...". It is unclear whether "a node"
					here refers only to nodes that are explicitly selected, or whether it also applies to their descendants.</p></li><li><p>It is not stated clearly what happens to the base URI of descendant nodes. XQuery has clear
				rules for this case, and XSLT should adopt them.</p></li></ol><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 11.9.2 Deep Copy (eighth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The base URI of a node is copied, except in the case of an element node having an
                     <code>xml:base</code> attribute, in which case the base URI of the new node is
                  taken as the value of the <code>xml:base</code> attribute, resolved if it is
                  relative against the base URI of the <code>xsl:copy-of</code> instruction. If
                  the copied node is subsequently attached as a child to a new element or document
                  node, the final copy of the node inherits its base URI from its parent node,
                  unless this is overridden using an <code>xml:base</code> attribute.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>For any node <var>N</var> that is explicitly selected by the evaluation of the <code>select</code>
				expression, the base URI of the new copy is as follows:</p><ul><li><p>If <var>N</var> is an element node having an <code>xml:base</code> attribute,
						the base URI of the new node is taken as the value of the <code>xml:base</code> attribute,
					resolved if it is relative against the static base URI of the <code>xsl:copy-of</code> instruction.</p></li><li><p>Otherwise, the base URI of the new copy is the same as the base URI of <var>N</var>.</p></li></ul><p>For any element or processing-instruction node that has <var>N</var> as an ancestor, the base URI
				of the new copy is set to be the same as that of its new parent, with the following exception: if a copied
				element has an <code>xml:base</code> attribute, then its base URI is set to the value of that attribute,
				resolved if it is relative against the base URI of the new parent node.</p><div class="note"><p class="prefix"><b>Note:</b></p><p>If two elements in a subtree have different base URIs for some reason unconnected with
				<code>xml:base</code> attributes (for example, if they originated in different external entities),
				then these differences are lost when the subtree is copied.</p></div><div class="note"><p class="prefix"><b>Note:</b></p><p>As a consequence of rules specified elsewhere (see <span style="text-decoration: underline">5.7.1 Constructing Complex Content</span>),
				if a node created using the <code>xsl:copy-of</code> instruction is subsequently attached as a child
				to a new element or document node, the final copy of the node inherits its base URI from its new parent node,
				unless this is overridden using an <code>xml:base</code> attribute.</p></div></div><h2><a id="E15" name="E15">XT30.E15 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30211">Bug 30211</a></i></p><h3>Description</h3><p>It is unclear exactly what the scope of the <code>default-validation</code> attribute is.</p><ol class="enumar"><li><p>It is clearly intended that the attribute applies only within the subtree of the stylesheet
					rooted at the element on which it appears, so the phrase "This default applies within the containing stylesheet module or package" could
				be misinterpreted.</p></li><li><p>It is stated that the attribute "determines the validation applied to the implicit final result 
					tree created in the absence of an xsl:result-document instruction", but if there
				are several <code>default-validation</code> attributes, it's not clear which one of them applies; furthermore,
				the implicit validation proposed here is inconsistent with the description in section 2.3.6.1, Result Tree Construction.</p></li></ol><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 25.4 Validation (fourth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The <code>[xsl:]default-validation</code> attribute defines the
               default value of the <code>validation</code> attribute of all
                  <code>xsl:element</code>, <code>xsl:attribute</code>,
                  <code>xsl:copy</code>, <code>xsl:copy-of</code>,
                  <code>xsl:document</code>, and <code>xsl:result-document</code>
               instructions, and of the <code>xsl:validation</code> attribute of all <span style="text-decoration: underline">literal result elements</span>
               <span>, appearing within its scope</span>. It also determines
               the validation applied to the implicit <span style="text-decoration: underline">final
                  result tree</span> created in the absence of an
                  <code>xsl:result-document</code> instruction. This default applies within the
               containing <span style="text-decoration: underline">stylesheet module</span> or
                  <span style="text-decoration: underline">package</span>: it does not extend to included or imported stylesheet
               modules or used packages. If the attribute is omitted, the default is
                  <code>strip</code>. The permitted values are <code>preserve</code> and
                  <code>strip</code>.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The <code>[xsl:]default-validation</code> attribute defines the
					default value of the <code>validation</code> attribute of all
					<code>xsl:element</code>, <code>xsl:attribute</code>,
					<code>xsl:copy</code>, <code>xsl:copy-of</code>,
					<code>xsl:document</code>, and <code>xsl:result-document</code>
					instructions, and of the <code>xsl:validation</code> attribute of all <span style="text-decoration: underline">literal result elements</span>,
					<span style="background-color:#99ff99"> appearing as descendants of the element on which the attribute appears,
					unless there is an inner element that defines a different default</span>. <span style="background-color:#ff3333; text-decoration:line-through">It also determines
					the validation applied to the implicit <span style="text-decoration: underline">final
						result tree</span> created in the absence of an
					<code>xsl:result-document</code> instruction.</span> This default <span style="background-color:#ff3333; text-decoration:line-through">applies within the
					containing <span style="text-decoration: underline">stylesheet module</span> or
						<span style="text-decoration: underline">package</span>: it </span> does not extend to included or imported stylesheet
						modules or used packages. If the attribute is omitted, the default is
					<code>strip</code>. The permitted values are <code>preserve</code> and
					<code>strip</code>.</p><p><span style="background-color:#99ff99">The <code>default-validation</code> attribute on the outermost element of the <span style="text-decoration: underline">principal stylesheet module</span>
					of the <span style="text-decoration: underline">dt-root-package</span> also determines the validation applied to the implicit <span style="text-decoration: underline">final
						result tree</span> created in the absence of an
					<code>xsl:result-document</code> instruction.</span></p></div><h2><a id="E14" name="E14">XT30.E14 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30208">Bug 30208</a></i></p><h3>Description</h3><p>There are inconsistencies and inaccuracies in the handling of <code>build-tree</code> and <code>item-separator</code>
				serialization attributes.</p><ol class="enumar"><li><p>The note in section 26, stating that the <code>item-separator</code> attribute has no effect
				if the effective value of <code>build-tree</code> is yes, is incorrect. If the raw result is a sequence of
					items, then separators will be inserted regardless of the value of <code>build-tree</code>.</p></li><li><p>The sentence in section 2.3.6.1, stating that "sequence normalization is carried out regardless of 
					any <code>method</code> attribute in the unnamed output definition", is misleading, in that some output methods
				do not carry out sequence normalization.</p></li><li><p>The conformance rules are unclear as to whether a processor that does not support serialization
				must take account of the <code>item-separator</code> property.</p></li><li><p>The effect of specifying <code>build-tree="no"</code> with <code>method="xml"</code> is unclear,
				because the rules for the XML serialization method imply building a tree. The same is true of other methods
				such as XHTML and HTML.</p></li></ol><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Changes</h3><ol><li><p>In 26 Serialization (second bulleted list, tenth item, first note):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>The <code>item-separator</code> attribute has no
                     effect if the sequence being serialized contains only one item, which will
                     always be the case if the effective value of <code>build-tree</code> is
                        <code>yes</code>.</p></div></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>The <code>item-separator</code> attribute has no
					effect if the sequence being serialized contains only one item<span style="background-color:#ff3333; text-decoration:line-through">, which will
					always be the case if the effective value of <code>build-tree</code> is
					<code>yes</code></span>.</p></div></div></li><li><p>In 2.3.6.1 Result Tree Construction (first paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>If a result tree is to be constructed from the <span style="text-decoration: underline">raw result</span>, then this is done
    by applying the rules for the process of <a href="https://www.w3.org/TR/xslt-xquery-serialization-30/#sequence-normalization">sequence normalization</a><sup><small>SER30</small></sup> as defined in 
       <span style="text-decoration: underline">
    [XSLT and XQuery Serialization]
  </span>. This process takes as input the serialization parameters defined in the
    unnamed <span style="text-decoration: underline">output definition</span> of the <span style="text-decoration: underline">top-level package</span>; though the only parameter
    that is actually used by this process is <code>item-separator</code>. In particular, sequence normalization is carried
       out regardless of any <code>method</code> attribute in the unnamed <span style="text-decoration: underline">output definition</span>.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>If a result tree is to be constructed from the <span style="text-decoration: underline">raw result</span>, then this is done
					by applying the rules for the process of <a href="https://www.w3.org/TR/xslt-xquery-serialization-30/#sequence-normalization">sequence normalization</a><sup><small>SER30</small></sup> as defined in 
					<span style="text-decoration: underline">
    [XSLT and XQuery Serialization]
  </span>. This process takes as input the serialization parameters defined in the
					unnamed <span style="text-decoration: underline">output definition</span> of the <span style="text-decoration: underline">top-level package</span>; though the only parameter
					that is actually used by this process is <code>item-separator</code>. <span style="background-color:#ff3333; text-decoration:line-through">In particular, sequence normalization is carried
					out regardless of any <code>method</code> attribute in the unnamed <span style="text-decoration: underline">output definition</span></span>.</p></div></li><li><p>In 27.3 Serialization Feature (first note):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>A processor that does not claim conformance with the serialization feature
               <span class="verb">may</span> offer alternative serialization capabilities, and these
               <span class="verb">may</span> make use of the serialization parameters defined on
               <code>xsl:output</code> and/or <code>xsl:result-document</code>.</p></div></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>A processor that does not claim conformance with the serialization feature
						<span class="verb">may</span> offer alternative serialization capabilities, and these
						<span class="verb">may</span> make use of the serialization parameters defined on
						<code>xsl:output</code> and/or <code>xsl:result-document</code>.
					<span style="background-color:#99ff99">Such a processor <span class="verb">may</span> implement selected
					parts of the serialization capabilities defined in this specification. For example,
					it <span class="verb">may</span> implement selected output methods, or selected serialization properties. 
						It <span class="verb">may</span>
					implement sequence normalization using the <code>item-separator</code> property even if it
						has no other serialization capabilities.</span>
	                </p></div></div></li><li><p>In 25.1 Creating Secondary Results (fourth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>If the result is not serialized, then the decision whether to
               return the <span style="text-decoration: underline">raw result</span> or to construct a tree depends on the effective
               value of the <code>build-tree</code> attribute. If the effective value of
               the <code>build-tree</code> attribute is <code>yes</code>, then <span>
                  a <span style="text-decoration: underline">final result tree</span> is created
               by invoking the process of <a href="https://www.w3.org/TR/xslt-xquery-serialization-30/#sequence-normalization">sequence normalization</a><sup><small>SER30</small></sup></span>. The default for the
                  <code>build-tree</code> attribute depends on the serialization method. For the
                  <code>xml</code>, <code>html</code>, <code>xhtml</code>, and <code>text</code>
               methods the default value is <code>yes</code>. <span>For
                  the <code>json</code> and <code>adaptive</code> methods (available only with XPath
                  3.1) the default value is <code>no</code>.</span></p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>If the result is not serialized, then the decision whether to
					return the <span style="text-decoration: underline">raw result</span> or to construct a tree depends on the effective
					value of the <code>build-tree</code> attribute. If the effective value of
					the <code>build-tree</code> attribute is <code>yes</code>, then 
						a <span style="text-decoration: underline">final result tree</span> is created
						by invoking the process of <a href="https://www.w3.org/TR/xslt-xquery-serialization-30/#sequence-normalization">sequence normalization</a><sup><small>SER30</small></sup>.
					<span style="background-color:#ff3333; text-decoration:line-through"> The default for the
					<code>build-tree</code> attribute depends on the serialization method. For the
					<code>xml</code>, <code>html</code>, <code>xhtml</code>, and <code>text</code>
					methods the default value is <code>yes</code>. For
						the <code>json</code> and <code>adaptive</code> methods (available only with XPath
						3.1) the default value is <code>no</code>.</span>
				<span style="background-color:#99ff99">Conversely, if the result <em>is</em> serialized, then the
				decision whether or not to construct a tree depends on the choice of serialization method,
				and the <code>build-tree</code> attribute is then ignored. For example, with <code>method="xml"</code>
				a tree is always constructed, whereas with <code>method="json"</code> a tree is never constructed.</span></p></div></li><li><p>In 26 Serialization (fourteenth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The <code>build-tree</code> attribute controls whether the
            raw <span style="text-decoration: underline">principal result</span> or <span style="text-decoration: underline">secondary result</span> is
            converted to a <span style="text-decoration: underline">final result tree</span>. The default depends on the value
            of the <code>method</code> attribute: the default is <code>yes</code> if the
               <code>method</code> attribute specifies <code>xml</code>, <code>html</code>,
               <code>xhtml</code>, or <code>text</code>, or if it is omitted; <span>the default is <code>no</code> if the <code>method</code> attribute
               specifies <code>json</code> or <code>adaptive</code></span>. A <span style="text-decoration: underline">final result tree</span> may be constructed whether or not it is subsequently
            serialized.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>If the result is not serialized, then the decision whether to
					return the <span style="text-decoration: underline">raw result</span> or to construct a tree depends on the effective
					value of the <code>build-tree</code> attribute. If the effective value of
					the <code>build-tree</code> attribute is <code>yes</code>, then 
					a <span style="text-decoration: underline">final result tree</span> is created
					by invoking the process of <a href="https://www.w3.org/TR/xslt-xquery-serialization-30/#sequence-normalization">sequence normalization</a><sup><small>SER30</small></sup>.
                    Conversely, if the result <em>is</em> serialized, then the
						decision whether or not to construct a tree depends on the choice of serialization method,
						and the <code>build-tree</code> attribute is then ignored. For example, with <code>method="xml"</code>
						a tree is always constructed, whereas with <code>method="json"</code> a tree is never constructed.</p></div></li></ol><h2><a id="E13" name="E13">XT30.E13 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30192">Bug 30192</a></i></p><h3>Description</h3><p>Error XTDE0555 can apply to any kind of item, not only to nodes.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Change</h3><p>In 6.7.6 Built-in Templates: Fail (fourth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)">
                  <p><b>err:XTDE0555</b></p><p>It is a <span style="text-decoration: underline"><span class="diff-del">non-recoverable</span> dynamic error</span> if
                           <code>xsl:apply-templates</code>, <code>xsl:apply-imports</code>
                        or <code>xsl:next-match</code> is used to process a node using a mode
                        whose declaration specifies <code>on-no-match="fail"</code> when there is no
                           <span style="text-decoration: underline">template rule</span> in the <span style="text-decoration: underline">stylesheet</span>
                        whose match pattern matches that node. </p>
               </div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)">
					<p><b>err:XTDE0555</b></p>
						<p>It is a <span style="text-decoration: underline">dynamic error</span> if
							<code>xsl:apply-templates</code>, <code>xsl:apply-imports</code>
							or <code>xsl:next-match</code> is used to process <span style="background-color:#99ff99">an item</span> using a mode
							whose declaration specifies <code>on-no-match="fail"</code> when there is no
							<span style="text-decoration: underline">template rule</span> in the <span style="text-decoration: underline">stylesheet</span>
							whose match pattern matches that <span style="background-color:#99ff99">item</span>. </p>
					
				</div><h2><a id="E12" name="E12">XT30.E12 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30191">Bug 30191</a></i></p><h3>Description</h3><p>Various minor spelling and grammatical mistakes.</p><h3>History</h3><p><b>13 Feb 2019: </b>Proposed</p><h3>Changes</h3><ol><li><p>In 4.6.2 Other Data Structures (third paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>Maps, however, play in important role in enabling streamed applications
               to be written. For example, a map can be used as the data structure maintained
               by an accumulator (see <span style="text-decoration: underline">18.2 Accumulators</span>) to remember information
               that has been retrieved from a streamed document, given that it is not possible to
               revisit the same nodes later. There is also a special streamability rule for
               map constructor expressions (see <span style="text-decoration: underline">21.6 Maps and Streaming</span>) that allows
               such an expression to make multiple downward selections in the streamed input
               document: for example one can write <code>map{'authors':data(author), 'editors':data(editor)}</code>,
               which gathers the values of these these two elements, or sets of elements, from the input
               stream, regardless what order they appear in — even if they are interleaved.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>Maps, however, play <span style="background-color:#99ff99">an</span> important role in enabling streamed applications
					to be written. For example, a map can be used as the data structure maintained
					by an accumulator (see <span style="text-decoration: underline">18.2 Accumulators</span>) to remember information
					that has been retrieved from a streamed document, given that it is not possible to
					revisit the same nodes later. There is also a special streamability rule for
					map constructor expressions (see <span style="text-decoration: underline">21.6 Maps and Streaming</span>) that allows
					such an expression to make multiple downward selections in the streamed input
					document: for example one can write <code>map{'authors':data(author), 'editors':data(editor)}</code>,
					which gathers the values of these <span style="background-color:#ff3333; text-decoration:line-through">these</span> two elements, or sets of elements, from the input
					stream, regardless what order they appear in — even if they are interleaved.</p></div></li><li><p>In 13.4 The Unicode Collation Algorithm (first table, sixth row, third column):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><table><tr><td style="vertical-align:top">Controls the handling of characters such as spaces and hyphens;
                        specifically, the “noise” characters in the groups selected by the <code>maxVariable</code> parameter. 
                        The value <code>non-ignorable</code>
                     indicates that such characters are treated as distinct at the primary level 
                     (so <code>data base</code> sorts before <code>datatype</code>);
                     <code>shifted</code> indicates that they are are used to differentiate two strings only at the 
                        <code>quaternary</code> level,
                     and <code>blanked</code> indicates that they are taken into account only at the <code>identical</code> level.
                     </td></tr></table></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><table><tr><td style="vertical-align:top">Controls the handling of characters such as spaces and hyphens;
					specifically, the “noise” characters in the groups selected by the <code>maxVariable</code> parameter. 
					The value <code>non-ignorable</code>
					indicates that such characters are treated as distinct at the primary level 
					(so <code>data base</code> sorts before <code>datatype</code>);
					<code>shifted</code> indicates that they <span style="background-color:#ff3333; text-decoration:line-through">are</span> are used to differentiate two strings only at the 
					<code>quaternary</code> level,
					and <code>blanked</code> indicates that they are taken into account only at the <code>identical</code> level.
				</td></tr></table></div></li><li><p>In 19.4 Determining the Posture of a Construct (third paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The characterization of an expression as striding, crawling, climbing, or
               roaming applies only to the streamed nodes in the the result of the expression. The result of the expression
               may also contain non-streamed (grounded) nodes or atomic values. For example
               if <code>/x/y</code> is a striding expression, then <code>(/x/y | $doc//x)</code> is also striding, given
               that <code>$doc</code> contains non-streamed nodes. The assertion that the nodes in the result of a striding
               expression are in document order and are peers thus applies only to the subset of the nodes that are streamed.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The characterization of an expression as striding, crawling, climbing, or
					roaming applies only to the streamed nodes in the <span style="background-color:#ff3333; text-decoration:line-through">the</span> result of the expression. The result of the expression
					may also contain non-streamed (grounded) nodes or atomic values. For example
					if <code>/x/y</code> is a striding expression, then <code>(/x/y | $doc//x)</code> is also striding, given
					that <code>$doc</code> contains non-streamed nodes. The assertion that the nodes in the result of a striding
					expression are in document order and are peers thus applies only to the subset of the nodes that are streamed.</p></div></li><li><p>In 19.8.8.4 Streamability of union, intersect, and except Expressions (first numbered list, third item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>If both operands are <span style="text-decoration: underline">climbing</span>, then <span style="text-decoration: underline">climbing</span> and and the
                           wider of the sweeps of the two operands (Example: <code>parent::A | */ancestor::B</code>).</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>If both operands are <span style="text-decoration: underline">climbing</span>, then <span style="text-decoration: underline">climbing</span> and <span style="background-color:#ff3333; text-decoration:line-through">and</span> the
					wider of the sweeps of the two operands (Example: <code>parent::A | */ancestor::B</code>).</p></div></li><li><p>In 19.9 Examples of Streamability Analysis (second example box, second numbered list, first item, first paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>First establish that that the expression <code>@currency='USD'</code> is
                           <span style="text-decoration: underline">motionless</span>, as follows:</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>First establish that <span style="background-color:#ff3333; text-decoration:line-through">that</span> the expression <code>@currency='USD'</code> is
					<span style="text-decoration: underline">motionless</span>, as follows:</p></div></li><li><p>In 19.9 Examples of Streamability Analysis (second example box, second numbered list, second item, first paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>Now establish that that the expression <code>@currency='USD'</code> is
                           <span style="text-decoration: underline">non-positional</span>, as
                        follows:</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>Now establish that <span style="background-color:#ff3333; text-decoration:line-through">that</span> the expression <code>@currency='USD'</code> is
					<span style="text-decoration: underline">non-positional</span>, as
					follows:</p></div></li><li><p>In 22.2 Option Parameter Conventions (first numbered list, seventh item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>In cases where an option is list-valued, by convention the value may be supplied
                  either as a sequence or as an array. Accepting a sequence is convenient if the
                  value is generated programmatically using an XPath expression; while accepting an array 
                  allows the options to be held in an an external file in JSON format, to be read using
                  a call on the <code>fn:json-doc</code> function.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>In cases where an option is list-valued, by convention the value may be supplied
					either as a sequence or as an array. Accepting a sequence is convenient if the
					value is generated programmatically using an XPath expression; while accepting an array 
					allows the options to be held in an <span style="background-color:#ff3333; text-decoration:line-through">an</span> external file in JSON format, to be read using
					a call on the <code>fn:json-doc</code> function.</p></div></li><li><p>In 22.4 fn:xml-to-json (Error Conditions section, third paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>A dynamic error is raised [err:FO31JS0007]<sup><small>FO31</small></sup> if the value of
            <code>$input</code> includes a string labeled with <code>escaped="true"</code>, or
            a key labeled with <code>escaped-key="true"</code>, where the content of the string or key
            contains an invalid JSON escape sequence: specifically, where it contains a backslash (<code>\</code>) that is not followed by one
            of the characters <code>"</code>, <code>\</code>, <code>/</code>, <code>b</code>, <code>f</code>, <code>n</code>, 
            <code>r</code>, <code>t</code>, or <code>u</code>, or or where it contains the characters <code>\u</code>
            not followed by four hexadecimal digits (that is <code>[0-9A-Fa-f]{4}</code>).
         </p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>A dynamic error is raised [ERROR 0007 NOT FOUND] if the value of
					<code>$input</code> includes a string labeled with <code>escaped="true"</code>, or
					a key labeled with <code>escaped-key="true"</code>, where the content of the string or key
					contains an invalid JSON escape sequence: specifically, where it contains a backslash (<code>\</code>) that is not followed by one
					of the characters <code>"</code>, <code>\</code>, <code>/</code>, <code>b</code>, <code>f</code>, <code>n</code>, 
					<code>r</code>, <code>t</code>, or <code>u</code>, or <span style="background-color:#ff3333; text-decoration:line-through">or </span>where it contains the characters <code>\u</code>
					not followed by four hexadecimal digits (that is <code>[0-9A-Fa-f]{4}</code>).
				</p></div></li><li><p>In K Changes since the Candidate Recommendation of 19 November 2015 (Non-Normative) (first numbered list, eighty sixth item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p><a href="bug29978"></a>: Rules relating the the permitted children of <code>xsl:stylesheet</code> apply
                  also to <code>xsl:package</code>. (*)</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p><a href="bug29978"></a>: Rules relating <span style="background-color:#99ff99">to</span> the permitted children of <code>xsl:stylesheet</code> apply
					also to <code>xsl:package</code>. (*)</p></div></li><li><p>In 19.8.4 Classifying Instructions (first paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>This section describes how <span style="text-decoration: underline">instructions</span>
                  are classified with respect to their streamability. The criteria are given first
                  for <span style="text-decoration: underline">literal result elements</span> and
                     <span style="text-decoration: underline">extension instructions</span>,, then
                  for each XSLT instruction, listed alphabetically.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>This section describes how <span style="text-decoration: underline">instructions</span>
					are classified with respect to their streamability. The criteria are given first
					for <span style="text-decoration: underline">literal result elements</span> and
					<span style="text-decoration: underline">extension instructions</span>,<span style="background-color:#ff3333; text-decoration:line-through">,</span> then
					for each XSLT instruction, listed alphabetically.</p></div></li><li><p>In 19.8.8.5 Streamability of instance of Expressions (first note, second paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>An <code>ItemType</code> of the form <code>document-node(element(X))</code>
                        is a exception to this rule because it matches a document node only if it
                        has exactly one element node child, and this cannot be determined without
                        consuming the document. </p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>An <code>ItemType</code> of the form <code>document-node(element(X))</code>
					is <span style="background-color:#99ff99">an</span> exception to this rule because it matches a document node only if it
					has exactly one element node child, and this cannot be determined without
					consuming the document. </p></div></li><li><p>In 18.1 The xsl:source-document Instruction (first numbered list, first item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The source document is read from the supplied URI and parsed to form an
                     tree of nodes in the XDM data model.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The source document is read from the supplied URI and parsed to form <span style="background-color:#99ff99">a</span>
					tree of nodes in the XDM data model.</p></div></li><li><p>In 18.2.2 Applicability of Accumulators (third paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The value of the <span><code>use-accumulators</code></span> attribute of
               <code>xsl:source-document</code>, <code>xsl:merge-source</code>,
                  or <span><code>xsl:mode</code></span> must either a
                  whitespace-separated list of <span style="text-decoration: underline">EQNames</span>, or the
                  special token <code>#all</code>. The list may be empty, and the default value is
                  an empty list. Every <code>EQName</code> in the list must be the name of an
                  accumulator, visible in the containing package, and declared with
                     <code>streamable="yes"</code>. The value <code>#all</code> indicates that all
                  accumulators that are visible in the containing package are applicable (except
                  that for a streamable input document, an accumulator is not applicable unless
                  it specifies <code>streamable="yes"</code>).</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The value of the <span style="background-color:#99ff99"><code>use-accumulators</code></span> attribute of
					<code>xsl:source-document</code>, <code>xsl:merge-source</code>,
					or <span style="background-color:#99ff99"><code>xsl:mode</code></span> must 
					either <span style="background-color:#99ff99">be</span> a
					whitespace-separated list of <span style="text-decoration: underline">EQNames</span>, or the
					special token <code>#all</code>. The list may be empty, and the default value is
					an empty list. Every <code>EQName</code> in the list must be the name of an
					accumulator, visible in the containing package, and declared with
					<code>streamable="yes"</code>. The value <code>#all</code> indicates that all
					accumulators that are visible in the containing package are applicable (except
					that for a streamable input document, an accumulator is not applicable unless
					it specifies <code>streamable="yes"</code>).</p></div></li><li><p>In 19.8.4.25 Streamability of (first numbered list, second item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>Otherwise, the <code>xsl:merge</code> instruction <span style="text-decoration: underline">roaming</span> and <span style="text-decoration: underline">free-ranging</span>.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>Otherwise, the <code>xsl:merge</code> instruction <span style="background-color:#99ff99">is</span> <span style="text-decoration: underline">roaming</span> and <span style="text-decoration: underline">free-ranging</span>.</p></div></li><li><p>The schema for XSLT 3.0 (in Appendix H.1) contains two references to XSLT 2.1 that should be to XSLT 3.0.</p></li></ol><h2><a id="E11" name="E11">XT30.E11 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30125">Bug 30125</a></i></p><h3>Description</h3><p>The (non-normative) Relax-NG Schema for XSLT 3.0 stylesheets permits the attribute <code>xsl:merge-source/@for-each-stream</code>.</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Reviewed</p><h3>Change</h3><p>Apply the following changes to the Relax-NG schema for XSLT 3.0 stylesheets in Appendix H.2.</p><olist><li><p>In the declaration of the <code>xsl:merge-source</code> element, delete
				the attributes <code>for-each-stream</code> and <code>_for-each-stream</code>.</p></li></olist><p>The corrected Relax-NG schema is available at <a href="schema-for-xslt30.rnc">schema-for-xslt30.rnc</a></p><h2><a id="E10" name="E10">XT30.E10 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30141">Bug 30141</a></i></p><h3>Description</h3><p>There are a number of errors in the (non-normative) XSD Schema for XSLT 3.0 stylesheets.</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Reviewed</p><p><b>29 Oct 2017: </b>Amended</p><h3>Change</h3><p>Apply the following changes to the schema for XSLT 3.0 stylesheets in Appendix H.1.</p><olist><li><p>In annotations, change all references to XPath version numbers from "2.0" or "31" to "3.1".</p></li><li><p>In the element declaration for <code>xsl:accept</code> and <code>xsl:expose</code>, the type of the <code>@names</code>
				attribute is given as <code>xsl:EQNames</code>. However, this type does not allow function references in the form <code>f:func#2</code>. 
				The attribute should instead have type <code>xsl:component-tests</code>.</p></li><li><p>In the element declaration for <code>xsl:function</code>, the attribute declaration <code>_identity-sensitive</code>
				should be named <code>_new-each-time</code>.</p></li><li><p>In the element declaration for <code>xsl:function</code>, remove the assertion that requires the element to have
				no <code>required</code> or <code>_required</code> attribute, and replace it with the assertion 
					<code>every $e in xsl:param/@required satisfies normalize-space($e) = ('yes', 'true', '1')"&gt;</code>
				which asserts that any <code>required</code> attribute that is present must have the effective value "yes".</p></li><li><p>In the element declaration for <code>xsl:mode</code>, there should be an attribute declaration with <code>name="_use-accumulators"
				type="xs:string"</code>.</p></li><li><p>In the simpleType declaration for <code>nametest</code>:</p>
					<ol><li>correct the description to indicate that it represents a single
							<code>NameTest</code> rather than a list</li><li>in the patterns, replace <code>\i</code> by <code>[\i-[:]]</code> and 
							<code>\c</code> by <code>[\c-[:]]</code></li><li>add a third permitted pattern, namely
							<code>"Q\{[^}]*\}\*</code></li></ol>
				</li><li><p>In the simpleType declaration for <code>nametests</code>, change the <code>itemType</code> of the list type 
					from <code>nametest</code> to <code>xsl:nametest</code>.</p></li><li><p>In the simpleType declaration for <code>method</code>, add to the enumeration the permitted values <code>json</code>
				and <code>adaptive</code>.</p></li></olist><p>The corrected XSD schema can be found at <a href="schema-for-xslt30.xsd">schema-for-xslt30.xsd</a></p><h2><a id="E9" name="E9">XT30.E9 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30130">Bug 30130</a></i></p><h3>Description</h3><p>The reasoning explaining an example of streamability uses obsolete concepts. The example is correct,
			but the explanation is flawed.</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Accepted</p><h3>Change</h3><p>In 18.1.2 Examples of xsl:source-document (first example box, second numbered list, fourth item):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The argument to <code>max</code> is a <code>RelativePathExpr</code> whose
                           two operands are the <code>RelativePathExpr</code>
                           <code>transactions/transaction</code> and the <code>AxisStep</code>
                           <code>@value</code>. The <span>left-hand</span> operand <code>transactions/transaction</code> has
                              <span><span style="text-decoration: underline">striding</span>
                              <span style="text-decoration: underline">posture</span></span>. The <span>right-hand</span> operand <code>@value</code>, given
                           that it appears in a node value context, is <span style="text-decoration: underline">motionless</span>. The <code>RelativePathExpr</code> argument to <code>max</code> is
                           therefore consuming.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The argument to <code>max</code> is a <code>RelativePathExpr</code> whose
					two operands are the <code>RelativePathExpr</code>
					<code>transactions/transaction</code> and the <code>AxisStep</code>
					<code>@value</code>. The left-hand operand <code>transactions/transaction</code> has
					<span style="text-decoration: underline">striding</span>
					<span style="text-decoration: underline">posture</span>. The right-hand operand <code>@value</code>, 
					<span style="background-color:#99ff99">given that the context posture is striding, </span>
					is <span style="text-decoration: underline">motionless</span>. The <code>RelativePathExpr</code> argument to <code>max</code> is
					therefore consuming.</p></div><h2><a id="E8" name="E8">XT30.E8 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30181">Bug 30181</a></i></p><h3>Description</h3><p>The rule stating that the initial named template must have public visibility could be misinterpreted. It would be useful to add a note
			pointing out that this is the default in the case where the top-level package is rooted at an <code>xsl:stylesheet</code>
			or <code>xsl:transform</code> element.</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Reviewed</p><p><b>29 Oct 2017: </b>Amended</p><p><b>13 Feb 2019: </b>Amended</p><h3>Change</h3><p>In 2.3.4 Call-Template Invocation (fourth paragraph):</p><p><i>Insert after the text:</i></p><div style="border: medium double rgb(255,255,0)">
                  <p><b>err:XTDE0040</b></p><p>It is a <span style="text-decoration: underline"><span class="diff-del">non-recoverable</span> dynamic error</span> if the invocation of
                        the <span style="text-decoration: underline">stylesheet</span> specifies a template
                        name that does not match the <span style="text-decoration: underline">expanded
                           QName</span> of a named template defined in the <span style="text-decoration: underline">stylesheet</span>, <span>whose
                           visibility is <code>public</code> or <code>final</code></span>.</p>
               </div><p><i>The following:</i></p><div style="border: medium double rgb(0,255,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>When the top-level package is rooted at an <code>xsl:stylesheet</code>
				or <code>xsl:transform</code> element, named templates having no explicit 
					<code>visibility</code> attribute are automatically exposed as public components.
				(This is a consequence of the transformation applied to a package written using
				"simplified syntax", described in <span style="text-decoration: underline">3.5 Packages</span>.)</p></div></div><h2><a id="E7" name="E7">XT30.E7 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30179">Bug 30179</a></i></p><h3>Description</h3><p>The rule that disallows reference to the global context item from within a library package uses
				unclear language.</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Reviewed</p><p><b>29 Oct 2017: </b>Amended</p><h3>Changes</h3><ol><li><p>In 5.3.3.1 Maintaining Position: the Focus (fourth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p><span>The context item for evaluating global
                        variables in the <span style="text-decoration: underline">top-level package</span> is set to the <span><span style="text-decoration: underline">global context item</span></span>
                        supplied when the transformation is invoked (see <span style="text-decoration: underline">2.3 Initiating a Transformation</span>).</span>
                     <span>In <span style="text-decoration: underline">library
                           packages</span>, the context item for evaluating global variables is
                           <span style="text-decoration: underline">absent</span></span>.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The context item for evaluating global
					variables <span style="background-color:#99ff99">declared</span> in the <span style="text-decoration: underline">top-level package</span> is set to the <span style="text-decoration: underline">global context item</span>
					supplied when the transformation is invoked (see <span style="text-decoration: underline">2.3 Initiating a Transformation</span>). <span style="background-color:#99ff99">For global variables declared in a
					<span style="text-decoration: underline">library
						package</span>, the context item is <span style="text-decoration: underline">absent</span></span>.</p></div></li><li><p>In 2.3.2 Priming a Stylesheet (first bulleted list, second item, first paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>
                        <span class="termdef"><a id="dt-global-context-item"></a>[Definition]  <span>An item that acts as the <b>global
                                 context item</b> for the transformation.</span> This item acts
                           as the <span style="text-decoration: underline">context item</span> when evaluating
                           <span> the
                                 <code>select</code> expression or <span style="text-decoration: underline">sequence constructor</span> of a
                                 <span style="text-decoration: underline">global variable</span> declaration</span>
                           <span>within the <span style="text-decoration: underline">top-level package</span></span>, as described in <span style="text-decoration: underline">5.3.3.1 Maintaining Position: the Focus</span>. The global context item may also be available in a <span style="text-decoration: underline">named template</span>
                        when the stylesheet is invoked as described in <span style="text-decoration: underline">2.3.4 Call-Template Invocation</span></span>.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>
					<span class="termdef"><a id="dt-global-context-item"></a>[Definition]  An item that acts as the <b>global
							context item</b> for the transformation. This item acts
						as the <span style="text-decoration: underline">context item</span> when evaluating
						the <code>select</code> expression or <span style="text-decoration: underline">sequence constructor</span> of a
							<span style="text-decoration: underline">global variable</span> 
						<span style="background-color:#99ff99">whose declaration is</span> within the <span style="text-decoration: underline">top-level package</span>, as described in <span style="text-decoration: underline">5.3.3.1 Maintaining Position: the Focus</span>. The global context item may also be available in a <span style="text-decoration: underline">named template</span>
						when the stylesheet is invoked as described in <span style="text-decoration: underline">2.3.4 Call-Template Invocation</span></span>.</p></div></li><li><p>In 3.5.6 Declaring the Global Context Item (thirteenth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>A <span style="text-decoration: underline">type error</span> is signaled if there
                  is a <span style="text-decoration: underline">package</span> with an <code>xsl:global-context-item</code>
                  declaration specifying a required type that does not match the supplied <span style="text-decoration: underline">global context item</span>. The error code is the same as for
                     <code>xsl:param</code>: [err:XTTE0590].</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>A <span style="text-decoration: underline">type error</span> is signaled 
					<span style="background-color:#99ff99">if the <span style="text-decoration: underline">top-level package</span>
						contains an</span> <code>xsl:global-context-item</code>
					declaration specifying a required type that does not match the supplied <span style="text-decoration: underline">global context item</span>. The error code is the same as for
					<code>xsl:param</code>: [err:XTTE0590].</p></div></li></ol><h2><a id="E6" name="E6">XT30.E6 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30173">Bug 30173</a></i></p><h3>Description</h3><p>No error code is prescribed for the case where <code>xsl:global-context-item</code> specifies <code>use="required"</code>, 
				and no global context item is supplied.</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Accepted</p><h3>Change</h3><p><i>Insert at the end of section <b>3.5.6 Declaring the Global Context Item</b></i></p><p><i>The following:</i></p><div style="border: medium double rgb(0,255,0)"><p><b>err:XTDE3086</b></p>
					<p>It is a <span style="text-decoration: underline">dynamic error</span> if an <code>xsl:global-context-item</code> 
						specifies <code>use="required"</code>, and no global context item is supplied.</p>
				</div><h2><a id="E5" name="E5">XT30.E5 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30171">Bug 30171</a></i></p><h3>Description</h3><p>The specification is not unambiguously clear that a global variable cannot reference 
				the imported variable that it is overriding.</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Accepted</p><h3>Changes</h3><ol><li><p>In 9.5 Global Variables and Parameters (second paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>
               <span class="termdef"><a id="dt-global-variable"></a>[Definition]  A <span style="text-decoration: underline">top-level</span> <span style="text-decoration: underline">variable-binding element</span> declares a
                     <b>global variable</b> that is visible everywhere (except <span>within its own declaration, and</span> where it is <span style="text-decoration: underline">shadowed</span> by another binding).</span>
            </p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>
					<span class="termdef"><a id="dt-global-variable"></a>[Definition]  A <span style="text-decoration: underline">top-level</span> <span style="text-decoration: underline">variable-binding element</span> declares a
						<b>global variable</b> that is visible everywhere 
						<span style="background-color:#99ff99">except (a) within the <code>xsl:variable</code> or <code>xsl:param</code> element itself, 
						(b) within any other global variable declaration that binds a variable with the same name, and 
						(c) within any region where it is <span style="text-decoration: underline">shadowed</span> by another variable binding.</span></span>
				</p></div></li><li><p>In 9.9 Scope of Variables (sixth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>
               <span class="termdef"><a id="dt-shadows"></a>[Definition]  A binding <b>shadows</b> another
                  binding if the binding occurs at a point where the other binding is visible, and
                  the bindings have the same name.</span> It is not an error if a binding
               established by a local <code>xsl:variable</code> or <code>xsl:param</code>
               <span style="text-decoration: underline">shadows</span> a global binding. In this case, the
               global binding will not be visible in the region of the <span style="text-decoration: underline">stylesheet</span> where it is shadowed by the other binding.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>
					<span class="termdef"><a id="dt-shadows"></a>[Definition]  Within a region of the stylesheet where a 
						binding <var>B<sub>1</sub></var> is visible, <var>B<sub>1</sub></var> shadows another binding <var>B<sub>2</sub></var> 
						having the same name as <var>B<sub>1</sub></var> if <var>B<sub>1</sub></var> occurs at a point where <var>B<sub>2</sub></var> is visible.</span>
				</p></div></li></ol><h2><a id="E4" name="E4">XT30.E4 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30142">Bug 30142</a></i></p><h3>Description</h3><p>A non-normative note explaining the consequences of error XTSE3080 is inaccurate.</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Accepted</p><h3>Change</h3><p>In 3.5.3.5 Binding References to Components (first note):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>This means that abstract components must either be overridden in a using
                        package by a component that supplies a real implementation, or they
                        must be accepted with <code>visibility="hidden"</code> (see <span style="text-decoration: underline">3.5.3.2 Accepting Components</span>), which has the effect that any invocation
                        of the component raises a <span style="text-decoration: underline">dynamic error</span>.</p></div></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>Abstract components in a used package by default become hidden in the using
					package, which means that a reference to the component in the top-level package 
					will fail to resolve (resulting in a different static error). This particular error occurs
					only if the abstract component is declared within the top-level package.</p></div></div><h2><a id="E3" name="E3">XT30.E3 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30130">Bug 30130</a></i></p><h3>Description</h3><p>Minor spelling and grammatical errors in the specification of <code>xsl:merge</code>.</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Accepted</p><p><b>13 Feb 2019: </b>Amended</p><h3>Change</h3><p>In 15.4 Streamable Merging (fifth paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>Note that the merge key for the second merge source includes data from a child
               element of the selected element and also from an attribute of the parent element.
               This works because of the merge key is evaluated on the result of implicitly applying
               the <code>snapshot</code> function.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>Note that the merge key for the second merge source includes data from a child
					element of the selected element and also from an attribute of the parent element.
					This works because <span style="background-color:#ff3333; text-decoration:line-through">of</span> the merge key is evaluated on the result of implicitly applying
					the <code>snapshot</code> function.</p></div><h2><a id="E2" name="E2">XT30.E2 - substantive</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30129">Bug 30129</a></i></p><h3>Description</h3><p>In the <code>map:merge</code> function, one of the values for the <code>duplicates</code> option is given as <code>unspecified</code>,
				but the corresponding option in <em>Functions and Operators</em> is given as <code>use-any</code>.</p><p>The correct value is <code>use-any</code> but to avoid interoperability problems, processors <span class="verb">should</span>
			accept <code>unspecified</code> as a synonym.</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Reviewed</p><p><b>29 Oct 2017: </b>Amended</p><p><b>29 Oct 2017: </b>Accepted</p><h3>Changes</h3><ol><li><p>In 21.2.2 map:merge (Rules section, second numbered list, third item, first table, sixth row, first column):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><code>unspecified</code></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><code>use-any</code></div></li><li><p>In 21.2.2 map:merge (Rules section, fourth paragraph):</p><p><i>Insert before the text:</i></p><div style="border: medium double rgb(255,255,0)"><p>The result of the function call <code>map:merge($MAPS, $OPTIONS)</code>
            is defined to be consistent with the result of the expression:</p></div><p><i>The following:</i></p><div style="border: medium double rgb(0,255,0)"><div class="note"><p class="prefix"><b>Note:</b></p><p>In the original publication of XSLT 3.0, the <code>use-any</code> option was incorrectly
						given the keyword <code>unspecified</code>, which was inconsistent with the Functions and Operators 3.1 specification. 
						To avoid interoperability problems, implementations <span class="verb">should</span>
						accept the keywords <code>unspecified</code> and <code>use-any</code> as synonyms, but
						the keyword <code>use-any</code> is preferred.</p></div></div></li></ol><h2><a id="E1" name="E1">XT30.E1 - editorial</a></h2><p><i>See <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=30123">Bug 30123</a></i></p><h3>Description</h3><p>There are several examples of streamable stylesheet functions where the variable name used in the example (<code>$input</code>) does not
		  	match the name used in the accompanying prose (<code>$nodes</code>).</p><h3>History</h3><p><b>13 Oct 2017: </b>Proposed</p><p><b>19 Oct 2017: </b>Accepted</p><h3>Changes</h3><ol><li><p>In 19.8.5.2 Streamability Category: absorbing (first example box, second paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The effect of the rules is that a call to this function is <span style="text-decoration: underline">guaranteed-streamable</span> provided that the sequence supplied as
                        the value of the <code>$nodes</code> argument is <span style="text-decoration: underline">motionless</span> or <span style="text-decoration: underline">consuming</span>, and is either
                           <span style="text-decoration: underline">grounded</span> or <span style="text-decoration: underline">striding</span>.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The effect of the rules is that a call to this function is <span style="text-decoration: underline">guaranteed-streamable</span> provided that the sequence supplied as
				the value of the <code>$input</code> argument is <span style="text-decoration: underline">motionless</span> or <span style="text-decoration: underline">consuming</span>, and is either
				<span style="text-decoration: underline">grounded</span> or <span style="text-decoration: underline">striding</span>.</p></div></li><li><p>In 19.8.5.3 Streamability Category: inspection (first example box, second paragraph):</p><p><i>Replace the text:</i></p><div style="border: medium double rgb(255,0,0)"><p>The effect of the rules is that a call to this function is guaranteed
                        streamable provided that the expression supplied as the value of the
                           <code>$nodes</code> argument is <span style="text-decoration: underline">motionless</span> or
                           <span style="text-decoration: underline">consuming</span>.</p></div><p><i>With:</i></p><div style="border: medium double rgb(0,255,0)"><p>The effect of the rules is that a call to this function is guaranteed
  				streamable provided that the expression supplied as the value of the
  				<code>$input</code> argument is <span style="text-decoration: underline">motionless</span> or
  				<span style="text-decoration: underline">consuming</span>.</p></div></li></ol><hr><h2><a id="index-by-section" name="index-by-section">Index by affected section</a></h2><p>2.3.2 Priming a Stylesheet</p><blockquote><a href="#E7">XT30.E7</a> </blockquote><p>2.3.4 Call-Template Invocation</p><blockquote><a href="#E8">XT30.E8</a> </blockquote><p>2.3.6.1 Result Tree Construction</p><blockquote><a href="#E14">XT30.E14</a> </blockquote><p>3.5.3.1 Visibility of Components</p><blockquote><a href="#E36">XT30.E36</a> </blockquote><p>3.5.3.3 Overriding Components from a Used Package</p><blockquote><a href="#E32">XT30.E32</a> <a href="#E35">XT30.E35</a> </blockquote><p>3.5.3.5 Binding References to Components</p><blockquote><a href="#E4">XT30.E4</a> </blockquote><p>3.5.6 Declaring the Global Context Item</p><blockquote><a href="#E6">XT30.E6</a> <a href="#E7">XT30.E7</a> </blockquote><p>4.4.1 Stripping Type Annotations from a Source Tree</p><blockquote><a href="#E43">XT30.E43</a> </blockquote><p>4.6.2 Other Data Structures</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>5.2 Expressions</p><blockquote><a href="#E21">XT30.E21</a> </blockquote><p>5.3 The Static and Dynamic Context</p><blockquote><a href="#E24">XT30.E24</a> </blockquote><p>5.3.3.1 Maintaining Position: the Focus</p><blockquote><a href="#E7">XT30.E7</a> </blockquote><p>5.5.2 Syntax of Patterns</p><blockquote><a href="#E18">XT30.E18</a> </blockquote><p>5.7.1 Constructing Complex Content</p><blockquote><a href="#E17">XT30.E17</a> </blockquote><p>6.5 Default Priority for Template Rules</p><blockquote><a href="#E37">XT30.E37</a> </blockquote><p>6.7.6 Built-in Templates: Fail</p><blockquote><a href="#E13">XT30.E13</a> </blockquote><p>9.2.1 The Required Type of a Parameter</p><blockquote><a href="#E22">XT30.E22</a> </blockquote><p>9.5 Global Variables and Parameters</p><blockquote><a href="#E5">XT30.E5</a> </blockquote><p>9.6 Static Variables and Parameters</p><blockquote><a href="#E34">XT30.E34</a> </blockquote><p>9.9 Scope of Variables</p><blockquote><a href="#E5">XT30.E5</a> </blockquote><p>10.1.3 Tunnel Parameters</p><blockquote><a href="#E23">XT30.E23</a> </blockquote><p>11.1.4 Namespace Aliasing</p><blockquote><a href="#E48">XT30.E48</a> </blockquote><p>11.9.2 Deep Copy</p><blockquote><a href="#E16">XT30.E16</a> </blockquote><p>13.1.3 Sorting Using Collations</p><blockquote><a href="#E45">XT30.E45</a> </blockquote><p>13.4 The Unicode Collation Algorithm</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>15.3 Selecting the Sequences to be Merged</p><blockquote><a href="#E40">XT30.E40</a> <a href="#E41">XT30.E41</a> <a href="#E44">XT30.E44</a> </blockquote><p>15.4 Streamable Merging</p><blockquote><a href="#E3">XT30.E3</a> </blockquote><p>15.5 Defining the Merge Keys</p><blockquote><a href="#E29">XT30.E29</a> <a href="#E42">XT30.E42</a> </blockquote><p>15.7 The Element</p><blockquote><a href="#E39">XT30.E39</a> </blockquote><p>18.1 The xsl:source-document Instruction</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>18.1.2 Examples of xsl:source-document</p><blockquote><a href="#E9">XT30.E9</a> </blockquote><p>18.2.2 Applicability of Accumulators</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>18.2.5 Dynamic Errors in Accumulators</p><blockquote><a href="#E38">XT30.E38</a> </blockquote><p>18.2.8 Importing of Accumulators</p><blockquote><a href="#E47">XT30.E47</a> </blockquote><p>19.4 Determining the Posture of a Construct</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>19.8.4 Classifying Instructions</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>19.8.4.25 Streamability of</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>19.8.5.2 Streamability Category: absorbing</p><blockquote><a href="#E1">XT30.E1</a> </blockquote><p>19.8.5.3 Streamability Category: inspection</p><blockquote><a href="#E1">XT30.E1</a> </blockquote><p>19.8.5.7 Streamability Category: ascent</p><blockquote><a href="#E31">XT30.E31</a> </blockquote><p>19.8.8.4 Streamability of union, intersect, and except Expressions</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>19.8.8.5 Streamability of instance of Expressions</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>19.9 Examples of Streamability Analysis</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>21.2 Functions that Operate on Maps</p><blockquote><a href="#E27">XT30.E27</a> </blockquote><p>21.2.2 map:merge</p><blockquote><a href="#E2">XT30.E2</a> </blockquote><p>22.2 Option Parameter Conventions</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>22.4 fn:xml-to-json</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><p>25.1 Creating Secondary Results</p><blockquote><a href="#E14">XT30.E14</a> </blockquote><p>25.4 Validation</p><blockquote><a href="#E15">XT30.E15</a> </blockquote><p>25.4.1.2 Validation using the [xsl:]type Attribute</p><blockquote><a href="#E20">XT30.E20</a> </blockquote><p>26 Serialization</p><blockquote><a href="#E14">XT30.E14</a> <a href="#E26">XT30.E26</a> </blockquote><p>27.3 Serialization Feature</p><blockquote><a href="#E14">XT30.E14</a> </blockquote><p>K Changes since the Candidate Recommendation of 19 November 2015 (Non-Normative)</p><blockquote><a href="#E12">XT30.E12</a> </blockquote><h2><a id="index-by-bugzilla" name="index-by-bugzilla">Index by Bugzilla entry</a></h2><p>Bug #30123: <a href="#E1">XT30.E1</a> </p><p>Bug #30125: <a href="#E11">XT30.E11</a> </p><p>Bug #30129: <a href="#E2">XT30.E2</a> </p><p>Bug #30130: <a href="#E3">XT30.E3</a> <a href="#E9">XT30.E9</a> <a href="#E42">XT30.E42</a> </p><p>Bug #30141: <a href="#E10">XT30.E10</a> </p><p>Bug #30142: <a href="#E4">XT30.E4</a> </p><p>Bug #30171: <a href="#E5">XT30.E5</a> </p><p>Bug #30173: <a href="#E6">XT30.E6</a> </p><p>Bug #30179: <a href="#E7">XT30.E7</a> </p><p>Bug #30181: <a href="#E8">XT30.E8</a> </p><p>Bug #30191: <a href="#E12">XT30.E12</a> </p><p>Bug #30192: <a href="#E13">XT30.E13</a> </p><p>Bug #30208: <a href="#E14">XT30.E14</a> </p><p>Bug #30211: <a href="#E15">XT30.E15</a> </p><p>Bug #30222: <a href="#E16">XT30.E16</a> </p><p>Bug #30223: <a href="#E17">XT30.E17</a> </p><p>Bug #30229: <a href="#E18">XT30.E18</a> </p><p>Bug #30234: <a href="#E20">XT30.E20</a> </p><p>Bug #30236: <a href="#E21">XT30.E21</a> </p><p>Bug #30238: <a href="#E22">XT30.E22</a> </p><p>Bug #30240: <a href="#E23">XT30.E23</a> </p><p>Bug #30241: <a href="#E24">XT30.E24</a> </p><p>Bug #30245: <a href="#E26">XT30.E26</a> </p><p>Bug #30253: <a href="#E27">XT30.E27</a> </p><p>Bug #30265: <a href="#E40">XT30.E40</a> </p><p>Bug #30267: <a href="#E29">XT30.E29</a> </p><p>Bug #30288: <a href="#E30">XT30.E30</a> </p><p>Bug #30289: <a href="#E31">XT30.E31</a> </p><p>Bug #30297: <a href="#E32">XT30.E32</a> </p><p>Bug #30301: <a href="#E34">XT30.E34</a> </p><p>Bug #30313: <a href="#E35">XT30.E35</a> </p><p>Bug #30323: <a href="#E36">XT30.E36</a> </p><p>Bug #30375: <a href="#E37">XT30.E37</a> </p><p>Bug #30376: <a href="#E38">XT30.E38</a> </p><p>Bug #30377: <a href="#E39">XT30.E39</a> </p><p>Bug #30378: <a href="#E40">XT30.E40</a> </p><p>Bug #30380: <a href="#E41">XT30.E41</a> </p><p>Bug #30382: <a href="#E42">XT30.E42</a> </p><p>Bug #30383: <a href="#E43">XT30.E43</a> </p><p>Bug #30384: <a href="#E44">XT30.E44</a> </p><p>Bug #30386: <a href="#E45">XT30.E45</a> </p><p>Bug #30394: <a href="#E47">XT30.E47</a> </p><p>Bug #30397: <a href="#E48">XT30.E48</a> </p><h2><a name="index-by-feature">Index by
	        feature</a></h2><p>constructing complex content: <a href="#E16">XT30.E16</a> <a href="#E17">XT30.E17</a> </p><p>function conversion rules: <a href="#E21">XT30.E21</a> </p><p>pattern syntax: <a href="#E18">XT30.E18</a> </p><p>schema-awareness: <a href="#E44">XT30.E44</a> </p><p>streaming: <a href="#E1">XT30.E1</a> <a href="#E4">XT30.E4</a> <a href="#E9">XT30.E9</a> <a href="#E31">XT30.E31</a> <a href="#E32">XT30.E32</a> <a href="#E44">XT30.E44</a> </p><p>XPath 3.1: <a href="#E27">XT30.E27</a> </p><h2><a name="index-by-element">Index by
	        element</a></h2><p>xsl:accept: <a href="#E10">XT30.E10</a> <a href="#E36">XT30.E36</a> </p><p>xsl:accumulator: <a href="#E38">XT30.E38</a> <a href="#E47">XT30.E47</a> </p><p>xsl:accumulator-rule: <a href="#E38">XT30.E38</a> </p><p>xsl:context-item: <a href="#E22">XT30.E22</a> </p><p>xsl:copy-of: <a href="#E16">XT30.E16</a> </p><p>xsl:expose: <a href="#E10">XT30.E10</a> <a href="#E36">XT30.E36</a> </p><p>xsl:function: <a href="#E1">XT30.E1</a> <a href="#E10">XT30.E10</a> <a href="#E31">XT30.E31</a> <a href="#E32">XT30.E32</a> </p><p>xsl:global-context-item: <a href="#E6">XT30.E6</a> <a href="#E7">XT30.E7</a> <a href="#E22">XT30.E22</a> </p><p>xsl:merge: <a href="#E3">XT30.E3</a> <a href="#E9">XT30.E9</a> <a href="#E29">XT30.E29</a> <a href="#E39">XT30.E39</a> <a href="#E40">XT30.E40</a> <a href="#E41">XT30.E41</a> <a href="#E44">XT30.E44</a> </p><p>xsl:merge-key: <a href="#E29">XT30.E29</a> <a href="#E39">XT30.E39</a> <a href="#E42">XT30.E42</a> </p><p>xsl:merge-source: <a href="#E11">XT30.E11</a> <a href="#E29">XT30.E29</a> <a href="#E41">XT30.E41</a> </p><p>xsl:mode: <a href="#E10">XT30.E10</a> </p><p>xsl:namespace-alias: <a href="#E48">XT30.E48</a> </p><p>xsl:output: <a href="#E14">XT30.E14</a> <a href="#E26">XT30.E26</a> </p><p>xsl:override: <a href="#E32">XT30.E32</a> <a href="#E35">XT30.E35</a> </p><p>xsl:package: <a href="#E43">XT30.E43</a> </p><p>xsl:param: <a href="#E23">XT30.E23</a> <a href="#E34">XT30.E34</a> <a href="#E35">XT30.E35</a> </p><p>xsl:result-document: <a href="#E14">XT30.E14</a> <a href="#E15">XT30.E15</a> <a href="#E26">XT30.E26</a> </p><p>xsl:sort: <a href="#E45">XT30.E45</a> </p><p>xsl:stylesheet: <a href="#E43">XT30.E43</a> </p><p>xsl:template: <a href="#E8">XT30.E8</a> <a href="#E37">XT30.E37</a> </p><p>xsl:transform: <a href="#E43">XT30.E43</a> </p><p>xsl:variable: <a href="#E5">XT30.E5</a> <a href="#E34">XT30.E34</a> <a href="#E35">XT30.E35</a> </p><h2><a name="index-by-function">Index by
	        function</a></h2><p>function-available: <a href="#E24">XT30.E24</a> </p><p>function-lookup: <a href="#E24">XT30.E24</a> </p><p>map:find: <a href="#E27">XT30.E27</a> </p><p>map:merge: <a href="#E2">XT30.E2</a> </p><p>xml-to-json: <a href="#E30">XT30.E30</a> </p><h2><a name="index-by-error">Index by
	        error</a></h2><p>XTDE0040: <a href="#E8">XT30.E8</a> </p><p>XTDE0450: <a href="#E17">XT30.E17</a> </p><p>XTDE0555: <a href="#E13">XT30.E13</a> </p><p>XTDE3086: <a href="#E6">XT30.E6</a> </p><p>XTSE1520: <a href="#E20">XT30.E20</a> </p><p>XTSE3080: <a href="#E4">XT30.E4</a> </p><p>XTSE3195: <a href="#E40">XT30.E40</a> </p><p>XTSE3350: <a href="#E47">XT30.E47</a> </p><p>XTTE0590: <a href="#E7">XT30.E7</a> <a href="#E22">XT30.E22</a> </p><h2><a name="index-by-attribute">Index by
	        attribute</a></h2><p>[xsl:]default-validation: <a href="#E15">XT30.E15</a> </p><p>[xsl:]type: <a href="#E20">XT30.E20</a> </p><p>declared-modes: <a href="#E30">XT30.E30</a> </p><p>input-type-annotations: <a href="#E43">XT30.E43</a> </p><p>match: <a href="#E37">XT30.E37</a> </p><p>media-type: <a href="#E26">XT30.E26</a> </p><p>sort-before-merge: <a href="#E41">XT30.E41</a> </p><p>static: <a href="#E34">XT30.E34</a> <a href="#E35">XT30.E35</a> </p><p>streamability: <a href="#E31">XT30.E31</a> <a href="#E32">XT30.E32</a> </p><p>tunnel: <a href="#E23">XT30.E23</a> </p><p>validation: <a href="#E44">XT30.E44</a> </p><p>visibility: <a href="#E47">XT30.E47</a> </p><p>xml:base: <a href="#E16">XT30.E16</a> </p></body></html>